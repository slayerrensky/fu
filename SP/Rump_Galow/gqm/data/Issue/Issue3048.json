{"url":"https://api.github.com/repos/owncloud/core/issues/3048","labels_url":"https://api.github.com/repos/owncloud/core/issues/3048/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/3048/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/3048/events","html_url":"https://github.com/owncloud/core/issues/3048","id":13438976,"number":3048,"title":"bad redirection when using oc via ssl-proxy and enforcing https and trying non-encrypted connection","user":{"login":"farson2003","id":3358665,"avatar_url":"https://gravatar.com/avatar/18517a90faaa3c9fc3d5d00faa5aa618?d=https%3a%2f%2fidenticons.github.com%2ffebf04b52b959fb06ae824f90a5ad121.png&r=x","gravatar_id":"18517a90faaa3c9fc3d5d00faa5aa618","url":"https://api.github.com/users/farson2003","html_url":"https://github.com/farson2003","followers_url":"https://api.github.com/users/farson2003/followers","following_url":"https://api.github.com/users/farson2003/following{/other_user}","gists_url":"https://api.github.com/users/farson2003/gists{/gist_id}","starred_url":"https://api.github.com/users/farson2003/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/farson2003/subscriptions","organizations_url":"https://api.github.com/users/farson2003/orgs","repos_url":"https://api.github.com/users/farson2003/repos","events_url":"https://api.github.com/users/farson2003/events{/privacy}","received_events_url":"https://api.github.com/users/farson2003/received_events","type":"user","site_admin":false},"labels":[{"url":"https://api.github.com/repos/owncloud/core/labels/bug","name":"bug","color":"fc2929"}],"state":"closed","assignee":null,"milestone":null,"comments":14,"created_at":"2013-04-20t18:08:00z","updated_at":"2013-07-13t22:26:53z","closed_at":"2013-07-13t22:26:53z","pull_request":{"html_url":null,"diff_url":null,"patch_url":null},"body":"when using ssl proxy and enforcing https, correct redirection from http://subdomain.domain.com/oc/oc/index.php should be to: https://ssl-account.com/subdomain.domain.com/oc/oc/index.php \r\npresently it leads to https://subdomain.domain.com/oc/oc/index.php, which does not work.\r\n\r\n(of course, ssl-account.com is the proxy server in my specific case and should be replaced by a proxy server in general. the wonderful dev knows this :-)\r\n\r\nsteps to reproduce:\r\n\r\nconfigure oc for use with ssl proxy (edit config.php accordingly by adding the adjusted parameters, i.e.:\r\n'overwritehost' => 'ssl-account.com',\r\n'overwriteprotocol' => 'https',\r\n'overwritewebroot' => '/subdomain.domain.com/oc/oc',\r\n'overwritecondaddr' => '^xx\\\\.xx\\\\.xxx\\\\.xxx$',\r\n\r\nforce use of https via web interface configuration.\r\noc can then be perfectly reached via ssl proxy using:\r\nhttps://ssl-account.com/subdomain.domain.com/oc/oc/index.php \r\n\r\nhowever, when someone tries to reach oc instance unencrypted via:\r\nhttp://subdomain.domain.com/oc/oc/index.php , then the browser seems to be redirected to:\r\nhttps://subdomain.domain.com/oc/oc/index.php, which â€“of course- leads to a â€œdieser verbindung wird nicht vertrautâ€? message.\r\n\r\nsolution:\r\nwhen using ssl proxy and enforcing https, correct redirection from http://subdomain.domain.com/oc/oc/index.php should be to: https://ssl-account.com/subdomain.domain.com/oc/oc/index.php \r\n\r\n\r\n\r\nserver configuration:\r\nserver should be ubuntu, as far as i know. (allinkl hosting).\r\nphp version 5.3.18\r\nphp-cgi versionen 5.3.18 4.4.9 5.2.12\r\nmysql version 5.1.66\r\noc 5.04\r\n\r\nwonderful ssl proxy work!!!!\r\n","closed_by":{"login":"karlitschek","id":867445,"avatar_url":"https://gravatar.com/avatar/87ce2b4531ee1a0c32b50e0d8f049224?d=https%3a%2f%2fidenticons.github.com%2f06e7098636caebfc9c30c9f52eb905df.png&r=x","gravatar_id":"87ce2b4531ee1a0c32b50e0d8f049224","url":"https://api.github.com/users/karlitschek","html_url":"https://github.com/karlitschek","followers_url":"https://api.github.com/users/karlitschek/followers","following_url":"https://api.github.com/users/karlitschek/following{/other_user}","gists_url":"https://api.github.com/users/karlitschek/gists{/gist_id}","starred_url":"https://api.github.com/users/karlitschek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karlitschek/subscriptions","organizations_url":"https://api.github.com/users/karlitschek/orgs","repos_url":"https://api.github.com/users/karlitschek/repos","events_url":"https://api.github.com/users/karlitschek/events{/privacy}","received_events_url":"https://api.github.com/users/karlitschek/received_events","type":"user","site_admin":false}}