{"url":"https://api.github.com/repos/owncloud/core/issues/2385","labels_url":"https://api.github.com/repos/owncloud/core/issues/2385/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/2385/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/2385/events","html_url":"https://github.com/owncloud/core/issues/2385","id":12101187,"number":2385,"title":"oc 5.0.0 rc3 - problem with mimetype for msi","user":{"login":"kwiatek6324","id":3830227,"avatar_url":"https://gravatar.com/avatar/67b565ec132abbf700061b46d3414246?d=https%3a%2f%2fidenticons.github.com%2f91e230aef43c3e8e3717e3b64774f8c1.png&r=x","gravatar_id":"67b565ec132abbf700061b46d3414246","url":"https://api.github.com/users/kwiatek6324","html_url":"https://github.com/kwiatek6324","followers_url":"https://api.github.com/users/kwiatek6324/followers","following_url":"https://api.github.com/users/kwiatek6324/following{/other_user}","gists_url":"https://api.github.com/users/kwiatek6324/gists{/gist_id}","starred_url":"https://api.github.com/users/kwiatek6324/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kwiatek6324/subscriptions","organizations_url":"https://api.github.com/users/kwiatek6324/orgs","repos_url":"https://api.github.com/users/kwiatek6324/repos","events_url":"https://api.github.com/users/kwiatek6324/events{/privacy}","received_events_url":"https://api.github.com/users/kwiatek6324/received_events","type":"user","site_admin":false},"labels":[{"url":"https://api.github.com/repos/owncloud/core/labels/bug","name":"bug","color":"fc2929"}],"state":"closed","assignee":null,"milestone":null,"comments":5,"created_at":"2013-03-16t21:48:44z","updated_at":"2013-05-23t11:15:54z","closed_at":"2013-03-25t20:11:04z","pull_request":{"html_url":null,"diff_url":null,"patch_url":null},"body":"\r\n\r\nhi, if in my repo is .msi file there is exception for this:\r\n\r\nfatal error: uncaught exception 'databaseexception' with message 'mdb2 error: unknown error' in /home/spool/cloud/owncloud/lib/db.php:376 stack trace: #0 /home/spool/cloud/owncloud/lib/db.php(409): oc_db::prepare('select lastval(...') #1 /home/spool/cloud/owncloud/lib/files/cache/cache.php(85): oc_db::insertid('*prefix*mimetyp...') #2 /home/spool/cloud/owncloud/lib/files/cache/cache.php(243): oc\\files\\cache\\cache->getmimetypeid('') #3 /home/spool/cloud/owncloud/lib/files/cache/cache.php(199): oc\\files\\cache\\cache->buildparts(array) #4 /home/spool/cloud/owncloud/lib/files/cache/scanner.php(85): oc\\files\\cache\\cache->put('files/pobrane/o...', array) #5 /home/spool/cloud/owncloud/lib/files/cache/scanner.php(111): oc\\files\\cache\\scanner->scanfile('files/pobrane/o...', true) #6 /home/spool/cloud/owncloud/lib/files/view.php(754): oc\\files\\cache\\scanner->scan('files/pobrane', false) #7 /home/spool/cloud/owncloud/lib/files/filesystem.php(621): oc\\files\\view->getdirectorycontent('//pobrane') #8 /home/spool/cloud/owncloud/apps/file in /home/spool/cloud/owncloud/lib/db.php on line 376\r\n\r\nbelow is sql log:\r\n\r\nstatement: execute mdb2_statement_pgsql_15302e8ea67dc53822987db49043796ef717b291a2 (null)\r\ndetail: prepare: select \"id\" from \"oc_mimetypes\" where \"mimetype\" = $1\r\nlog: duration: 0.104 ms\r\nlog: statement: execute mdb2_statement_pgsql_1756866fdc274c3dc69f9fe244f808a8a76266bab0 (null)\r\ndetail: prepare: insert into \"oc_mimetypes\"(\"mimetype\") values($1)\r\nerror: null value in column \"mimetype\" violates not-null constraint\r\nstatement: execute mdb2_statement_pgsql_1756866fdc274c3dc69f9fe244f808a8a76266bab0 (null)\r\nlog: statement: execute mdb2_statement_pgsql_186c0e3a1143a249d421909b0483a347a063086e7d\r\ndetail: prepare: select lastval() as id\r\nerror: current transaction is aborted, commands ignored until end of transaction block\r\n\r\nand this is file result for this msi;\r\n\r\nfile -b --mime-type officesip-messenger-2.2.msi 2>/dev/null\r\napplication/msword\r\n\r\nfull output:\r\n\r\nofficesip-messenger-2.2.msi: composite document file v2 document, little endian, os: windows, version 6.0, create time/date: mon jun 21 08:00:00 1999, name of creating application: windows installer, security: 1, code page: 1252, template: intel;1033, number of pages: 200, revision number: {f8d45010-9940-48c2-b1ec-25618ea33c27}, title: officesip messenger, author: officesip communications, keywords: sip,communicator,messenger,chat, number of words: 2, last saved time/date: wed apr 25 22:07:59 2012, last printed: wed apr 25 22:07:59 2012\r\n\r\nthere is also info on page:\r\n\r\nfatal error: call to undefined method mdb2_error::fetchrow() in /home/spool/cloud/owncloud/lib/db.php on line 410\r\n\r\nregards\r\nak\r\n","closed_by":{"login":"karlitschek","id":867445,"avatar_url":"https://gravatar.com/avatar/87ce2b4531ee1a0c32b50e0d8f049224?d=https%3a%2f%2fidenticons.github.com%2f06e7098636caebfc9c30c9f52eb905df.png&r=x","gravatar_id":"87ce2b4531ee1a0c32b50e0d8f049224","url":"https://api.github.com/users/karlitschek","html_url":"https://github.com/karlitschek","followers_url":"https://api.github.com/users/karlitschek/followers","following_url":"https://api.github.com/users/karlitschek/following{/other_user}","gists_url":"https://api.github.com/users/karlitschek/gists{/gist_id}","starred_url":"https://api.github.com/users/karlitschek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karlitschek/subscriptions","organizations_url":"https://api.github.com/users/karlitschek/orgs","repos_url":"https://api.github.com/users/karlitschek/repos","events_url":"https://api.github.com/users/karlitschek/events{/privacy}","received_events_url":"https://api.github.com/users/karlitschek/received_events","type":"user","site_admin":false}}