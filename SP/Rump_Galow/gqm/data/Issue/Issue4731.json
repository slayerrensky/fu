{"url":"https://api.github.com/repos/owncloud/core/issues/4731","labels_url":"https://api.github.com/repos/owncloud/core/issues/4731/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/4731/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/4731/events","html_url":"https://github.com/owncloud/core/issues/4731","id":19028187,"number":4731,"title":"etag and contain of the folder doesn't refresh after replace a file","user":{"login":"purigarcia","id":4538201,"avatar_url":"https://gravatar.com/avatar/0be9d9a0cc0399f94183d85de9d2bb4a?d=https%3a%2f%2fidenticons.github.com%2f3a98944e89f0812108f0e363e300adfc.png&r=x","gravatar_id":"0be9d9a0cc0399f94183d85de9d2bb4a","url":"https://api.github.com/users/purigarcia","html_url":"https://github.com/purigarcia","followers_url":"https://api.github.com/users/purigarcia/followers","following_url":"https://api.github.com/users/purigarcia/following{/other_user}","gists_url":"https://api.github.com/users/purigarcia/gists{/gist_id}","starred_url":"https://api.github.com/users/purigarcia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/purigarcia/subscriptions","organizations_url":"https://api.github.com/users/purigarcia/orgs","repos_url":"https://api.github.com/users/purigarcia/repos","events_url":"https://api.github.com/users/purigarcia/events{/privacy}","received_events_url":"https://api.github.com/users/purigarcia/received_events","type":"user","site_admin":false},"labels":[],"state":"closed","assignee":null,"milestone":{"url":"https://api.github.com/repos/owncloud/core/milestones/3","labels_url":"https://api.github.com/repos/owncloud/core/milestones/3/labels","id":199679,"number":3,"title":"owncloud 6","description":"","creator":{"login":"lukasreschke","id":878997,"avatar_url":"https://gravatar.com/avatar/f080e75d370a4d8e550983a4898bcf3b?d=https%3a%2f%2fidenticons.github.com%2ff12e47d5bb5359a9f58e8217413be790.png&r=x","gravatar_id":"f080e75d370a4d8e550983a4898bcf3b","url":"https://api.github.com/users/lukasreschke","html_url":"https://github.com/lukasreschke","followers_url":"https://api.github.com/users/lukasreschke/followers","following_url":"https://api.github.com/users/lukasreschke/following{/other_user}","gists_url":"https://api.github.com/users/lukasreschke/gists{/gist_id}","starred_url":"https://api.github.com/users/lukasreschke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukasreschke/subscriptions","organizations_url":"https://api.github.com/users/lukasreschke/orgs","repos_url":"https://api.github.com/users/lukasreschke/repos","events_url":"https://api.github.com/users/lukasreschke/events{/privacy}","received_events_url":"https://api.github.com/users/lukasreschke/received_events","type":"user","site_admin":false},"open_issues":19,"closed_issues":645,"state":"open","created_at":"2012-10-22t21:38:51z","updated_at":"2013-12-18t11:11:18z","due_on":null},"comments":6,"created_at":"2013-09-05t08:07:11z","updated_at":"2013-11-26t09:40:40z","closed_at":"2013-11-26t09:40:40z","pull_request":{"html_url":null,"diff_url":null,"patch_url":null},"body":"### expected behaviour\r\netag and contain of the folder don't refresh through webdav protocol after replace a file\r\n\r\n### actual behaviour\r\nafter replace a file, in the server, only one file is shown, but the etag and contain of the folder should refresh through webdav protocol.\r\nas the etag doesn't refresh, on the movile you can not see the changes, two files are shown instead of one\r\n\r\n### steps to reproduce\r\n1. upload \"photo.jpg\" to the server\r\n2. upload another photo with the same name (\"photo.jpg\")\r\n3. in the folder, there are two files (\"photo.jpg\" and \"photo (2).jpg\")\r\n4. rename \"photo (2).jpg\" as \"photo.jpg\"\r\n5. a message is shown saying \"foot.jpg already exists replace cancel\"\r\n6. select to replace\r\n\r\n### server configuration\r\noperating system: macos 10.7.5\r\n\r\ndatabase:sqlite 3\r\n\r\nphp version: \r\n\r\nowncloud version: 5.0.11 rc2\r\n\r\nbrowser: chrome\r\n\r\n\r\n#### web server error log\r\nerror\r\nhook\r\nerror while running hook (\\oc\\files\\cache\\updater::renamehook): sqlstate[23000]: integrity constraint violation: 19 columns storage, path_hash are not unique","closed_by":{"login":"rperezb","id":1846927,"avatar_url":"https://gravatar.com/avatar/b4ad2bf83a0aabe434d87d674a6a01c0?d=https%3a%2f%2fidenticons.github.com%2f726ebac89cf4616e7506f7abfd8bc43d.png&r=x","gravatar_id":"b4ad2bf83a0aabe434d87d674a6a01c0","url":"https://api.github.com/users/rperezb","html_url":"https://github.com/rperezb","followers_url":"https://api.github.com/users/rperezb/followers","following_url":"https://api.github.com/users/rperezb/following{/other_user}","gists_url":"https://api.github.com/users/rperezb/gists{/gist_id}","starred_url":"https://api.github.com/users/rperezb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rperezb/subscriptions","organizations_url":"https://api.github.com/users/rperezb/orgs","repos_url":"https://api.github.com/users/rperezb/repos","events_url":"https://api.github.com/users/rperezb/events{/privacy}","received_events_url":"https://api.github.com/users/rperezb/received_events","type":"user","site_admin":false}}