{"url":"https://api.github.com/repos/owncloud/core/issues/4815","labels_url":"https://api.github.com/repos/owncloud/core/issues/4815/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/4815/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/4815/events","html_url":"https://github.com/owncloud/core/pull/4815","id":19345990,"number":4815,"title":"ldap modularization and tests","user":{"login":"blizzz","id":2184312,"avatar_url":"https://gravatar.com/avatar/1898b25a9cb3aa1a0f0febd1359910b9?d=https%3a%2f%2fidenticons.github.com%2fca03acec6deadf508b75eb0cf9ba036c.png&r=x","gravatar_id":"1898b25a9cb3aa1a0f0febd1359910b9","url":"https://api.github.com/users/blizzz","html_url":"https://github.com/blizzz","followers_url":"https://api.github.com/users/blizzz/followers","following_url":"https://api.github.com/users/blizzz/following{/other_user}","gists_url":"https://api.github.com/users/blizzz/gists{/gist_id}","starred_url":"https://api.github.com/users/blizzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blizzz/subscriptions","organizations_url":"https://api.github.com/users/blizzz/orgs","repos_url":"https://api.github.com/users/blizzz/repos","events_url":"https://api.github.com/users/blizzz/events{/privacy}","received_events_url":"https://api.github.com/users/blizzz/received_events","type":"user","site_admin":false},"labels":[],"state":"closed","assignee":null,"milestone":null,"comments":9,"created_at":"2013-09-11t20:51:27z","updated_at":"2013-10-04t09:41:09z","closed_at":"2013-10-04t09:41:06z","pull_request":{"html_url":"https://github.com/owncloud/core/pull/4815","diff_url":"https://github.com/owncloud/core/pull/4815.diff","patch_url":"https://github.com/owncloud/core/pull/4815.patch"},"body":"what this pr brings:\r\n- move ldap calls into a wrapper\r\n- remove hardcoded access dependency on user and group backend into a softcoded one\r\n- on this basis: tests for the user backend\r\n\r\nin general, it is part an consecutive and soft refactoring of the ldap backend that started even before oc5.\r\n\r\nthere is an open issue where login is not possible when loginname and userid differ (default in ldap backend, if not configured otherwise). this is due to changes in the oc user/group management: https://github.com/owncloud/core/issues/4789\r\n\r\nbackground if you want to know more:\r\nmy initial thought was to move ldap calls out of direct calls and into a wrapper, to achieve mocking of the ldap wrapper (to be able to test without an ldap server) and for easier/better testing how the communication with the ldap server behaves. while the latter was already fruitful (basis for one improvement in stable5) the first goal was not achieved because mocking an ldap wrapper is far too complex and error prone, if you also have in mind to test e.g. filter configurations or pages search. so this can only be done properly with real ldap servers. since i still want to test something i removed the hard binding of the access class from the user- and group backend methods so i could mock access and write first tests to at least check that user- methods behave properly.\r\n","closed_by":{"login":"kabum","id":245432,"avatar_url":"https://gravatar.com/avatar/a1dea19f88f38ea0b5b5b4d19d5b3107?d=https%3a%2f%2fidenticons.github.com%2f53d8cbb3dbc087a02951dec47438ccdf.png&r=x","gravatar_id":"a1dea19f88f38ea0b5b5b4d19d5b3107","url":"https://api.github.com/users/kabum","html_url":"https://github.com/kabum","followers_url":"https://api.github.com/users/kabum/followers","following_url":"https://api.github.com/users/kabum/following{/other_user}","gists_url":"https://api.github.com/users/kabum/gists{/gist_id}","starred_url":"https://api.github.com/users/kabum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kabum/subscriptions","organizations_url":"https://api.github.com/users/kabum/orgs","repos_url":"https://api.github.com/users/kabum/repos","events_url":"https://api.github.com/users/kabum/events{/privacy}","received_events_url":"https://api.github.com/users/kabum/received_events","type":"user","site_admin":false}}