{"url":"https://api.github.com/repos/owncloud/core/issues/3079","labels_url":"https://api.github.com/repos/owncloud/core/issues/3079/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/3079/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/3079/events","html_url":"https://github.com/owncloud/core/issues/3079","id":13507711,"number":3079,"title":"unable to automount data directory since 5.0","user":{"login":"egrad","id":4228533,"avatar_url":"https://gravatar.com/avatar/abb689a4b46dfa2e163237902b9c31d8?d=https%3a%2f%2fidenticons.github.com%2f32dea0e336dd3a0cfb221d0c939cd7e7.png&r=x","gravatar_id":"abb689a4b46dfa2e163237902b9c31d8","url":"https://api.github.com/users/egrad","html_url":"https://github.com/egrad","followers_url":"https://api.github.com/users/egrad/followers","following_url":"https://api.github.com/users/egrad/following{/other_user}","gists_url":"https://api.github.com/users/egrad/gists{/gist_id}","starred_url":"https://api.github.com/users/egrad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/egrad/subscriptions","organizations_url":"https://api.github.com/users/egrad/orgs","repos_url":"https://api.github.com/users/egrad/repos","events_url":"https://api.github.com/users/egrad/events{/privacy}","received_events_url":"https://api.github.com/users/egrad/received_events","type":"user","site_admin":false},"labels":[{"url":"https://api.github.com/repos/owncloud/core/labels/bug","name":"bug","color":"fc2929"}],"state":"closed","assignee":null,"milestone":null,"comments":18,"created_at":"2013-04-22t21:21:22z","updated_at":"2013-12-03t22:31:15z","closed_at":"2013-12-02t11:34:12z","pull_request":{"html_url":null,"diff_url":null,"patch_url":null},"body":"since owncloud 5.0, i'm not able anymore to automount data directory from an nfs export located on a nas (it was working fine with previous version 4) ... current workaround is to use hardmount instead of automount.\r\n\r\nmy configuration:\r\n------------------------\r\n1/ owncloud data directory configured to be automounted at this location : /mnt/owncloud\r\n\r\n2/ automount config:\r\n/etc/auto.master --> /mnt/owncloud  /etc/auto.owncloud.conf  --ghost,--timeout=30\r\n/etc/auto.owncloud.conf --> owncloud  -fstype=nfs,rw,intr  192.168.x.x:/owncloud\r\n\r\n3/ owncloud config file:\r\n/var/www/owncloud/config/config.php --> 'datadirectory' => '/mnt/owncloud',\r\ninstead of /var/www/owncloud/data\r\n\r\n issue:\r\n----------\r\nwhen the fs is not yet automounted, i get the following error on owncloud home page:\r\n\r\n\"data directory (/mnt/owncloud) not writable by owncloud\r\npermissions can usually be fixed by giving the webserver write access to the owncloud directory\"\r\n\r\ni think that owncloud is checking owner/rights of data directory before trying to enter it (should be www-data:www-data 770) ... problem, using automount, when the fs is not yet mounted, the owner/rights of the directory is root:root 755 !!! \r\n\r\nin parallel, if i do a \"cd /mnt/owncloud\" on the server in order to force the automount then the owner/rights of the data directory /mnt/owncloud become www-data:www-data 770 and so no more issue with owncloud ... until the next automatic umount of the fs\r\n\r\nthank for your support.\r\nadrien\r\n\r\n","closed_by":{"login":"karlitschek","id":867445,"avatar_url":"https://gravatar.com/avatar/87ce2b4531ee1a0c32b50e0d8f049224?d=https%3a%2f%2fidenticons.github.com%2f06e7098636caebfc9c30c9f52eb905df.png&r=x","gravatar_id":"87ce2b4531ee1a0c32b50e0d8f049224","url":"https://api.github.com/users/karlitschek","html_url":"https://github.com/karlitschek","followers_url":"https://api.github.com/users/karlitschek/followers","following_url":"https://api.github.com/users/karlitschek/following{/other_user}","gists_url":"https://api.github.com/users/karlitschek/gists{/gist_id}","starred_url":"https://api.github.com/users/karlitschek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karlitschek/subscriptions","organizations_url":"https://api.github.com/users/karlitschek/orgs","repos_url":"https://api.github.com/users/karlitschek/repos","events_url":"https://api.github.com/users/karlitschek/events{/privacy}","received_events_url":"https://api.github.com/users/karlitschek/received_events","type":"user","site_admin":false}}