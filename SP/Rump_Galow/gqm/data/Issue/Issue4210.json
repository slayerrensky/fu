{"url":"https://api.github.com/repos/owncloud/core/issues/4210","labels_url":"https://api.github.com/repos/owncloud/core/issues/4210/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/4210/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/4210/events","html_url":"https://github.com/owncloud/core/pull/4210","id":17271101,"number":4210,"title":"routing performance improvements","user":{"login":"icewind1991","id":1283854,"avatar_url":"https://gravatar.com/avatar/7c20f90ca5df67dd2cad22a8e2f80d8f?d=https%3a%2f%2fidenticons.github.com%2fc818423776eba38604496a7caddc0251.png&r=x","gravatar_id":"7c20f90ca5df67dd2cad22a8e2f80d8f","url":"https://api.github.com/users/icewind1991","html_url":"https://github.com/icewind1991","followers_url":"https://api.github.com/users/icewind1991/followers","following_url":"https://api.github.com/users/icewind1991/following{/other_user}","gists_url":"https://api.github.com/users/icewind1991/gists{/gist_id}","starred_url":"https://api.github.com/users/icewind1991/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icewind1991/subscriptions","organizations_url":"https://api.github.com/users/icewind1991/orgs","repos_url":"https://api.github.com/users/icewind1991/repos","events_url":"https://api.github.com/users/icewind1991/events{/privacy}","received_events_url":"https://api.github.com/users/icewind1991/received_events","type":"user","site_admin":false},"labels":[],"state":"open","assignee":null,"milestone":null,"comments":8,"created_at":"2013-07-26t16:12:14z","updated_at":"2013-10-07t12:59:37z","closed_at":null,"pull_request":{"html_url":"https://github.com/owncloud/core/pull/4210","diff_url":"https://github.com/owncloud/core/pull/4210.diff","patch_url":"https://github.com/owncloud/core/pull/4210.patch"},"body":"increases the performance of the routing using two techniques\r\n\r\n- when matching urls, only load the routes for the requested app.\r\nsince routes to apps are always prefixed with `/apps/$app/` we can use that prefix to only load the routes we need\r\n- cache generated urls.\r\nwhen a memcache backend is available the generated urls for routes are cached removing the need to load routes when generating urls.\r\n\r\nthis gives a fairly significant performance increase during my limited test.\r\n- for apps not using routes (files) it saves over 200ms since only the core routes need to be loaded and none of the app routes\r\n- for apps using routes (news) the speedup is less (about 40ms) and only the routes for the active apps need to be loaded.\r\n\r\n(pr also moves the routing classes to it's own subfolder/namespace to make sure /lib doesn't get to cluttered)\r\n\r\ncc @karlitschek @bartv2 @deepdiver1975 ","closed_by":null}