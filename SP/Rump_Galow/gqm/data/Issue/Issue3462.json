{"url":"https://api.github.com/repos/owncloud/core/issues/3462","labels_url":"https://api.github.com/repos/owncloud/core/issues/3462/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/3462/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/3462/events","html_url":"https://github.com/owncloud/core/issues/3462","id":14660601,"number":3462,"title":"oc::$webroot incorrectly calculated in some cases","user":{"login":"bibaheu","id":4506757,"avatar_url":"https://gravatar.com/avatar/08f291cba922a90b102a1da423ea9452?d=https%3a%2f%2fidenticons.github.com%2f1b9063145bcc87d32945078139099c61.png&r=x","gravatar_id":"08f291cba922a90b102a1da423ea9452","url":"https://api.github.com/users/bibaheu","html_url":"https://github.com/bibaheu","followers_url":"https://api.github.com/users/bibaheu/followers","following_url":"https://api.github.com/users/bibaheu/following{/other_user}","gists_url":"https://api.github.com/users/bibaheu/gists{/gist_id}","starred_url":"https://api.github.com/users/bibaheu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bibaheu/subscriptions","organizations_url":"https://api.github.com/users/bibaheu/orgs","repos_url":"https://api.github.com/users/bibaheu/repos","events_url":"https://api.github.com/users/bibaheu/events{/privacy}","received_events_url":"https://api.github.com/users/bibaheu/received_events","type":"user","site_admin":false},"labels":[{"url":"https://api.github.com/repos/owncloud/core/labels/bug","name":"bug","color":"fc2929"}],"state":"closed","assignee":null,"milestone":null,"comments":2,"created_at":"2013-05-23t07:00:40z","updated_at":"2013-12-02t11:31:26z","closed_at":"2013-12-02t11:31:26z","pull_request":{"html_url":null,"diff_url":null,"patch_url":null},"body":"### expected behaviour\r\nweb browser asking for user and password when opening\r\nhttp://owncloud.mydomain.tld/caldav\r\n\r\n### actual behaviour\r\nan xml error message appears from the webdav \r\nrequested uri (/remote.php/caldav) is out of base uri (/remote/remote.php/caldav/)\r\n\r\n### steps to reproduce\r\nopen http://owncloud.mydomain.tld/caldav\r\n\r\n### server configuration\r\noperating system: centos 6.4\r\nweb server: nginx 1.4.1\r\ndatabase: postgresql 9.2\r\nphp version: php 5.3.3 fpm/fastcgi\r\nowncloud version: 5.0.6\r\n### client configuration\r\nbrowser: chromium\r\noperating system: linux \r\n### logs\r\n\r\ni traced the problem. it seems that oc::$webroot variable is set to /remote when is called from remote.php. that is wrong, the owncloud root is the webserver root.\r\nthat string is calculated in line 154 of lib/base.php. \r\n$scriptname --> \"/remote.php/caldav\"\r\noc::$suburi --> \"/remote.php\"\r\n\r\n","closed_by":{"login":"karlitschek","id":867445,"avatar_url":"https://gravatar.com/avatar/87ce2b4531ee1a0c32b50e0d8f049224?d=https%3a%2f%2fidenticons.github.com%2f06e7098636caebfc9c30c9f52eb905df.png&r=x","gravatar_id":"87ce2b4531ee1a0c32b50e0d8f049224","url":"https://api.github.com/users/karlitschek","html_url":"https://github.com/karlitschek","followers_url":"https://api.github.com/users/karlitschek/followers","following_url":"https://api.github.com/users/karlitschek/following{/other_user}","gists_url":"https://api.github.com/users/karlitschek/gists{/gist_id}","starred_url":"https://api.github.com/users/karlitschek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karlitschek/subscriptions","organizations_url":"https://api.github.com/users/karlitschek/orgs","repos_url":"https://api.github.com/users/karlitschek/repos","events_url":"https://api.github.com/users/karlitschek/events{/privacy}","received_events_url":"https://api.github.com/users/karlitschek/received_events","type":"user","site_admin":false}}