{"url":"https://api.github.com/repos/owncloud/core/issues/4581","labels_url":"https://api.github.com/repos/owncloud/core/issues/4581/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/4581/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/4581/events","html_url":"https://github.com/owncloud/core/issues/4581","id":18565871,"number":4581,"title":"[encryption] webdav file upload via cadaver fails","user":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false},"labels":[{"url":"https://api.github.com/repos/owncloud/core/labels/1+-+backlog","name":"1 - backlog","color":"ededed"},{"url":"https://api.github.com/repos/owncloud/core/labels/app%3afiles_encryption","name":"app:files_encryption","color":"02d7e1"},{"url":"https://api.github.com/repos/owncloud/core/labels/attention","name":"attention","color":"d7e102"},{"url":"https://api.github.com/repos/owncloud/core/labels/bug","name":"bug","color":"fc2929"}],"state":"closed","assignee":{"login":"schiesbn","id":1589737,"avatar_url":"https://gravatar.com/avatar/8912b598c7b32dd25b87fd168e0b06b2?d=https%3a%2f%2fidenticons.github.com%2f0a323047dbe8329db30eae8dbe96e55e.png&r=x","gravatar_id":"8912b598c7b32dd25b87fd168e0b06b2","url":"https://api.github.com/users/schiesbn","html_url":"https://github.com/schiesbn","followers_url":"https://api.github.com/users/schiesbn/followers","following_url":"https://api.github.com/users/schiesbn/following{/other_user}","gists_url":"https://api.github.com/users/schiesbn/gists{/gist_id}","starred_url":"https://api.github.com/users/schiesbn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schiesbn/subscriptions","organizations_url":"https://api.github.com/users/schiesbn/orgs","repos_url":"https://api.github.com/users/schiesbn/repos","events_url":"https://api.github.com/users/schiesbn/events{/privacy}","received_events_url":"https://api.github.com/users/schiesbn/received_events","type":"user","site_admin":false},"milestone":null,"comments":5,"created_at":"2013-08-26t18:40:46z","updated_at":"2013-09-06t14:34:16z","closed_at":"2013-09-06t14:34:16z","pull_request":{"html_url":null,"diff_url":null,"patch_url":null},"body":"there is a code piece within our sabredav implementation which will detect aborted uploads and remove the file.\r\n\r\nhttps://github.com/owncloud/core/blob/master/lib/connector/sabre/directory.php#l81\r\n\r\nthis code piece is not working because the real filesize of the encrypted file on disk is returned.\r\n\r\nthis happens because neither the file info has been written to db not is the self healing mechanism working properly.\r\n\r\nthe self healing mechanism is failing on the fseek operation in https://github.com/owncloud/core/blob/master/apps/files_encryption/lib/util.php#l478\r\n\r\n@schiesbn can you please have a look?\r\n\r\nthis has been tested with git master - status on stable5 is unclear and requires further investigation\r\n\r\n@karlitschek 5.0.11 relevant in case stable5 impact is true?\r\n","closed_by":{"login":"schiesbn","id":1589737,"avatar_url":"https://gravatar.com/avatar/8912b598c7b32dd25b87fd168e0b06b2?d=https%3a%2f%2fidenticons.github.com%2f0a323047dbe8329db30eae8dbe96e55e.png&r=x","gravatar_id":"8912b598c7b32dd25b87fd168e0b06b2","url":"https://api.github.com/users/schiesbn","html_url":"https://github.com/schiesbn","followers_url":"https://api.github.com/users/schiesbn/followers","following_url":"https://api.github.com/users/schiesbn/following{/other_user}","gists_url":"https://api.github.com/users/schiesbn/gists{/gist_id}","starred_url":"https://api.github.com/users/schiesbn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schiesbn/subscriptions","organizations_url":"https://api.github.com/users/schiesbn/orgs","repos_url":"https://api.github.com/users/schiesbn/repos","events_url":"https://api.github.com/users/schiesbn/events{/privacy}","received_events_url":"https://api.github.com/users/schiesbn/received_events","type":"user","site_admin":false}}