{"url":"https://api.github.com/repos/owncloud/core/issues/4748","labels_url":"https://api.github.com/repos/owncloud/core/issues/4748/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/4748/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/4748/events","html_url":"https://github.com/owncloud/core/issues/4748","id":19103374,"number":4748,"title":"mod_fcgid: read data timeout when downloading big files","user":{"login":"yokinfx","id":1560571,"avatar_url":"https://gravatar.com/avatar/d5d9ee44b0d4981466871176794c7753?d=https%3a%2f%2fidenticons.github.com%2f594a857b649694402757743f955bc049.png&r=x","gravatar_id":"d5d9ee44b0d4981466871176794c7753","url":"https://api.github.com/users/yokinfx","html_url":"https://github.com/yokinfx","followers_url":"https://api.github.com/users/yokinfx/followers","following_url":"https://api.github.com/users/yokinfx/following{/other_user}","gists_url":"https://api.github.com/users/yokinfx/gists{/gist_id}","starred_url":"https://api.github.com/users/yokinfx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yokinfx/subscriptions","organizations_url":"https://api.github.com/users/yokinfx/orgs","repos_url":"https://api.github.com/users/yokinfx/repos","events_url":"https://api.github.com/users/yokinfx/events{/privacy}","received_events_url":"https://api.github.com/users/yokinfx/received_events","type":"user","site_admin":false},"labels":[],"state":"closed","assignee":null,"milestone":null,"comments":2,"created_at":"2013-09-06t12:48:00z","updated_at":"2013-11-29t12:50:22z","closed_at":"2013-11-29t12:37:51z","pull_request":{"html_url":null,"diff_url":null,"patch_url":null},"body":"### expected behaviour\r\ndownloading file correctly. files are of about 120 mb, but size does not really matter, as i will demonstrate later\r\n\r\n### actual behaviour\r\ndownload is interrupted and file is broken\r\n\r\n### steps to reproduce\r\n1. download big file\r\n\r\n\r\n### server configuration\r\noperating system: linux, in external hosting (site5)\r\n\r\nweb server: don't know. maybe apache or nginx, as logs sent by support team seem to be apache\r\n\r\ndatabase: mysql\r\n\r\nphp version: 5.3.22\r\n\r\nowncloud version: 5 and 5.0.9\r\n\r\n### client configuration\r\nbrowser: safari, firefox (last versions tested), chrome\r\n\r\noperating system:\r\n\r\n### logs\r\n#### web server error log\r\n\r\nthese logs are provided by support team:\r\n[wed sep 04 03:15:06 2013] [warn] [client 194.224.88.19] mod_fcgid: read data timeout in 70 seconds, referer: http://www.investingdev.com/oc5/index.php/apps/files?dir=/shared/desencadenado\r\n[wed sep 04 03:15:06 2013] [error] [client 194.224.88.19] premature end of script headers: index.php, referer: http://www.investingdev.com/oc5/index.php/apps/files?dir=/shared/desencadenado\r\n[wed sep 04 03:16:18 2013] [warn] [client 194.224.88.19] mod_fcgid: read data timeout in 70 seconds, referer: http://www.investingdev.com/oc5/index.php/apps/files?dir=/shared/desencadenado\r\n[wed sep 04 03:16:18 2013] [error] [client 194.224.88.19] premature end of script headers: index.php, referer: http://www.investingdev.com/oc5/index.php/apps/files?dir=/shared/desencadenado\r\n\r\n\r\n#### owncloud log (data/owncloud.log)\r\n{\"app\":\"php\",\"message\":\"readdir() expects parameter 1 to be resource, boolean given at \\/home\\/investin\\/public_html\\/oc5\\/lib\\/cache\\/file.php#88\",\"level\":2,\"time\":1378312782}\r\n{\"app\":\"php\",\"message\":\"opendir(\\/home\\/investin\\/public_html\\/oc5\\/data\\/benta\\/cache\\/) [<a href='function.opendir'>function.opendir<\\/a>]: failed to open dir: no such file or directory at \\/home\\/investin\\/public_html\\/oc5\\/lib\\/files\\/storage\\/local.php#40\",\"level\":2,\"time\":1378381273}\r\n{\"app\":\"php\",\"message\":\"readdir() expects parameter 1 to be resource, boolean given at \\/home\\/investin\\/public_html\\/oc5\\/lib\\/cache\\/file.php#88\",\"level\":2,\"time\":1378381273}\r\n{\"app\":\"search_lucene\",\"message\":\"failed to extract meta information for \\/cursos\\/dia 2. jueves 5 sep 2013: could not open \\\"\\/home\\/investin\\/public_html\\/oc5\\/data\\/yokinfx\\/files\\/cursos\\/dia 2. jueves 5 sep 2013\\\" (does not exist, or is not a file)\",\"level\":2,\"time\":1378394505}\r\n{\"app\":\"search_lucene\",\"message\":\"failed to extract meta information for \\/cursos\\/dia 2. jueves 5 sep 2013: could not open \\\"\\/home\\/investin\\/public_html\\/oc5\\/data\\/yokinfx\\/files\\/cursos\\/dia 2. jueves 5 sep 2013\\\" (does not exist, or is not a file)\",\"level\":2,\"time\":1378394505}\r\n{\"app\":\"php\",\"message\":\"call to a member function getroot() on a non-object at \\/home\\/investin\\/public_html\\/oc5\\/lib\\/files\\/filesystem.php#318\",\"level\":4,\"time\":1378399060}\r\n{\"app\":\"php\",\"message\":\"cannot modify header information - headers already sent by (output started at \\/home\\/investin\\/public_html\\/oc5\\/lib\\/files\\/filesystem.php:318) at \\/home\\/investin\\/public_html\\/oc5\\/lib\\/json.php#108\",\"level\":2,\"time\":1378399060}\r\n{\"app\":\"php\",\"message\":\"cannot modify header information - headers already sent by (output started at \\/home\\/investin\\/public_html\\/oc5\\/lib\\/files\\/filesystem.php:318) at \\/home\\/investin\\/public_html\\/oc5\\/lib\\/json.php#17\",\"level\":2,\"time\":1378399060}\r\n{\"app\":\"php\",\"message\":\"opendir(\\/home\\/investin\\/public_html\\/oc5\\/data\\/bernicm\\/cache\\/) [<a href='function.opendir'>function.opendir<\\/a>]: failed to open dir: no such file or directory at \\/home\\/investin\\/public_html\\/oc5\\/lib\\/files\\/storage\\/local.php#40\",\"level\":2,\"time\":1378405205}\r\n{\"app\":\"php\",\"message\":\"readdir() expects parameter 1 to be resource, boolean given at \\/home\\/investin\\/public_html\\/oc5\\/lib\\/cache\\/file.php#88\",\"level\":2,\"time\":1378405205}\r\n\r\n#### browser log\r\nn/a\r\n\r\nthanks! \r\n\r\nas you may have noticed, i can't change parameters like fastcgi config files or virtual server configuration (i have asked support if they could do it for me, but don't know if they will...) \r\n\r\nfor the moment, their answer is this:\r\n\r\nas you can see the script is timming out and you may want to perform an optimization over it as there are more then 70 seconds in which the script doesn't do anything, it just hangs. if you have any questions, please don't hesitate to contact our team. ","closed_by":{"login":"karlitschek","id":867445,"avatar_url":"https://gravatar.com/avatar/87ce2b4531ee1a0c32b50e0d8f049224?d=https%3a%2f%2fidenticons.github.com%2f06e7098636caebfc9c30c9f52eb905df.png&r=x","gravatar_id":"87ce2b4531ee1a0c32b50e0d8f049224","url":"https://api.github.com/users/karlitschek","html_url":"https://github.com/karlitschek","followers_url":"https://api.github.com/users/karlitschek/followers","following_url":"https://api.github.com/users/karlitschek/following{/other_user}","gists_url":"https://api.github.com/users/karlitschek/gists{/gist_id}","starred_url":"https://api.github.com/users/karlitschek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karlitschek/subscriptions","organizations_url":"https://api.github.com/users/karlitschek/orgs","repos_url":"https://api.github.com/users/karlitschek/repos","events_url":"https://api.github.com/users/karlitschek/events{/privacy}","received_events_url":"https://api.github.com/users/karlitschek/received_events","type":"user","site_admin":false}}