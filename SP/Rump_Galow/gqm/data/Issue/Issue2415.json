{"url":"https://api.github.com/repos/owncloud/core/issues/2415","labels_url":"https://api.github.com/repos/owncloud/core/issues/2415/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/2415/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/2415/events","html_url":"https://github.com/owncloud/core/issues/2415","id":12128214,"number":2415,"title":"setlocale() call is wrong","user":{"login":"pounard","id":341855,"avatar_url":"https://gravatar.com/avatar/096e75e52c44af00c27f12684c4e05b8?d=https%3a%2f%2fidenticons.github.com%2f3db1c81342a61b18b68ce59dedbb2dea.png&r=x","gravatar_id":"096e75e52c44af00c27f12684c4e05b8","url":"https://api.github.com/users/pounard","html_url":"https://github.com/pounard","followers_url":"https://api.github.com/users/pounard/followers","following_url":"https://api.github.com/users/pounard/following{/other_user}","gists_url":"https://api.github.com/users/pounard/gists{/gist_id}","starred_url":"https://api.github.com/users/pounard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pounard/subscriptions","organizations_url":"https://api.github.com/users/pounard/orgs","repos_url":"https://api.github.com/users/pounard/repos","events_url":"https://api.github.com/users/pounard/events{/privacy}","received_events_url":"https://api.github.com/users/pounard/received_events","type":"user","site_admin":false},"labels":[{"url":"https://api.github.com/repos/owncloud/core/labels/won%27+t+fix","name":"won' t fix","color":"dddddd"}],"state":"closed","assignee":null,"milestone":null,"comments":8,"created_at":"2013-03-18t10:52:29z","updated_at":"2013-07-09t15:05:53z","closed_at":"2013-03-18t13:30:32z","pull_request":{"html_url":null,"diff_url":null,"patch_url":null},"body":"in lib/util.php at line 614 you do:\r\n\r\n\t$result = setlocale(lc_all, 'en_us.utf-8', 'en_us.utf8');\r\n\r\nmy current box didn't had neither of the \"en_us.utf-8\" or \"en_us.utf8\" locale installed, because i'm french so my box is.\r\n\r\nwhenever there is none of those locales installed, the update crashes, a lot of warnings end up in the oc log file, and everything is bugguy.\r\n\r\nyou should not set the locale if you are not going to use it anyway (i presume you don't use it for localization if you force always english) instead you should fallback to something more generic such as :\r\n\r\n    $result = setlocale(lc_all, 'c');\r\n\r\n","closed_by":{"login":"raydiation","id":195053,"avatar_url":"https://gravatar.com/avatar/aa0d7b7302e0d7f4f9513c23b571383a?d=https%3a%2f%2fidenticons.github.com%2faf0a25e27510f77d97634a6bbe653b13.png&r=x","gravatar_id":"aa0d7b7302e0d7f4f9513c23b571383a","url":"https://api.github.com/users/raydiation","html_url":"https://github.com/raydiation","followers_url":"https://api.github.com/users/raydiation/followers","following_url":"https://api.github.com/users/raydiation/following{/other_user}","gists_url":"https://api.github.com/users/raydiation/gists{/gist_id}","starred_url":"https://api.github.com/users/raydiation/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raydiation/subscriptions","organizations_url":"https://api.github.com/users/raydiation/orgs","repos_url":"https://api.github.com/users/raydiation/repos","events_url":"https://api.github.com/users/raydiation/events{/privacy}","received_events_url":"https://api.github.com/users/raydiation/received_events","type":"user","site_admin":false}}