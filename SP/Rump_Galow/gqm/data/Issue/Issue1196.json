{"url":"https://api.github.com/repos/owncloud/core/issues/1196","labels_url":"https://api.github.com/repos/owncloud/core/issues/1196/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/1196/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/1196/events","html_url":"https://github.com/owncloud/core/issues/1196","id":9993157,"number":1196,"title":"owncloud 4.5.5: files uploaded to shared folders with webdav report a filesize of '0'.","user":{"login":"feinom","id":439885,"avatar_url":"https://gravatar.com/avatar/30e03b8310d9be4ec073fcde596559c6?d=https%3a%2f%2fidenticons.github.com%2fa64cbb8581316359fdb75ffe72ab7326.png&r=x","gravatar_id":"30e03b8310d9be4ec073fcde596559c6","url":"https://api.github.com/users/feinom","html_url":"https://github.com/feinom","followers_url":"https://api.github.com/users/feinom/followers","following_url":"https://api.github.com/users/feinom/following{/other_user}","gists_url":"https://api.github.com/users/feinom/gists{/gist_id}","starred_url":"https://api.github.com/users/feinom/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/feinom/subscriptions","organizations_url":"https://api.github.com/users/feinom/orgs","repos_url":"https://api.github.com/users/feinom/repos","events_url":"https://api.github.com/users/feinom/events{/privacy}","received_events_url":"https://api.github.com/users/feinom/received_events","type":"user","site_admin":false},"labels":[{"url":"https://api.github.com/repos/owncloud/core/labels/bug","name":"bug","color":"fc2929"}],"state":"closed","assignee":null,"milestone":null,"comments":1,"created_at":"2013-01-15t20:02:37z","updated_at":"2013-03-20t16:57:24z","closed_at":"2013-03-20t16:57:24z","pull_request":{"html_url":null,"diff_url":null,"patch_url":null},"body":"hi,\r\n\r\nwhen uploading files to a shared folder with webdav, owncloud reports the file size as 0 when it's actually larger. the files have the correct file size when looking at the files on the filesystem. this happens very often when we upload anything through webdav. _some times_ it works, but i haven't been able to find a pattern to it, and it seems pretty random.\r\n\r\nit is possible to open the 0 sized files from the web gui, but it fails when using a webdav client (webdrive). i guess it is confused by the wrongly reported file size.\r\n\r\nthe file sizes can be corrected by running scanfiles() manually. all files are then reporting the correct file sizes, and we can open then without any issues.\r\n\r\ni don't know if these errors are relevant to this issue, but i'm including them anyway. the interesting part is the \"php warning\" message in between the others:\r\n\r\n```\r\n[15-jan-2013 17:10:29 utc] php notice:  undefined index: id in /usr/local/apache/htdocs/lib/filecache.php on line 377\r\n[15-jan-2013 17:10:29 utc] php notice:  undefined index: mimetype in /usr/local/apache/htdocs/lib/filecache.php on line 379\r\n[15-jan-2013 17:10:29 utc] php notice:  undefined index: id in /usr/local/apache/htdocs/lib/filecache.php on line 377\r\n[15-jan-2013 17:10:29 utc] php notice:  undefined index: mimetype in /usr/local/apache/htdocs/lib/filecache.php on line 379\r\n[15-jan-2013 17:10:29 utc] php notice:  undefined index: id in /usr/local/apache/htdocs/lib/filecache.php on line 377\r\n[15-jan-2013 17:10:29 utc] php notice:  undefined index: mimetype in /usr/local/apache/htdocs/lib/filecache.php on line 379\r\n[15-jan-2013 17:10:29 utc] php notice:  undefined index: mimetype in /usr/local/apache/htdocs/lib/filecache.php on line 362\r\n[15-jan-2013 17:10:33 utc] php warning:  unlink(/usr/local/apache/htdocs/data/rmk/files_versions//shared/telsys.group.felles/arkiv/2 regnskap og finans/30 provisjonsrapporter/q4 2012/~$expresspcservice_q4.xlsx.v1358269832): no such file or directory in /usr/local/apache/htdocs/apps/files_versions/lib/hooks.php on line 48\r\n[15-jan-2013 17:12:59 utc] php notice:  undefined index: id in /usr/local/apache/htdocs/lib/filecache.php on line 377\r\n[15-jan-2013 17:12:59 utc] php notice:  undefined index: mimetype in /usr/local/apache/htdocs/lib/filecache.php on line 379\r\n[15-jan-2013 17:12:59 utc] php notice:  undefined index: id in /usr/local/apache/htdocs/lib/filecache.php on line 377\r\n[15-jan-2013 17:12:59 utc] php notice:  undefined index: mimetype in /usr/local/apache/htdocs/lib/filecache.php on line 379\r\n[15-jan-2013 17:12:59 utc] php notice:  undefined index: id in /usr/local/apache/htdocs/lib/filecache.php on line 377\r\n[15-jan-2013 17:12:59 utc] php notice:  undefined index: mimetype in /usr/local/apache/htdocs/lib/filecache.php on line 379\r\n```\r\n\r\nagain, i'm not sure if this is related to the issue, but it looks like owncloud is trying to delete/unlink a file version that doesn't exist. is that normal?\r\n\r\nnothing of interest is logged in owncloud.log. here is the apache access log from one of the times the issue occured:\r\n\r\n```\r\n[15/jan/2013:20:54:53 +0100] 79.160.127.77 tlsv1 aes128-sha \"put /remote.php/webdav/shared/telsys.group.felles/testomr%c3%a5de/telsys%20zimbra%20(6).pdf http/1.1\" -\r\n[15/jan/2013:20:54:54 +0100] 79.160.127.77 tlsv1 aes128-sha \"propfind /remote.php/webdav/shared/telsys.group.felles/testomr%c3%a5de/telsys%20zimbra%20(6).pdf/ http/1.1\" 971\r\n[15/jan/2013:20:54:54 +0100] 79.160.127.77 tlsv1 aes128-sha \"proppatch /remote.php/webdav/shared/telsys.group.felles/testomr%c3%a5de/telsys%20zimbra%20(6).pdf http/1.1\" 519\r\n[15/jan/2013:20:54:54 +0100] 79.160.127.77 tlsv1 aes128-sha \"propfind /remote.php/webdav/shared/telsys.group.felles/testomr%c3%a5de/telsys%20zimbra%20(6).pdf http/1.1\" 443\r\n```\r\n\r\ni can't see much of interest here, but maybe you can!","closed_by":{"login":"jancborchardt","id":925062,"avatar_url":"https://gravatar.com/avatar/2fd3f4d5d762955e5b603794a888fa97?d=https%3a%2f%2fidenticons.github.com%2f84ec51f9ceed468217d4e13abf78da9c.png&r=x","gravatar_id":"2fd3f4d5d762955e5b603794a888fa97","url":"https://api.github.com/users/jancborchardt","html_url":"https://github.com/jancborchardt","followers_url":"https://api.github.com/users/jancborchardt/followers","following_url":"https://api.github.com/users/jancborchardt/following{/other_user}","gists_url":"https://api.github.com/users/jancborchardt/gists{/gist_id}","starred_url":"https://api.github.com/users/jancborchardt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jancborchardt/subscriptions","organizations_url":"https://api.github.com/users/jancborchardt/orgs","repos_url":"https://api.github.com/users/jancborchardt/repos","events_url":"https://api.github.com/users/jancborchardt/events{/privacy}","received_events_url":"https://api.github.com/users/jancborchardt/received_events","type":"user","site_admin":false}}