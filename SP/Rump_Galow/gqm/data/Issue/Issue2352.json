{"url":"https://api.github.com/repos/owncloud/core/issues/2352","labels_url":"https://api.github.com/repos/owncloud/core/issues/2352/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/2352/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/2352/events","html_url":"https://github.com/owncloud/core/issues/2352","id":12060042,"number":2352,"title":"deleted files folder is empty in the account has reach more than 90% of storage capacity","user":{"login":"rperezb","id":1846927,"avatar_url":"https://gravatar.com/avatar/b4ad2bf83a0aabe434d87d674a6a01c0?d=https%3a%2f%2fidenticons.github.com%2f726ebac89cf4616e7506f7abfd8bc43d.png&r=x","gravatar_id":"b4ad2bf83a0aabe434d87d674a6a01c0","url":"https://api.github.com/users/rperezb","html_url":"https://github.com/rperezb","followers_url":"https://api.github.com/users/rperezb/followers","following_url":"https://api.github.com/users/rperezb/following{/other_user}","gists_url":"https://api.github.com/users/rperezb/gists{/gist_id}","starred_url":"https://api.github.com/users/rperezb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rperezb/subscriptions","organizations_url":"https://api.github.com/users/rperezb/orgs","repos_url":"https://api.github.com/users/rperezb/repos","events_url":"https://api.github.com/users/rperezb/events{/privacy}","received_events_url":"https://api.github.com/users/rperezb/received_events","type":"user","site_admin":false},"labels":[],"state":"closed","assignee":null,"milestone":null,"comments":2,"created_at":"2013-03-15t11:49:51z","updated_at":"2013-03-18t07:40:41z","closed_at":"2013-03-15t15:27:02z","pull_request":{"html_url":null,"diff_url":null,"patch_url":null},"body":"\r\n### expected behaviour\r\nthose deleted files should be kept on the \"deleted files\"\r\n\r\n### actual behaviour\r\nif the account limit storage is almost reach this is not happening\r\n\r\n### steps to reproduce\r\n1. connect to any owncloud account that is using more than 90% of its storage limit\r\n2. delete any file, it is correctly deleted\r\n3. go to \"deleted files\", the file is not there as it could be expected\r\n\r\n\r\n### server configuration\r\nacceptance-testing master_on_apache_with_sqlite\r\n\r\nversion\":\"5.80.0\",\"versionstring\":\"6.0 pre alpha\r\n\r\n[2013-03-15t08:28:24+00:00] info: git[/usr/local/src/owncloud-core] updated to revision 92a867635014b44b9cc0c05b77f03cea02c284c2\r\n\r\n[2013-03-15t08:29:07+00:00] info: git[/usr/local/src/owncloud-apps] updated to revision 2cf2c834cdd18f4eee98a06be90ac249d499a814\r\n\r\n### client configuration\r\nbrowser: chrome\r\n\r\noperating system: mac 10.7.5\r\n\r\n\r\n### logs\r\n#### web server error log\r\n``[fri mar 15 11:42:49 2013] [error] [client 33.33.33.1] php fatal error:  call to a member function getroot() on a non-object in /var/www/lib/files/filesystem.php on line 318, referer: http://33.33.33.10/index.php\r\n[fri mar 15 11:42:57 2013] [error] [client 33.33.33.1] php strict standards:  only variables should be passed by reference in /var/www/apps2/search_lucene/lib/indexer.php on line 133, referer: http://33.33.33.10/index.php/apps/files\r\n```\r\n\r\n#### owncloud log (data/owncloud.log)\r\n```\r\n\r\nerror\t search_lucene\t encrypted document modification is not supported trace:\\n#0 /var/www/apps2/search_lucene/3rdparty/zend/pdf.php(255): zend_pdf->__construct('%pdf-1.6?%?????...', null) #1 /var/www/apps2/search_lucene/lib/indexer.php(133): zend_pdf::parse('%pdf-1.6?%?????...') #2 /var/www/apps2/search_lucene/lib/indexer.php(58): oc_search_lucene_indexer::extractmetadata(object(zend_search_lucene_document), '/test1/4 - brit...', 'application/pdf') #3 [internal function]: oc_search_lucene_indexer::indexfile('/test1/4 - brit...') #4 /var/www/lib/backgroundjob/worker.php(107): call_user_func(array, '/test1/4 - brit...') #5 /var/www/cron.php(107): oc_backgroundjob_worker::donextstep() #6 {main}\r\n```\r\n\r\n","closed_by":{"login":"raydiation","id":195053,"avatar_url":"https://gravatar.com/avatar/aa0d7b7302e0d7f4f9513c23b571383a?d=https%3a%2f%2fidenticons.github.com%2faf0a25e27510f77d97634a6bbe653b13.png&r=x","gravatar_id":"aa0d7b7302e0d7f4f9513c23b571383a","url":"https://api.github.com/users/raydiation","html_url":"https://github.com/raydiation","followers_url":"https://api.github.com/users/raydiation/followers","following_url":"https://api.github.com/users/raydiation/following{/other_user}","gists_url":"https://api.github.com/users/raydiation/gists{/gist_id}","starred_url":"https://api.github.com/users/raydiation/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raydiation/subscriptions","organizations_url":"https://api.github.com/users/raydiation/orgs","repos_url":"https://api.github.com/users/raydiation/repos","events_url":"https://api.github.com/users/raydiation/events{/privacy}","received_events_url":"https://api.github.com/users/raydiation/received_events","type":"user","site_admin":false}}