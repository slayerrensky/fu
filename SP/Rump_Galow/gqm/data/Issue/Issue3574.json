{"url":"https://api.github.com/repos/owncloud/core/issues/3574","labels_url":"https://api.github.com/repos/owncloud/core/issues/3574/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/3574/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/3574/events","html_url":"https://github.com/owncloud/core/pull/3574","id":15036843,"number":3574,"title":"files_external speedup by using locks","user":{"login":"florinpeter","id":2911849,"avatar_url":"https://gravatar.com/avatar/df9570ff71909a99f01eb4307bce8bf8?d=https%3a%2f%2fidenticons.github.com%2fd503a45d4a0b5139f9c7bb65e4786414.png&r=x","gravatar_id":"df9570ff71909a99f01eb4307bce8bf8","url":"https://api.github.com/users/florinpeter","html_url":"https://github.com/florinpeter","followers_url":"https://api.github.com/users/florinpeter/followers","following_url":"https://api.github.com/users/florinpeter/following{/other_user}","gists_url":"https://api.github.com/users/florinpeter/gists{/gist_id}","starred_url":"https://api.github.com/users/florinpeter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/florinpeter/subscriptions","organizations_url":"https://api.github.com/users/florinpeter/orgs","repos_url":"https://api.github.com/users/florinpeter/repos","events_url":"https://api.github.com/users/florinpeter/events{/privacy}","received_events_url":"https://api.github.com/users/florinpeter/received_events","type":"user","site_admin":false},"labels":[],"state":"closed","assignee":null,"milestone":null,"comments":6,"created_at":"2013-06-02t06:13:21z","updated_at":"2013-08-26t13:19:42z","closed_at":"2013-08-26t13:19:42z","pull_request":{"html_url":"https://github.com/owncloud/core/pull/3574","diff_url":"https://github.com/owncloud/core/pull/3574.diff","patch_url":"https://github.com/owncloud/core/pull/3574.patch"},"body":"this pr shows how to speedup the files_external app by using a lock mechanism and prevent from calling unnecessary api requests.\r\n\r\nthe lock is currently only implemented for dropbox, but if this is a useable way i think it will be easy to adapt this for the other implementations.\r\n\r\nhere are some benchmarks from my local dev system:\r\nfollowing apps were enabled:\r\n* deleted files\r\n* external storage support\r\n* share files\r\n* text editor\r\n* versions\r\n\r\n**with locks**\r\n- total new folder processing time: 2.9252 seconds.\r\n- total new file processing time: 3.3561 seconds.\r\n- total rename processing time: 3.7236 seconds\r\n- total file upload processing time: 3.9940 seconds.\r\n\r\n**without locks**\r\n- total new folder processing time: 5.2107 seconds.\r\n- total new file processing time: 11.0666 seconds.\r\n- total rename processing time: 4.8185 seconds.\r\n- total upload processing time: 9.1234 seconds.\r\n\r\nplease give me some feedback.\r\n\r\ncc @karlitschek @mtgap @deepdiver1975 @icewind1991 ","closed_by":{"login":"bartv2","id":2227877,"avatar_url":"https://gravatar.com/avatar/c2d86a0a66a4be2c904e24034e842f44?d=https%3a%2f%2fidenticons.github.com%2f05e8b1362feb118a386dfd282b20fb84.png&r=x","gravatar_id":"c2d86a0a66a4be2c904e24034e842f44","url":"https://api.github.com/users/bartv2","html_url":"https://github.com/bartv2","followers_url":"https://api.github.com/users/bartv2/followers","following_url":"https://api.github.com/users/bartv2/following{/other_user}","gists_url":"https://api.github.com/users/bartv2/gists{/gist_id}","starred_url":"https://api.github.com/users/bartv2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bartv2/subscriptions","organizations_url":"https://api.github.com/users/bartv2/orgs","repos_url":"https://api.github.com/users/bartv2/repos","events_url":"https://api.github.com/users/bartv2/events{/privacy}","received_events_url":"https://api.github.com/users/bartv2/received_events","type":"user","site_admin":false}}