{"url":"https://api.github.com/repos/owncloud/core/issues/556","labels_url":"https://api.github.com/repos/owncloud/core/issues/556/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/556/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/556/events","html_url":"https://github.com/owncloud/core/pull/556","id":8589492,"number":556,"title":"use lastval() to get the insert id in postgesql","user":{"login":"icewind1991","id":1283854,"avatar_url":"https://gravatar.com/avatar/7c20f90ca5df67dd2cad22a8e2f80d8f?d=https%3a%2f%2fidenticons.github.com%2fc818423776eba38604496a7caddc0251.png&r=x","gravatar_id":"7c20f90ca5df67dd2cad22a8e2f80d8f","url":"https://api.github.com/users/icewind1991","html_url":"https://github.com/icewind1991","followers_url":"https://api.github.com/users/icewind1991/followers","following_url":"https://api.github.com/users/icewind1991/following{/other_user}","gists_url":"https://api.github.com/users/icewind1991/gists{/gist_id}","starred_url":"https://api.github.com/users/icewind1991/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icewind1991/subscriptions","organizations_url":"https://api.github.com/users/icewind1991/orgs","repos_url":"https://api.github.com/users/icewind1991/repos","events_url":"https://api.github.com/users/icewind1991/events{/privacy}","received_events_url":"https://api.github.com/users/icewind1991/received_events","type":"user","site_admin":false},"labels":[],"state":"closed","assignee":null,"milestone":null,"comments":2,"created_at":"2012-11-22t23:35:38z","updated_at":"2012-11-25t06:55:33z","closed_at":"2012-11-25t06:55:33z","pull_request":{"html_url":"https://github.com/owncloud/core/pull/556","diff_url":"https://github.com/owncloud/core/pull/556.diff","patch_url":"https://github.com/owncloud/core/pull/556.patch"},"body":"this solves the issue with getting the last insert id for me in the filesystem branch.\n\nthe old way relied on getting the value from the primary key sequence for the table but this has several problems.\n\n - this fails when the primary key is not an autoincrease integer\n - we need to be able to guess the sequence name, which doesn't seem consistent across installations, the current guess is tablename_id_seq', which seems to work for most people but on my current test setup the correct name seems to be tablename.primarykeyname\n\nusing lastval() removes the need to know the sequence name and should work for all installations","closed_by":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false}}