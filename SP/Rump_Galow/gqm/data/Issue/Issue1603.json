{"url":"https://api.github.com/repos/owncloud/core/issues/1603","labels_url":"https://api.github.com/repos/owncloud/core/issues/1603/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/1603/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/1603/events","html_url":"https://github.com/owncloud/core/pull/1603","id":10828501,"number":1603,"title":"bruteforce protection [wip]","user":{"login":"lukasreschke","id":878997,"avatar_url":"https://gravatar.com/avatar/f080e75d370a4d8e550983a4898bcf3b?d=https%3a%2f%2fidenticons.github.com%2ff12e47d5bb5359a9f58e8217413be790.png&r=x","gravatar_id":"f080e75d370a4d8e550983a4898bcf3b","url":"https://api.github.com/users/lukasreschke","html_url":"https://github.com/lukasreschke","followers_url":"https://api.github.com/users/lukasreschke/followers","following_url":"https://api.github.com/users/lukasreschke/following{/other_user}","gists_url":"https://api.github.com/users/lukasreschke/gists{/gist_id}","starred_url":"https://api.github.com/users/lukasreschke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukasreschke/subscriptions","organizations_url":"https://api.github.com/users/lukasreschke/orgs","repos_url":"https://api.github.com/users/lukasreschke/repos","events_url":"https://api.github.com/users/lukasreschke/events{/privacy}","received_events_url":"https://api.github.com/users/lukasreschke/received_events","type":"user","site_admin":false},"labels":[],"state":"open","assignee":{"login":"kondou-ger","id":1410802,"avatar_url":"https://gravatar.com/avatar/917dab919ae812f8252b2f501c514b19?d=https%3a%2f%2fidenticons.github.com%2fd07869ed62cb1b7f88b731956ab913ee.png&r=x","gravatar_id":"917dab919ae812f8252b2f501c514b19","url":"https://api.github.com/users/kondou-ger","html_url":"https://github.com/kondou-ger","followers_url":"https://api.github.com/users/kondou-ger/followers","following_url":"https://api.github.com/users/kondou-ger/following{/other_user}","gists_url":"https://api.github.com/users/kondou-ger/gists{/gist_id}","starred_url":"https://api.github.com/users/kondou-ger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kondou-ger/subscriptions","organizations_url":"https://api.github.com/users/kondou-ger/orgs","repos_url":"https://api.github.com/users/kondou-ger/repos","events_url":"https://api.github.com/users/kondou-ger/events{/privacy}","received_events_url":"https://api.github.com/users/kondou-ger/received_events","type":"user","site_admin":false},"milestone":{"url":"https://api.github.com/repos/owncloud/core/milestones/4","labels_url":"https://api.github.com/repos/owncloud/core/milestones/4/labels","id":264325,"number":4,"title":"owncloud 7","description":"","creator":{"login":"karlitschek","id":867445,"avatar_url":"https://gravatar.com/avatar/87ce2b4531ee1a0c32b50e0d8f049224?d=https%3a%2f%2fidenticons.github.com%2f06e7098636caebfc9c30c9f52eb905df.png&r=x","gravatar_id":"87ce2b4531ee1a0c32b50e0d8f049224","url":"https://api.github.com/users/karlitschek","html_url":"https://github.com/karlitschek","followers_url":"https://api.github.com/users/karlitschek/followers","following_url":"https://api.github.com/users/karlitschek/following{/other_user}","gists_url":"https://api.github.com/users/karlitschek/gists{/gist_id}","starred_url":"https://api.github.com/users/karlitschek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karlitschek/subscriptions","organizations_url":"https://api.github.com/users/karlitschek/orgs","repos_url":"https://api.github.com/users/karlitschek/repos","events_url":"https://api.github.com/users/karlitschek/events{/privacy}","received_events_url":"https://api.github.com/users/karlitschek/received_events","type":"user","site_admin":false},"open_issues":151,"closed_issues":30,"state":"open","created_at":"2013-02-11t11:40:47z","updated_at":"2013-12-20t10:43:58z","due_on":null},"comments":26,"created_at":"2013-02-10t20:01:51z","updated_at":"2013-12-11t10:54:20z","closed_at":null,"pull_request":{"html_url":"https://github.com/owncloud/core/pull/1603","diff_url":"https://github.com/owncloud/core/pull/1603.diff","patch_url":"https://github.com/owncloud/core/pull/1603.patch"},"body":"## don't merge this! - this is scheduled for <del>6.0</del> 7.0\r\n\r\nthis is a simple (but configurable) brute force protection for logins, it will block all ip addresses for 15 minutes who tried to login 10 times with invalid credentials within 15 minutes. additionally, it will add an entry to the owncloud log with the username + ip address.\r\n\r\ni think this is enough, since i don't know anyone who enters his password wrong 10 times in 15 minutes ;-) - nevertheless, if one does this he will get a warning instead of the login screen saying that he should wait 15 minutes and then try it again.\r\n\r\ncurrently, it does not work with reverse proxies in place. this should get fixed before merging.\r\n\r\ni'm not sure about the index in `db_structure.xml`, could anyone check if this is correct? thx.\r\n\r\nbtw. every improvement is appreciated - just commit it to the `bruteforce-protection` branch!\r\n\r\n#### todos:\r\n- [ ] make compatible with reverse proxies\r\n- [ ] protect the login with a csrf token\r\n- [ ] check if this is compatible with other user backends\r\n- [x] ask @danimo or @dragotin if this block has bad impacts on webdav clients and mirall, maybe a specific statuscode should be sent?\r\n- [ ] block ips after x logins for 24h\r\n     - currently an ip is able to try (at maximum) 960 logins per day, we should implement a block lasting at least 24h after a *massive* abuse from a single ip address.\r\n\r\nref #1580 \r\n\r\n\\cc @jancborchardt @karlitschek ","closed_by":null}