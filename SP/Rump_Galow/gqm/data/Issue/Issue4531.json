{"url":"https://api.github.com/repos/owncloud/core/issues/4531","labels_url":"https://api.github.com/repos/owncloud/core/issues/4531/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/4531/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/4531/events","html_url":"https://github.com/owncloud/core/issues/4531","id":18293237,"number":4531,"title":"owncloud web interface cannot delete empty folders","user":{"login":"vieridipaola","id":5190191,"avatar_url":"https://gravatar.com/avatar/73eba2942a4bdc3c23876f2141581e90?d=https%3a%2f%2fidenticons.github.com%2fd2f3917ee2fb29607efcc5c1c9be3479.png&r=x","gravatar_id":"73eba2942a4bdc3c23876f2141581e90","url":"https://api.github.com/users/vieridipaola","html_url":"https://github.com/vieridipaola","followers_url":"https://api.github.com/users/vieridipaola/followers","following_url":"https://api.github.com/users/vieridipaola/following{/other_user}","gists_url":"https://api.github.com/users/vieridipaola/gists{/gist_id}","starred_url":"https://api.github.com/users/vieridipaola/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vieridipaola/subscriptions","organizations_url":"https://api.github.com/users/vieridipaola/orgs","repos_url":"https://api.github.com/users/vieridipaola/repos","events_url":"https://api.github.com/users/vieridipaola/events{/privacy}","received_events_url":"https://api.github.com/users/vieridipaola/received_events","type":"user","site_admin":false},"labels":[{"url":"https://api.github.com/repos/owncloud/core/labels/app%3afiles_external","name":"app:files_external","color":"02d7e1"}],"state":"closed","assignee":null,"milestone":null,"comments":12,"created_at":"2013-08-20t12:35:25z","updated_at":"2013-12-02t11:05:11z","closed_at":"2013-12-02t11:05:11z","pull_request":{"html_url":null,"diff_url":null,"patch_url":null},"body":"### expected behaviour\r\ni add an external smb share and i access it with the oc web interface. i'm using a user with full read/write access to this share.\r\ni'm expecting to be able to delete and rename empty folders and files without errors.\r\n\r\n### actual behaviour\r\ni can't delete folders even if they're empty. i can't even delete folders that were created by the same oc instance (so i can create folders but not delete them).\r\nas a side note, renaming folders within the smb share works even if i get an error message on screen (web interface - \"unable to rename file\"). once i dismiss the message the folder is listed correctly.\r\nthe same thing happens when i rename a file.\r\nwhen i try to delete a file i don't get any error message in oc web interface and the file is still listed on-screen. however, if i refresh/reload the web page then the file actually disappears. i can confirm that the file was deleted before refreshing the web page by accessing the share with another client (eg. windows file explorer).\r\n\r\n### steps to reproduce\r\n1. add an external smb share\r\n2. rename folder\r\n3. rename file\r\n4. delete empty folder\r\n5. delete file\r\n\r\n### server configuration\r\noperating system: linux 2.6.36-gentoo-r5\r\n\r\nweb server: apache 2.2.24\r\n\r\ndatabase: mysql 5.1.67\r\n\r\nphp version: 5.4.13\r\n\r\nowncloud version: 5.0.10\r\n\r\n### client configuration\r\nbrowser: firefox 22.0\r\n\r\noperating system: windows 7\r\n\r\n### logs\r\n#### web server error log\r\n```\r\n***nothing in apache error log***\r\n```\r\n\r\n#### owncloud log (data/owncloud.log)\r\n```\r\n{\"app\":\"core\",\"message\":\"include path for class \\\"oca_firstrunwizard\\\\config\\\" starts with \\\"apps\\/\\\"\",\"level\":0,\"time\":\"2013-08-20t12:27:50+00:00\"}\r\n{\"app\":\"core\",\"message\":\"include path for class \\\"oca_firstrunwizard\\\\config\\\" starts with \\\"apps\\/\\\"\",\"level\":0,\"time\":\"2013-08-20t12:27:53+00:00\"}\r\n{\"app\":\"core\",\"message\":\"include path for class \\\"oca_firstrunwizard\\\\config\\\" starts with \\\"apps\\/\\\"\",\"level\":0,\"time\":\"2013-08-20t12:28:42+00:00\"}\r\n{\"app\":\"core\",\"message\":\"include path for class \\\"oca_firstrunwizard\\\\config\\\" starts with \\\"apps\\/\\\"\",\"level\":0,\"time\":\"2013-08-20t12:28:49+00:00\"}\r\n{\"app\":\"core\",\"message\":\"include path for class \\\"oca_firstrunwizard\\\\config\\\" starts with \\\"apps\\/\\\"\",\"level\":0,\"time\":\"2013-08-20t12:28:56+00:00\"}\r\n```\r\n\r\n#### browser log\r\n```\r\n[14:27:50.237] get https://myowncloudserver/owncloud/index.php/apps/files/ajax/rename.php?dir=%2fmyuser%2ftestfolder&newname=test2&file=test [http/1.1 200 ok 2756ms]\r\n[14:27:53.005] post https://myowncloudserver/owncloud/index.php/core/ajax/translations.php [http/1.1 200 ok 148ms]\r\n[14:27:53.005] get https://myowncloudserver/owncloud/core/css/images/ui-icons_222222_256x240.png?2013-08-20t07:28:20z [http/1.1 304 not modified 4ms]\r\n[14:27:53.136] use of getattributenode() is deprecated. use getattribute() instead. @ https://myowncloudserver/owncloud/remote.php/core.js?v=0af787945872196b42c9f73ead2565c8:31\r\n[14:27:53.207] get https://myowncloudserver/owncloud/core/css/images/ui-bg_highlight-soft_100_eeeeee_1x100.png?2013-08-20t07:28:20z [http/1.1 304 not modified 2ms]\r\n[14:27:53.208] get https://myowncloudserver/owncloud/core/css/images/ui-bg_flat_35_1d2d44_40x100.png?2013-08-20t07:28:20z [http/1.1 304 not modified 2ms]\r\n[14:27:53.209] get https://myowncloudserver/owncloud/core/css/images/ui-bg_glass_100_f8f8f8_1x400.png?2013-08-20t07:28:20z [http/1.1 304 not modified 14ms]\r\n[14:27:53.209] get https://myowncloudserver/owncloud/core/css/images/ui-icons_1d2d44_256x240.png?2013-08-20t07:28:20z [http/1.1 304 not modified 16ms]\r\n[14:27:53.210] get https://myowncloudserver/owncloud/core/css/images/ui-bg_flat_100_ffffff_40x100.png?2013-08-20t07:28:20z [http/1.1 304 not modified 23ms]\r\n--\r\n[14:28:42.021] get https://myowncloudserver/owncloud/index.php/apps/files/ajax/rename.php?dir=%2fmyuser%2ftestfolder&newname=test2.txt&file=test.txt [http/1.1 200 ok 337ms]\r\n--\r\n[14:28:49.716] post https://myowncloudserver/owncloud/index.php/apps/files/ajax/delete.php [http/1.1 200 ok 317ms]\r\n[14:28:49.717] get https://myowncloudserver/owncloud/core/img/loading.gif [http/1.1 304 not modified 5ms]\r\n--\r\n[14:28:56.139] post https://myowncloudserver/owncloud/index.php/apps/files/ajax/delete.php [http/1.1 200 ok 413ms]\r\n```\r\n","closed_by":{"login":"pvince81","id":277525,"avatar_url":"https://gravatar.com/avatar/e446b529679416eb70eafb4ca4da5bbe?d=https%3a%2f%2fidenticons.github.com%2f89d7c394e6dcdf87a91c75ac3b2ccbe8.png&r=x","gravatar_id":"e446b529679416eb70eafb4ca4da5bbe","url":"https://api.github.com/users/pvince81","html_url":"https://github.com/pvince81","followers_url":"https://api.github.com/users/pvince81/followers","following_url":"https://api.github.com/users/pvince81/following{/other_user}","gists_url":"https://api.github.com/users/pvince81/gists{/gist_id}","starred_url":"https://api.github.com/users/pvince81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvince81/subscriptions","organizations_url":"https://api.github.com/users/pvince81/orgs","repos_url":"https://api.github.com/users/pvince81/repos","events_url":"https://api.github.com/users/pvince81/events{/privacy}","received_events_url":"https://api.github.com/users/pvince81/received_events","type":"user","site_admin":false}}