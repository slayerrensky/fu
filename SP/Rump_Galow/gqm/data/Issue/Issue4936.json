{"url":"https://api.github.com/repos/owncloud/core/issues/4936","labels_url":"https://api.github.com/repos/owncloud/core/issues/4936/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/4936/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/4936/events","html_url":"https://github.com/owncloud/core/issues/4936","id":19858589,"number":4936,"title":"speed up sync by keeping etag history","user":{"login":"icewind1991","id":1283854,"avatar_url":"https://gravatar.com/avatar/7c20f90ca5df67dd2cad22a8e2f80d8f?d=https%3a%2f%2fidenticons.github.com%2fc818423776eba38604496a7caddc0251.png&r=x","gravatar_id":"7c20f90ca5df67dd2cad22a8e2f80d8f","url":"https://api.github.com/users/icewind1991","html_url":"https://github.com/icewind1991","followers_url":"https://api.github.com/users/icewind1991/followers","following_url":"https://api.github.com/users/icewind1991/following{/other_user}","gists_url":"https://api.github.com/users/icewind1991/gists{/gist_id}","starred_url":"https://api.github.com/users/icewind1991/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icewind1991/subscriptions","organizations_url":"https://api.github.com/users/icewind1991/orgs","repos_url":"https://api.github.com/users/icewind1991/repos","events_url":"https://api.github.com/users/icewind1991/events{/privacy}","received_events_url":"https://api.github.com/users/icewind1991/received_events","type":"user","site_admin":false},"labels":[{"url":"https://api.github.com/repos/owncloud/core/labels/enhancement","name":"enhancement","color":"02e10c"}],"state":"open","assignee":{"login":"icewind1991","id":1283854,"avatar_url":"https://gravatar.com/avatar/7c20f90ca5df67dd2cad22a8e2f80d8f?d=https%3a%2f%2fidenticons.github.com%2fc818423776eba38604496a7caddc0251.png&r=x","gravatar_id":"7c20f90ca5df67dd2cad22a8e2f80d8f","url":"https://api.github.com/users/icewind1991","html_url":"https://github.com/icewind1991","followers_url":"https://api.github.com/users/icewind1991/followers","following_url":"https://api.github.com/users/icewind1991/following{/other_user}","gists_url":"https://api.github.com/users/icewind1991/gists{/gist_id}","starred_url":"https://api.github.com/users/icewind1991/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icewind1991/subscriptions","organizations_url":"https://api.github.com/users/icewind1991/orgs","repos_url":"https://api.github.com/users/icewind1991/repos","events_url":"https://api.github.com/users/icewind1991/events{/privacy}","received_events_url":"https://api.github.com/users/icewind1991/received_events","type":"user","site_admin":false},"milestone":null,"comments":0,"created_at":"2013-09-21t15:54:32z","updated_at":"2013-09-21t15:54:32z","closed_at":null,"pull_request":{"html_url":null,"diff_url":null,"patch_url":null},"body":"as a way to speed up the sync client getting all the changes made on the server it might be an idea to keep the history of etags for the root folder of each user and the time that etag was generated.\r\n\r\nwith such a history in place the sync client could send a request to the server with it's own last known etag of the root folder which the server can use to easily get a list of all changed files and folder on the server since the last sync. if the server sends a fill of all changed files with their new etags and the new etags of all parent folders a download-only sync can be done with 0 propfinds, leaving only a single request overhead instead of having to run a propfind against all changed folders.\r\n\r\nthe query for listing all changes made only takes, after creating a new index, around 1 ms with 15000 files in the filecache in my test db.\r\n\r\ncc @dragotin @deepdiver1975 @karlitschek @bartv2 ","closed_by":null}