{"url":"https://api.github.com/repos/owncloud/core/issues/4347","labels_url":"https://api.github.com/repos/owncloud/core/issues/4347/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/4347/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/4347/events","html_url":"https://github.com/owncloud/core/issues/4347","id":17770918,"number":4347,"title":"\"no such column: folders.deleted_at\" error after upgrade to 5.0.9","user":{"login":"loco79","id":5184740,"avatar_url":"https://gravatar.com/avatar/920ba316fcc58411bf6d8a34581f4d1c?d=https%3a%2f%2fidenticons.github.com%2f3acbed47eb29d2c11dcdffc86d15286e.png&r=x","gravatar_id":"920ba316fcc58411bf6d8a34581f4d1c","url":"https://api.github.com/users/loco79","html_url":"https://github.com/loco79","followers_url":"https://api.github.com/users/loco79/followers","following_url":"https://api.github.com/users/loco79/following{/other_user}","gists_url":"https://api.github.com/users/loco79/gists{/gist_id}","starred_url":"https://api.github.com/users/loco79/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/loco79/subscriptions","organizations_url":"https://api.github.com/users/loco79/orgs","repos_url":"https://api.github.com/users/loco79/repos","events_url":"https://api.github.com/users/loco79/events{/privacy}","received_events_url":"https://api.github.com/users/loco79/received_events","type":"user","site_admin":false},"labels":[],"state":"closed","assignee":null,"milestone":null,"comments":3,"created_at":"2013-08-07t20:10:20z","updated_at":"2013-08-08t14:12:59z","closed_at":"2013-08-07t21:26:18z","pull_request":{"html_url":null,"diff_url":null,"patch_url":null},"body":"after upgrading to 5.0.9 i have multiple \"no such column: folders.deleted_at\" errors in the owncloud log file. cannot find any disfunctions yet, but error is marked as 'fatal'.\r\n\r\ni have started the upgrade multiple times because of missing permissions on backup directory. doesn't the database upgrade finished correctly? could i start it again?\r\n\r\n### server configuration\r\noperating system: ubuntu server 12.04.2 lts\r\nweb server: apache/2.2.22\r\ndatabase: sqlite (default)\r\nphp version: 5.3.10-1ubuntu3.7\r\nowncloud version: 5.0.9\r\n\r\n\r\n#### owncloud log (data/owncloud.log)\r\n...\r\n{\"app\":\"php\",\"message\":\"undefined index: unencrypted_size at \\/var\\/www\\/owncloud\\/lib\\/files\\/cache\\/cache.php#136\",\"level\":2,\"time\":1372325147}\r\n{\"app\":\"php\",\"message\":\"undefined index: unencrypted_size at \\/var\\/www\\/owncloud\\/lib\\/files\\/cache\\/cache.php#136\",\"level\":2,\"time\":1372325147}\r\n{\"app\":\"php\",\"message\":\"undefined index: unencrypted_size at \\/var\\/www\\/owncloud\\/lib\\/files\\/cache\\/cache.php#136\",\"level\":2,\"time\":1372325147}\r\n{\"app\":\"php\",\"message\":\"undefined index: unencrypted_size at \\/var\\/www\\/owncloud\\/lib\\/files\\/cache\\/cache.php#136\",\"level\":2,\"time\":1372325147}\r\n{\"app\":\"php\",\"message\":\"undefined index: unencrypted_size at \\/var\\/www\\/owncloud\\/lib\\/files\\/cache\\/cache.php#136\",\"level\":2,\"time\":1372325147}\r\n{\"app\":\"php\",\"message\":\"undefined index: unencrypted_size at \\/var\\/www\\/owncloud\\/lib\\/files\\/cache\\/cache.php#136\",\"level\":2,\"time\":1372325176}\r\n{\"app\":\"php\",\"message\":\"undefined index: unencrypted_size at \\/var\\/www\\/owncloud\\/lib\\/files\\/cache\\/cache.php#136\",\"level\":2,\"time\":1372325177}\r\n{\"app\":\"php\",\"message\":\"undefined index: unencrypted_size at \\/var\\/www\\/owncloud\\/lib\\/files\\/cache\\/cache.php#136\",\"level\":2,\"time\":1372325177}\r\n{\"app\":\"php\",\"message\":\"undefined index: unencrypted_size at \\/var\\/www\\/owncloud\\/lib\\/files\\/cache\\/cache.php#136\",\"level\":2,\"time\":1372325177}\r\n{\"app\":\"php\",\"message\":\"undefined index: unencrypted_size at \\/var\\/www\\/owncloud\\/lib\\/files\\/cache\\/cache.php#136\",\"level\":2,\"time\":1372325177}\r\n{\"app\":\"php\",\"message\":\"undefined index: unencrypted_size at \\/var\\/www\\/owncloud\\/lib\\/files\\/cache\\/cache.php#136\",\"level\":2,\"time\":1372325206}\r\n{\"app\":\"php\",\"message\":\"undefined index: unencrypted_size at \\/var\\/www\\/owncloud\\/lib\\/files\\/cache\\/cache.php#136\",\"level\":2,\"time\":1372325206}\r\n{\"app\":\"php\",\"message\":\"undefined index: unencrypted_size at \\/var\\/www\\/owncloud\\/lib\\/files\\/cache\\/cache.php#136\",\"level\":2,\"time\":1372325206}\r\n{\"app\":\"php\",\"message\":\"undefined index: unencrypted_size at \\/var\\/www\\/owncloud\\/lib\\/files\\/cache\\/cache.php#136\",\"level\":2,\"time\":1372325206}\r\n{\"app\":\"php\",\"message\":\"undefined index: unencrypted_size at \\/var\\/www\\/owncloud\\/lib\\/files\\/cache\\/cache.php#136\",\"level\":2,\"time\":1372325206}\r\n{\"app\":\"php\",\"message\":\"undefined index: unencrypted_size at \\/var\\/www\\/owncloud\\/lib\\/files\\/cache\\/cache.php#136\",\"level\":2,\"time\":1372325235}\r\n{\"app\":\"php\",\"message\":\"undefined index: unencrypted_size at \\/var\\/www\\/owncloud\\/lib\\/files\\/cache\\/cache.php#136\",\"level\":2,\"time\":1372325236}\r\n{\"app\":\"php\",\"message\":\"undefined index: unencrypted_size at \\/var\\/www\\/owncloud\\/lib\\/files\\/cache\\/cache.php#136\",\"level\":2,\"time\":1372325236}\r\n{\"app\":\"php\",\"message\":\"undefined index: unencrypted_size at \\/var\\/www\\/owncloud\\/lib\\/files\\/cache\\/cache.php#136\",\"level\":2,\"time\":1372325236}\r\n{\"app\":\"php\",\"message\":\"undefined index: unencrypted_size at \\/var\\/www\\/owncloud\\/lib\\/files\\/cache\\/cache.php#136\",\"level\":2,\"time\":1372325236}\r\n{\"app\":\"core\",\"message\":\"starting upgrade from 5.0.8 to 5.0.12\",\"level\":2,\"time\":1372325236}\r\n{\"app\":\"php\",\"message\":\"json_encode(): invalid utf-8 sequence in argument at \\/var\\/www\\/owncloud\\/apps\\/appframework\\/http\\/jsonresponse.php#81\",\"level\":2,\"time\":1372326142}\r\n{\"app\":\"php\",\"message\":\"json_encode(): invalid utf-8 sequence in argument at \\/var\\/www\\/owncloud\\/apps\\/appframework\\/http\\/jsonresponse.php#81\",\"level\":2,\"time\":1372326184}\r\n{\"app\":\"php\",\"message\":\"json_encode(): invalid utf-8 sequence in argument at \\/var\\/www\\/owncloud\\/apps\\/appframework\\/http\\/jsonresponse.php#81\",\"level\":2,\"time\":1372326207}\r\n{\"app\":\"php\",\"message\":\"json_encode(): invalid utf-8 sequence in argument at \\/var\\/www\\/owncloud\\/apps\\/appframework\\/http\\/jsonresponse.php#81\",\"level\":2,\"time\":1372326210}\r\n{\"app\":\"php\",\"message\":\"json_encode(): invalid utf-8 sequence in argument at \\/var\\/www\\/owncloud\\/apps\\/appframework\\/http\\/jsonresponse.php#81\",\"level\":2,\"time\":1372326219}\r\n{\"app\":\"php\",\"message\":\"json_encode(): invalid utf-8 sequence in argument at \\/var\\/www\\/owncloud\\/apps\\/appframework\\/http\\/jsonresponse.php#81\",\"level\":2,\"time\":1372802484}\r\n{\"app\":\"php\",\"message\":\"json_encode(): invalid utf-8 sequence in argument at \\/var\\/www\\/owncloud\\/apps\\/appframework\\/http\\/jsonresponse.php#81\",\"level\":2,\"time\":1372802503}\r\n{\"app\":\"php\",\"message\":\"json_encode(): invalid utf-8 sequence in argument at \\/var\\/www\\/owncloud\\/apps\\/appframework\\/http\\/jsonresponse.php#81\",\"level\":2,\"time\":1372802503}\r\n{\"app\":\"php\",\"message\":\"json_encode(): invalid utf-8 sequence in argument at \\/var\\/www\\/owncloud\\/apps\\/appframework\\/http\\/jsonresponse.php#81\",\"level\":2,\"time\":1372802503}\r\n{\"app\":\"php\",\"message\":\"json_encode(): invalid utf-8 sequence in argument at \\/var\\/www\\/owncloud\\/apps\\/appframework\\/http\\/jsonresponse.php#81\",\"level\":2,\"time\":1372802503}\r\n{\"app\":\"php\",\"message\":\"json_encode(): invalid utf-8 sequence in argument at \\/var\\/www\\/owncloud\\/apps\\/appframework\\/http\\/jsonresponse.php#81\",\"level\":2,\"time\":1372802503}\r\n{\"app\":\"php\",\"message\":\"json_encode(): invalid utf-8 sequence in argument at \\/var\\/www\\/owncloud\\/apps\\/appframework\\/http\\/jsonresponse.php#81\",\"level\":2,\"time\":1372802503}\r\n{\"app\":\"php\",\"message\":\"json_encode(): invalid utf-8 sequence in argument at \\/var\\/www\\/owncloud\\/apps\\/appframework\\/http\\/jsonresponse.php#81\",\"level\":2,\"time\":1372802503}\r\n{\"app\":\"core\",\"message\":\"starting upgrade from 5.0.12 to 5.0.15\",\"level\":2,\"time\":1374647677}\r\n{\"app\":\"core\",\"message\":\"starting upgrade from 5.0.12 to 5.0.15\",\"level\":2,\"time\":1374647783}\r\n{\"app\":\"core\",\"message\":\"starting upgrade from 5.0.12 to 5.0.15\",\"level\":2,\"time\":1374647802}\r\n{\"app\":\"updater\",\"message\":\"retrieving http:\\/\\/download.owncloud.org\\/community\\/owncloud-5.0.9.tar.bz2\",\"level\":3,\"time\":1374648941}\r\n{\"app\":\"updater\",\"message\":\"unable to create \\/var\\/www\\/owncloud\\/backup\\/5.0.15\",\"level\":3,\"time\":1374648941}\r\n{\"app\":\"core\",\"message\":\"adding user backend instance of oc_user_database.\",\"level\":0,\"time\":1374649017}\r\n{\"app\":\"core\",\"message\":\"include path for class \\\"oc_external\\\" starts with \\\"apps\\/\\\"\",\"level\":0,\"time\":1374649017}\r\n{\"app\":\"core\",\"message\":\"adding user backend instance of oc_user_database.\",\"level\":0,\"time\":1374649018}\r\n{\"app\":\"core\",\"message\":\"adding user backend instance of oc_user_database.\",\"level\":0,\"time\":1374649018}\r\n{\"app\":\"core\",\"message\":\"adding user backend instance of oc_user_database.\",\"level\":0,\"time\":1374649018}\r\n{\"app\":\"core\",\"message\":\"adding user backend instance of oc_user_database.\",\"level\":0,\"time\":1374649019}\r\n{\"app\":\"core\",\"message\":\"adding user backend instance of oc_user_database.\",\"level\":0,\"time\":1374649028}\r\n{\"app\":\"core\",\"message\":\"include path for class \\\"oc_external\\\" starts with \\\"apps\\/\\\"\",\"level\":0,\"time\":1374649028}\r\n{\"app\":\"core\",\"message\":\"adding user backend instance of oc_user_database.\",\"level\":0,\"time\":1374649030}\r\n{\"app\":\"core\",\"message\":\"include path for class \\\"oc_external\\\" starts with \\\"apps\\/\\\"\",\"level\":0,\"time\":1374649030}\r\n{\"app\":\"core\",\"message\":\"adding user backend instance of oc_user_database.\",\"level\":0,\"time\":1374649047}\r\n{\"app\":\"core\",\"message\":\"adding user backend instance of oc_user_database.\",\"level\":0,\"time\":1374649048}\r\n{\"app\":\"core\",\"message\":\"adding user backend instance of oc_user_database.\",\"level\":0,\"time\":1374649048}\r\n{\"app\":\"core\",\"message\":\"adding user backend instance of oc_user_database.\",\"level\":0,\"time\":1374649048}\r\n{\"app\":\"core\",\"message\":\"adding user backend instance of oc_user_database.\",\"level\":0,\"time\":1374649077}\r\n{\"app\":\"core\",\"message\":\"adding user backend instance of oc_user_database.\",\"level\":0,\"time\":1374649077}\r\n{\"app\":\"core\",\"message\":\"adding user backend instance of oc_user_database.\",\"level\":0,\"time\":1374649077}\r\n{\"app\":\"core\",\"message\":\"adding user backend instance of oc_user_database.\",\"level\":0,\"time\":1374649078}\r\n{\"app\":\"core\",\"message\":\"adding user backend instance of oc_user_database.\",\"level\":0,\"time\":1374649106}\r\n{\"app\":\"core\",\"message\":\"adding user backend instance of oc_user_database.\",\"level\":0,\"time\":1374649107}\r\n{\"app\":\"core\",\"message\":\"adding user backend instance of oc_user_database.\",\"level\":0,\"time\":1374649107}\r\n{\"app\":\"core\",\"message\":\"adding user backend instance of oc_user_database.\",\"level\":0,\"time\":1374649108}\r\n{\"app\":\"core\",\"message\":\"adding user backend instance of oc_user_database.\",\"level\":0,\"time\":1374649136}\r\n{\"app\":\"core\",\"message\":\"adding user backend instance of oc_user_database.\",\"level\":0,\"time\":1374649136}\r\n{\"app\":\"core\",\"message\":\"adding user backend instance of oc_user_database.\",\"level\":0,\"time\":1374649136}\r\n{\"app\":\"core\",\"message\":\"adding user backend instance of oc_user_database.\",\"level\":0,\"time\":1374649137}\r\n{\"app\":\"core\",\"message\":\"adding user backend instance of oc_user_database.\",\"level\":0,\"time\":1374649138}\r\n{\"app\":\"core\",\"message\":\"include path for class \\\"oc_external\\\" starts with \\\"apps\\/\\\"\",\"level\":0,\"time\":1374649138}\r\n{\"app\":\"core\",\"message\":\"adding user backend instance of oc_user_database.\",\"level\":0,\"time\":1374649159}\r\n{\"app\":\"core\",\"message\":\"include path for class \\\"oc_external\\\" starts with \\\"apps\\/\\\"\",\"level\":0,\"time\":1374649160}\r\n{\"app\":\"core\",\"message\":\"adding user backend instance of oc_user_database.\",\"level\":0,\"time\":1374649166}\r\n{\"app\":\"core\",\"message\":\"adding user backend instance of oc_user_database.\",\"level\":0,\"time\":1374649166}\r\n{\"app\":\"core\",\"message\":\"adding user backend instance of oc_user_database.\",\"level\":0,\"time\":1374649166}\r\n{\"app\":\"core\",\"message\":\"adding user backend instance of oc_user_database.\",\"level\":0,\"time\":1374649167}\r\n{\"app\":\"core\",\"message\":\"adding user backend instance of oc_user_database.\",\"level\":0,\"time\":1374649173}\r\n{\"app\":\"core\",\"message\":\"include path for class \\\"oc_external\\\" starts with \\\"apps\\/\\\"\",\"level\":0,\"time\":1374649173}\r\n{\"app\":\"updater\",\"message\":\"retrieving http:\\/\\/download.owncloud.org\\/community\\/owncloud-5.0.9.tar.bz2\",\"level\":3,\"time\":1374649215}\r\n{\"app\":\"updater\",\"message\":\"unable to create \\/var\\/www\\/owncloud\\/backup\\/5.0.15\",\"level\":3,\"time\":1374649215}\r\n{\"app\":\"core\",\"message\":\"starting upgrade from 5.0.12 to 5.0.15\",\"level\":2,\"time\":1374649566}\r\n{\"app\":\"php\",\"message\":\"sqlstate[hy000]: general error: 1 no such column: folders.deleted_at at \\/var\\/www\\/owncloud\\/lib\\/db.php#391\",\"level\":4,\"time\":1374650654}\r\n{\"app\":\"php\",\"message\":\"sqlstate[hy000]: general error: 1 no such column: folders.deleted_at at \\/var\\/www\\/owncloud\\/lib\\/db.php#391\",\"level\":4,\"time\":1374650897}\r\n{\"app\":\"php\",\"message\":\"sqlstate[hy000]: general error: 1 no such column: feeds.deleted_at at \\/var\\/www\\/owncloud\\/lib\\/db.php#391\",\"level\":4,\"time\":1374650897}\r\n{\"app\":\"php\",\"message\":\"sqlstate[hy000]: general error: 1 no such column: folders.deleted_at at \\/var\\/www\\/owncloud\\/lib\\/db.php#391\",\"level\":4,\"time\":1374650898}\r\n{\"app\":\"php\",\"message\":\"sqlstate[hy000]: general error: 1 no such column: folders.deleted_at at \\/var\\/www\\/owncloud\\/lib\\/db.php#391\",\"level\":4,\"time\":1374650907}\r\n{\"app\":\"php\",\"message\":\"sqlstate[hy000]: general error: 1 no such column: folders.deleted_at at \\/var\\/www\\/owncloud\\/lib\\/db.php#391\",\"level\":4,\"time\":1374650908}\r\n{\"app\":\"php\",\"message\":\"sqlstate[hy000]: general error: 1 no such column: folders.deleted_at at \\/var\\/www\\/owncloud\\/lib\\/db.php#391\",\"level\":4,\"time\":1374650909}\r\n{\"app\":\"php\",\"message\":\"sqlstate[hy000]: general error: 1 no such column: folders.deleted_at at \\/var\\/www\\/owncloud\\/lib\\/db.php#391\",\"level\":4,\"time\":1375894994}\r\n{\"app\":\"php\",\"message\":\"sqlstate[hy000]: general error: 1 no such column: folders.deleted_at at \\/var\\/www\\/owncloud\\/lib\\/db.php#391\",\"level\":4,\"time\":1375894995}\r\n{\"app\":\"php\",\"message\":\"sqlstate[hy000]: general error: 1 no such column: folders.deleted_at at \\/var\\/www\\/owncloud\\/lib\\/db.php#391\",\"level\":4,\"time\":1375895026}\r\n{\"app\":\"php\",\"message\":\"sqlstate[hy000]: general error: 1 no such column: folders.deleted_at at \\/var\\/www\\/owncloud\\/lib\\/db.php#391\",\"level\":4,\"time\":1375895027}\r\n{\"app\":\"php\",\"message\":\"sqlstate[hy000]: general error: 1 no such column: folders.deleted_at at \\/var\\/www\\/owncloud\\/lib\\/db.php#391\",\"level\":4,\"time\":1375895028}\r\n{\"app\":\"php\",\"message\":\"sqlstate[hy000]: general error: 1 no such column: folders.deleted_at at \\/var\\/www\\/owncloud\\/lib\\/db.php#391\",\"level\":4,\"time\":1375895079}\r\n{\"app\":\"php\",\"message\":\"sqlstate[hy000]: general error: 1 no such column: folders.deleted_at at \\/var\\/www\\/owncloud\\/lib\\/db.php#391\",\"level\":4,\"time\":1375895083}\r\n{\"app\":\"php\",\"message\":\"sqlstate[hy000]: general error: 1 no such column: folders.deleted_at at \\/var\\/www\\/owncloud\\/lib\\/db.php#391\",\"level\":4,\"time\":1375895084}\r\n{\"app\":\"php\",\"message\":\"undefined offset: 1 at \\/var\\/www\\/owncloud\\/apps\\/gallery\\/ajax\\/gallery.php#12\",\"level\":2,\"time\":1375895087}\r\n","closed_by":{"login":"raydiation","id":195053,"avatar_url":"https://gravatar.com/avatar/aa0d7b7302e0d7f4f9513c23b571383a?d=https%3a%2f%2fidenticons.github.com%2faf0a25e27510f77d97634a6bbe653b13.png&r=x","gravatar_id":"aa0d7b7302e0d7f4f9513c23b571383a","url":"https://api.github.com/users/raydiation","html_url":"https://github.com/raydiation","followers_url":"https://api.github.com/users/raydiation/followers","following_url":"https://api.github.com/users/raydiation/following{/other_user}","gists_url":"https://api.github.com/users/raydiation/gists{/gist_id}","starred_url":"https://api.github.com/users/raydiation/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raydiation/subscriptions","organizations_url":"https://api.github.com/users/raydiation/orgs","repos_url":"https://api.github.com/users/raydiation/repos","events_url":"https://api.github.com/users/raydiation/events{/privacy}","received_events_url":"https://api.github.com/users/raydiation/received_events","type":"user","site_admin":false}}