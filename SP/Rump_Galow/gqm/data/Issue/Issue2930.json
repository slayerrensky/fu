{"url":"https://api.github.com/repos/owncloud/core/issues/2930","labels_url":"https://api.github.com/repos/owncloud/core/issues/2930/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/2930/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/2930/events","html_url":"https://github.com/owncloud/core/issues/2930","id":13189193,"number":2930,"title":"autoupdate from 5.0.3 --> 5.0.4 fails","user":{"login":"markbremen","id":4158599,"avatar_url":"https://gravatar.com/avatar/db15fe9209387a1b9da72e1a0cf8f695?d=https%3a%2f%2fidenticons.github.com%2fbc372898d5ffe944137704b67d9a9dce.png&r=x","gravatar_id":"db15fe9209387a1b9da72e1a0cf8f695","url":"https://api.github.com/users/markbremen","html_url":"https://github.com/markbremen","followers_url":"https://api.github.com/users/markbremen/followers","following_url":"https://api.github.com/users/markbremen/following{/other_user}","gists_url":"https://api.github.com/users/markbremen/gists{/gist_id}","starred_url":"https://api.github.com/users/markbremen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markbremen/subscriptions","organizations_url":"https://api.github.com/users/markbremen/orgs","repos_url":"https://api.github.com/users/markbremen/repos","events_url":"https://api.github.com/users/markbremen/events{/privacy}","received_events_url":"https://api.github.com/users/markbremen/received_events","type":"user","site_admin":false},"labels":[{"url":"https://api.github.com/repos/owncloud/core/labels/update","name":"update","color":"e10c02"}],"state":"closed","assignee":null,"milestone":null,"comments":8,"created_at":"2013-04-15t08:24:11z","updated_at":"2013-08-08t15:00:42z","closed_at":"2013-08-08t15:00:42z","pull_request":{"html_url":null,"diff_url":null,"patch_url":null},"body":"running opensuse 12.3 / sqlite\r\n\r\nafter autoupdate syystem turns into maintennace mode and nothing changed. change mode to \"false\" and restart, but no effect.\r\n\r\nerror:\r\n\r\naktualisiere owncloud auf version 5.0.4. dies kã¶nnte eine weile dauern.\r\n\r\nturned on maintenance mode\r\n\r\nfailed to update database structure (mdb2 error: already exists, _doquery: [error message: could not execute statement] [last executed query: create table \"oc_permissions\" (\"fileid\" integer default 0 not null, \"user\" varchar(64) default ' ' not null, \"permissions\" integer default 0 not null)] [native code: 1] [native message: table \"oc_permissions\" already exists] )\r\n\r\nthe update was unsuccessful. please report this issue to the owncloud community.\r\n\r\nlogfile oc (data/owncloud.log)\r\n\r\n{\"app\":\"files_external\",\"message\":\"error: (400) path must not be empty\\n\",\"level\":3,\"time\":1365977002}\r\n{\"app\":\"files_external\",\"message\":\"error: (400) path must not be empty\\n\",\"level\":3,\"time\":1365977004}\r\n{\"app\":\"php\",\"message\":\"sqlite3::query(): unable to execute statement: database is locked at \\/srv\\/www\\/htdocs\\/cloud\\/lib\\/mdb2\\/driver\\/sqlite3.php#493\",\"level\":2,\"time\":1365977018}\r\n{\"app\":\"php\",\"message\":\"sqlite3::query(): unable to prepare statement: 1, table \\\"oc_appconfig\\\" already exists at \\/srv\\/www\\/htdocs\\/cloud\\/lib\\/mdb2\\/driver\\/sqlite3.php#493\",\"level\":2,\"time\":1365977018}\r\n{\"app\":\"core\",\"message\":\"failed to update database structure (mdb2 error: already exists, _doquery: [error message: could not execute statement]\\n[last executed query: create  table \\\"oc_appconfig\\\" (\\\"appid\\\" varchar(32) default ' ' not null, \\\"configkey\\\" varchar(64) default ' ' not null, \\\"configvalue\\\" longtext not null)]\\n[native code: 1]\\n[native message: table \\\"oc_appconfig\\\" already exists]\\n)\",\"level\":4,\"time\":1365977018}\r\n{\"app\":\"php\",\"message\":\"sqlite3::query(): unable to prepare statement: 1, there is already another table or index with this name: __oc_permissions at \\/srv\\/www\\/htdocs\\/cloud\\/lib\\/mdb2\\/driver\\/sqlite3.php#493\",\"level\":2,\"time\":1366017226}\r\n{\"app\":\"php\",\"message\":\"sqlite3::query(): unable to prepare statement: 1, table \\\"oc_permissions\\\" already exists at \\/srv\\/www\\/htdocs\\/cloud\\/lib\\/mdb2\\/driver\\/sqlite3.php#493\",\"level\":2,\"time\":1366017226}\r\n{\"app\":\"core\",\"message\":\"failed to update database structure (mdb2 error: already exists, _doquery: [error message: could not execute statement]\\n[last executed query: create  table \\\"oc_permissions\\\" (\\\"fileid\\\" integer default 0 not null, \\\"user\\\" varchar(64) default ' ' not null, \\\"permissions\\\" integer default 0 not null)]\\n[native code: 1]\\n[native message: table \\\"oc_permissions\\\" already exists]\\n)\",\"level\":4,\"time\":1366017226}\r\n{\"app\":\"php\",\"message\":\"sqlite3::query(): unable to prepare statement: 1, there is already another table or index with this name: __oc_permissions at \\/srv\\/www\\/htdocs\\/cloud\\/lib\\/mdb2\\/driver\\/sqlite3.php#493\",\"level\":2,\"time\":1366017542}\r\n{\"app\":\"php\",\"message\":\"sqlite3::query(): unable to prepare statement: 1, table \\\"oc_permissions\\\" already exists at \\/srv\\/www\\/htdocs\\/cloud\\/lib\\/mdb2\\/driver\\/sqlite3.php#493\",\"level\":2,\"time\":1366017542}\r\n{\"app\":\"core\",\"message\":\"failed to update database structure (mdb2 error: already exists, _doquery: [error message: could not execute statement]\\n[last executed query: create  table \\\"oc_permissions\\\" (\\\"fileid\\\" integer default 0 not null, \\\"user\\\" varchar(64) default ' ' not null, \\\"permissions\\\" integer default 0 not null)]\\n[native code: 1]\\n[native message: table \\\"oc_permissions\\\" already exists]\\n)\",\"level\":4,\"time\":1366017542}\r\n","closed_by":{"login":"jancborchardt","id":925062,"avatar_url":"https://gravatar.com/avatar/2fd3f4d5d762955e5b603794a888fa97?d=https%3a%2f%2fidenticons.github.com%2f84ec51f9ceed468217d4e13abf78da9c.png&r=x","gravatar_id":"2fd3f4d5d762955e5b603794a888fa97","url":"https://api.github.com/users/jancborchardt","html_url":"https://github.com/jancborchardt","followers_url":"https://api.github.com/users/jancborchardt/followers","following_url":"https://api.github.com/users/jancborchardt/following{/other_user}","gists_url":"https://api.github.com/users/jancborchardt/gists{/gist_id}","starred_url":"https://api.github.com/users/jancborchardt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jancborchardt/subscriptions","organizations_url":"https://api.github.com/users/jancborchardt/orgs","repos_url":"https://api.github.com/users/jancborchardt/repos","events_url":"https://api.github.com/users/jancborchardt/events{/privacy}","received_events_url":"https://api.github.com/users/jancborchardt/received_events","type":"user","site_admin":false}}