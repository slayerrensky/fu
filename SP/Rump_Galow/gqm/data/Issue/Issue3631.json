{"url":"https://api.github.com/repos/owncloud/core/issues/3631","labels_url":"https://api.github.com/repos/owncloud/core/issues/3631/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/3631/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/3631/events","html_url":"https://github.com/owncloud/core/issues/3631","id":15269331,"number":3631,"title":"download of files named \"true\" or \"false\" impossible via download link","user":{"login":"roha4000","id":3509963,"avatar_url":"https://gravatar.com/avatar/95b8e2447ddfb0836c2c4ad8489b9ab2?d=https%3a%2f%2fidenticons.github.com%2f8c94cd35b69d168f0351fdb3c2eae3d7.png&r=x","gravatar_id":"95b8e2447ddfb0836c2c4ad8489b9ab2","url":"https://api.github.com/users/roha4000","html_url":"https://github.com/roha4000","followers_url":"https://api.github.com/users/roha4000/followers","following_url":"https://api.github.com/users/roha4000/following{/other_user}","gists_url":"https://api.github.com/users/roha4000/gists{/gist_id}","starred_url":"https://api.github.com/users/roha4000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roha4000/subscriptions","organizations_url":"https://api.github.com/users/roha4000/orgs","repos_url":"https://api.github.com/users/roha4000/repos","events_url":"https://api.github.com/users/roha4000/events{/privacy}","received_events_url":"https://api.github.com/users/roha4000/received_events","type":"user","site_admin":false},"labels":[{"url":"https://api.github.com/repos/owncloud/core/labels/bug","name":"bug","color":"fc2929"},{"url":"https://api.github.com/repos/owncloud/core/labels/v5.x","name":"v5.x","color":"ededed"}],"state":"closed","assignee":{"login":"bantu","id":189375,"avatar_url":"https://gravatar.com/avatar/88483d87947219efecfc570465c753b2?d=https%3a%2f%2fidenticons.github.com%2fcdc48f189c0e2e8a870f3d54615a2f0d.png&r=x","gravatar_id":"88483d87947219efecfc570465c753b2","url":"https://api.github.com/users/bantu","html_url":"https://github.com/bantu","followers_url":"https://api.github.com/users/bantu/followers","following_url":"https://api.github.com/users/bantu/following{/other_user}","gists_url":"https://api.github.com/users/bantu/gists{/gist_id}","starred_url":"https://api.github.com/users/bantu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bantu/subscriptions","organizations_url":"https://api.github.com/users/bantu/orgs","repos_url":"https://api.github.com/users/bantu/repos","events_url":"https://api.github.com/users/bantu/events{/privacy}","received_events_url":"https://api.github.com/users/bantu/received_events","type":"user","site_admin":false},"milestone":null,"comments":4,"created_at":"2013-06-07t12:14:31z","updated_at":"2013-08-08t07:03:51z","closed_at":"2013-08-08t07:03:51z","pull_request":{"html_url":null,"diff_url":null,"patch_url":null},"body":"**the problem**\r\nit is not possible to download a file called \"true\" or \"false\" (caseinsensitive) when clicking the link \"download\" due to the result of json_decode().\r\n\r\nowncloud versions: 5.0.6, 5.07 tested and possibly all versions below.\r\n\r\n**how to reproduce**\r\njust create a file named true and false.\r\n\r\n**further information**\r\nbelow some further information and a hotfix provided by my colleague herbert pophal.\r\n\r\n\"true\" is not found, and \"false\" results in a download of the whole directory. the reason is that apps/files/ajax/download.php receives an invalid json string when one file is addressed:\r\n\r\n* \"myfile\" instead of '[\"myfile\"]': this works. \r\n* \"true\" instead of '[\"true\"]': does not work, since json_decode()  returns true\r\n* \"false\" instead of '[\"false\"]': does not work, since json_decode() returns false\r\n\r\n\r\n**hotfix**\r\nbelow is a hotfix but i think a correct parametrization would be better code. \r\nin contrast, apps/files/ajax/delete.php receives a valid json string for a single file to be deleted.\r\n\r\n```\r\n--- o/apps/files/ajax/download.php\t2013-05-17 14:57:59.000000000 +0200\r\n+++ n/apps/files/ajax/download.php\t2013-05-30 11:16:49.131474624 +0200\r\n@@ -35,7 +35,8 @@\r\n \r\n $files_list = json_decode($files);\r\n // in case we get only a single file\r\n-if ($files_list === null ) {\r\n+// (hp) we should allow the names \"true\" and \"false\" as well!\r\n+if ($files_list === null || $files_list === true || $files_list === false ) {\r\n \t$files_list = array($files);\r\n }\r\n```","closed_by":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false}}