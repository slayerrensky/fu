{"url":"https://api.github.com/repos/owncloud/core/issues/4186","labels_url":"https://api.github.com/repos/owncloud/core/issues/4186/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/4186/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/4186/events","html_url":"https://github.com/owncloud/core/issues/4186","id":17176933,"number":4186,"title":"ldaps no longer works as of oc 5.0.7","user":{"login":"k4k","id":524645,"avatar_url":"https://gravatar.com/avatar/d2370393332e368172e3c4010c60583e?d=https%3a%2f%2fidenticons.github.com%2f43224029fd81008db71a32b3d37e8c30.png&r=x","gravatar_id":"d2370393332e368172e3c4010c60583e","url":"https://api.github.com/users/k4k","html_url":"https://github.com/k4k","followers_url":"https://api.github.com/users/k4k/followers","following_url":"https://api.github.com/users/k4k/following{/other_user}","gists_url":"https://api.github.com/users/k4k/gists{/gist_id}","starred_url":"https://api.github.com/users/k4k/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/k4k/subscriptions","organizations_url":"https://api.github.com/users/k4k/orgs","repos_url":"https://api.github.com/users/k4k/repos","events_url":"https://api.github.com/users/k4k/events{/privacy}","received_events_url":"https://api.github.com/users/k4k/received_events","type":"user","site_admin":false},"labels":[{"url":"https://api.github.com/repos/owncloud/core/labels/app%3auser_ldap","name":"app:user_ldap","color":"02d7e1"}],"state":"closed","assignee":null,"milestone":null,"comments":13,"created_at":"2013-07-24t19:43:10z","updated_at":"2013-09-09t20:08:44z","closed_at":"2013-09-09t20:08:44z","pull_request":{"html_url":null,"diff_url":null,"patch_url":null},"body":"### expected behaviour\r\nldap should bind over ssl as well as non-ssl connections\r\n\r\n### actual behaviour\r\ni created a vm snapshot of my production system and attempted to upgrade to 5.0.9 from 5.0.6. ldap authentication no longer worked. i rolled back to my snapshot of 5.0.6 and tried 5.0.8, same result. again with 5.0.7 and again the same result. i then attempted to do a clean install of oc 5.0.6 through oc 5.0.9 and found the same results. the configuration used in 5.0.6 no longer worked in any version above it. further troubleshooting revealed that plain ldap binding works without issue. this holds true for any non-ssl related port (389 and 3268 work fine).\r\n\r\n### steps to reproduce\r\n1. install oc 5.0.6\r\n2. configure ldap using a \"host\" line that begins with \"ldaps://\"\r\n3. configure port for ssl port under \"advanced\" settings\r\n4. attempt to \"test configuration\" and verify that it succeeds\r\n5. upgrade to 5.0.7 or higher\r\n6. attempt \"test configuration\" again\r\n7. remove \"ldaps://\" from host line and change to non-ssl port in \"advanced\"\r\n8. attempt \"test configuration\" again. this time it will succeed\r\n\r\n### server configuration\r\noperating system: rhel 6.4\r\n\r\nweb server: httpd-2.2.15-28.el6_4.x86_64\r\n\r\ndatabase: mysql-server-5.1.69-1.el6_4.x86_64\r\n\r\nphp version: php-5.3.3-23.el6_4.x86_64\r\n\r\nowncloud version: 5.0.7 - 5.0.9\r\n\r\n### client configuration\r\nbrowser: firefox 22\r\n\r\noperating system: fedora 18\r\n\r\n### logs\r\n\r\n#### owncloud log (data/owncloud.log)\r\n```\r\nerror\tuser_ldap\tbind failed: -1: can't contact ldap server\tjuly 24, 2013 15:29\r\nerror\tuser_ldap\tbind failed: -1: can't contact ldap server\tjuly 24, 2013 15:29\r\n```\r\n\r\n### additional notes\r\ndo **not** attempt to place the port number at the end of the \"host\" line, you will cause the server to hang requiring apache to be restarted.","closed_by":{"login":"k4k","id":524645,"avatar_url":"https://gravatar.com/avatar/d2370393332e368172e3c4010c60583e?d=https%3a%2f%2fidenticons.github.com%2f43224029fd81008db71a32b3d37e8c30.png&r=x","gravatar_id":"d2370393332e368172e3c4010c60583e","url":"https://api.github.com/users/k4k","html_url":"https://github.com/k4k","followers_url":"https://api.github.com/users/k4k/followers","following_url":"https://api.github.com/users/k4k/following{/other_user}","gists_url":"https://api.github.com/users/k4k/gists{/gist_id}","starred_url":"https://api.github.com/users/k4k/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/k4k/subscriptions","organizations_url":"https://api.github.com/users/k4k/orgs","repos_url":"https://api.github.com/users/k4k/repos","events_url":"https://api.github.com/users/k4k/events{/privacy}","received_events_url":"https://api.github.com/users/k4k/received_events","type":"user","site_admin":false}}