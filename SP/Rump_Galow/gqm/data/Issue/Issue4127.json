{"url":"https://api.github.com/repos/owncloud/core/issues/4127","labels_url":"https://api.github.com/repos/owncloud/core/issues/4127/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/4127/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/4127/events","html_url":"https://github.com/owncloud/core/issues/4127","id":16964612,"number":4127,"title":"strange error with update 5.0.9, get http-authentication","user":{"login":"davidak","id":91113,"avatar_url":"https://gravatar.com/avatar/563a9964eab663889709242befc5da20?d=https%3a%2f%2fidenticons.github.com%2f8e8e461c17c507670ea314100f3d384f.png&r=x","gravatar_id":"563a9964eab663889709242befc5da20","url":"https://api.github.com/users/davidak","html_url":"https://github.com/davidak","followers_url":"https://api.github.com/users/davidak/followers","following_url":"https://api.github.com/users/davidak/following{/other_user}","gists_url":"https://api.github.com/users/davidak/gists{/gist_id}","starred_url":"https://api.github.com/users/davidak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidak/subscriptions","organizations_url":"https://api.github.com/users/davidak/orgs","repos_url":"https://api.github.com/users/davidak/repos","events_url":"https://api.github.com/users/davidak/events{/privacy}","received_events_url":"https://api.github.com/users/davidak/received_events","type":"user","site_admin":false},"labels":[],"state":"open","assignee":null,"milestone":null,"comments":10,"created_at":"2013-07-19t10:06:02z","updated_at":"2013-09-13t15:10:17z","closed_at":null,"pull_request":{"html_url":null,"diff_url":null,"patch_url":null},"body":"### expected behaviour\r\nworking update\r\n\r\n### actual behaviour\r\nwhile updating a http-authentication appears, can't login anymore into owncloud...\r\n\r\n### steps to reproduce\r\n1. have oc 5.0.8 installed, start update to 5.0.9\r\n2. some seconds after the progress bar hits 50%, a http-authentication appears, which isn't configured to this vhost on that owncloud works... our admins have also no answer how this can happen...\r\n\r\n![2013-07-19 11_04_30-windows media player](https://f.cloud.github.com/assets/91113/824817/9d0664f8-f052-11e2-8648-627e07d7cb18.png)\r\n\r\nthe authentication is configured to ip/xcache-admin not to the domain on that owncloud is configured.\r\n\r\nhttp://xcache.lighttpd.net/wiki/xcacheini\r\n\r\n3 so i cancel that authentication. the \"succesfull backup\"-popup appears.\r\n4 click on oc app \"files\", that authentication appears again, after cancel again, this screen appears:\r\n\r\n![2013-07-19 11_39_28-windows media player](https://f.cloud.github.com/assets/91113/824955/2ac67d1a-f057-11e2-8cd9-3080c272039d.png)\r\n\r\n5 some way i get the update done without hang in maintenance mode (same browser with reload of page or another browser)\r\n\r\n6 after that, the situation is, that on the first load of the login page that authentication appears. if i click cancel, that error appears, if i click \"ok\" without any credentials entered, i can try to login into owncloud, but fails with right credentials.\r\ni can get another browser, log in successfully with the credentials that doesnt work before, but when i change the maximum upload size in the backend (write .htaccess), that authentication appears, i click ok without entering something and get logged out of owncloud. i cant login anymore in this browser. reproducable in chrome, forefox and safari (5.1.7 windows)\r\n\r\n\r\ni reset to a snapshot of the vm where it works without errors (oc 5.0.7) and try the update to 5.0.9\r\n\r\n3 type in the correct credentials for xcache-admin, \"suc. backup\"-popup, click \"files\"-app and get this:\r\n\r\n![2013-07-19 11_56_38-windows media player](https://f.cloud.github.com/assets/91113/825061/89f52a50-f059-11e2-926c-f54a8423d2cb.png)\r\n\r\ni reload the page and get:\r\n\r\n![2013-07-19 11_57_31-windows media player](https://f.cloud.github.com/assets/91113/825063/a7399358-f059-11e2-882e-e5d4ab7177c9.png)\r\n\r\nafter reloading again im in maintenance mode.\r\n\r\nafter disabling it in config, i get \"please reload\" again...\r\n\r\nowncloud is not usable anymore.\r\n\r\n\r\n### server configuration\r\nubuntu 12.04.2 lts\r\napache 2.2.22 (ubuntu)\r\nmysql ver 14.14 distrib 5.5.31\r\nphp 5.3.10-1ubuntu3.6\r\nowncloud 5.0.7 (installed 5.0.5)\r\n\r\nnormal local storage used\r\nssl configured and working\r\ncron every 5 min.\r\nupload max 2 gb\r\n\r\n#### vhost default\r\n```\r\n<virtualhost *:80>\r\n        serveradmin webmaster@localhost\r\n\r\n        documentroot /var/www\r\n        <directory />\r\n                options followsymlinks\r\n                allowoverride none\r\n        </directory>\r\n        <directory /var/www/>\r\n                options indexes followsymlinks multiviews\r\n                allowoverride none\r\n                order allow,deny\r\n                allow from all\r\n        </directory>\r\n\r\n        scriptalias /cgi-bin/ /usr/lib/cgi-bin/\r\n        <directory \"/usr/lib/cgi-bin\">\r\n                allowoverride none\r\n                options +execcgi -multiviews +symlinksifownermatch\r\n                order allow,deny\r\n                allow from all\r\n        </directory>\r\n\r\n        errorlog ${apache_log_dir}/error.log\r\n\r\n        # possible values include: debug, info, notice, warn, error, crit,\r\n        # alert, emerg.\r\n        loglevel warn\r\n\r\n        customlog ${apache_log_dir}/access.log combined\r\n\r\n    alias /doc/ \"/usr/share/doc/\"\r\n    <directory \"/usr/share/doc/\">\r\n        options indexes multiviews followsymlinks\r\n        allowoverride none\r\n        order deny,allow\r\n        deny from all\r\n        allow from 127.0.0.0/255.0.0.0 ::1/128\r\n    </directory>\r\n\r\n### xcache config\r\nalias /xcache-admin \"/usr/share/xcache/admin/\"\r\n<directory \"/usr/share/xcache/admin/\">\r\n       options indexes followsymlinks\r\n       directoryindex index.php\r\n       allowoverride all\r\n       order allow,deny\r\n       allow from localhost 10.101.64.0/22\r\n</directory>\r\n</virtualhost>\r\n```\r\n\r\n#### vhost owncloud\r\n```\r\n<virtualhost *:80>\r\n        documentroot /var/www/owncloud\r\n        servername bsc-dkl.int.basecom.eu\r\n<directory \"/var/www/owncloud\">\r\n        options indexes followsymlinks\r\n        directoryindex index.php\r\n        allowoverride all\r\n</directory>\r\n</virtualhost>\r\n\r\n<virtualhost *:443>\r\n        documentroot /var/www/owncloud\r\n        servername bsc-dkl.int.basecom.eu\r\n<directory \"/var/www/owncloud\">\r\n        options indexes followsymlinks\r\n        directoryindex index.php\r\n        allowoverride all\r\n</directory>\r\n  <ifmodule mod_ssl.c>\r\n    sslengine on\r\n    sslcertificatekeyfile /etc/apache2/ssl/bsc-dkl.int.basecom.eu.key\r\n    sslcertificatefile /etc/apache2/ssl/bsc-dkl.int.basecom.eu.crt\r\n    setenvif user-agent \".*msie.*\" \\\r\n      nokeepalive ssl-unclean-shutdown \\\r\n      downgrade-1.0 force-response-1.0\r\n    <files ~ \"\\.(cgi|shtml|phtml|php3?)$\">\r\n      ssloptions +stdenvvars\r\n    </files>\r\n  </ifmodule>\r\n</virtualhost>\r\n```\r\n\r\n### logs\r\nnothing helpful","closed_by":null}