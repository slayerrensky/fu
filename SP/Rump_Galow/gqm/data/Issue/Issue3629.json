{"url":"https://api.github.com/repos/owncloud/core/issues/3629","labels_url":"https://api.github.com/repos/owncloud/core/issues/3629/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/3629/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/3629/events","html_url":"https://github.com/owncloud/core/issues/3629","id":15265694,"number":3629,"title":"cannot login after enabling encryption","user":{"login":"marcelwaldvogel","id":3014737,"avatar_url":"https://identicons.github.com/3d10e8cbfde08a9891f32ac8f429d9af.png","gravatar_id":null,"url":"https://api.github.com/users/marcelwaldvogel","html_url":"https://github.com/marcelwaldvogel","followers_url":"https://api.github.com/users/marcelwaldvogel/followers","following_url":"https://api.github.com/users/marcelwaldvogel/following{/other_user}","gists_url":"https://api.github.com/users/marcelwaldvogel/gists{/gist_id}","starred_url":"https://api.github.com/users/marcelwaldvogel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marcelwaldvogel/subscriptions","organizations_url":"https://api.github.com/users/marcelwaldvogel/orgs","repos_url":"https://api.github.com/users/marcelwaldvogel/repos","events_url":"https://api.github.com/users/marcelwaldvogel/events{/privacy}","received_events_url":"https://api.github.com/users/marcelwaldvogel/received_events","type":"user","site_admin":false},"labels":[{"url":"https://api.github.com/repos/owncloud/core/labels/app%3afiles_encryption","name":"app:files_encryption","color":"02d7e1"}],"state":"closed","assignee":{"login":"schiesbn","id":1589737,"avatar_url":"https://gravatar.com/avatar/8912b598c7b32dd25b87fd168e0b06b2?d=https%3a%2f%2fidenticons.github.com%2f0a323047dbe8329db30eae8dbe96e55e.png&r=x","gravatar_id":"8912b598c7b32dd25b87fd168e0b06b2","url":"https://api.github.com/users/schiesbn","html_url":"https://github.com/schiesbn","followers_url":"https://api.github.com/users/schiesbn/followers","following_url":"https://api.github.com/users/schiesbn/following{/other_user}","gists_url":"https://api.github.com/users/schiesbn/gists{/gist_id}","starred_url":"https://api.github.com/users/schiesbn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schiesbn/subscriptions","organizations_url":"https://api.github.com/users/schiesbn/orgs","repos_url":"https://api.github.com/users/schiesbn/repos","events_url":"https://api.github.com/users/schiesbn/events{/privacy}","received_events_url":"https://api.github.com/users/schiesbn/received_events","type":"user","site_admin":false},"milestone":null,"comments":90,"created_at":"2013-06-07t10:16:12z","updated_at":"2013-09-03t09:58:19z","closed_at":"2013-08-15t15:00:15z","pull_request":{"html_url":null,"diff_url":null,"patch_url":null},"body":"### expected behaviour\r\ni can at least work normally as long as it does not refer to encrypted files\r\n\r\n### actual behaviour\r\nimmediately after enabling encryption, i was stuck at the login screen.\r\n\r\nafter disabling the app in the database (`update oc_appconfig set configvalue = 'no' where appid='files_encryption' and configkey='enabled';`) everything is back to normal.\r\n\r\n### steps to reproduce\r\n1. enable the encryption app\r\n2. switching to the files app, i am instead seeing the login screen\r\n3. stuck at the login screen\r\n\r\n### server configuration\r\noperating system: ubuntu 12.04.2 lts\r\n\r\nweb server: apache/2.2.22\r\n\r\ndatabase: postgresql 9.1\r\n\r\nphp version: php 5.3.10-1ubuntu3.6 with suhosin-patch (cli) (built: mar 11 2013 14:31:48)\r\n\r\nowncloud version: 5.0.7\r\n\r\n### client configuration\r\nbrowser: safari, firefox, â€¦\r\n\r\noperating system: macosx\r\n\r\n### logs\r\n#### web server error log\r\n```\r\n78.105.207.250 - - [07/jun/2013:12:10:47 +0200] \"get /owncloud/ http/1.1\" 200 2049 \"https://example.com/owncloud/\" \"mozilla/5.0 (macintosh; intel mac os x 10.8; rv:21.0) gecko/20100101 firefox/21.0\"\r\n78.105.207.250 - - [07/jun/2013:12:10:48 +0200] \"get /owncloud/remote.php/core.css?v=f0873a91b499e265ff6d78ff6e8985a0 http/1.1\" 304 254 \"https://example.com/owncloud/\" \"mozilla/5.0 (macintosh; intel mac os x 10.8; rv:21.0) gecko/20100101 firefox/21.0\"\r\n78.105.207.250 - - [07/jun/2013:12:10:48 +0200] \"get /owncloud/core/js/visitortimezone.js?v=f0873a91b499e265ff6d78ff6e8985a0 http/1.1\" 304 360 \"https://example.com/owncloud/\" \"mozilla/5.0 (macintosh; intel mac os x 10.8; rv:21.0) gecko/20100101 firefox/21.0\"\r\n78.105.207.250 - - [07/jun/2013:12:10:48 +0200] \"get /owncloud/index.php/core/js/config.js?v=f0873a91b499e265ff6d78ff6e8985a0 http/1.1\" 200 2030 \"https://example.com/owncloud/\" \"mozilla/5.0 (macintosh; intel mac os x 10.8; rv:21.0) gecko/20100101 firefox/21.0\"\r\n78.105.207.250 - - [07/jun/2013:12:10:48 +0200] \"get /owncloud/remote.php/core.js?v=f0873a91b499e265ff6d78ff6e8985a0 http/1.1\" 304 388 \"https://example.com/owncloud/\" \"mozilla/5.0 (macintosh; intel mac os x 10.8; rv:21.0) gecko/20100101 firefox/21.0\"\r\n78.105.207.250 - - [07/jun/2013:12:10:48 +0200] \"get /owncloud/index.php/core/routes.json http/1.1\" 304 254 \"https://example.com/owncloud/\" \"mozilla/5.0 (macintosh; intel mac os x 10.8; rv:21.0) gecko/20100101 firefox/21.0\"\r\n78.105.207.250 - - [07/jun/2013:12:10:48 +0200] \"get /owncloud/core/img/logo.svg http/1.1\" 200 111590 \"https://example.com/owncloud/\" \"mozilla/5.0 (macintosh; intel mac os x 10.8; rv:21.0) gecko/20100101 firefox/21.0\"\r\n78.105.207.250 - - [07/jun/2013:12:10:48 +0200] \"get /owncloud/core/img/actions/user.svg http/1.1\" 200 54612 \"https://example.com/owncloud/\" \"mozilla/5.0 (macintosh; intel mac os x 10.8; rv:21.0) gecko/20100101 firefox/21.0\"\r\n78.105.207.250 - - [07/jun/2013:12:10:48 +0200] \"get /owncloud/core/img/actions/password.svg http/1.1\" 200 66861 \"https://example.com/owncloud/\" \"mozilla/5.0 (macintosh; intel mac os x 10.8; rv:21.0) gecko/20100101 firefox/21.0\"\r\n78.105.207.250 - - [07/jun/2013:12:10:48 +0200] \"get /owncloud/core/img/actions/toggle.png?2013-06-06t09:26:40z http/1.1\" 304 204 \"https://example.com/owncloud/remote.php/core.css?v=f0873a91b499e265ff6d78ff6e8985a0\" \"mozilla/5.0 (macintosh; intel mac os x 10.8; rv:21.0) gecko/20100101 firefox/21.0\"\r\n78.105.207.250 - - [07/jun/2013:12:10:48 +0200] \"get /owncloud/core/img/breadcrumb.svg http/1.1\" 200 3001 \"https://example.com/owncloud/\" \"mozilla/5.0 (macintosh; intel mac os x 10.8; rv:21.0) gecko/20100101 firefox/21.0\"\r\n78.105.207.250 - - [07/jun/2013:12:10:48 +0200] \"get /owncloud/cron.php http/1.1\" 200 703 \"https://example.com/owncloud/\" \"mozilla/5.0 (macintosh; intel mac os x 10.8; rv:21.0) gecko/20100101 firefox/21.0\"\r\n78.105.207.250 - - [07/jun/2013:12:10:53 +0200] \"post /owncloud/ http/1.1\" 302 1005 \"https://example.com/owncloud/\" \"mozilla/5.0 (macintosh; intel mac os x 10.8; rv:21.0) gecko/20100101 firefox/21.0\"\r\n78.105.207.250 - - [07/jun/2013:12:10:53 +0200] \"get /owncloud/index.php/apps/files http/1.1\" 302 885 \"https://example.com/owncloud/\" \"mozilla/5.0 (macintosh; intel mac os x 10.8; rv:21.0) gecko/20100101 firefox/21.0\"\r\n78.105.207.250 - - [07/jun/2013:12:10:54 +0200] \"get /owncloud/ http/1.1\" 200 1913 \"https://example.com/owncloud/\" \"mozilla/5.0 (macintosh; intel mac os x 10.8; rv:21.0) gecko/20100101 firefox/21.0\"\r\n78.105.207.250 - - [07/jun/2013:12:10:54 +0200] \"get /owncloud/remote.php/core.css?v=f0873a91b499e265ff6d78ff6e8985a0 http/1.1\" 304 254 \"https://example.com/owncloud/\" \"mozilla/5.0 (macintosh; intel mac os x 10.8; rv:21.0) gecko/20100101 firefox/21.0\"\r\n78.105.207.250 - - [07/jun/2013:12:10:54 +0200] \"get /owncloud/core/js/visitortimezone.js?v=f0873a91b499e265ff6d78ff6e8985a0 http/1.1\" 304 360 \"https://example.com/owncloud/\" \"mozilla/5.0 (macintosh; intel mac os x 10.8; rv:21.0) gecko/20100101 firefox/21.0\"\r\n78.105.207.250 - - [07/jun/2013:12:10:54 +0200] \"get /owncloud/index.php/core/js/config.js?v=f0873a91b499e265ff6d78ff6e8985a0 http/1.1\" 200 2030 \"https://example.com/owncloud/\" \"mozilla/5.0 (macintosh; intel mac os x 10.8; rv:21.0) gecko/20100101 firefox/21.0\"\r\n78.105.207.250 - - [07/jun/2013:12:10:54 +0200] \"get /owncloud/remote.php/core.js?v=f0873a91b499e265ff6d78ff6e8985a0 http/1.1\" 304 388 \"https://example.com/owncloud/\" \"mozilla/5.0 (macintosh; intel mac os x 10.8; rv:21.0) gecko/20100101 firefox/21.0\"\r\n78.105.207.250 - - [07/jun/2013:12:10:55 +0200] \"get /owncloud/index.php/core/routes.json http/1.1\" 304 254 \"https://example.com/owncloud/\" \"mozilla/5.0 (macintosh; intel mac os x 10.8; rv:21.0) gecko/20100101 firefox/21.0\"\r\n78.105.207.250 - - [07/jun/2013:12:10:55 +0200] \"get /owncloud/cron.php http/1.1\" 200 569 \"https://example.com/owncloud/\" \"mozilla/5.0 (macintosh; intel mac os x 10.8; rv:21.0) gecko/20100101 firefox/21.0\"\r\n```\r\n\r\n#### owncloud log (data/owncloud.log)\r\n```\r\n{\"app\":\"core\",\"message\":\"adding user backend instance of oc_user_database.\",\"level\":0,\"time\":1370598440}\r\n{\"app\":\"core\",\"message\":\"adding user backend instance of oc_user_database.\",\"level\":0,\"time\":1370598440}\r\n{\"app\":\"hook\",\"message\":\"error while running hook (oca\\\\encryption\\\\hooks::login): encryption library: no data provided for decryption\",\"level\":3,\"time\":1370598440}\r\n{\"app\":\"core\",\"message\":\"adding user backend instance of oc_user_database.\",\"level\":0,\"time\":1370598446}\r\n{\"app\":\"core\",\"message\":\"adding user backend instance of oc_user_database.\",\"level\":0,\"time\":1370598474}\r\n{\"app\":\"core\",\"message\":\"adding user backend instance of oc_user_database.\",\"level\":0,\"time\":1370598476}\r\n{\"app\":\"core\",\"message\":\"adding user backend instance of oc_user_database.\",\"level\":0,\"time\":1370598476}\r\n{\"app\":\"hook\",\"message\":\"error while running hook (oca\\\\encryption\\\\hooks::login): encryption library: no data provided for decryption\",\"level\":3,\"time\":1370598477}\r\n{\"app\":\"core\",\"message\":\"adding user backend instance of oc_user_database.\",\"level\":0,\"time\":1370598483}\r\n{\"app\":\"core\",\"message\":\"adding user backend instance of oc_user_database.\",\"level\":0,\"time\":1370598511}\r\n{\"app\":\"core\",\"message\":\"adding user backend instance of oc_user_database.\",\"level\":0,\"time\":1370598513}\r\n{\"app\":\"core\",\"message\":\"adding user backend instance of oc_user_database.\",\"level\":0,\"time\":1370598513}\r\n{\"app\":\"hook\",\"message\":\"error while running hook (oca\\\\encryption\\\\hooks::login): encryption library: no data provided for decryption\",\"level\":3,\"time\":1370598513}\r\n{\"app\":\"core\",\"message\":\"adding user backend instance of oc_user_database.\",\"level\":0,\"time\":1370598519}\r\n{\"app\":\"core\",\"message\":\"adding user backend instance of oc_user_database.\",\"level\":0,\"time\":1370598547}\r\n```","closed_by":{"login":"schiesbn","id":1589737,"avatar_url":"https://gravatar.com/avatar/8912b598c7b32dd25b87fd168e0b06b2?d=https%3a%2f%2fidenticons.github.com%2f0a323047dbe8329db30eae8dbe96e55e.png&r=x","gravatar_id":"8912b598c7b32dd25b87fd168e0b06b2","url":"https://api.github.com/users/schiesbn","html_url":"https://github.com/schiesbn","followers_url":"https://api.github.com/users/schiesbn/followers","following_url":"https://api.github.com/users/schiesbn/following{/other_user}","gists_url":"https://api.github.com/users/schiesbn/gists{/gist_id}","starred_url":"https://api.github.com/users/schiesbn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schiesbn/subscriptions","organizations_url":"https://api.github.com/users/schiesbn/orgs","repos_url":"https://api.github.com/users/schiesbn/repos","events_url":"https://api.github.com/users/schiesbn/events{/privacy}","received_events_url":"https://api.github.com/users/schiesbn/received_events","type":"user","site_admin":false}}