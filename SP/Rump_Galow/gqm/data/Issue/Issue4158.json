{"url":"https://api.github.com/repos/owncloud/core/issues/4158","labels_url":"https://api.github.com/repos/owncloud/core/issues/4158/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/4158/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/4158/events","html_url":"https://github.com/owncloud/core/issues/4158","id":17061301,"number":4158,"title":"failing upgrade with postgresql backend","user":{"login":"davidprevot","id":3936728,"avatar_url":"https://gravatar.com/avatar/362efde18020d9030cb62d38cb4b2e0b?d=https%3a%2f%2fidenticons.github.com%2ffea78b94eb32f93d6964cccbaa460299.png&r=x","gravatar_id":"362efde18020d9030cb62d38cb4b2e0b","url":"https://api.github.com/users/davidprevot","html_url":"https://github.com/davidprevot","followers_url":"https://api.github.com/users/davidprevot/followers","following_url":"https://api.github.com/users/davidprevot/following{/other_user}","gists_url":"https://api.github.com/users/davidprevot/gists{/gist_id}","starred_url":"https://api.github.com/users/davidprevot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidprevot/subscriptions","organizations_url":"https://api.github.com/users/davidprevot/orgs","repos_url":"https://api.github.com/users/davidprevot/repos","events_url":"https://api.github.com/users/davidprevot/events{/privacy}","received_events_url":"https://api.github.com/users/davidprevot/received_events","type":"user","site_admin":false},"labels":[],"state":"closed","assignee":null,"milestone":null,"comments":1,"created_at":"2013-07-22t18:02:22z","updated_at":"2013-08-03t11:26:16z","closed_at":"2013-07-22t18:18:47z","pull_request":{"html_url":null,"diff_url":null,"patch_url":null},"body":"the following issue was reported for an upgrade from 5.0.8 to 5.0.9 with postgresql backendâ : http://bugs.debian.org/717579\r\n\r\n[â€¦] when accessing the website i get an error, when the system detects that it needs to upgrade:\r\n\r\nupdating owncloud to version 5.0.9, this may take a while.\r\n\r\nturned on maintenance mode\r\nfailed to update database structure (mdb2 error: syntax error, _doquery: [error message: could not execute statement] [last executed query: alter table \"oc_locks\" alter \"id\" type serial primary key using cast(\"id\" as serial primary key)] [native message: error: syntax error at or near \"primary\" line 1: alter table \"oc_locks\" alter \"id\" type serial primary key us... ^] )\r\n\r\nthe update was unsuccessful. please report this issue to the owncloud community.\r\n\r\nwhen looking at the postgresql log, i see this:\r\n\r\n2013-07-22 16:41:37.605 cest owncloud owncloud error:  syntax error at or near \"primary\" at character 47\r\n2013-07-22 16:41:37.605 cest owncloud owncloud statement:  alter table \"oc_locks\" alter \"id\" type serial primary key using cast(\"id\" as serial primary key)","closed_by":{"login":"davidprevot","id":3936728,"avatar_url":"https://gravatar.com/avatar/362efde18020d9030cb62d38cb4b2e0b?d=https%3a%2f%2fidenticons.github.com%2ffea78b94eb32f93d6964cccbaa460299.png&r=x","gravatar_id":"362efde18020d9030cb62d38cb4b2e0b","url":"https://api.github.com/users/davidprevot","html_url":"https://github.com/davidprevot","followers_url":"https://api.github.com/users/davidprevot/followers","following_url":"https://api.github.com/users/davidprevot/following{/other_user}","gists_url":"https://api.github.com/users/davidprevot/gists{/gist_id}","starred_url":"https://api.github.com/users/davidprevot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidprevot/subscriptions","organizations_url":"https://api.github.com/users/davidprevot/orgs","repos_url":"https://api.github.com/users/davidprevot/repos","events_url":"https://api.github.com/users/davidprevot/events{/privacy}","received_events_url":"https://api.github.com/users/davidprevot/received_events","type":"user","site_admin":false}}