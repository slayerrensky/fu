{"url":"https://api.github.com/repos/owncloud/core/issues/774","labels_url":"https://api.github.com/repos/owncloud/core/issues/774/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/774/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/774/events","html_url":"https://github.com/owncloud/core/issues/774","id":9105731,"number":774,"title":"oc-1791  -  tiff files cause errors with picture gallery ","user":{"login":"msrex","id":2625328,"avatar_url":"https://gravatar.com/avatar/24738c0908dad69b83af9cc534bcca80?d=https%3a%2f%2fidenticons.github.com%2ff02814cb1648a9552774c0f932619e91.png&r=x","gravatar_id":"24738c0908dad69b83af9cc534bcca80","url":"https://api.github.com/users/msrex","html_url":"https://github.com/msrex","followers_url":"https://api.github.com/users/msrex/followers","following_url":"https://api.github.com/users/msrex/following{/other_user}","gists_url":"https://api.github.com/users/msrex/gists{/gist_id}","starred_url":"https://api.github.com/users/msrex/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/msrex/subscriptions","organizations_url":"https://api.github.com/users/msrex/orgs","repos_url":"https://api.github.com/users/msrex/repos","events_url":"https://api.github.com/users/msrex/events{/privacy}","received_events_url":"https://api.github.com/users/msrex/received_events","type":"user","site_admin":false},"labels":[{"url":"https://api.github.com/repos/owncloud/core/labels/bug","name":"bug","color":"fc2929"}],"state":"open","assignee":null,"milestone":null,"comments":5,"created_at":"2012-12-08t00:24:26z","updated_at":"2013-10-31t19:47:31z","closed_at":null,"pull_request":{"html_url":null,"diff_url":null,"patch_url":null},"body":"from http://bugs.owncloud.org/thebuggenie/owncloud/issues/oc-1791\nthe reporters are still active.\n\nif we don't support tiff, we should at least fail graceful. same with images that are too big.\n\ndescription:\noriginally thought this was an error stemming from really large images. in reality, it comes from problems caused by tiff files.\n\ni get the following error when a small (203k) tiff file is in a picture gallery:\n\n    error messages\n    \"broken image\" icon in place of a thumbnail\n\nhere is the error message i am experiencing on my install:\n\nnotice: undefined variable: user in /home/slmmr/public_html/oc/lib/filesystem.php on line 360\n\nwarning: file_get_contents(/home/slmmr/public_html/oc/data/slmmr/files/home/slmmr/public_html/oc/data/slmmr/files/bigimg test/smalltiff.tif) function.file-get-contents: failed to open stream: no such file or directory in /home/slmmr/public_html/oc/lib/filestorage/local.php on line 79\n\nwarning: imagecreatefromstring() function.imagecreatefromstring: empty string or invalid image in /home/slmmr/public_html/oc/lib/image.php on line 473\n\nthe public owncloud instance at http://demo.owncloud.org/ doesn't give this error, but it does give the \"broken image\" icon in place of an image thumbnail.\n\nwhen clicking on the icon, my installation tells me \"the requested content cannot be loaded. please try again later.\" while the public owncloud opens a text box with tons of gibberish.\n\ni think we need to tell the picture gallery not to look for tiff files. going even further, the picture gallery probably needs to have an option about what formats to parse, in which directories, and of which sizes. i will put in feature requests for these items if they aren't there already.\n\n\nreproduction steps:\n    put tiff image file in folder\n    experience symptoms described above\n\nnote: this bug affects tiff files of all sizes and is not an bug caused by out of memory (as in, the file being processed is just too big to handle... i have confirmed this by successfully including a 22mb jpeg file in a picture gallery and unsuccessfully including a 203kb tiff file in the same gallery.\n\n#1 comment posted by fmms sep 19, 12:30\nare you sure this does not depend on file names?\n\nyour name seems to have a quotation mark in it ...\n\n#2 comment posted by er sep 19, 12:52\nyes i'm fairly certain it's not due to filename, as i have the same problem with files named \"stitch1234.tif\" or similar. i will confirm later though.\n\n#3 comment posted by er sep 19, 13:05\nconfirmed the file name was not the problem by renaming it to remove the quotation mark.\n\n#4 comment posted by er sep 19, 16:11\nfurther confirmed that the gallery works with a 22mb jpeg file, but has problems with a 41mb jpeg file. although i get a different error message about being out of memory, which points to a server-side limitation.\n\n#5 comment posted by er sep 19, 16:18\n(sorry for all the quick 1-off updates)\n\nfurther confirmed that a 203k size tiff breaks the gallery.\n\nso i guess we're looking at 2 issues with the picture gallery... lack of support for tiff (although i guess there's a chance that this is due to the way gd or imagemagick was compiled on the host) and problems with really large images (which is really a memory limit it seems).\n\ni'm not sure where to go from here as far as is the lack of tiff support a bug or a \"feature\" of the way the host-side binaries and php libs were compiled/configured or if its something inherent to owncloud, aside from testing out a small tiff on the public testbed of owncloud (which i'm about to do right now).\n\n#7 comment posted by herve5\nnov 16, 09:31\ni can confirm on my (different) host server i experience the same issue. (oc 4.5.1a , shared hosting at all2all.org )","closed_by":null}