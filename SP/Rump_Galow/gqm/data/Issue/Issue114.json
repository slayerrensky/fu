{"url":"https://api.github.com/repos/owncloud/core/issues/114","labels_url":"https://api.github.com/repos/owncloud/core/issues/114/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/114/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/114/events","html_url":"https://github.com/owncloud/core/pull/114","id":7903782,"number":114,"title":"implement x-sendfile support","user":{"login":"riso","id":448304,"avatar_url":"https://gravatar.com/avatar/27b46efdeb03808d96e894cd30a810c8?d=https%3a%2f%2fidenticons.github.com%2fe3e01a2584d9235f1e909d689b4fa6e1.png&r=x","gravatar_id":"27b46efdeb03808d96e894cd30a810c8","url":"https://api.github.com/users/riso","html_url":"https://github.com/riso","followers_url":"https://api.github.com/users/riso/followers","following_url":"https://api.github.com/users/riso/following{/other_user}","gists_url":"https://api.github.com/users/riso/gists{/gist_id}","starred_url":"https://api.github.com/users/riso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/riso/subscriptions","organizations_url":"https://api.github.com/users/riso/orgs","repos_url":"https://api.github.com/users/riso/repos","events_url":"https://api.github.com/users/riso/events{/privacy}","received_events_url":"https://api.github.com/users/riso/received_events","type":"user","site_admin":false},"labels":[],"state":"closed","assignee":null,"milestone":null,"comments":10,"created_at":"2012-10-26t21:12:55z","updated_at":"2012-11-18t17:20:34z","closed_at":"2012-11-18t12:35:46z","pull_request":{"html_url":"https://github.com/owncloud/core/pull/114","diff_url":"https://github.com/owncloud/core/pull/114.diff","patch_url":"https://github.com/owncloud/core/pull/114.patch"},"body":"well i'm sorry for this third pull reqest but, as i mentioned, i'm not really used to git. this time i created a branch for the feature so that it will be possible to add new commits if it's needed.\r\n\r\nthis closes enhancement oc-1835.\r\n\r\nthe solution i implemented to provide support for x-sendfile / x-accel-redirect adds the header to the request only if the web server advertise its support for them and only for a local filestorage.\r\n\r\nthis means that it is necessary, if x-sendfile support is wanted, to specify:\r\n\r\n* nginx: fastcgi_param mod_x_accel_redirect_enabled on\r\n* apache: setenv mod_x_sendfile_enabled 1 and by properly configuring the paths accessible by the web-server.\r\n\r\nthe same should be achievable in lighttpd (i haven't tested it).\r\n\r\nthe use of environment variables prevents the headers from being set if not explicitly wanted.\r\nthis way admins that don't want to dig into this configuration will still benefit from the classic file transfer provided by the readfile function.\r\n\r\nthis also makes possible to set only the correct header for the used web server, preventing both headers from being set (which would make the absolute path to the requested resource visible to the user since only the used header is stripped while the other would be left untouched).","closed_by":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false}}