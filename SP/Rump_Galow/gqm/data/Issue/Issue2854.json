{"url":"https://api.github.com/repos/owncloud/core/issues/2854","labels_url":"https://api.github.com/repos/owncloud/core/issues/2854/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/2854/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/2854/events","html_url":"https://github.com/owncloud/core/issues/2854","id":13021201,"number":2854,"title":"missing en_us.utf8 locale causes indefinite maintenance mode on update","user":{"login":"danimo","id":1315934,"avatar_url":"https://gravatar.com/avatar/9467db6bbeaac42484603e0788aec39d?d=https%3a%2f%2fidenticons.github.com%2f296ab09e5a31dcf357f4d4784453db99.png&r=x","gravatar_id":"9467db6bbeaac42484603e0788aec39d","url":"https://api.github.com/users/danimo","html_url":"https://github.com/danimo","followers_url":"https://api.github.com/users/danimo/followers","following_url":"https://api.github.com/users/danimo/following{/other_user}","gists_url":"https://api.github.com/users/danimo/gists{/gist_id}","starred_url":"https://api.github.com/users/danimo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danimo/subscriptions","organizations_url":"https://api.github.com/users/danimo/orgs","repos_url":"https://api.github.com/users/danimo/repos","events_url":"https://api.github.com/users/danimo/events{/privacy}","received_events_url":"https://api.github.com/users/danimo/received_events","type":"user","site_admin":false},"labels":[{"url":"https://api.github.com/repos/owncloud/core/labels/bug","name":"bug","color":"fc2929"},{"url":"https://api.github.com/repos/owncloud/core/labels/update","name":"update","color":"e10c02"}],"state":"closed","assignee":{"login":"raydiation","id":195053,"avatar_url":"https://gravatar.com/avatar/aa0d7b7302e0d7f4f9513c23b571383a?d=https%3a%2f%2fidenticons.github.com%2faf0a25e27510f77d97634a6bbe653b13.png&r=x","gravatar_id":"aa0d7b7302e0d7f4f9513c23b571383a","url":"https://api.github.com/users/raydiation","html_url":"https://github.com/raydiation","followers_url":"https://api.github.com/users/raydiation/followers","following_url":"https://api.github.com/users/raydiation/following{/other_user}","gists_url":"https://api.github.com/users/raydiation/gists{/gist_id}","starred_url":"https://api.github.com/users/raydiation/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raydiation/subscriptions","organizations_url":"https://api.github.com/users/raydiation/orgs","repos_url":"https://api.github.com/users/raydiation/repos","events_url":"https://api.github.com/users/raydiation/events{/privacy}","received_events_url":"https://api.github.com/users/raydiation/received_events","type":"user","site_admin":false},"milestone":{"url":"https://api.github.com/repos/owncloud/core/milestones/3","labels_url":"https://api.github.com/repos/owncloud/core/milestones/3/labels","id":199679,"number":3,"title":"owncloud 6","description":"","creator":{"login":"lukasreschke","id":878997,"avatar_url":"https://gravatar.com/avatar/f080e75d370a4d8e550983a4898bcf3b?d=https%3a%2f%2fidenticons.github.com%2ff12e47d5bb5359a9f58e8217413be790.png&r=x","gravatar_id":"f080e75d370a4d8e550983a4898bcf3b","url":"https://api.github.com/users/lukasreschke","html_url":"https://github.com/lukasreschke","followers_url":"https://api.github.com/users/lukasreschke/followers","following_url":"https://api.github.com/users/lukasreschke/following{/other_user}","gists_url":"https://api.github.com/users/lukasreschke/gists{/gist_id}","starred_url":"https://api.github.com/users/lukasreschke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukasreschke/subscriptions","organizations_url":"https://api.github.com/users/lukasreschke/orgs","repos_url":"https://api.github.com/users/lukasreschke/repos","events_url":"https://api.github.com/users/lukasreschke/events{/privacy}","received_events_url":"https://api.github.com/users/lukasreschke/received_events","type":"user","site_admin":false},"open_issues":19,"closed_issues":645,"state":"open","created_at":"2012-10-22t21:38:51z","updated_at":"2013-12-18t11:11:18z","due_on":null},"comments":6,"created_at":"2013-04-10t14:23:25z","updated_at":"2013-11-21t16:03:51z","closed_at":"2013-11-21t16:03:51z","pull_request":{"html_url":null,"diff_url":null,"patch_url":null},"body":"### expected behaviour\r\nwhen no  en_us.utf8 locale exists, the owncloud wizard warns about the failing setlocale operation and advises to install the required dependency (the locale) as we do with other dependencies.\r\n\r\n### actual behaviour\r\nwhen no  en_us.utf8 locale exists, owncloud fails to upgrade by entering maintenance mode without ever returning. the below output is the only trace, but it also shows as a non-fatal error during normal operation.\r\n\r\n### steps to reproduce\r\n1. install 5.0.3 on a system without en_us.utf8 locale\r\n2. install 5.0.4\r\n\r\n### server configuration\r\noperating system: debian 7\r\n\r\nweb server: apache 2.4\r\n\r\ndatabase: mysql\r\n\r\nphp version: 5.4.4-14\r\n\r\nowncloud version: 5.0.4rc1\r\n\r\n### client configuration\r\nbrowser: chrome\r\n\r\noperating system:\r\n\r\n### logs\r\n#### web server error log\r\nn/a\r\n\r\n#### owncloud log (data/owncloud.log)\r\n```\r\n{\"app\":\"core\",\"message\":\"setting locale to en_us.utf-8\\/en_us.utf8 failed. support is probably not installed on your system\",\"level\":3,\"time\":1365594246}\r\n{\"app\":\"core\",\"message\":\"setting locale to en_us.utf-8\\/en_us.utf8 failed. support is probably not installed on your system\",\"level\":3,\"time\":1365594246}\r\n{\"app\":\"core\",\"message\":\"setting locale to en_us.utf-8\\/en_us.utf8 failed. support is probably not installed on your system\",\"level\":3,\"time\":1365594247}\r\n```\r\n\r\n#### browser log\r\n```\r\nn/a\r\n```","closed_by":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false}}