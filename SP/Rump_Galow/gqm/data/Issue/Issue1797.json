{"url":"https://api.github.com/repos/owncloud/core/issues/1797","labels_url":"https://api.github.com/repos/owncloud/core/issues/1797/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/1797/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/1797/events","html_url":"https://github.com/owncloud/core/issues/1797","id":11196687,"number":1797,"title":"renaming of shared folder from client produces error on server side.","user":{"login":"dragotin","id":1070214,"avatar_url":"https://gravatar.com/avatar/af829234b31fb915704c1c65ef48eee0?d=https%3a%2f%2fidenticons.github.com%2f3392afab7f424e10623ba95a941f4d34.png&r=x","gravatar_id":"af829234b31fb915704c1c65ef48eee0","url":"https://api.github.com/users/dragotin","html_url":"https://github.com/dragotin","followers_url":"https://api.github.com/users/dragotin/followers","following_url":"https://api.github.com/users/dragotin/following{/other_user}","gists_url":"https://api.github.com/users/dragotin/gists{/gist_id}","starred_url":"https://api.github.com/users/dragotin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dragotin/subscriptions","organizations_url":"https://api.github.com/users/dragotin/orgs","repos_url":"https://api.github.com/users/dragotin/repos","events_url":"https://api.github.com/users/dragotin/events{/privacy}","received_events_url":"https://api.github.com/users/dragotin/received_events","type":"user","site_admin":false},"labels":[{"url":"https://api.github.com/repos/owncloud/core/labels/app%3afiles","name":"app:files","color":"02d7e1"},{"url":"https://api.github.com/repos/owncloud/core/labels/bug","name":"bug","color":"fc2929"},{"url":"https://api.github.com/repos/owncloud/core/labels/sharing","name":"sharing","color":"e102d8"}],"state":"closed","assignee":null,"milestone":null,"comments":3,"created_at":"2013-02-20t13:25:17z","updated_at":"2013-12-02t11:27:39z","closed_at":"2013-12-02t11:27:39z","pull_request":{"html_url":null,"diff_url":null,"patch_url":null},"body":"from the original bug report owncloud/mirall#339:\r\n\r\nin working on the desktop, if a folder is shared with me, and i make a change to the name of the folder, csync goes into an error state with the error \"csync fatal parameter error\".\r\n\r\nas soon as i put the name of the folder back to the name of the folder shared with me, this error goes away.\r\n\r\ninstead, the folder should just be renamed when csync tries to share the folder again.\r\n\r\nrepeat:\r\ncreate two users, user 1 and 2\r\ncreate a folder to share \"folder to share\" in user 1 account\r\nadd folder inside \"folder to share\" in user 1 account\r\nadd some files\r\nshare folder to share with user 2, with full can edit privileges\r\nas user 2, sync shared folder to desktop\r\non user 2's desktop, change the name of \"folder to share\"\r\nsee the error show up in the sync client\r\n\r\ni used owncloud server 4.5.7 to reproduce.\r\n\r\nthis is the list of requests done by the client:\r\n```\r\n::1 - kf [20/feb/2013:14:17:09 +0100] \"get /owncloud/status.php http/1.1\" 200 76 \"-\" \"mirall-1.2.1pre\" 0/16643\r\n::1 - - [20/feb/2013:14:17:09 +0100] \"propfind /owncloud/remote.php/webdav/shared http/1.1\" 401 291 \"-\" \"csyncoc/0.70.3 neon/0.29.6\" 0/44375\r\n::1 - kf [20/feb/2013:14:17:09 +0100] \"propfind /owncloud/remote.php/webdav/shared http/1.1\" 207 1579 \"-\" \"csyncoc/0.70.3 neon/0.29.6\" 0/74994\r\n::1 - kf [20/feb/2013:14:17:09 +0100] \"get /owncloud/status.php http/1.1\" 200 76 \"-\" \"mirall-1.2.1pre\" 0/27267\r\n::1 - kf [20/feb/2013:14:17:09 +0100] \"propfind /owncloud/remote.php/webdav/shared/share_kf http/1.1\" 404 293 \"-\" \"csyncoc/0.70.3 neon/0.29.6\" 0/70014\r\n::1 - kf [20/feb/2013:14:17:09 +0100] \"mkcol /owncloud/remote.php/webdav/shared/share_kf/ http/1.1\" 201 - \"-\" \"csyncoc/0.70.3 neon/0.29.6\" 0/97108\r\n::1 - kf [20/feb/2013:14:17:09 +0100] \"mkcol /owncloud/remote.php/webdav/shared/share_kf/new%20folder/ http/1.1\" 409 267 \"-\" \"csyncoc/0.70.3 neon/0.29.6\" 0/76586\r\n::1 - kf [20/feb/2013:14:17:09 +0100] \"mkcol /owncloud/remote.php/webdav/shared/share_kf/ http/1.1\" 201 - \"-\" \"csyncoc/0.70.3 neon/0.29.6\" 0/80748\r\n::1 - kf [20/feb/2013:14:17:09 +0100] \"proppatch /owncloud/remote.php/webdav/shared/share_kf http/1.1\" 404 293 \"-\" \"csyncoc/0.70.3 neon/0.29.6\" 0/84867\r\n::1 - kf [20/feb/2013:14:17:09 +0100] \"move /owncloud/remote.php/webdav/shared/shared_to_kf/hand-finn.png http/1.1\" 409 274 \"-\" \"csyncoc/0.70.3 neon/0.29.6\" 0/67403\r\n```\r\nand this is happening in the server's error_log:\r\n\r\n```\r\n[wed feb 20 14:23:06 2013] [error] [client ::1] php notice:  undefined offset: 3 in /srv/www/htdocs/owncloud/lib/connector/sabre/node.php on line 292\r\n[wed feb 20 14:23:06 2013] [error] [client ::1] php stack trace:\r\n[wed feb 20 14:23:06 2013] [error] [client ::1] php   1. {main}() /srv/www/htdocs/owncloud/remote.php:0\r\n[wed feb 20 14:23:06 2013] [error] [client ::1] php   2. require_once() /srv/www/htdocs/owncloud/remote.php:40\r\n[wed feb 20 14:23:06 2013] [error] [client ::1] php   3. sabre_dav_server->exec() /srv/www/htdocs/owncloud/apps/files/appinfo/remote.php:49\r\n[wed feb 20 14:23:06 2013] [error] [client ::1] php   4. sabre_dav_server->invokemethod() /srv/www/htdocs/owncloud/3rdparty/sabre/dav/server.php:206\r\n[wed feb 20 14:23:06 2013] [error] [client ::1] php   5. call_user_func() /srv/www/htdocs/owncloud/3rdparty/sabre/dav/server.php:462\r\n[wed feb 20 14:23:06 2013] [error] [client ::1] php   6. sabre_dav_server->httpmkcol() /srv/www/htdocs/owncloud/3rdparty/sabre/dav/server.php:462\r\n[wed feb 20 14:23:06 2013] [error] [client ::1] php   7. sabre_dav_server->createcollection() /srv/www/htdocs/owncloud/3rdparty/sabre/dav/server.php:913\r\n[wed feb 20 14:23:06 2013] [error] [client ::1] php   8. oc_connector_sabre_directory->createdirectory() /srv/www/htdocs/owncloud/3rdparty/sabre/dav/server.php:1578\r\n[wed feb 20 14:23:06 2013] [error] [client ::1] php   9. oc_filesystem::mkdir() /srv/www/htdocs/owncloud/lib/connector/sabre/directory.php:81\r\n[wed feb 20 14:23:06 2013] [error] [client ::1] php  10. oc_filesystemview->mkdir() /srv/www/htdocs/owncloud/lib/filesystem.php:438\r\n[wed feb 20 14:23:06 2013] [error] [client ::1] php  11. oc_filesystemview->basicoperation() /srv/www/htdocs/owncloud/lib/filesystemview.php:164\r\n[wed feb 20 14:23:06 2013] [error] [client ::1] php  12. oc_filesystemview->runhooks() /srv/www/htdocs/owncloud/lib/filesystemview.php:606\r\n[wed feb 20 14:23:06 2013] [error] [client ::1] php  13. oc_hook::emit() /srv/www/htdocs/owncloud/lib/filesystemview.php:628\r\n[wed feb 20 14:23:06 2013] [error] [client ::1] php  14. call_user_func() /srv/www/htdocs/owncloud/lib/hook.php:62\r\n[wed feb 20 14:23:06 2013] [error] [client ::1] php  15. oc_filesystem::removeetaghook() /srv/www/htdocs/owncloud/lib/hook.php:62\r\n[wed feb 20 14:23:06 2013] [error] [client ::1] php  16. oc_connector_sabre_node::removeetagpropertyforpath() /srv/www/htdocs/owncloud/lib/filesystem.php:569\r\n[wed feb 20 14:23:06 2013] [error] [client ::1] php  17. oc_connector_sabre_node::getfilesource() /srv/www/htdocs/owncloud/lib/connector/sabre/node.php:258\r\n```\r\n\r\n","closed_by":{"login":"karlitschek","id":867445,"avatar_url":"https://gravatar.com/avatar/87ce2b4531ee1a0c32b50e0d8f049224?d=https%3a%2f%2fidenticons.github.com%2f06e7098636caebfc9c30c9f52eb905df.png&r=x","gravatar_id":"87ce2b4531ee1a0c32b50e0d8f049224","url":"https://api.github.com/users/karlitschek","html_url":"https://github.com/karlitschek","followers_url":"https://api.github.com/users/karlitschek/followers","following_url":"https://api.github.com/users/karlitschek/following{/other_user}","gists_url":"https://api.github.com/users/karlitschek/gists{/gist_id}","starred_url":"https://api.github.com/users/karlitschek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karlitschek/subscriptions","organizations_url":"https://api.github.com/users/karlitschek/orgs","repos_url":"https://api.github.com/users/karlitschek/repos","events_url":"https://api.github.com/users/karlitschek/events{/privacy}","received_events_url":"https://api.github.com/users/karlitschek/received_events","type":"user","site_admin":false}}