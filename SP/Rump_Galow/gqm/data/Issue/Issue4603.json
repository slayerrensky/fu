{"url":"https://api.github.com/repos/owncloud/core/issues/4603","labels_url":"https://api.github.com/repos/owncloud/core/issues/4603/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/4603/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/4603/events","html_url":"https://github.com/owncloud/core/issues/4603","id":18650299,"number":4603,"title":"owncloud 5.10 crashes apache w/ segfaults/free(): invalid pointer","user":{"login":"barnoid-","id":5327254,"avatar_url":"https://gravatar.com/avatar/7e5d1adb760be7e878b5159c65e38b04?d=https%3a%2f%2fidenticons.github.com%2f0fa354bec70f6768d2abb23586a5b98d.png&r=x","gravatar_id":"7e5d1adb760be7e878b5159c65e38b04","url":"https://api.github.com/users/barnoid-","html_url":"https://github.com/barnoid-","followers_url":"https://api.github.com/users/barnoid-/followers","following_url":"https://api.github.com/users/barnoid-/following{/other_user}","gists_url":"https://api.github.com/users/barnoid-/gists{/gist_id}","starred_url":"https://api.github.com/users/barnoid-/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/barnoid-/subscriptions","organizations_url":"https://api.github.com/users/barnoid-/orgs","repos_url":"https://api.github.com/users/barnoid-/repos","events_url":"https://api.github.com/users/barnoid-/events{/privacy}","received_events_url":"https://api.github.com/users/barnoid-/received_events","type":"user","site_admin":false},"labels":[],"state":"closed","assignee":null,"milestone":null,"comments":4,"created_at":"2013-08-28t05:54:51z","updated_at":"2013-09-18t22:52:53z","closed_at":"2013-08-28t08:20:36z","pull_request":{"html_url":null,"diff_url":null,"patch_url":null},"body":"hi all,\r\n\r\nnew to owncloud; i'm trying to push the (engineering) college of our university to use owncloud for sensitive documents. we're located in korea so utf-8 filenames containing korean characters are the norm.\r\n\r\n**environment:** gentoo\r\nserver: apache 2.2.24 (tried both xsendfiles enabled/disabled)\r\ndatabase: mysql 5.1.67\r\nclient: various: latest (paid) android app, linux (self-built, v1.4.0beta2)\r\noc-version: 5.0.10 (however, config/config.php claims 'version' => '5.0.17')\r\nphp-version: 5.4 (tried 5.3, 5.5 as well, same result)\r\nphp-config: standard gentoo settings\r\n\r\n**issue:** i get lots of segmentation faults and glibc free() invalid pointer errors when adding new directories or adding files to shared directories. first i thought the issue was related to utf-8 characters in the filenames, but i was able to reproduce it with \"normal\" filenames as well.\r\n\r\n**steps to reproduce:**\r\n\r\n1. install owncloud\r\n\r\n2. install linux client (1.4.0beta2)\r\n\r\n3. add several directories using the linux client, for example\r\n   * /home/me/something/to/share1 --> /share1 on owncloud\r\n   * /home/me/some/thing/else/to/share2 --> /share2 on owncloud\r\n\r\n4. if the directories already contain files, the errors should pop up pretty quickly while synching\r\n\r\n5. if the directories are empty, copying files to either one of the shared directories triggers the error for me\r\n\r\n6. the apache error log shows lots of these:\r\n\r\n    [wed aug 28 14:20:19 2013] [notice] child pid 5437 exit signal segmentation fault (11)\r\n    [wed aug 28 14:25:49 2013] [notice] child pid 11099 exit signal segmentation fault (11)\r\n    [wed aug 28 14:30:48 2013] [notice] child pid 31885 exit signal segmentation fault (11)\r\n    [wed aug 28 14:35:49 2013] [notice] child pid 31000 exit signal segmentation fault (11)\r\n\r\n   or these:\r\n*** glibc detected *** /usr/sbin/apache2: free(): invalid next size (fast): 0x00007fb754cb0120 ***\r\n======= backtrace: =========\r\n    /lib64/libc.so.6(+0x7aee6)[0x7fb7b6613ee6]\r\n    /usr/lib64/libmagic.so.1(+0x48f3)[0x7fb7b16b48f3]\r\n    /usr/lib64/apache2/modules/libphp5.so(finfo_resource_destructor+0x15)[0x7fb7b08e02f5]\r\n    /usr/lib64/apache2/modules/libphp5.so(list_entry_destructor+0x61)[0x7fb7b0adb901]\r\n    /usr/lib64/apache2/modules/libphp5.so(zend_hash_del_key_or_index+0x1f3)[0x7fb7b0ad9753]\r\n    /usr/lib64/apache2/modules/libphp5.so(_zend_list_delete+0x9e)[0x7fb7b0adbade]\r\n    /usr/lib64/apache2/modules/libphp5.so(zif_finfo_close+0x69)[0x7fb7b08e02a9]\r\n    /usr/lib64/apache2/modules/libphp5.so(+0x4658c9)[0x7fb7b0b848c9]\r\n    /usr/lib64/apache2/modules/libphp5.so(execute+0x267)[0x7fb7b0b36467]\r\n    /usr/lib64/apache2/modules/libphp5.so(zend_call_function+0xa8f)[0x7fb7b0abc28f]\r\n    /usr/lib64/apache2/modules/libphp5.so(zif_call_user_func+0x68)[0x7fb7b09ea8b8]\r\n    /usr/lib64/apache2/modules/libphp5.so(+0x4658c9)[0x7fb7b0b848c9]\r\n    ....\r\n\r\n  the client gives: \"unknown error\" popups and the gui shows \"csync processing stop update failed.\"\r\n\r\n  in addition, the cron job terminates with \"cron <root@****> php -f /var/www/barnoid.com/htdocs/mycloud/cron.php: unexpected error!\"\r\n\r\n7. i cannot recover from this error; i have to delete the owncloud data base and reinstall owncloud.","closed_by":{"login":"karlitschek","id":867445,"avatar_url":"https://gravatar.com/avatar/87ce2b4531ee1a0c32b50e0d8f049224?d=https%3a%2f%2fidenticons.github.com%2f06e7098636caebfc9c30c9f52eb905df.png&r=x","gravatar_id":"87ce2b4531ee1a0c32b50e0d8f049224","url":"https://api.github.com/users/karlitschek","html_url":"https://github.com/karlitschek","followers_url":"https://api.github.com/users/karlitschek/followers","following_url":"https://api.github.com/users/karlitschek/following{/other_user}","gists_url":"https://api.github.com/users/karlitschek/gists{/gist_id}","starred_url":"https://api.github.com/users/karlitschek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karlitschek/subscriptions","organizations_url":"https://api.github.com/users/karlitschek/orgs","repos_url":"https://api.github.com/users/karlitschek/repos","events_url":"https://api.github.com/users/karlitschek/events{/privacy}","received_events_url":"https://api.github.com/users/karlitschek/received_events","type":"user","site_admin":false}}