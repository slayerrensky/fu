{"url":"https://api.github.com/repos/owncloud/core/issues/5068","labels_url":"https://api.github.com/repos/owncloud/core/issues/5068/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/5068/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/5068/events","html_url":"https://github.com/owncloud/core/pull/5068","id":20351105,"number":5068,"title":"improved request","user":{"login":"tanghus","id":533222,"avatar_url":"https://gravatar.com/avatar/e625b634822713b2e346ff7c67d26775?d=https%3a%2f%2fidenticons.github.com%2f6d9c90af1c12f5a88e4d5f216bbc1979.png&r=x","gravatar_id":"e625b634822713b2e346ff7c67d26775","url":"https://api.github.com/users/tanghus","html_url":"https://github.com/tanghus","followers_url":"https://api.github.com/users/tanghus/followers","following_url":"https://api.github.com/users/tanghus/following{/other_user}","gists_url":"https://api.github.com/users/tanghus/gists{/gist_id}","starred_url":"https://api.github.com/users/tanghus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tanghus/subscriptions","organizations_url":"https://api.github.com/users/tanghus/orgs","repos_url":"https://api.github.com/users/tanghus/repos","events_url":"https://api.github.com/users/tanghus/events{/privacy}","received_events_url":"https://api.github.com/users/tanghus/received_events","type":"user","site_admin":false},"labels":[],"state":"closed","assignee":null,"milestone":null,"comments":9,"created_at":"2013-10-01t18:57:12z","updated_at":"2013-10-04t17:18:23z","closed_at":"2013-10-04t16:05:20z","pull_request":{"html_url":"https://github.com/owncloud/core/pull/5068","diff_url":"https://github.com/owncloud/core/pull/5068.diff","patch_url":"https://github.com/owncloud/core/pull/5068.patch"},"body":"i had to close #5038 because of #5037 and github wouldn't make me update or delete the branch, so here's a new one.\r\n\r\n* add patch method to oc_route\r\n* exception when e.g. accessing $request->get if the current http method is post. makes it a helluva lot easier to find errors in your cut'n'paste code ;)\r\n* add patch method to oc_route\r\n* add patch and put accessors to request. patch returns an array like get and post. if put is either `application/x-www-form-urlencoded` or `application/json*` it returns an array like, otherwise it returns a once-only stream respource inspired by @deepdiver1975 s commented out implementation.\r\n* moved post json parsing to request.\r\n* document accessors in irequest.\r\n* and unit tests :smile_cat: \r\n\r\ni though a lot about what to do with the `php://input` that can only be read once, and i think this is the best approach. patch requests are per definition not big - otherwise you're doing it wrong - and if properly documented a stream resource for put, if it's not directly parsable, makes most sense. i though about making it conditional either by an argument or by the size of the request body, but it would just be too obfuscated what you would actually get.\r\nin the currently implementation it is accesses from `->params` which imho is not very intuitive and semantically incorrect.\r\ni've made it backwards compatible though, so it's still available there if it stems from a post request.\r\n\r\n**update:** `->put` also returns an array if it is a parsable string.\r\n\r\n@deepdiver1975 @raydiation @bartv2 @karlitschek ","closed_by":{"login":"bartv2","id":2227877,"avatar_url":"https://gravatar.com/avatar/c2d86a0a66a4be2c904e24034e842f44?d=https%3a%2f%2fidenticons.github.com%2f05e8b1362feb118a386dfd282b20fb84.png&r=x","gravatar_id":"c2d86a0a66a4be2c904e24034e842f44","url":"https://api.github.com/users/bartv2","html_url":"https://github.com/bartv2","followers_url":"https://api.github.com/users/bartv2/followers","following_url":"https://api.github.com/users/bartv2/following{/other_user}","gists_url":"https://api.github.com/users/bartv2/gists{/gist_id}","starred_url":"https://api.github.com/users/bartv2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bartv2/subscriptions","organizations_url":"https://api.github.com/users/bartv2/orgs","repos_url":"https://api.github.com/users/bartv2/repos","events_url":"https://api.github.com/users/bartv2/events{/privacy}","received_events_url":"https://api.github.com/users/bartv2/received_events","type":"user","site_admin":false}}