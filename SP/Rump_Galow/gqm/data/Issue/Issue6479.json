{"url":"https://api.github.com/repos/owncloud/core/issues/6479","labels_url":"https://api.github.com/repos/owncloud/core/issues/6479/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/6479/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/6479/events","html_url":"https://github.com/owncloud/core/issues/6479","id":24474023,"number":6479,"title":"[6.0.0a] sql errors on inserting lucence jobs ","user":{"login":"jcfischer","id":3088,"avatar_url":"https://gravatar.com/avatar/5085ba37ba624a788e04a842cd09bd6e?d=https%3a%2f%2fidenticons.github.com%2fdc6a7e655d7e5840e66733e9ee67cc69.png&r=x","gravatar_id":"5085ba37ba624a788e04a842cd09bd6e","url":"https://api.github.com/users/jcfischer","html_url":"https://github.com/jcfischer","followers_url":"https://api.github.com/users/jcfischer/followers","following_url":"https://api.github.com/users/jcfischer/following{/other_user}","gists_url":"https://api.github.com/users/jcfischer/gists{/gist_id}","starred_url":"https://api.github.com/users/jcfischer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jcfischer/subscriptions","organizations_url":"https://api.github.com/users/jcfischer/orgs","repos_url":"https://api.github.com/users/jcfischer/repos","events_url":"https://api.github.com/users/jcfischer/events{/privacy}","received_events_url":"https://api.github.com/users/jcfischer/received_events","type":"user","site_admin":false},"labels":[{"url":"https://api.github.com/repos/owncloud/core/labels/bug","name":"bug","color":"fc2929"}],"state":"open","assignee":null,"milestone":null,"comments":2,"created_at":"2013-12-18t07:34:47z","updated_at":"2013-12-18t13:12:34z","closed_at":null,"pull_request":{"html_url":null,"diff_url":null,"patch_url":null},"body":"### expected behaviour\r\nsyncing a directory without any errors\r\n\r\n### actual behaviour\r\nsql errors when inserting into oc_jobs\r\n\r\n### steps to reproduce\r\n1. sync a directory with jpg files (not sure if that is the root cause)\r\n\r\n### server configuration\r\noperating system: ubuntu 13.04\r\n\r\nweb server: apache 2.4\r\n\r\ndatabase: postgres 9.2\r\n\r\nphp version: 5.5\r\n\r\nowncloud version: 6.0.0a\r\n\r\nupdated from an older owncloud or fresh install: fresh install\r\n\r\nlist of activated app: ldap, \r\n\r\nthe content of config/config.php: (without the database password and passwordsalt)\r\n\r\n```\r\n<?php\r\n$config = array (\r\n  'instanceid' => 'xxx',\r\n  'passwordsalt' => 'yyy',\r\n  'datadirectory' => '/mnt/data',\r\n  'dbtype' => 'pgsql',\r\n  'version' => '6.0.0.14',\r\n  'dbname' => 'owncloud',\r\n  'dbhost' => '10.0.20.42',\r\n  'dbtableprefix' => 'oc_',\r\n  'dbuser' => 'owncloud',\r\n  'dbpassword' => 'xxx',\r\n  'installed' => true,\r\n  'ldapignorenamingrules' => false,\r\n  'log_type' => 'owncloud',\r\n  'logfile' => '/var/log/owncloud/owncloud.log',\r\n  'loglevel' => '0',\r\n  'logdateformat' => 'f d, y h:i:s',\r\n  'logtimezone' => 'europe/berlin',\r\n  'log_query' => false,\r\n  'log_authfailip' => false,\r\n  'log_rotate_size' => 104857600,\r\n);\r\n```\r\n\r\n### client configuration\r\nbrowser: os x sync client 1.4.2\r\n\r\noperating system: os x 10.8.5\r\n\r\n### logs\r\n\r\n\r\n#### owncloud log (data/owncloud.log)\r\n```\r\n{\"app\":\"oc\\\\files\\\\cache\\\\scanner\",\"message\":\"!!! no reuse of etag for 'files\\/reading\\/papers2\\/library.papers2\\/thumbnails\\/d9903af2-01e9-48f9-96d1-ba2f367dacb4.jpg' !!! \\ncache: array\\n(\\n    [fileid] => 3351\\n    [storage] => home::b1967ce2-f535-1032-8c41-d1ab18bc04c7\\n    [path] => files\\/reading\\/papers2\\/library.papers2\\/thumbnails\\/d9903af2-01e9-48f9-96d1-ba2f367dacb4.jpg\\n    [parent] => 63\\n    [name] => d9903af2-01e9-48f9-96d1-ba2f367dacb4.jpg\\n    [mimetype] => image\\/jpeg\\n    [mimepart] => image\\n    [size] => 65449\\n    [mtime] => 1387351183\\n    [storage_mtime] => 1387351183\\n    [encrypted] => \\n    [unencrypted_size] => 0\\n    [etag] => 52b14c93baf11\\n)\\n \\ndata: array\\n(\\n    [mimetype] => image\\/jpeg\\n    [mtime] => 1299615124\\n    [size] => 65449\\n    [etag] => 52b14c93bc1f9\\n    [storage_mtime] => 1299615124\\n)\\n\",\"level\":0,\"time\":\"december 18, 2013 08:19:47\"}\r\n{\"app\":\"core\",\"message\":\"oc_image::loadfromfilehandle(): trying\",\"level\":0,\"time\":\"december 18, 2013 08:19:48\"}\r\n{\"app\":\"core\",\"message\":\"oc_image->fixorientation() no readable file path set.\",\"level\":0,\"time\":\"december 18, 2013 08:19:48\"}\r\n{\"app\":\"core\",\"message\":\"oc_image->fixorientation() orientation: -1\",\"level\":0,\"time\":\"december 18, 2013 08:19:48\"}\r\n{\"app\":\"hook\",\"message\":\"error while running hook (oca\\\\search_lucene\\\\hooks::indexfile): an exception occurred while executing 'insert into \\\"oc_jobs\\\"(\\\"class\\\", \\\"argument\\\", \\\"last_run\\\") values(?, ?, 0)':\\n\\nsqlstate[22001]: string data, right truncated: 7 error:  value too long for type character varying(256)\",\"level\":3,\"time\":\"december 18, 2013 08:19:48\"}\r\n```\r\n\r\n","closed_by":null}