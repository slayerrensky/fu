{"url":"https://api.github.com/repos/owncloud/core/issues/4365","labels_url":"https://api.github.com/repos/owncloud/core/issues/4365/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/4365/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/4365/events","html_url":"https://github.com/owncloud/core/issues/4365","id":17849044,"number":4365,"title":"infinite loop on share upload","user":{"login":"bergbenji","id":2435322,"avatar_url":"https://gravatar.com/avatar/b8bb9c0ce9caad5698cf3fc62b6371f5?d=https%3a%2f%2fidenticons.github.com%2fed55e8cd72de7132767398951fa69b8b.png&r=x","gravatar_id":"b8bb9c0ce9caad5698cf3fc62b6371f5","url":"https://api.github.com/users/bergbenji","html_url":"https://github.com/bergbenji","followers_url":"https://api.github.com/users/bergbenji/followers","following_url":"https://api.github.com/users/bergbenji/following{/other_user}","gists_url":"https://api.github.com/users/bergbenji/gists{/gist_id}","starred_url":"https://api.github.com/users/bergbenji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bergbenji/subscriptions","organizations_url":"https://api.github.com/users/bergbenji/orgs","repos_url":"https://api.github.com/users/bergbenji/repos","events_url":"https://api.github.com/users/bergbenji/events{/privacy}","received_events_url":"https://api.github.com/users/bergbenji/received_events","type":"user","site_admin":false},"labels":[{"url":"https://api.github.com/repos/owncloud/core/labels/bug","name":"bug","color":"fc2929"}],"state":"closed","assignee":null,"milestone":null,"comments":2,"created_at":"2013-08-09t06:43:34z","updated_at":"2013-10-23t14:35:54z","closed_at":"2013-10-23t14:35:54z","pull_request":{"html_url":null,"diff_url":null,"patch_url":null},"body":"### expected behaviour\r\nadmin shares a folder with managers.\r\nthe managers add within the share a folder an reshares this with the developers.\r\nthe developers should upload files, wich should be accessible by managers and admins\r\n\r\n### actual behaviour\r\nthe developers (reshared group) cant upload a file. the server fall into an infinite loop.\r\n\r\n### steps to reproduce\r\n1. admin shares folder to group managers\r\n2. managers add a folder within the managers folder and shares this to the group developers\r\n3. dvelopers try to upload files, without success \r\n\r\n### server configuration\r\noperating system:\r\n1. config:\r\n- linux debian squeeze15\r\n- php 5.3.3-7\r\n- mysql\r\n\r\n2. config:\r\n- mac osx with mamp\r\n- php 5.3.6\r\n- mysql\r\nweb server: \r\n\r\nowncloud version:\r\n5.0.9\r\n\r\nlogs are empty, because the server ends in infinite loop. after timeout the server automatically kills the mod_fcigd without any logs.\r\n\r\n\r\n### long description and my fix:\r\n\r\nin the file \"files_sharing/lib/updater.php\" is a while loop.\r\n\r\nin some sharing situations it happens, that this becomes an infinite loop.\r\n\r\nmy scenario is as follows:\r\nadmin (in group managers)\r\nmanager (in group managers and developers)\r\ndeveloper (in group developers)\r\n\r\nsharing as follows:\r\nadmin shares manager folder to group managers.\r\nmanager insert in this folder a folder for each developer and shares this folder with the developer.\r\n\r\n\r\nadmin can upload files without problems.\r\nmanager can upload files without problems.\r\nif developer uploads a file, the while loop becomes infinite.\r\n\r\ni added the following code snippet to the end of the while loop:\r\n```php\r\nif($users == $reshareusers) {\r\n  break;\r\n}\r\n         \r\n$users = $reshareusers;\r\n```\r\n\r\nit is not nice, but it is working.","closed_by":{"login":"schiesbn","id":1589737,"avatar_url":"https://gravatar.com/avatar/8912b598c7b32dd25b87fd168e0b06b2?d=https%3a%2f%2fidenticons.github.com%2f0a323047dbe8329db30eae8dbe96e55e.png&r=x","gravatar_id":"8912b598c7b32dd25b87fd168e0b06b2","url":"https://api.github.com/users/schiesbn","html_url":"https://github.com/schiesbn","followers_url":"https://api.github.com/users/schiesbn/followers","following_url":"https://api.github.com/users/schiesbn/following{/other_user}","gists_url":"https://api.github.com/users/schiesbn/gists{/gist_id}","starred_url":"https://api.github.com/users/schiesbn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schiesbn/subscriptions","organizations_url":"https://api.github.com/users/schiesbn/orgs","repos_url":"https://api.github.com/users/schiesbn/repos","events_url":"https://api.github.com/users/schiesbn/events{/privacy}","received_events_url":"https://api.github.com/users/schiesbn/received_events","type":"user","site_admin":false}}