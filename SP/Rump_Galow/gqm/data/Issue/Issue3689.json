{"url":"https://api.github.com/repos/owncloud/core/issues/3689","labels_url":"https://api.github.com/repos/owncloud/core/issues/3689/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/3689/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/3689/events","html_url":"https://github.com/owncloud/core/issues/3689","id":15462366,"number":3689,"title":"server serving non existant versioning files","user":{"login":"adriangibanelbtactic","id":1331363,"avatar_url":"https://gravatar.com/avatar/e4249d176e2008fdbc1e868a1a51aa4f?d=https%3a%2f%2fidenticons.github.com%2fd4b402ec81e3ad953158869adc5b9004.png&r=x","gravatar_id":"e4249d176e2008fdbc1e868a1a51aa4f","url":"https://api.github.com/users/adriangibanelbtactic","html_url":"https://github.com/adriangibanelbtactic","followers_url":"https://api.github.com/users/adriangibanelbtactic/followers","following_url":"https://api.github.com/users/adriangibanelbtactic/following{/other_user}","gists_url":"https://api.github.com/users/adriangibanelbtactic/gists{/gist_id}","starred_url":"https://api.github.com/users/adriangibanelbtactic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adriangibanelbtactic/subscriptions","organizations_url":"https://api.github.com/users/adriangibanelbtactic/orgs","repos_url":"https://api.github.com/users/adriangibanelbtactic/repos","events_url":"https://api.github.com/users/adriangibanelbtactic/events{/privacy}","received_events_url":"https://api.github.com/users/adriangibanelbtactic/received_events","type":"user","site_admin":false},"labels":[],"state":"closed","assignee":null,"milestone":null,"comments":2,"created_at":"2013-06-12t17:14:47z","updated_at":"2013-08-16t22:17:53z","closed_at":"2013-08-16t22:17:53z","pull_request":{"html_url":null,"diff_url":null,"patch_url":null},"body":"owncloud - bug a mitad\r\n\r\n### expected behaviour\r\n1. non existent versioning files are not listed at all.\r\n2. synchronisation with the server is ok.\r\n3. maybe these non actually existent files are pruned periodically from owncloud database (or wherever they are stored)\r\n\r\n### actual behaviour\r\n1. from a webdav client some versioning files are listed as just another filename. however when trying to edit them the webdav client complains with error: file does not exist!\r\n2. synchronisation is marked as failed.\r\n\r\n### steps to reproduce\r\n1. exit from owncloud client.\r\n2. start owncloud client\r\n\r\n### server configuration\r\noperating system:\r\nubuntu 12.04.2\r\nweb server: \r\napache 2.2.22-1ubuntu1.2 (virtualmin with: php script execution  mode: fcgid (run as virtual server owner))\r\ndatabase: \r\nmysql 5.5.29-0ubuntu0.12.04.1\r\nphp version:\r\n5.3.10-1ubuntu3.5\r\nowncloud version:\r\n4.5.3\r\n### client configuration\r\nbrowser:\r\nowncloud version 1.2.5\r\noperating system:\r\ndebian unstable may 2013\r\n### logs\r\n#### web server access log\r\n```\r\n1.2.3.4 - - [12/jun/2013:13:42:18 +0200] \"get /remote.php/webdav/path/to1/maquina_virtual_zimbra_g.log.v1364377370 http/1.1\" 404 1065 \"-\" \"csyncoc/0.70.6 neon/0.29.6\"\r\n1.2.3.4 - - [12/jun/2013:13:42:19 +0200] \"get /remote.php/webdav/path/to2/installing_amp.html.v1364383340 http/1.1\" 404 1033 \"-\" \"csyncoc/0.70.6 neon/0.29.6\"\r\n1.2.3.4 - - [12/jun/2013:13:42:19 +0200] \"get /remote.php/webdav/path/to3/instalacion_zimbra_proxy.tex.backup.v1364388619 http/1.1\" 404 1081 \"-\" \"csyncoc/0.70.6 neon/0.29.6\"\r\n1.2.3.4 - - [12/jun/2013:13:42:19 +0200] \"get /remote.php/webdav/path/to4/thumb_down.png.v1368557460 http/1.1\" 404 1065 \"-\" \"csyncoc/0.70.6 neon/0.29.6\"\r\n1.2.3.4 - - [12/jun/2013:13:42:19 +0200] \"get /remote.php/webdav/path/to5/urchin.js.v1368560436 http/1.1\" 404 1081 \"-\" \"csyncoc/0.70.6 neon/0.29.6\"\r\n1.2.3.4 - - [12/jun/2013:13:42:19 +0200] \"get /remote.php/webdav/path/to6/esquema_gestor_cursos_moodle.eps.v1364381931 http/1.1\" 404 1081 \"-\" \"csyncoc/0.70.6 neon/0.29.6\"\r\n1.2.3.4 - - [12/jun/2013:13:42:19 +0200] \"get /remote.php/webdav/path/to7/admin_mailings.tpl.v1368558110 http/1.1\" 404 1065 \"-\" \"csyncoc/0.70.6 neon/0.29.6\"\r\n1.2.3.4 - - [12/jun/2013:13:42:19 +0200] \"get /remote.php/webdav/path/to8/template.php.v1368191751 http/1.1\" 404 1033 \"-\" \"csyncoc/0.70.6 neon/0.29.6\"\r\n1.2.3.4 - - [12/jun/2013:13:42:20 +0200] \"get /remote.php/webdav/path/to9/phplist_basic_template_ownership_support.diff.v1367334050 http/1.1\" 404 1081 \"-\" \"csyncoc/0.70.6 neon/0.29.6\"\r\n1.2.3.4 - - [12/jun/2013:13:42:20 +0200] \"get /remote.php/webdav/path/to10/tarifari%20bsolutions%202012.pdf.v1364384836 http/1.1\" 404 1001 \"-\" \"csyncoc/0.70.6 neon/0.29.6\"\r\n1.2.3.4 - - [12/jun/2013:13:42:20 +0200] \"get /remote.php/webdav/path/to11/phplist-logo.png.v1367338890 http/1.1\" 404 1081 \"-\" \"csyncoc/0.70.6 neon/0.29.6\"\r\n1.2.3.4 - - [12/jun/2013:13:42:20 +0200] \"get /remote.php/webdav/path/to12/rechazar_ip_para_spam.tex.v1368559955 http/1.1\" 404 1065 \"-\" \"csyncoc/0.70.6 neon/0.29.6\"\r\n1.2.3.4 - - [12/jun/2013:13:42:20 +0200] \"get /remote.php/webdav/path/to13/caje_maiz.tex.v1362786139 http/1.1\" 404 1049 \"-\" \"csyncoc/0.70.6 neon/0.29.6\"\r\n1.2.3.4 - - [12/jun/2013:13:42:21 +0200] \"get /remote.php/webdav/path/to14/ui.form.tpl.v1364379350 http/1.1\" 404 1049 \"-\" \"csyncoc/0.70.6 neon/0.29.6\"\r\n1.2.3.4 - - [12/jun/2013:13:42:21 +0200] \"get /remote.php/webdav/path/to15/styleswitcher.js.v1364382160 http/1.1\" 404 1097 \"-\" \"csyncoc/0.70.6 neon/0.29.6\"\r\n\r\n```\r\n#### web server error log\r\n```\r\nno relevant information found around 13:13:42 hour.\r\n```\r\n\r\n#### owncloud log (data/owncloud.log)\r\n```\r\nno relevant information found by searching: \"styleswitcher.js\"\r\n```\r\n\r\n#### browser log\r\nwhen i try to edit thanks to dolphin filemanagar via webdavs:// the styleswitcher.js.v1364382160 file i get an\r\n```\r\nerror: file not found.\r\n```\r\n\r\n### normal owncloud client log\r\n\r\nthis is how the normal owncloud client sees the 404:\r\n```\r\n06-12 13:42:24:150 oc_module:   -- get on ownclouds://server.cloud.com/remote.php/webdav/path/to1/styleswitcher.js.v1368190761\r\n06-12 13:42:24:285 oc_module: content encoding ist <empty> with status 404\r\n06-12 13:42:24:286 oc_module: get http result 404 (not found)\r\n06-12 13:42:24:286 oc_module: sendfile request failed with http status 404!\r\n06-12 13:42:24:286 _csync_push_file: file: ownclouds://server.cloud.com/remote.php/webdav/path/to2/styleswitcher.js.v1368190761, command: sendfile, error:  from errno 2\r\n06-12 13:42:24:286 oc_module: => open called for ownclouds://server.cloud.com/remote.php/webdav/path/to3/instalacion_funambol_servidor_syncml.tex.v1364395707\r\n06-12 13:42:24:286 oc_module: get request on /remote.php/webdav/path/to4/instalacion_funambol_servidor_syncml.tex.v1364395707\r\n06-12 13:42:24:286 oc_module: sendfile handling request type get.\r\n06-12 13:42:24:286 oc_module:   -- get on ownclouds://server.cloud.com/remote.php/path/to5/instalacion_funambol_servidor_syncml.tex.v1364395707\r\n06-12 13:42:24:420 oc_module: content encoding ist <empty> with status 404\r\n06-12 13:42:24:421 oc_module: get http result 404 (not found)\r\n```\r\n\r\nthis is what happens after all the 404s associated to the non existent versioning files.\r\n\r\n```\r\n06-12 13:42:30:162  #### error during  cysnc_reconcile :  \"proceso de propagaciã³n de csync fallã³<br/>mensaje de salida:could not read response body: connection was closed by server\"\r\n```\r\n\r\n### other issues\r\n\r\ni'm not sure if it's related with this bug or not but:\r\n```\r\n.csync_journal.db\r\n```\r\nand\r\n```\r\n.csync_journal.db.ctmp\r\n ```\r\nfiles in the synced dir are always empty. if i delete them owncloud client seems to create them again but empty.\r\n\r\n","closed_by":{"login":"jancborchardt","id":925062,"avatar_url":"https://gravatar.com/avatar/2fd3f4d5d762955e5b603794a888fa97?d=https%3a%2f%2fidenticons.github.com%2f84ec51f9ceed468217d4e13abf78da9c.png&r=x","gravatar_id":"2fd3f4d5d762955e5b603794a888fa97","url":"https://api.github.com/users/jancborchardt","html_url":"https://github.com/jancborchardt","followers_url":"https://api.github.com/users/jancborchardt/followers","following_url":"https://api.github.com/users/jancborchardt/following{/other_user}","gists_url":"https://api.github.com/users/jancborchardt/gists{/gist_id}","starred_url":"https://api.github.com/users/jancborchardt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jancborchardt/subscriptions","organizations_url":"https://api.github.com/users/jancborchardt/orgs","repos_url":"https://api.github.com/users/jancborchardt/repos","events_url":"https://api.github.com/users/jancborchardt/events{/privacy}","received_events_url":"https://api.github.com/users/jancborchardt/received_events","type":"user","site_admin":false}}