{"url":"https://api.github.com/repos/owncloud/core/issues/2846","labels_url":"https://api.github.com/repos/owncloud/core/issues/2846/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/2846/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/2846/events","html_url":"https://github.com/owncloud/core/issues/2846","id":13014055,"number":2846,"title":"slow propfind on shared folders","user":{"login":"dphi","id":1936045,"avatar_url":"https://gravatar.com/avatar/1c4c7d9aec5e5c36a24ad5832aa154d6?d=https%3a%2f%2fidenticons.github.com%2fb8abb16296b999bffbf7662a6e0b80eb.png&r=x","gravatar_id":"1c4c7d9aec5e5c36a24ad5832aa154d6","url":"https://api.github.com/users/dphi","html_url":"https://github.com/dphi","followers_url":"https://api.github.com/users/dphi/followers","following_url":"https://api.github.com/users/dphi/following{/other_user}","gists_url":"https://api.github.com/users/dphi/gists{/gist_id}","starred_url":"https://api.github.com/users/dphi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dphi/subscriptions","organizations_url":"https://api.github.com/users/dphi/orgs","repos_url":"https://api.github.com/users/dphi/repos","events_url":"https://api.github.com/users/dphi/events{/privacy}","received_events_url":"https://api.github.com/users/dphi/received_events","type":"user","site_admin":false},"labels":[{"url":"https://api.github.com/repos/owncloud/core/labels/sharing","name":"sharing","color":"e102d8"}],"state":"closed","assignee":null,"milestone":null,"comments":26,"created_at":"2013-04-10t11:17:07z","updated_at":"2013-09-18t11:04:02z","closed_at":"2013-05-30t12:54:31z","pull_request":{"html_url":null,"diff_url":null,"patch_url":null},"body":"browser: curl, owncloud-sync\r\nserver os: debian wheezy, mod_php with apc, mysql\r\nowncloud: 5.0.3\r\n\r\npropfind takes too long for shared folders.\r\n\r\na very problematic folder with 88 files in total and 1020kbyte in total file size has the following characteristics: \r\n- ~0.5s for the user sharing the folder, and\r\n- ~70s for the user with which the folder was shared.\r\n\r\nthe problematic folders are deep in the directory structure, e.g. in the 6th sub-directory within the shared folder. the shared folder in numbers: 5.8g in total size,  2600 folders, and 26000 files.\r\n\r\nthe time is spent on the client side within the php code. mysql and apache cpu usage is negligible. \r\n\r\nexecution times of php scripts greater than 30 seconds do only continue with adjusted php settings. the owncloud sync client needs an adjusted time out setting to wait that long as well. (this is how i originally noticed the problem: errno 10007 messages in the owncloud sync client.)\r\n\r\nsee http://git.csync.org/users/freitag/csync.git/commit/?h=dav_0.70.5&id=2a5c403d63d48ece1571d8021b3ef576a2f16cd5 . @dragotin @danimo were informed about the time out issue before.\r\n\r\nthe difference to #2719 is part 5, the lock up. two requests are being handled as expected in my case.\r\n","closed_by":{"login":"mtgap","id":1097106,"avatar_url":"https://gravatar.com/avatar/454a73ee5feeb428d0c163a48903332c?d=https%3a%2f%2fidenticons.github.com%2f52d29a66f285a1d61125dd69ac0766b2.png&r=x","gravatar_id":"454a73ee5feeb428d0c163a48903332c","url":"https://api.github.com/users/mtgap","html_url":"https://github.com/mtgap","followers_url":"https://api.github.com/users/mtgap/followers","following_url":"https://api.github.com/users/mtgap/following{/other_user}","gists_url":"https://api.github.com/users/mtgap/gists{/gist_id}","starred_url":"https://api.github.com/users/mtgap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mtgap/subscriptions","organizations_url":"https://api.github.com/users/mtgap/orgs","repos_url":"https://api.github.com/users/mtgap/repos","events_url":"https://api.github.com/users/mtgap/events{/privacy}","received_events_url":"https://api.github.com/users/mtgap/received_events","type":"user","site_admin":false}}