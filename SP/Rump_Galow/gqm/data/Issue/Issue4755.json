{"url":"https://api.github.com/repos/owncloud/core/issues/4755","labels_url":"https://api.github.com/repos/owncloud/core/issues/4755/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/4755/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/4755/events","html_url":"https://github.com/owncloud/core/issues/4755","id":19138874,"number":4755,"title":"memory usage when deleting large file","user":{"login":"tsukaeru","id":4261549,"avatar_url":"https://gravatar.com/avatar/879e74099f4a8cae5ed03951154e0e5f?d=https%3a%2f%2fidenticons.github.com%2f79519dea0b4d0275e6dfa9ef02a30735.png&r=x","gravatar_id":"879e74099f4a8cae5ed03951154e0e5f","url":"https://api.github.com/users/tsukaeru","html_url":"https://github.com/tsukaeru","followers_url":"https://api.github.com/users/tsukaeru/followers","following_url":"https://api.github.com/users/tsukaeru/following{/other_user}","gists_url":"https://api.github.com/users/tsukaeru/gists{/gist_id}","starred_url":"https://api.github.com/users/tsukaeru/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tsukaeru/subscriptions","organizations_url":"https://api.github.com/users/tsukaeru/orgs","repos_url":"https://api.github.com/users/tsukaeru/repos","events_url":"https://api.github.com/users/tsukaeru/events{/privacy}","received_events_url":"https://api.github.com/users/tsukaeru/received_events","type":"user","site_admin":false},"labels":[{"url":"https://api.github.com/repos/owncloud/core/labels/bug","name":"bug","color":"fc2929"}],"state":"open","assignee":null,"milestone":null,"comments":4,"created_at":"2013-09-07t06:11:46z","updated_at":"2013-11-29t12:22:28z","closed_at":null,"pull_request":{"html_url":null,"diff_url":null,"patch_url":null},"body":"### expected behaviour\r\nfile should be moved to trash on the os level, and not load the entire file into memory\r\n\r\n### actual behaviour\r\nmemory usage is equal to the size of the file.\r\n\r\n### steps to reproduce\r\nupload a large file, 3gb in my case and try to delete it. the process will take all available memory and fail (2 gb in my case)\r\n\r\nif i increase memory on the vm, it will succeed however it still takes 2gb+ memory, and several minutes to complete. also, when restoring the file from trash, it is instantaneous, so the file handling seems to be different.\r\n\r\n### server configuration\r\noperating system:\r\nlinux\r\n\r\nweb server: \r\nnginx\r\n\r\ndatabase:\r\nmysql\r\n\r\nphp version:\r\n 5.3.3\r\n\r\nowncloud version:\r\n5.0.10\r\n\r\n### client configuration\r\nbrowser: any\r\n\r\noperating system:\r\nlinux\r\n","closed_by":null}