{"url":"https://api.github.com/repos/owncloud/core/issues/3197","labels_url":"https://api.github.com/repos/owncloud/core/issues/3197/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/3197/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/3197/events","html_url":"https://github.com/owncloud/core/pull/3197","id":13819313,"number":3197,"title":"fix retrieval of users with multiple backends","user":{"login":"blizzz","id":2184312,"avatar_url":"https://gravatar.com/avatar/1898b25a9cb3aa1a0f0febd1359910b9?d=https%3a%2f%2fidenticons.github.com%2fca03acec6deadf508b75eb0cf9ba036c.png&r=x","gravatar_id":"1898b25a9cb3aa1a0f0febd1359910b9","url":"https://api.github.com/users/blizzz","html_url":"https://github.com/blizzz","followers_url":"https://api.github.com/users/blizzz/followers","following_url":"https://api.github.com/users/blizzz/following{/other_user}","gists_url":"https://api.github.com/users/blizzz/gists{/gist_id}","starred_url":"https://api.github.com/users/blizzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blizzz/subscriptions","organizations_url":"https://api.github.com/users/blizzz/orgs","repos_url":"https://api.github.com/users/blizzz/repos","events_url":"https://api.github.com/users/blizzz/events{/privacy}","received_events_url":"https://api.github.com/users/blizzz/received_events","type":"user","site_admin":false},"labels":[],"state":"closed","assignee":null,"milestone":null,"comments":3,"created_at":"2013-04-30t18:06:30z","updated_at":"2013-05-03t11:50:44z","closed_at":"2013-05-03t11:48:52z","pull_request":{"html_url":"https://github.com/owncloud/core/pull/3197","diff_url":"https://github.com/owncloud/core/pull/3197.diff","patch_url":"https://github.com/owncloud/core/pull/3197.patch"},"body":"getusers passes the offset and limit to each backend (not possible in a reliable way otherwise). so, when opening a users page all active backends are asked to send 30 users, offset 0 (not via ajax, only subsequent getusers are triggered by ajax).\r\nfor example, when you have 6 local users and 120 ldap users, you will see 35 users in the beginning. scrolling down will trigger the load of the next 10 users.\r\n\r\nbehaviour before:\r\nthe sum of users in the list was used as offset. although it is ok with only one user backend it makes no sense with multiple ones. in our example, on scrolling down all backends were asked so send 10 users, offset 35. local backend will return nothing, ldap will skip 5 users.\r\n\r\nnow:\r\noffset starts hardcodedly with 30. it is not a problem when there are less users, the backends will simply return nothing. after a successful request, the limit (here js variable userstoload) will be added. in our example, the next 10 users will be loaded with offset of 30, then offset 40 and so on.\r\n\r\nwas found while digging in #2545 (but not the whole solution for the bug).\r\n\r\nplease review @tanghus @karlitschek @icewind1991 ","closed_by":{"login":"blizzz","id":2184312,"avatar_url":"https://gravatar.com/avatar/1898b25a9cb3aa1a0f0febd1359910b9?d=https%3a%2f%2fidenticons.github.com%2fca03acec6deadf508b75eb0cf9ba036c.png&r=x","gravatar_id":"1898b25a9cb3aa1a0f0febd1359910b9","url":"https://api.github.com/users/blizzz","html_url":"https://github.com/blizzz","followers_url":"https://api.github.com/users/blizzz/followers","following_url":"https://api.github.com/users/blizzz/following{/other_user}","gists_url":"https://api.github.com/users/blizzz/gists{/gist_id}","starred_url":"https://api.github.com/users/blizzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blizzz/subscriptions","organizations_url":"https://api.github.com/users/blizzz/orgs","repos_url":"https://api.github.com/users/blizzz/repos","events_url":"https://api.github.com/users/blizzz/events{/privacy}","received_events_url":"https://api.github.com/users/blizzz/received_events","type":"user","site_admin":false}}