{"url":"https://api.github.com/repos/owncloud/core/issues/3387","labels_url":"https://api.github.com/repos/owncloud/core/issues/3387/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/3387/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/3387/events","html_url":"https://github.com/owncloud/core/issues/3387","id":14410282,"number":3387,"title":"database connection failed after changing data directory","user":{"login":"ako84","id":3066420,"avatar_url":"https://gravatar.com/avatar/0a066365efe60c26cbb00630b2d5c318?d=https%3a%2f%2fidenticons.github.com%2fd07f4aa9d24861466ce3eef7d75294e7.png&r=x","gravatar_id":"0a066365efe60c26cbb00630b2d5c318","url":"https://api.github.com/users/ako84","html_url":"https://github.com/ako84","followers_url":"https://api.github.com/users/ako84/followers","following_url":"https://api.github.com/users/ako84/following{/other_user}","gists_url":"https://api.github.com/users/ako84/gists{/gist_id}","starred_url":"https://api.github.com/users/ako84/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ako84/subscriptions","organizations_url":"https://api.github.com/users/ako84/orgs","repos_url":"https://api.github.com/users/ako84/repos","events_url":"https://api.github.com/users/ako84/events{/privacy}","received_events_url":"https://api.github.com/users/ako84/received_events","type":"user","site_admin":false},"labels":[],"state":"closed","assignee":null,"milestone":null,"comments":4,"created_at":"2013-05-16t15:04:35z","updated_at":"2013-11-29t17:26:40z","closed_at":"2013-11-29t17:26:40z","pull_request":{"html_url":null,"diff_url":null,"patch_url":null},"body":"### expected behaviour\r\ni wanna login to my owncloud with changed data directory\r\n\r\n### actual behaviour\r\nstarting owncloud, the following message appears: \"failed to connect to database\"\r\ninstead of the login\r\n\r\n### steps to reproduce\r\n1. moved the whole data directory to an external harddrive (ext4 formated)\r\n2. set the owner of the new data folder to \"www-data\"\r\n3. changed the /config/config.php; datadirectory: '/media/user/extern1/data'\r\n\r\n### the config.php entrys\r\n\r\n```\r\n<?php\r\n$config = array (\r\n  'passwordsalt' => 'e054956a4b7ef0fa87958dacbe602b',\r\n  'datadirectory' => '/media/user/extern1/data/',\r\n  'dbtype' => 'sqlite3',\r\n  'version' => '5.0.6',\r\n  'installed' => true,\r\n  'instanceid' => '50b2205264d48',\r\n  'maxzipinputsize' => 0,\r\n  'allowzipdownload' => true,\r\n  'theme' => '',\r\n  'user_webdavauth_url' => '',\r\n  'loglevel' => '4',\r\n  'maintenance' => false,\r\n  'forcessl' => true,\r\n);\r\n```\r\n\r\n### server configuration\r\noperating system: ubuntu 12.10\r\n\r\nweb server: apache 2.0\r\n\r\ndatabase: sqlite 3.7.13\r\n\r\nphp version: 5.4.6\r\n\r\nowncloud version: 5.0.6\r\n\r\n### client configuration\r\nbrowser: chromium 25.0.1364.160\r\n\r\noperating system: ubuntu 12.10\r\n\r\n### logs\r\n#### web server error log\r\n```\r\nno new entry\r\n```\r\n\r\n#### owncloud log (data/owncloud.log) - entry before changed the data directory, after that no new entry!\r\n```\r\n{\"app\":\"php\",\"message\":\"sqlstate[hy000]: general error: 13 database or disk is full at \\/var\\/www\\/owncloud\\/lib\\/db.php#965\",\"level\":4,\"time\":1368354612}\r\n```\r\n\r\n#### browser log (changed ip to 00.000.00.000)\r\n```\r\nphp console:\r\n1) get https://00.000.00.000/owncloud/index.php/index.php/core/routes.json 503 (service temporarily unavailable) jquery-1.7.2.min.js:4\r\n\r\n2) get https://00.000.00.000/owncloud/index.php/core/img/breadcrumb.svg 503 (service temporarily unavailable) jquery-1.7.2.min.js:4\r\n\r\nnetwork:\r\n1.1) request url:https://00.000.00.000/owncloud/index.php/index.php/core/routes.json\r\nrequest method:get\r\nstatus code:503 service temporarily unavailable\r\nrequest headersview source\r\naccept:application/json, text/javascript, */*; q=0.01\r\naccept-charset:iso-8859-1,utf-8;q=0.7,*;q=0.3\r\naccept-encoding:gzip,deflate,sdch\r\naccept-language:de-de,de;q=0.8,en-us;q=0.6,en;q=0.4\r\ncache-control:max-age=0\r\nconnection:keep-alive\r\ncookie:50b2205264d48=b98t5ist9u8m281srcdt3fm165; 27a089e8453491826f55516ebf494006=m1k4gcq272hffmhib6615667i6\r\nhost:80.109.76.236\r\nreferer:https://00.000.00.000/owncloud/index.php/\r\nuser-agent:mozilla/5.0 (x11; linux i686) applewebkit/537.22 (khtml, like gecko) ubuntu chromium/25.0.1364.160 chrome/25.0.1364.160 safari/537.22\r\nx-requested-with:xmlhttprequest\r\nresponse headersview source\r\ncache-control:no-store, no-cache, must-revalidate, post-check=0, pre-check=0\r\nconnection:close\r\ncontent-encoding:gzip\r\ncontent-length:795\r\ncontent-security-policy:default-src 'self'; script-src 'self' 'unsafe-eval'; style-src 'self' 'unsafe-inline'; frame-src *; img-src *; font-src 'self' data:\r\ncontent-type:text/html; charset=utf-8\r\ndate:thu, 16 may 2013 14:47:23 gmt\r\nexpires:thu, 19 nov 1981 08:52:00 gmt\r\npragma:no-cache\r\nserver:apache/2.2.22 (ubuntu)\r\nstatus:503 service temporarily unavailable\r\nstrict-transport-security:max-age=31536000\r\nvary:accept-encoding\r\nx-content-type-options:nosniff\r\nx-frame-options:sameorigin\r\nx-powered-by:php/5.4.6-1ubuntu1.2\r\nx-xss-protection:1; mode=block\r\n\r\n\r\n2.1)  request url:https://00.000.00.000/owncloud/index.php/core/img/breadcrumb.svg\r\nrequest method:get\r\nstatus code:503 service temporarily unavailable\r\nrequest headersview source\r\naccept:*/*\r\naccept-charset:iso-8859-1,utf-8;q=0.7,*;q=0.3\r\naccept-encoding:gzip,deflate,sdch\r\naccept-language:de-de,de;q=0.8,en-us;q=0.6,en;q=0.4\r\ncache-control:max-age=0\r\nconnection:keep-alive\r\ncookie:50b2205264d48=b98t5ist9u8m281srcdt3fm165; 27a089e8453491826f55516ebf494006=m1k4gcq272hffmhib6615667i6\r\nhost:80.109.76.236\r\nreferer:https://00.000.00.000/owncloud/index.php/\r\nrequesttoken:undefined\r\nuser-agent:mozilla/5.0 (x11; linux i686) applewebkit/537.22 (khtml, like gecko) ubuntu chromium/25.0.1364.160 chrome/25.0.1364.160 safari/537.22\r\nx-requested-with:xmlhttprequest\r\nresponse headersview source\r\ncache-control:no-store, no-cache, must-revalidate, post-check=0, pre-check=0\r\nconnection:close\r\ncontent-encoding:gzip\r\ncontent-length:795\r\ncontent-security-policy:default-src 'self'; script-src 'self' 'unsafe-eval'; style-src 'self' 'unsafe-inline'; frame-src *; img-src *; font-src 'self' data:\r\ncontent-type:text/html; charset=utf-8\r\ndate:thu, 16 may 2013 14:47:23 gmt\r\nexpires:thu, 19 nov 1981 08:52:00 gmt\r\npragma:no-cache\r\nserver:apache/2.2.22 (ubuntu)\r\nstatus:503 service temporarily unavailable\r\nstrict-transport-security:max-age=31536000\r\nvary:accept-encoding\r\nx-content-type-options:nosniff\r\nx-frame-options:sameorigin\r\nx-powered-by:php/5.4.6-1ubuntu1.2\r\nx-xss-protection:1; mode=block\r\n\r\n```","closed_by":{"login":"karlitschek","id":867445,"avatar_url":"https://gravatar.com/avatar/87ce2b4531ee1a0c32b50e0d8f049224?d=https%3a%2f%2fidenticons.github.com%2f06e7098636caebfc9c30c9f52eb905df.png&r=x","gravatar_id":"87ce2b4531ee1a0c32b50e0d8f049224","url":"https://api.github.com/users/karlitschek","html_url":"https://github.com/karlitschek","followers_url":"https://api.github.com/users/karlitschek/followers","following_url":"https://api.github.com/users/karlitschek/following{/other_user}","gists_url":"https://api.github.com/users/karlitschek/gists{/gist_id}","starred_url":"https://api.github.com/users/karlitschek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karlitschek/subscriptions","organizations_url":"https://api.github.com/users/karlitschek/orgs","repos_url":"https://api.github.com/users/karlitschek/repos","events_url":"https://api.github.com/users/karlitschek/events{/privacy}","received_events_url":"https://api.github.com/users/karlitschek/received_events","type":"user","site_admin":false}}