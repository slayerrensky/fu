{"url":"https://api.github.com/repos/owncloud/core/issues/1341","labels_url":"https://api.github.com/repos/owncloud/core/issues/1341/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/1341/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/1341/events","html_url":"https://github.com/owncloud/core/issues/1341","id":10369180,"number":1341,"title":"unshare operation should not trigger the delete hook and hide the delete operation","user":{"login":"schiesbn","id":1589737,"avatar_url":"https://gravatar.com/avatar/8912b598c7b32dd25b87fd168e0b06b2?d=https%3a%2f%2fidenticons.github.com%2f0a323047dbe8329db30eae8dbe96e55e.png&r=x","gravatar_id":"8912b598c7b32dd25b87fd168e0b06b2","url":"https://api.github.com/users/schiesbn","html_url":"https://github.com/schiesbn","followers_url":"https://api.github.com/users/schiesbn/followers","following_url":"https://api.github.com/users/schiesbn/following{/other_user}","gists_url":"https://api.github.com/users/schiesbn/gists{/gist_id}","starred_url":"https://api.github.com/users/schiesbn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schiesbn/subscriptions","organizations_url":"https://api.github.com/users/schiesbn/orgs","repos_url":"https://api.github.com/users/schiesbn/repos","events_url":"https://api.github.com/users/schiesbn/events{/privacy}","received_events_url":"https://api.github.com/users/schiesbn/received_events","type":"user","site_admin":false},"labels":[{"url":"https://api.github.com/repos/owncloud/core/labels/2+-+concept","name":"2 - concept","color":"ededed"},{"url":"https://api.github.com/repos/owncloud/core/labels/sharing","name":"sharing","color":"e102d8"}],"state":"closed","assignee":null,"milestone":null,"comments":10,"created_at":"2013-01-28t09:38:51z","updated_at":"2013-08-08t06:55:49z","closed_at":"2013-08-08t06:55:49z","pull_request":{"html_url":null,"diff_url":null,"patch_url":null},"body":"at the moment we provide a unshare action instead of the delete action for top-level shares. this also means that a delete hook gets triggered, even if a unshare actions was performed instead of a delete operation. this causes several problems:\r\n\r\n1. apps which expect that a file was deleted react on the hooks and might perform actions which are not appropriated when the file was just unshared but not deleted. (example: the new trash bin app moves deleted files to the trash folder, which of course shouldn't be done if the file was just unshared)\r\n\r\n2. currently we are displaying for all top-level shares the \"unshare\" actions instead of the delete action. but since the new permission system is implemented it is also possible to delete files instead of unsharing them. at the moment the unshare operation always hide the delete operation.\r\n\r\nsuggested solution: display the delete action at the right side only if the shared file/folder can be deleted, also in the top-level view the same way we do it within a shared folder. beside that add a \"unshare\" action in the top level-view to all shares.\r\n\r\nthis solves both problems:\r\n1. we can trigger unshare hooks for the unshare operation and delete hooks for the delete operation which gives all apps the possibility to react on the corresponding action in a appropriated way.\r\n2. all files with the delete permission set can be deleted and all shares can be unshared by the recipient if he wish.","closed_by":{"login":"schiesbn","id":1589737,"avatar_url":"https://gravatar.com/avatar/8912b598c7b32dd25b87fd168e0b06b2?d=https%3a%2f%2fidenticons.github.com%2f0a323047dbe8329db30eae8dbe96e55e.png&r=x","gravatar_id":"8912b598c7b32dd25b87fd168e0b06b2","url":"https://api.github.com/users/schiesbn","html_url":"https://github.com/schiesbn","followers_url":"https://api.github.com/users/schiesbn/followers","following_url":"https://api.github.com/users/schiesbn/following{/other_user}","gists_url":"https://api.github.com/users/schiesbn/gists{/gist_id}","starred_url":"https://api.github.com/users/schiesbn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schiesbn/subscriptions","organizations_url":"https://api.github.com/users/schiesbn/orgs","repos_url":"https://api.github.com/users/schiesbn/repos","events_url":"https://api.github.com/users/schiesbn/events{/privacy}","received_events_url":"https://api.github.com/users/schiesbn/received_events","type":"user","site_admin":false}}