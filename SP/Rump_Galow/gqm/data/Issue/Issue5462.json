{"url":"https://api.github.com/repos/owncloud/core/issues/5462","labels_url":"https://api.github.com/repos/owncloud/core/issues/5462/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/5462/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/5462/events","html_url":"https://github.com/owncloud/core/issues/5462","id":21365006,"number":5462,"title":"memory limit exhausted / infinite loop","user":{"login":"torbennehmer","id":2812067,"avatar_url":"https://gravatar.com/avatar/c573d69cca60fa58d65784f639e9fa17?d=https%3a%2f%2fidenticons.github.com%2f38a3aa5ba58f8c6f512bbdac60a6943a.png&r=x","gravatar_id":"c573d69cca60fa58d65784f639e9fa17","url":"https://api.github.com/users/torbennehmer","html_url":"https://github.com/torbennehmer","followers_url":"https://api.github.com/users/torbennehmer/followers","following_url":"https://api.github.com/users/torbennehmer/following{/other_user}","gists_url":"https://api.github.com/users/torbennehmer/gists{/gist_id}","starred_url":"https://api.github.com/users/torbennehmer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/torbennehmer/subscriptions","organizations_url":"https://api.github.com/users/torbennehmer/orgs","repos_url":"https://api.github.com/users/torbennehmer/repos","events_url":"https://api.github.com/users/torbennehmer/events{/privacy}","received_events_url":"https://api.github.com/users/torbennehmer/received_events","type":"user","site_admin":false},"labels":[{"url":"https://api.github.com/repos/owncloud/core/labels/bug","name":"bug","color":"fc2929"}],"state":"closed","assignee":null,"milestone":null,"comments":13,"created_at":"2013-10-22t07:20:33z","updated_at":"2013-11-11t10:32:12z","closed_at":"2013-10-30t15:27:50z","pull_request":{"html_url":null,"diff_url":null,"patch_url":null},"body":"hi there,\r\n\r\ni have been experiencing memory limit exhaustions since a few weeks on a regular basis. i am not 100% sure if this is related to (or a duplicate of) #5428. it happens with 5.0.12 server and various clients (primarily reproducible here with webdav access from an ios app (photosync) but seen with the desktop client as well). \r\n\r\nafter enabling xdebug the error changed to an infinite recursion, this came from a photosync upload:\r\n\r\n```\r\n[tue oct 22 09:15:16 2013] [error] [client 217.5.129.98] php fatal error:  maximum function nesting level of '100' reached, aborting! in /var/www/clients/client1/web27/web/lib/base.php on line 81\r\n[tue oct 22 09:15:16 2013] [error] [client 217.5.129.98] php stack trace:\r\n[tue oct 22 09:15:16 2013] [error] [client 217.5.129.98] php   1. {main}() /var/www/clients/client1/web27/web/remote.php:0\r\n[tue oct 22 09:15:16 2013] [error] [client 217.5.129.98] php   2. require_once() /var/www/clients/client1/web27/web/remote.php:40\r\n[tue oct 22 09:15:16 2013] [error] [client 217.5.129.98] php   3. sabre_dav_server->exec() /var/www/clients/client1/web27/web/apps/files/appinfo/remote.php:53\r\n[tue oct 22 09:15:16 2013] [error] [client 217.5.129.98] php   4. sabre_dav_server->invokemethod() /var/www/clients/client1/web27/web/3rdparty/sabre/dav/server.php:213\r\n[tue oct 22 09:15:16 2013] [error] [client 217.5.129.98] php   5. call_user_func() /var/www/clients/client1/web27/web/3rdparty/sabre/dav/server.php:473\r\n[tue oct 22 09:15:16 2013] [error] [client 217.5.129.98] php   6. sabre_dav_server->httpput() /var/www/clients/client1/web27/web/3rdparty/sabre/dav/server.php:473\r\n[tue oct 22 09:15:16 2013] [error] [client 217.5.129.98] php   7. oc_connector_sabre_file->put() /var/www/clients/client1/web27/web/3rdparty/sabre/dav/server.php:885\r\n[tue oct 22 09:15:16 2013] [error] [client 217.5.129.98] php   8. oc\\\\files\\\\filesystem::rename() /var/www/clients/client1/web27/web/lib/connector/sabre/file.php:72\r\n[tue oct 22 09:15:16 2013] [error] [client 217.5.129.98] php   9. oc\\\\files\\\\view->rename() /var/www/clients/client1/web27/web/lib/files/filesystem.php:526\r\n[tue oct 22 09:15:16 2013] [error] [client 217.5.129.98] php  10. oc_hook::emit() /var/www/clients/client1/web27/web/lib/files/view.php:361\r\n[tue oct 22 09:15:16 2013] [error] [client 217.5.129.98] php  11. call_user_func() /var/www/clients/client1/web27/web/lib/hook.php:72\r\n[tue oct 22 09:15:16 2013] [error] [client 217.5.129.98] php  12. oca\\\\files_versions\\\\hooks::write_hook() /var/www/clients/client1/web27/web/lib/hook.php:72\r\n[tue oct 22 09:15:16 2013] [error] [client 217.5.129.98] php  13. oca\\\\files_versions\\\\storage::store() /var/www/clients/client1/web27/web/apps/files_versions/lib/hooks.php:25\r\n[tue oct 22 09:15:16 2013] [error] [client 217.5.129.98] php  14. oca\\\\files_versions\\\\storage::expire() /var/www/clients/client1/web27/web/apps/files_versions/lib/versions.php:124\r\n[tue oct 22 09:15:16 2013] [error] [client 217.5.129.98] php  15. oca\\\\files_versions\\\\storage::deloldversions() /var/www/clients/client1/web27/web/apps/files_versions/lib/versions.php:448\r\n[tue oct 22 09:15:16 2013] [error] [client 217.5.129.98] php  16. oc\\\\files\\\\view->unlink() /var/www/clients/client1/web27/web/apps/files_versions/lib/versions.php:520\r\n[tue oct 22 09:15:16 2013] [error] [client 217.5.129.98] php  17. oc\\\\files\\\\view->basicoperation() /var/www/clients/client1/web27/web/lib/files/view.php:328\r\n[tue oct 22 09:15:16 2013] [error] [client 217.5.129.98] php  18. oc\\\\files\\\\view->runhooks() /var/www/clients/client1/web27/web/lib/files/view.php:671\r\n[tue oct 22 09:15:16 2013] [error] [client 217.5.129.98] php  19. oc_hook::emit() /var/www/clients/client1/web27/web/lib/files/view.php:718\r\n[tue oct 22 09:15:16 2013] [error] [client 217.5.129.98] php  20. call_user_func() /var/www/clients/client1/web27/web/lib/hook.php:72\r\n[tue oct 22 09:15:16 2013] [error] [client 217.5.129.98] php  21. oca\\\\gallery\\\\thumbnail::removehook() /var/www/clients/client1/web27/web/lib/hook.php:72\r\n[tue oct 22 09:15:16 2013] [error] [client 217.5.129.98] php  22. oca\\\\gallery\\\\thumbnail::removehook() /var/www/clients/client1/web27/web/apps/gallery/lib/thumbnail.php:140\r\n[...]\r\n[tue oct 22 09:15:16 2013] [error] [client 217.5.129.98] php  93. oca\\\\gallery\\\\thumbnail::removehook() /var/www/clients/client1/web27/web/apps/gallery/lib/thumbnail.php:140\r\n[tue oct 22 09:15:16 2013] [error] [client 217.5.129.98] php  94. oc_user::gethome() /var/www/clients/client1/web27/web/apps/gallery/lib/thumbnail.php:114\r\n[tue oct 22 09:15:16 2013] [error] [client 217.5.129.98] php  95. oc_user_database->gethome() /var/www/clients/client1/web27/web/lib/user.php:492\r\n[tue oct 22 09:15:16 2013] [error] [client 217.5.129.98] php  96. oc_user_database->userexists() /var/www/clients/client1/web27/web/lib/user/database.php:255\r\n[tue oct 22 09:15:16 2013] [error] [client 217.5.129.98] php  97. oc_db::iserror() /var/www/clients/client1/web27/web/lib/user/database.php:242\r\n[tue oct 22 09:15:16 2013] [error] [client 217.5.129.98] php  98. class_exists() /var/www/clients/client1/web27/web/lib/db.php:994\r\n[tue oct 22 09:15:16 2013] [error] [client 217.5.129.98] php  99. oc::autoload() /var/www/clients/client1/web27/web/lib/db.php:0\r\n```\r\n","closed_by":{"login":"pvince81","id":277525,"avatar_url":"https://gravatar.com/avatar/e446b529679416eb70eafb4ca4da5bbe?d=https%3a%2f%2fidenticons.github.com%2f89d7c394e6dcdf87a91c75ac3b2ccbe8.png&r=x","gravatar_id":"e446b529679416eb70eafb4ca4da5bbe","url":"https://api.github.com/users/pvince81","html_url":"https://github.com/pvince81","followers_url":"https://api.github.com/users/pvince81/followers","following_url":"https://api.github.com/users/pvince81/following{/other_user}","gists_url":"https://api.github.com/users/pvince81/gists{/gist_id}","starred_url":"https://api.github.com/users/pvince81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvince81/subscriptions","organizations_url":"https://api.github.com/users/pvince81/orgs","repos_url":"https://api.github.com/users/pvince81/repos","events_url":"https://api.github.com/users/pvince81/events{/privacy}","received_events_url":"https://api.github.com/users/pvince81/received_events","type":"user","site_admin":false}}