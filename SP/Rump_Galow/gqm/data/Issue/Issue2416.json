{"url":"https://api.github.com/repos/owncloud/core/issues/2416","labels_url":"https://api.github.com/repos/owncloud/core/issues/2416/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/2416/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/2416/events","html_url":"https://github.com/owncloud/core/issues/2416","id":12128885,"number":2416,"title":"oc5 - external smb storage","user":{"login":"yaerox","id":3898071,"avatar_url":"https://gravatar.com/avatar/b31a3d8fac0be5a7d6806d2ccf1894d1?d=https%3a%2f%2fidenticons.github.com%2f3cd490ad75c26e4bd1e1c4f155134f99.png&r=x","gravatar_id":"b31a3d8fac0be5a7d6806d2ccf1894d1","url":"https://api.github.com/users/yaerox","html_url":"https://github.com/yaerox","followers_url":"https://api.github.com/users/yaerox/followers","following_url":"https://api.github.com/users/yaerox/following{/other_user}","gists_url":"https://api.github.com/users/yaerox/gists{/gist_id}","starred_url":"https://api.github.com/users/yaerox/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yaerox/subscriptions","organizations_url":"https://api.github.com/users/yaerox/orgs","repos_url":"https://api.github.com/users/yaerox/repos","events_url":"https://api.github.com/users/yaerox/events{/privacy}","received_events_url":"https://api.github.com/users/yaerox/received_events","type":"user","site_admin":false},"labels":[{"url":"https://api.github.com/repos/owncloud/core/labels/app%3afiles_external","name":"app:files_external","color":"02d7e1"},{"url":"https://api.github.com/repos/owncloud/core/labels/bug","name":"bug","color":"fc2929"}],"state":"closed","assignee":null,"milestone":null,"comments":33,"created_at":"2013-03-18t11:14:03z","updated_at":"2013-12-02t11:11:50z","closed_at":"2013-12-02t11:11:50z","pull_request":{"html_url":null,"diff_url":null,"patch_url":null},"body":"hey guys,\r\n\r\ni'm actual having a problem with the user rights on the external (smb) storage. it took a while until it was running but now dont even the oc admin is able to create a file or delete folder in this folder. he's able to edit, delete and upload files/directorys, but like i said, dont even the admin can create files (new -> textfile) or delete a folder.\r\nmaybe first some information about my enviroment:\r\n(http://susestudio.com/a/tadmax/owncloud-in-a-box) vm - opensuse 12.2 in a box (with updated repository)\r\n+ mysql\r\n+ owncloud 5\r\n+ external smb storage on a win7 prof computer\r\n\r\nif i try to create a file i get: <code>error when creating the file.</code>\r\n\r\nowncloud.log says:\r\n<code>warning\tphp stat(): stat failed for smb://username:password@192.3.1.xxx/use ... e/testfile at /srv/www/htdocs/owncloud/apps/files_external/lib/smb.php#65\r\nwarning\tphp filetype(): lstat failed for smb://username:password@192.3.1.xxx/use ... e/testfile at /srv/www/htdocs/owncloud/apps/files_external/lib/streamwrapper.php#51\r\nwarning\tphp stat(): stat failed for smb://username:password@192.3.1.xxx/use ... e/testfile at /srv/www/htdocs/owncloud/apps/files_external/lib/smb.php#65\r\nwarning\tphp\tfiletype(): lstat failed for smb://username:password@192.3.1.xxx/use ... e/testfile at /srv/www/htdocs/owncloud/apps/files_external/lib/streamwrapper.php#51\r\nwarning\tphp\tstat(): stat failed for smb://username:password@192.3.1.xxx/use ... e/testfile at /srv/www/htdocs/owncloud/apps/files_external/lib/smb.php#65\r\nwarning\tphp\tfiletype(): lstat failed for smb://username:password@192.3.1.xxx/use ... e/testfile at /srv/www/htdocs/owncloud/apps/files_external/lib/streamwrapper.php#51\r\nwarning\tphp\tfiletype(): lstat failed for smb://username:password@192.3.1.xxx/use ... e/testfile at /srv/www/htdocs/owncloud/apps/files_external/lib/streamwrapper.php#51\r\nwarning\tphp\tstat(): stat failed for smb://username:password@192.3.1.xxx/use ... e/testfile at /srv/www/htdocs/owncloud/apps/files_external/lib/smb.php#65\r\nwarning\tphp\tfiletype(): lstat failed for smb://username:password@192.3.1.xxx/use ... e/testfile at /srv/www/htdocs/owncloud/apps/files_external/lib/streamwrapper.php#51\r\nwarning\tphp\tstat(): stat failed for smb://username:password@192.3.1.xxx/use ... e/testfile at /srv/www/htdocs/owncloud/apps/files_external/lib/smb.php#65\r\nwarning\tphp\tnt_status_object_name_not_found opening remote file params(-d 0 '//192.3.1.xxx/users' -c 'get \"username\\externalstorage\\my_folder_to_share\\testfile\" \"/tmp/smb.down.akmems\"') at /srv/www/htdocs/owncloud/3rdparty/smb4php/smb.php#187\r\nwarning\tphp\tfiletype(): lstat failed for smb://username:password@192.3.1.xxx/use ... e/testfile at /srv/www/htdocs/owncloud/apps/files_external/lib/streamwrapper.php#51</code>\r\n\r\nmy smb.conf is equal the default one: \r\n<code>[global]\r\n   map to guest = bad user\r\n   printcap name = cups\r\n   logon path = \\\\%l\\profiles\\.msprofile\r\n   logon drive = p:\r\n   logon home = \\\\%l\\users\\%u\\externalstorage\\\r\n   usershare allow guests = yes\r\n   idmap config * : backend = tdb\r\n   cups options = raw\r\n[homes]\r\n   comment = home directories\r\n   valid users = %s, %d%w%s\r\n   read only = no\r\n   inherit acls = yes\r\n   browseable = no\r\n[groups]\r\n   comment = all groups\r\n   path = /home/groups\r\n   read only = no\r\n   inherit acls = yes\r\n[users]\r\n   comment = all users\r\n   path = /home\r\n   read only = no\r\n   inherit acls = yes\r\n   veto files = /aquota.user/groups/shares/\r\n[profiles]\r\n   comment = network profiles service\r\n   path = %h\r\n   read only = no\r\n   create mask = 0600\r\n   directory mask = 0700\r\n   store dos attributes = yes\r\n[printers]\r\n   comment = all printers\r\n   path = /var/tmp\r\n   create mask = 0600\r\n   printable = yes\r\n   print ok = yes\r\n   browseable = no\r\n[print$]\r\n   comment = printer drivers\r\n   path = /var/lib/samba/drivers\r\n   write list = @ntadmin, root\r\n   force group = ntadmin\r\n   create mask = 0664\r\n   directory mask = 0775</code>\r\n\r\nmount.json looks fine.\r\n\r\non my windows computer the owner of the directory is the same user who is used by the external smb storage. he got full rights on the folder at my win7 and on directory properties -> file sharing too.\r\n\r\nanyone who know how to fix/setup external (smb) storage and configurate the user rights? i really looked up the forums, google and github but i couldn't find someone who could help me or any kind of 'tutorial'.\r\n\r\nby the way, if i try to delete a file, the browser isnt refreshign the list, so nothings changes but on my win7 computer the file is already deleted.if i try to rename a file/folder i get the error message that he couldn't rename it but he did.\r\n\r\nregards.","closed_by":{"login":"pvince81","id":277525,"avatar_url":"https://gravatar.com/avatar/e446b529679416eb70eafb4ca4da5bbe?d=https%3a%2f%2fidenticons.github.com%2f89d7c394e6dcdf87a91c75ac3b2ccbe8.png&r=x","gravatar_id":"e446b529679416eb70eafb4ca4da5bbe","url":"https://api.github.com/users/pvince81","html_url":"https://github.com/pvince81","followers_url":"https://api.github.com/users/pvince81/followers","following_url":"https://api.github.com/users/pvince81/following{/other_user}","gists_url":"https://api.github.com/users/pvince81/gists{/gist_id}","starred_url":"https://api.github.com/users/pvince81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvince81/subscriptions","organizations_url":"https://api.github.com/users/pvince81/orgs","repos_url":"https://api.github.com/users/pvince81/repos","events_url":"https://api.github.com/users/pvince81/events{/privacy}","received_events_url":"https://api.github.com/users/pvince81/received_events","type":"user","site_admin":false}}