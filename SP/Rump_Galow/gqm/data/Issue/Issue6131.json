{"url":"https://api.github.com/repos/owncloud/core/issues/6131","labels_url":"https://api.github.com/repos/owncloud/core/issues/6131/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/6131/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/6131/events","html_url":"https://github.com/owncloud/core/issues/6131","id":23502734,"number":6131,"title":"is there a need to for php_auth_user to match user_id?","user":{"login":"josh4trunks","id":1018807,"avatar_url":"https://gravatar.com/avatar/666f87548f9ddefc126b7ca41428e2a8?d=https%3a%2f%2fidenticons.github.com%2fb8756954ac46c8146997871f0d0a7929.png&r=x","gravatar_id":"666f87548f9ddefc126b7ca41428e2a8","url":"https://api.github.com/users/josh4trunks","html_url":"https://github.com/josh4trunks","followers_url":"https://api.github.com/users/josh4trunks/followers","following_url":"https://api.github.com/users/josh4trunks/following{/other_user}","gists_url":"https://api.github.com/users/josh4trunks/gists{/gist_id}","starred_url":"https://api.github.com/users/josh4trunks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/josh4trunks/subscriptions","organizations_url":"https://api.github.com/users/josh4trunks/orgs","repos_url":"https://api.github.com/users/josh4trunks/repos","events_url":"https://api.github.com/users/josh4trunks/events{/privacy}","received_events_url":"https://api.github.com/users/josh4trunks/received_events","type":"user","site_admin":false},"labels":[{"url":"https://api.github.com/repos/owncloud/core/labels/enhancement","name":"enhancement","color":"02e10c"}],"state":"closed","assignee":null,"milestone":null,"comments":5,"created_at":"2013-11-29t17:19:41z","updated_at":"2013-11-29t18:28:50z","closed_at":"2013-11-29t17:48:43z","pull_request":{"html_url":null,"diff_url":null,"patch_url":null},"body":"i'm not sure the reasoning for the below code and it causes problems in some situations.  if a webserver has different applications in different subdirectories and one uses http basic authentication then owncloud refused to allow someone to login unless the usernames match (i don't think password needs to match).\r\n\r\n**example**\r\nwww.example.com/app1 - uses basic authentication, browser saves credentials\r\nwww.example.com/owncloud - browser sends credentials to webserver, which get's passed to php's php_auth_user/pw. owncloud will logout the user unless they use the same user.\r\n\r\ni think the only way to fix the credentials is too ask for new ones, or as i suggest ignore them.  is there a reason to look at them if they aren't being set by owncloud?\r\n\r\nthis effects me because i use subdirectories for all my applications and use nginx (not sure if apache also forwards basic authentication to php).\r\n\r\n                if (isset($_server['php_auth_user']) && self::$session->exists('user_id')\r\n                        && $_server['php_auth_user'] != self::$session->get('user_id')) {\r\n                        $sessionuser = self::$session->get('user_id');\r\n                        $serveruser = $_server['php_auth_user'];\r\n                        oc_log::write('core',\r\n                                \"session user-id ($sessionuser) doesn't match server[php_auth_user] ($serveruser).\",\r\n                                oc_log::warn);\r\n                        oc_user::logout();\r\n                }\r\n\r\n","closed_by":{"login":"karlitschek","id":867445,"avatar_url":"https://gravatar.com/avatar/87ce2b4531ee1a0c32b50e0d8f049224?d=https%3a%2f%2fidenticons.github.com%2f06e7098636caebfc9c30c9f52eb905df.png&r=x","gravatar_id":"87ce2b4531ee1a0c32b50e0d8f049224","url":"https://api.github.com/users/karlitschek","html_url":"https://github.com/karlitschek","followers_url":"https://api.github.com/users/karlitschek/followers","following_url":"https://api.github.com/users/karlitschek/following{/other_user}","gists_url":"https://api.github.com/users/karlitschek/gists{/gist_id}","starred_url":"https://api.github.com/users/karlitschek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karlitschek/subscriptions","organizations_url":"https://api.github.com/users/karlitschek/orgs","repos_url":"https://api.github.com/users/karlitschek/repos","events_url":"https://api.github.com/users/karlitschek/events{/privacy}","received_events_url":"https://api.github.com/users/karlitschek/received_events","type":"user","site_admin":false}}