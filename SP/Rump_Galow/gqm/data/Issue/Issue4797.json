{"url":"https://api.github.com/repos/owncloud/core/issues/4797","labels_url":"https://api.github.com/repos/owncloud/core/issues/4797/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/4797/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/4797/events","html_url":"https://github.com/owncloud/core/issues/4797","id":19284037,"number":4797,"title":"upgrade to 5.0.11 failed to update database structure","user":{"login":"strangenoises","id":1295001,"avatar_url":"https://gravatar.com/avatar/a5d6612a9a7da64e0e878d1b3bc04d8a?d=https%3a%2f%2fidenticons.github.com%2f3d85d3be1f7025aa7ef230d575c85d82.png&r=x","gravatar_id":"a5d6612a9a7da64e0e878d1b3bc04d8a","url":"https://api.github.com/users/strangenoises","html_url":"https://github.com/strangenoises","followers_url":"https://api.github.com/users/strangenoises/followers","following_url":"https://api.github.com/users/strangenoises/following{/other_user}","gists_url":"https://api.github.com/users/strangenoises/gists{/gist_id}","starred_url":"https://api.github.com/users/strangenoises/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/strangenoises/subscriptions","organizations_url":"https://api.github.com/users/strangenoises/orgs","repos_url":"https://api.github.com/users/strangenoises/repos","events_url":"https://api.github.com/users/strangenoises/events{/privacy}","received_events_url":"https://api.github.com/users/strangenoises/received_events","type":"user","site_admin":false},"labels":[],"state":"closed","assignee":null,"milestone":null,"comments":1,"created_at":"2013-09-10t20:49:41z","updated_at":"2013-09-11t17:39:24z","closed_at":"2013-09-11t17:39:24z","pull_request":{"html_url":null,"diff_url":null,"patch_url":null},"body":"as per subject. i have this on the main page:\r\n\r\n```\r\nfailed to update database structure (mdb2 error: unknown error, _doquery: [error\r\nmessage: could not execute statement] [last executed query: alter table\r\n`oc_locks` change `id` `id` int unsigned not null auto_increment\r\nprimary key, change `timeout` `timeout` int unsigned default 0,\r\nchange `created` `created` bigint default 0, change `scope` `scope`\r\ntinyint default 0, change `depth` `depth` tinyint default 0] [native code:\r\n1068] [native message: multiple primary key defined] )\r\n```\r\n\r\n(fenced code block and manually wordwrapped because text quoted contains backticks that does other formatting magic.)\r\n\r\nprevious version was 5.0.10 installed from your apt repo on ubuntu 12.04 64-bit.\r\n\r\nearlier today i had migrated the database from sqlite to mysql using this guide http://fabianpeter.de/cloud/owncloud-migrating-from-sqlite-to-mysql/\r\n\r\nit all seemed to go smoothly, and afterwards it worked much faster and didn't seem to have problems with my multiple machines working on it at once any more.\r\n\r\n```\r\nmysql> show create table oc_locks gives one row (formatting rules omitted)\r\n| table    | create table\r\noc_locks | create table `oc_locks` (\r\n  `id` int(11) not null auto_increment,\r\n  `userid` varchar(64) default null,\r\n  `owner` varchar(100) default null,\r\n  `timeout` int(10) unsigned default '0',\r\n  `created` bigint(20) default '0',\r\n  `token` varchar(100) default null,\r\n  `scope` smallint(6) default '0',\r\n  `depth` smallint(6) default '0',\r\n  `uri` longtext,\r\n  primary key (`id`)\r\n) engine=innodb default charset=latin1\r\n```","closed_by":{"login":"strangenoises","id":1295001,"avatar_url":"https://gravatar.com/avatar/a5d6612a9a7da64e0e878d1b3bc04d8a?d=https%3a%2f%2fidenticons.github.com%2f3d85d3be1f7025aa7ef230d575c85d82.png&r=x","gravatar_id":"a5d6612a9a7da64e0e878d1b3bc04d8a","url":"https://api.github.com/users/strangenoises","html_url":"https://github.com/strangenoises","followers_url":"https://api.github.com/users/strangenoises/followers","following_url":"https://api.github.com/users/strangenoises/following{/other_user}","gists_url":"https://api.github.com/users/strangenoises/gists{/gist_id}","starred_url":"https://api.github.com/users/strangenoises/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/strangenoises/subscriptions","organizations_url":"https://api.github.com/users/strangenoises/orgs","repos_url":"https://api.github.com/users/strangenoises/repos","events_url":"https://api.github.com/users/strangenoises/events{/privacy}","received_events_url":"https://api.github.com/users/strangenoises/received_events","type":"user","site_admin":false}}