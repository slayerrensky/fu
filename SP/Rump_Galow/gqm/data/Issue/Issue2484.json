{"url":"https://api.github.com/repos/owncloud/core/issues/2484","labels_url":"https://api.github.com/repos/owncloud/core/issues/2484/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/2484/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/2484/events","html_url":"https://github.com/owncloud/core/issues/2484","id":12242388,"number":2484,"title":"user able to delete shared file when mounted using webdav","user":{"login":"danobrie","id":3923107,"avatar_url":"https://gravatar.com/avatar/4ee644154306926c2829f42bff1a2c59?d=https%3a%2f%2fidenticons.github.com%2fec862408f357f4fa76bfb40eb4252bf5.png&r=x","gravatar_id":"4ee644154306926c2829f42bff1a2c59","url":"https://api.github.com/users/danobrie","html_url":"https://github.com/danobrie","followers_url":"https://api.github.com/users/danobrie/followers","following_url":"https://api.github.com/users/danobrie/following{/other_user}","gists_url":"https://api.github.com/users/danobrie/gists{/gist_id}","starred_url":"https://api.github.com/users/danobrie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danobrie/subscriptions","organizations_url":"https://api.github.com/users/danobrie/orgs","repos_url":"https://api.github.com/users/danobrie/repos","events_url":"https://api.github.com/users/danobrie/events{/privacy}","received_events_url":"https://api.github.com/users/danobrie/received_events","type":"user","site_admin":false},"labels":[{"url":"https://api.github.com/repos/owncloud/core/labels/bug","name":"bug","color":"fc2929"},{"url":"https://api.github.com/repos/owncloud/core/labels/panic","name":"panic","color":"e10c02"},{"url":"https://api.github.com/repos/owncloud/core/labels/sharing","name":"sharing","color":"e102d8"}],"state":"closed","assignee":null,"milestone":null,"comments":5,"created_at":"2013-03-20t18:48:42z","updated_at":"2013-06-07t13:35:50z","closed_at":"2013-06-07t13:35:50z","pull_request":{"html_url":null,"diff_url":null,"patch_url":null},"body":"update with more info:\r\n\r\nuser1 shares somefolder/ containing somefile (created using \"new: text file) with user2, checks \"can edit\" unchecks \"delete\".\r\nuser2 maps network drive via webdav and deletes somefile in m:\\shared\\somefolder\\ \r\nsomfile is deleted from user1 interface, is in user2's trash bin.\r\n\r\n### expected behaviour\r\nfile should be unshared with user2\r\nnote, if user1 shares only the file and user2 deletes, it correctly results in unsharing the file.\r\n\r\n### actual behaviour\r\n\r\nfile is made unaware to owncloud in user1's web interface (it is still there on the server but does not show up on web interface).  file is now in user2's trash and user2 can restore it.  i have had some luck with the correct behavior when somefile.txt includes the .txt file extension, but this does not guarantee correct behavior.\r\n\r\nif user1 creates a new text file (somefile2) in his root this sometimes results in the deleted file reappearing in somefolder. \r\n\r\nsometimes when i've done this somefile.txt comes back on its own after a couple minutes and reappears in the mapped drive of user2 and in the web interface of user1.  but ~90% of the time it never comes back.\r\n\r\nthe file is still in the user1's file directory on the server no matter if it comes back or not.\r\n\r\n### steps to reproduce\r\n1. create user1 and and user2\r\n2. user1 creates /somefolder/somefile.txt\r\n3. user1 shares /somefolder with user2.  check \"can edit\" uncheck \"delete\"\r\n4. user2 uses netdrive1.3.4.0 and maps drive via webdav https link \r\n5. user2 deletes m:\\shared\\somefolder\\somefile.txt\r\n6. user1 web interface shows somefile.txt is gone.  nothing in the trash.\r\n7. user2 sees in web interface the deleted file in trash and can restore it (but for step 8 does not restore it)\r\n8. user1 creates new text file in root, somefile2.  looks in somefolder and somefile is back (or not).\r\n\r\n### server configuration\r\noperating system:\r\nserver is on debian 6.0, client is on windows 7 64bit\r\nweb server: \r\napache2.2\r\ndatabase:\r\nmysql5.1\r\nphp version:\r\n5.3.3\r\nowncloud version:\r\n5.0\r\n","closed_by":{"login":"mtgap","id":1097106,"avatar_url":"https://gravatar.com/avatar/454a73ee5feeb428d0c163a48903332c?d=https%3a%2f%2fidenticons.github.com%2f52d29a66f285a1d61125dd69ac0766b2.png&r=x","gravatar_id":"454a73ee5feeb428d0c163a48903332c","url":"https://api.github.com/users/mtgap","html_url":"https://github.com/mtgap","followers_url":"https://api.github.com/users/mtgap/followers","following_url":"https://api.github.com/users/mtgap/following{/other_user}","gists_url":"https://api.github.com/users/mtgap/gists{/gist_id}","starred_url":"https://api.github.com/users/mtgap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mtgap/subscriptions","organizations_url":"https://api.github.com/users/mtgap/orgs","repos_url":"https://api.github.com/users/mtgap/repos","events_url":"https://api.github.com/users/mtgap/events{/privacy}","received_events_url":"https://api.github.com/users/mtgap/received_events","type":"user","site_admin":false}}