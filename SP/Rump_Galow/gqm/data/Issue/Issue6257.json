{"url":"https://api.github.com/repos/owncloud/core/issues/6257","labels_url":"https://api.github.com/repos/owncloud/core/issues/6257/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/6257/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/6257/events","html_url":"https://github.com/owncloud/core/issues/6257","id":23955740,"number":6257,"title":"5.0.13 stable - pdf view bugged","user":{"login":"boesing","id":2189546,"avatar_url":"https://gravatar.com/avatar/a4a7a9241b4abcc551760aaf70d7542d?d=https%3a%2f%2fidenticons.github.com%2f7d9c226dd85ab59967a7d7c5f3dc58be.png&r=x","gravatar_id":"a4a7a9241b4abcc551760aaf70d7542d","url":"https://api.github.com/users/boesing","html_url":"https://github.com/boesing","followers_url":"https://api.github.com/users/boesing/followers","following_url":"https://api.github.com/users/boesing/following{/other_user}","gists_url":"https://api.github.com/users/boesing/gists{/gist_id}","starred_url":"https://api.github.com/users/boesing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/boesing/subscriptions","organizations_url":"https://api.github.com/users/boesing/orgs","repos_url":"https://api.github.com/users/boesing/repos","events_url":"https://api.github.com/users/boesing/events{/privacy}","received_events_url":"https://api.github.com/users/boesing/received_events","type":"user","site_admin":false},"labels":[{"url":"https://api.github.com/repos/owncloud/core/labels/bug","name":"bug","color":"fc2929"}],"state":"closed","assignee":null,"milestone":null,"comments":2,"created_at":"2013-12-09t11:48:19z","updated_at":"2013-12-09t14:15:28z","closed_at":"2013-12-09t14:15:28z","pull_request":{"html_url":null,"diff_url":null,"patch_url":null},"body":"### expected behaviour\r\nactually, it should display the pdf-file in browser without that empty space at the top and without all theses errors in console.\r\n\r\n### actual behaviour\r\ni can open the website and i get the pdf as expected. but half of the website (1280*1024) is blank (download button at the top is displayed as usual) and if you're not logged in with valid credentials, you get the \"login\" formular (even if you open a shared file via link). that shouldn't happen. if you click on \"download\" you get an empty pdf file embedded in the pdf-viewers plugin.\r\n\r\n### steps to reproduce\r\n1. upload pdf\r\n2. share it with public or with password, doesnt matter\r\n3. (if password, enter it after calling the website and) see what happens\r\n\r\n### server configuration\r\noperating system:\r\ndebian wheezy\r\n\r\nweb server: \r\nnginx\r\n\r\ndatabase:\r\nmysql\r\n\r\nphp version:\r\n5.5.6\r\n\r\nowncloud version: (see owncloud admin page)\r\n5.0.13\r\n\r\nupdated from an older owncloud or fresh install:\r\nupdated with \"git pull\"\r\n\r\nlist of activated app:\r\n- deleted files\r\n- encryption\r\n- external storage support\r\n- external user support\r\n- image viewer\r\n- odf viewer\r\n- pdf viewer\r\n- share files\r\n- text editor\r\n- versions\r\n- owncloud dependencies info\r\n- antivirus app for files\r\n- checksum\r\n- files move\r\n- shorty\r\n\r\nthe content of config/config.php: \r\n```\r\n<?php\r\n$config = array (\r\n  'instanceid' => '513f6775554b5',\r\n  'passwordsalt' => '',\r\n  'datadirectory' => '/var/www/kriegt_es/cloud/data',\r\n  'dbtype' => 'mysql',\r\n  'version' => '5.80.5',\r\n  'dbname' => 'owncloud',\r\n  'dbhost' => 'localhost',\r\n  'dbtableprefix' => '',\r\n  'dbuser' => 'owncloud',\r\n  'dbpassword' => 'somepassword',\r\n  'installed' => true,\r\n  'maintenance' => false,\r\n  'forcessl' => true,\r\n  'theme' => '',\r\n);\r\n```\r\n\r\n### client configuration\r\nbrowser:\r\ngoogle chrome \r\n\r\noperating system:\r\nubuntu 12.04 lts\r\n\r\n### logs\r\n#### web server error log\r\n```\r\nthis is the access log as non-logged-in user!\r\nmyip - - 09/dec/2013:12:40:51 +0100 \"get /public.php?service=files&t=b099876749346a10a26c656ce798fcdd http/1.1\" 200 1114 \"-\" \"mozilla/5.0 (x11; linux x86_64) applewebkit/537.36 (khtml, like gecko) chrome/32.0.1700.41 safari/537.36\"\r\nmyip - - 09/dec/2013:12:40:51 +0100 \"get /index.php/apps/files_sharing/css/public.css?v=b6e584419a62da6229cf347e5ccfa166 http/1.1\" 304 0 \"https://cloud.kriegt.es/public.php?service=files&t=b099876749346a10a26c656ce798fcdd\" \"mozilla/5.0 (x11; linux x86_64) applewebkit/537.36 (khtml, like gecko) chrome/32.0.1700.41 safari/537.36\"\r\nmyip - - 09/dec/2013:12:40:51 +0100 \"get /index.php/core/js/config.js?v=b6e584419a62da6229cf347e5ccfa166 http/1.1\" 200 406 \"https://cloud.kriegt.es/public.php?service=files&t=b099876749346a10a26c656ce798fcdd\" \"mozilla/5.0 (x11; linux x86_64) applewebkit/537.36 (khtml, like gecko) chrome/32.0.1700.41 safari/537.36\"\r\nmyip - - 09/dec/2013:12:40:51 +0100 \"get /remote.php/core.css?v=b6e584419a62da6229cf347e5ccfa166 http/1.1\" 200 14070 \"https://cloud.kriegt.es/public.php?service=files&t=b099876749346a10a26c656ce798fcdd\" \"mozilla/5.0 (x11; linux x86_64) applewebkit/537.36 (khtml, like gecko) chrome/32.0.1700.41 safari/537.36\"\r\nmyip - - 09/dec/2013:12:40:51 +0100 \"get /remote.php/core.js?v=b6e584419a62da6229cf347e5ccfa166 http/1.1\" 304 0 \"https://cloud.kriegt.es/public.php?service=files&t=b099876749346a10a26c656ce798fcdd\" \"mozilla/5.0 (x11; linux x86_64) applewebkit/537.36 (khtml, like gecko) chrome/32.0.1700.41 safari/537.36\"\r\nmyip - - 09/dec/2013:12:40:51 +0100 \"get /core/img/logo-wide.svg http/1.1\" 304 0 \"https://cloud.kriegt.es/public.php?service=files&t=b099876749346a10a26c656ce798fcdd\" \"mozilla/5.0 (x11; linux x86_64) applewebkit/537.36 (khtml, like gecko) chrome/32.0.1700.41 safari/537.36\"\r\nmyip - - 09/dec/2013:12:40:51 +0100 \"get /core/img/actions/download.svg http/1.1\" 304 0 \"https://cloud.kriegt.es/public.php?service=files&t=b099876749346a10a26c656ce798fcdd\" \"mozilla/5.0 (x11; linux x86_64) applewebkit/537.36 (khtml, like gecko) chrome/32.0.1700.41 safari/537.36\"\r\nmyip - - 09/dec/2013:12:40:51 +0100 \"get /index.php/core/routes.json http/1.1\" 200 995 \"https://cloud.kriegt.es/public.php?service=files&t=b099876749346a10a26c656ce798fcdd\" \"mozilla/5.0 (x11; linux x86_64) applewebkit/537.36 (khtml, like gecko) chrome/32.0.1700.41 safari/537.36\"\r\nmyip - - 09/dec/2013:12:40:51 +0100 \"get /core/img/breadcrumb.svg http/1.1\" 304 0 \"https://cloud.kriegt.es/public.php?service=files&t=b099876749346a10a26c656ce798fcdd\" \"mozilla/5.0 (x11; linux x86_64) applewebkit/537.36 (khtml, like gecko) chrome/32.0.1700.41 safari/537.36\"\r\nmyip - - 09/dec/2013:12:40:51 +0100 \"post /index.php/core/ajax/translations.php http/1.1\" 200 61 \"https://cloud.kriegt.es/public.php?service=files&t=b099876749346a10a26c656ce798fcdd\" \"mozilla/5.0 (x11; linux x86_64) applewebkit/537.36 (khtml, like gecko) chrome/32.0.1700.41 safari/537.36\"\r\nmyip - - 09/dec/2013:12:40:51 +0100 \"get /index.php/apps/files_pdfviewer/viewer.php?dir=/&file=s3_limo.pdf http/1.1\" 302 5 \"https://cloud.kriegt.es/public.php?service=files&t=b099876749346a10a26c656ce798fcdd\" \"mozilla/5.0 (x11; linux x86_64) applewebkit/537.36 (khtml, like gecko) chrome/32.0.1700.41 safari/537.36\"\r\nmyip - - 09/dec/2013:12:40:51 +0100 \"get /index.php?redirect_url=%2findex.php%2fapps%2ffiles_pdfviewer%2fviewer.php%3fdir%3d%2f%26file%3ds3_limo.pdf http/1.1\" 200 1081 \"https://cloud.kriegt.es/public.php?service=files&t=b099876749346a10a26c656ce798fcdd\" \"mozilla/5.0 (x11; linux x86_64) applewebkit/537.36 (khtml, like gecko) chrome/32.0.1700.41 safari/537.36\"\r\nmyip - - 09/dec/2013:12:40:51 +0100 \"get /remote.php/core.css?v=b6e584419a62da6229cf347e5ccfa166 http/1.1\" 304 0 \"https://cloud.kriegt.es/public.php?service=files&t=b099876749346a10a26c656ce798fcdd\" \"mozilla/5.0 (x11; linux x86_64) applewebkit/537.36 (khtml, like gecko) chrome/32.0.1700.41 safari/537.36\"\r\nmyip - - 09/dec/2013:12:40:51 +0100 \"get /index.php/core/js/config.js?v=b6e584419a62da6229cf347e5ccfa166 http/1.1\" 200 406 \"https://cloud.kriegt.es/index.php?redirect_url=%2findex.php%2fapps%2ffiles_pdfviewer%2fviewer.php%3fdir%3d%2f%26file%3ds3_limo.pdf\" \"mozilla/5.0 (x11; linux x86_64) applewebkit/537.36 (khtml, like gecko) chrome/32.0.1700.41 safari/537.36\"\r\nmyip - - 09/dec/2013:12:40:51 +0100 \"get /remote.php/core.js?v=b6e584419a62da6229cf347e5ccfa166 http/1.1\" 304 0 \"https://cloud.kriegt.es/public.php?service=files&t=b099876749346a10a26c656ce798fcdd\" \"mozilla/5.0 (x11; linux x86_64) applewebkit/537.36 (khtml, like gecko) chrome/32.0.1700.41 safari/537.36\"\r\nmyip - - 09/dec/2013:12:40:52 +0100 \"get /index.php/core/routes.json http/1.1\" 200 995 \"https://cloud.kriegt.es/index.php?redirect_url=%2findex.php%2fapps%2ffiles_pdfviewer%2fviewer.php%3fdir%3d%2f%26file%3ds3_limo.pdf\" \"mozilla/5.0 (x11; linux x86_64) applewebkit/537.36 (khtml, like gecko) chrome/32.0.1700.41 safari/537.36\"\r\nmyip - - 09/dec/2013:12:40:52 +0100 \"post /index.php/core/ajax/translations.php http/1.1\" 200 126 \"https://cloud.kriegt.es/index.php?redirect_url=%2findex.php%2fapps%2ffiles_pdfviewer%2fviewer.php%3fdir%3d%2f%26file%3ds3_limo.pdf\" \"mozilla/5.0 (x11; linux x86_64) applewebkit/537.36 (khtml, like gecko) chrome/32.0.1700.41 safari/537.36\"\r\n```\r\n```\r\nthis is the logfile as logged-in user\r\nmyip - - 09/dec/2013:12:44:44 +0100 \"get /public.php?service=files&t=b099876749346a10a26c656ce798fcdd http/1.1\" 200 1114 \"-\" \"mozilla/5.0 (x11; linux x86_64) applewebkit/537.36 (khtml, like gecko) chrome/32.0.1700.41 safari/537.36\"\r\nmyip - - 09/dec/2013:12:44:44 +0100 \"get /remote.php/core.css?v=b6e584419a62da6229cf347e5ccfa166 http/1.1\" 304 0 \"https://cloud.kriegt.es/public.php?service=files&t=b099876749346a10a26c656ce798fcdd\" \"mozilla/5.0 (x11; linux x86_64) applewebkit/537.36 (khtml, like gecko) chrome/32.0.1700.41 safari/537.36\"\r\nmyip - - 09/dec/2013:12:44:44 +0100 \"get /index.php/apps/files_sharing/css/public.css?v=b6e584419a62da6229cf347e5ccfa166 http/1.1\" 304 0 \"https://cloud.kriegt.es/public.php?service=files&t=b099876749346a10a26c656ce798fcdd\" \"mozilla/5.0 (x11; linux x86_64) applewebkit/537.36 (khtml, like gecko) chrome/32.0.1700.41 safari/537.36\"\r\nmyip - - 09/dec/2013:12:44:44 +0100 \"get /index.php/core/js/config.js?v=b6e584419a62da6229cf347e5ccfa166 http/1.1\" 200 406 \"https://cloud.kriegt.es/public.php?service=files&t=b099876749346a10a26c656ce798fcdd\" \"mozilla/5.0 (x11; linux x86_64) applewebkit/537.36 (khtml, like gecko) chrome/32.0.1700.41 safari/537.36\"\r\nmyip - - 09/dec/2013:12:44:44 +0100 \"get /remote.php/core.js?v=b6e584419a62da6229cf347e5ccfa166 http/1.1\" 304 0 \"https://cloud.kriegt.es/public.php?service=files&t=b099876749346a10a26c656ce798fcdd\" \"mozilla/5.0 (x11; linux x86_64) applewebkit/537.36 (khtml, like gecko) chrome/32.0.1700.41 safari/537.36\"\r\nmyip - - 09/dec/2013:12:44:45 +0100 \"get /index.php/core/routes.json http/1.1\" 200 995 \"https://cloud.kriegt.es/public.php?service=files&t=b099876749346a10a26c656ce798fcdd\" \"mozilla/5.0 (x11; linux x86_64) applewebkit/537.36 (khtml, like gecko) chrome/32.0.1700.41 safari/537.36\"\r\nmyip - - 09/dec/2013:12:44:45 +0100 \"get /core/img/breadcrumb.svg http/1.1\" 304 0 \"https://cloud.kriegt.es/public.php?service=files&t=b099876749346a10a26c656ce798fcdd\" \"mozilla/5.0 (x11; linux x86_64) applewebkit/537.36 (khtml, like gecko) chrome/32.0.1700.41 safari/537.36\"\r\nmyip - - 09/dec/2013:12:44:45 +0100 \"post /index.php/core/ajax/translations.php http/1.1\" 200 61 \"https://cloud.kriegt.es/public.php?service=files&t=b099876749346a10a26c656ce798fcdd\" \"mozilla/5.0 (x11; linux x86_64) applewebkit/537.36 (khtml, like gecko) chrome/32.0.1700.41 safari/537.36\"\r\nmyip - - 09/dec/2013:12:44:45 +0100 \"get /index.php/apps/files_pdfviewer/viewer.php?dir=/&file=s3_limo.pdf http/1.1\" 200 2185 \"https://cloud.kriegt.es/public.php?service=files&t=b099876749346a10a26c656ce798fcdd\" \"mozilla/5.0 (x11; linux x86_64) applewebkit/537.36 (khtml, like gecko) chrome/32.0.1700.41 safari/537.36\"\r\nmyip - - 09/dec/2013:12:44:45 +0100 \"get /index.php/apps/files_pdfviewer/3rdparty/pdfjs/viewer.css http/1.1\" 304 0 \"https://cloud.kriegt.es/index.php/apps/files_pdfviewer/viewer.php?dir=/&file=s3_limo.pdf\" \"mozilla/5.0 (x11; linux x86_64) applewebkit/537.36 (khtml, like gecko) chrome/32.0.1700.41 safari/537.36\"\r\nmyip - - 09/dec/2013:12:44:45 +0100 \"get /index.php/core/js/config.js http/1.1\" 200 406 \"https://cloud.kriegt.es/index.php/apps/files_pdfviewer/viewer.php?dir=/&file=s3_limo.pdf\" \"mozilla/5.0 (x11; linux x86_64) applewebkit/537.36 (khtml, like gecko) chrome/32.0.1700.41 safari/537.36\"\r\nmyip - - 09/dec/2013:12:44:45 +0100 \"get /index.php/apps/files_pdfviewer/js/files.php?file=s3_limo.pdf&dir=%2f http/1.1\" 200 124 \"https://cloud.kriegt.es/index.php/apps/files_pdfviewer/viewer.php?dir=/&file=s3_limo.pdf\" \"mozilla/5.0 (x11; linux x86_64) applewebkit/537.36 (khtml, like gecko) chrome/32.0.1700.41 safari/537.36\"\r\nmyip - - 09/dec/2013:12:44:45 +0100 \"get /apps/files_pdfviewer/3rdparty/pdfjs/locale/locale.properties http/1.1\" 304 0 \"https://cloud.kriegt.es/index.php/apps/files_pdfviewer/viewer.php?dir=/&file=s3_limo.pdf\" \"mozilla/5.0 (x11; linux x86_64) applewebkit/537.36 (khtml, like gecko) chrome/32.0.1700.41 safari/537.36\"\r\nmyip - - 09/dec/2013:12:44:45 +0100 \"get /index.php/apps/files/ajax/download.php?files=s3_limo.pdf&dir=/ http/1.1\" 200 524337 \"https://cloud.kriegt.es/apps/files_pdfviewer/3rdparty/pdfjs/pdf.js\" \"mozilla/5.0 (x11; linux x86_64) applewebkit/537.36 (khtml, like gecko) chrome/32.0.1700.41 safari/537.36\"\r\n```\r\n\r\n#### owncloud log (data/owncloud.log)\r\n```\r\nempty\r\n```\r\n\r\n#### browser log\r\n```\r\nbody.scrolltop is deprecated in strict mode. please use 'documentelement.scrolltop' if in strict mode and 'body.scrolltop' only if in quirks mode.\r\nbody.scrollleft is deprecated in strict mode. please use 'documentelement.scrollleft' if in strict mode and 'body.scrollleft' only if in quirks mode.\r\nuncaught referenceerror: files is not defined public.js?v=b6e584419a62da6229cf347e5ccfa166:66\r\nuncaught typeerror: cannot call method 'registerloadedcallback' of undefined js.js:921\r\nevent.returnvalue is deprecated. please use the standard event.preventdefault() instead.\r\npage=%d - getoperatorlist: time=%dms, len=%d pdf.js:33496\r\ntext indexing: page=%d - time=%dms pdf.js:33528\r\npage=%d - getoperatorlist: time=%dms, len=%d pdf.js:33496\r\ntext indexing: page=%d - time=%dms pdf.js:33528\r\npage=%d - getoperatorlist: time=%dms, len=%d pdf.js:33496\r\ntext indexing: page=%d - time=%dms pdf.js:33528\r\npage=%d - getoperatorlist: time=%dms, len=%d pdf.js:33496\r\ntext indexing: page=%d - time=%dms \r\n```\r\n![website as it gets shown as logged-in user, pdf file is at the bottom and its the correct file, but its cropped to the screen](https://f.cloud.github.com/assets/2189546/1704321/169129da-60c8-11e3-9eee-48b0a055f348.png)\r\n","closed_by":{"login":"pvince81","id":277525,"avatar_url":"https://gravatar.com/avatar/e446b529679416eb70eafb4ca4da5bbe?d=https%3a%2f%2fidenticons.github.com%2f89d7c394e6dcdf87a91c75ac3b2ccbe8.png&r=x","gravatar_id":"e446b529679416eb70eafb4ca4da5bbe","url":"https://api.github.com/users/pvince81","html_url":"https://github.com/pvince81","followers_url":"https://api.github.com/users/pvince81/followers","following_url":"https://api.github.com/users/pvince81/following{/other_user}","gists_url":"https://api.github.com/users/pvince81/gists{/gist_id}","starred_url":"https://api.github.com/users/pvince81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvince81/subscriptions","organizations_url":"https://api.github.com/users/pvince81/orgs","repos_url":"https://api.github.com/users/pvince81/repos","events_url":"https://api.github.com/users/pvince81/events{/privacy}","received_events_url":"https://api.github.com/users/pvince81/received_events","type":"user","site_admin":false}}