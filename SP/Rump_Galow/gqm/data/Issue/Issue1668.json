{"url":"https://api.github.com/repos/owncloud/core/issues/1668","labels_url":"https://api.github.com/repos/owncloud/core/issues/1668/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/1668/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/1668/events","html_url":"https://github.com/owncloud/core/issues/1668","id":10964603,"number":1668,"title":"ldap: unify quota value","user":{"login":"twouters","id":170895,"avatar_url":"https://gravatar.com/avatar/da6de2b92356f7b2c773abd1b5fe09ba?d=https%3a%2f%2fidenticons.github.com%2fdeae55d4c621041c9462f6d66498d1f7.png&r=x","gravatar_id":"da6de2b92356f7b2c773abd1b5fe09ba","url":"https://api.github.com/users/twouters","html_url":"https://github.com/twouters","followers_url":"https://api.github.com/users/twouters/followers","following_url":"https://api.github.com/users/twouters/following{/other_user}","gists_url":"https://api.github.com/users/twouters/gists{/gist_id}","starred_url":"https://api.github.com/users/twouters/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/twouters/subscriptions","organizations_url":"https://api.github.com/users/twouters/orgs","repos_url":"https://api.github.com/users/twouters/repos","events_url":"https://api.github.com/users/twouters/events{/privacy}","received_events_url":"https://api.github.com/users/twouters/received_events","type":"user","site_admin":false},"labels":[{"url":"https://api.github.com/repos/owncloud/core/labels/app%3auser_ldap","name":"app:user_ldap","color":"02d7e1"},{"url":"https://api.github.com/repos/owncloud/core/labels/enhancement","name":"enhancement","color":"02e10c"}],"state":"closed","assignee":{"login":"blizzz","id":2184312,"avatar_url":"https://gravatar.com/avatar/1898b25a9cb3aa1a0f0febd1359910b9?d=https%3a%2f%2fidenticons.github.com%2fca03acec6deadf508b75eb0cf9ba036c.png&r=x","gravatar_id":"1898b25a9cb3aa1a0f0febd1359910b9","url":"https://api.github.com/users/blizzz","html_url":"https://github.com/blizzz","followers_url":"https://api.github.com/users/blizzz/followers","following_url":"https://api.github.com/users/blizzz/following{/other_user}","gists_url":"https://api.github.com/users/blizzz/gists{/gist_id}","starred_url":"https://api.github.com/users/blizzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blizzz/subscriptions","organizations_url":"https://api.github.com/users/blizzz/orgs","repos_url":"https://api.github.com/users/blizzz/repos","events_url":"https://api.github.com/users/blizzz/events{/privacy}","received_events_url":"https://api.github.com/users/blizzz/received_events","type":"user","site_admin":false},"milestone":null,"comments":5,"created_at":"2013-02-13t18:05:04z","updated_at":"2013-08-17t09:54:19z","closed_at":"2013-08-17t09:54:19z","pull_request":{"html_url":null,"diff_url":null,"patch_url":null},"body":"currently the quota value fetched from ldap is being translated to bytes.\r\nit would be better to translate it to human readable values since that's how it's stored in the local owncloud database.\r\nmy workaround is a bit dirty but i thought it'd be better to make sure the format is unified, whatever format is used in ldap.\r\nanother option would be to parse the quota every time it's being displayed.\r\n\r\n\"1024m\" quota in ldap results in \"1 gb\" quota in owncloud.\r\n\"1024\" quota in ldap results in \"1 kb\" quota in owncloud.\r\n\r\n```\r\n  diff --git a/apps/user_ldap/user_ldap.php b/apps/user_ldap/user_ldap.php\r\n  index 0962756..4fed0f9 100644\r\n  --- a/apps/user_ldap/user_ldap.php\r\n  +++ b/apps/user_ldap/user_ldap.php\r\n  @@ -42,7 +42,7 @@ class user_ldap extends lib\\access implements \\ocp\\userinterface {\r\n                          }\r\n                  }\r\n                  if(!is_null($quota)) {\r\n  -                       \\ocp\\config::setuservalue($this->dn2username($dn), 'files', 'quota', \\ocp\\util::computerfilesize($quota));\r\n  +                       \\ocp\\config::setuservalue($this->dn2username($dn), 'files', 'quota', \\ocp\\util::humanfilesize(\\ocp\\util::computerfilesize($quota)));\r\n                  }\r\n          }\r\n```\r\n","closed_by":{"login":"blizzz","id":2184312,"avatar_url":"https://gravatar.com/avatar/1898b25a9cb3aa1a0f0febd1359910b9?d=https%3a%2f%2fidenticons.github.com%2fca03acec6deadf508b75eb0cf9ba036c.png&r=x","gravatar_id":"1898b25a9cb3aa1a0f0febd1359910b9","url":"https://api.github.com/users/blizzz","html_url":"https://github.com/blizzz","followers_url":"https://api.github.com/users/blizzz/followers","following_url":"https://api.github.com/users/blizzz/following{/other_user}","gists_url":"https://api.github.com/users/blizzz/gists{/gist_id}","starred_url":"https://api.github.com/users/blizzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blizzz/subscriptions","organizations_url":"https://api.github.com/users/blizzz/orgs","repos_url":"https://api.github.com/users/blizzz/repos","events_url":"https://api.github.com/users/blizzz/events{/privacy}","received_events_url":"https://api.github.com/users/blizzz/received_events","type":"user","site_admin":false}}