{"url":"https://api.github.com/repos/owncloud/core/issues/2769","labels_url":"https://api.github.com/repos/owncloud/core/issues/2769/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/2769/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/2769/events","html_url":"https://github.com/owncloud/core/pull/2769","id":12883881,"number":2769,"title":"add octemplate jquery plugin","user":{"login":"tanghus","id":533222,"avatar_url":"https://gravatar.com/avatar/e625b634822713b2e346ff7c67d26775?d=https%3a%2f%2fidenticons.github.com%2f6d9c90af1c12f5a88e4d5f216bbc1979.png&r=x","gravatar_id":"e625b634822713b2e346ff7c67d26775","url":"https://api.github.com/users/tanghus","html_url":"https://github.com/tanghus","followers_url":"https://api.github.com/users/tanghus/followers","following_url":"https://api.github.com/users/tanghus/following{/other_user}","gists_url":"https://api.github.com/users/tanghus/gists{/gist_id}","starred_url":"https://api.github.com/users/tanghus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tanghus/subscriptions","organizations_url":"https://api.github.com/users/tanghus/orgs","repos_url":"https://api.github.com/users/tanghus/repos","events_url":"https://api.github.com/users/tanghus/events{/privacy}","received_events_url":"https://api.github.com/users/tanghus/received_events","type":"user","site_admin":false},"labels":[],"state":"closed","assignee":null,"milestone":null,"comments":16,"created_at":"2013-04-06t21:37:10z","updated_at":"2013-04-15t20:42:36z","closed_at":"2013-04-15t20:42:36z","pull_request":{"html_url":"https://github.com/owncloud/core/pull/2769","diff_url":"https://github.com/owncloud/core/pull/2769.diff","patch_url":"https://github.com/owncloud/core/pull/2769.patch"},"body":"jquery plugin for micro templates\r\n\r\nstrings are automatically escaped, but that can be disabled by setting escapefunction to null.\r\n\r\nusage examples:\r\n\r\n```\r\n\tvar htmlstr = '<p>bake, uncovered, until the {greasystuff} is melted and the {pasta} is heated through, about {min} minutes.</p>'\r\n\t$(htmlstr).octemplate({greasystuff: 'cheese', pasta: 'macaroni', min: 10});\r\n\r\n\tvar str = '<p>welcome back {user}</p>';\r\n\t$(str).octemplate(\r\n\t\t{user: '<strong>john q. public</strong>'}, \r\n\t\t{escapefunction: null}\r\n\t);\r\n ```\r\nthe latter is of course a bad example, but you get the drift i hope ;)\r\n\r\nbe aware that the target string must be wrapped in an html element for the plugin to work. the following won't work:\r\n ```\r\n     var textstr = 'welcome back {user}';\r\n     $(textstr).octemplate({user: 'john q. public'});\r\n ```\r\nfor anything larger than one-liners, you can use a simple $.get() ajax request to get the template, or you can embed them in the page using the text/template type:\r\n \r\n ```\r\n<script id=\"contactlistitemtemplate\" type=\"text/template\">\r\n\t<tr class=\"contact\" data-id=\"{id}\">\r\n\t\t<td class=\"name\">\r\n\t\t\t<input type=\"checkbox\" name=\"id\" value=\"{id}\" /><span class=\"nametext\">{name}</span>\r\n\t\t</td>\r\n\t\t<td class=\"email\">\r\n\t\t\t<a href=\"mailto:{email}\">{email}</a>\r\n\t\t</td>\r\n\t\t<td class=\"phone\">{phone}</td>\r\n\t</tr>\r\n </script>\r\n```\r\n\r\nand in you code:\r\n\r\n```\r\nvar $tmpl = $('#contactlistitemtemplate');\r\nvar contacts = // fetched in some ajax call\r\n\r\n$.each(contacts, function(idx, contact) {\r\n\t\t$contactlist.append(\r\n\t\t\t$tmpl.octemplate({\r\n\t\t\t\tid: contact.getid(),\r\n\t\t\t\tname: contact.getdisplayname(),\r\n\t\t\t\temail: contact.getpreferredemail(),\r\n\t\t\t\tphone: contact.getpreferredphone(),\r\n\t\t\t});\r\n\t\t);\r\n});\r\n```\r\n\r\nthis is **not** meant as a full-fledged templating framework, but for making simple scripts easier, while avoiding xss in the process.\r\nthat being said the entire contacts app is build using this simple plugin ;)\r\n\r\n@bartv2 @lukasreschke @raydiation @georgehrke ","closed_by":{"login":"tanghus","id":533222,"avatar_url":"https://gravatar.com/avatar/e625b634822713b2e346ff7c67d26775?d=https%3a%2f%2fidenticons.github.com%2f6d9c90af1c12f5a88e4d5f216bbc1979.png&r=x","gravatar_id":"e625b634822713b2e346ff7c67d26775","url":"https://api.github.com/users/tanghus","html_url":"https://github.com/tanghus","followers_url":"https://api.github.com/users/tanghus/followers","following_url":"https://api.github.com/users/tanghus/following{/other_user}","gists_url":"https://api.github.com/users/tanghus/gists{/gist_id}","starred_url":"https://api.github.com/users/tanghus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tanghus/subscriptions","organizations_url":"https://api.github.com/users/tanghus/orgs","repos_url":"https://api.github.com/users/tanghus/repos","events_url":"https://api.github.com/users/tanghus/events{/privacy}","received_events_url":"https://api.github.com/users/tanghus/received_events","type":"user","site_admin":false}}