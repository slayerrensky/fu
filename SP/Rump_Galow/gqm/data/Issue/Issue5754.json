{"url":"https://api.github.com/repos/owncloud/core/issues/5754","labels_url":"https://api.github.com/repos/owncloud/core/issues/5754/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/5754/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/5754/events","html_url":"https://github.com/owncloud/core/issues/5754","id":22287576,"number":5754,"title":"removing the groupadmin from the group when they are the last member... ","user":{"login":"ghost","id":10137,"avatar_url":"https://gravatar.com/avatar/ac0c4949f8df628b3f77a42a3b814c4d?d=https%3a%2f%2fidenticons.github.com%2f715e8ba46f8bc29c24f3fbfdb8d96d71.png&r=x","gravatar_id":"ac0c4949f8df628b3f77a42a3b814c4d","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"user","site_admin":false},"labels":[{"url":"https://api.github.com/repos/owncloud/core/labels/bug","name":"bug","color":"fc2929"}],"state":"open","assignee":null,"milestone":null,"comments":0,"created_at":"2013-11-07t18:56:20z","updated_at":"2013-11-29t16:32:22z","closed_at":null,"pull_request":{"html_url":null,"diff_url":null,"patch_url":null},"body":"### expected behaviour\r\nshould remove the user from the group_admin table\r\n\r\n### actual behaviour\r\nuser is still in the group_admin table\r\n\r\n### steps to reproduce\r\n1. brand new install - logged in as 'owncloudadmin'\r\n2. add new user 'bob' to a new group 'group' from 'owncloud/index.php/settings/users'\r\n3. make 'bob' the group admin\r\n4. refresh the page\r\n5. remove 'bob' from the group \r\n6. refresh the page\r\n7. now you see the 'group admin' column has a bad drop down box for 'bob'\r\n8. jump down to your postgres console and you see this\r\n\r\n```\r\nowncloud=> select * from oc_groups;\r\n  gid\r\n-------\r\n admin\r\n\r\nowncloud=> select * from oc_group_admin;\r\n gid  |  uid\r\n------+-------\r\n user | bob\r\n```\r\n\r\n\r\n### server configuration\r\noperating system: ubuntu 12.04 lts\r\n\r\nweb server: server version: apache/2.2.22 (ubuntu)\r\n\r\ndatabase: postgresql 9.1\r\n\r\nphp version: php 5.3.10-1ubuntu3.8 \r\n\r\nowncloud version: owncloud 5.0.13(up to date)\r\n\r\n\r\n### client configuration\r\nbrowser: chrome\r\n\r\noperating system: windows 7\r\n\r\n### logs\r\nthere is nothing significant in the logs. ","closed_by":null}