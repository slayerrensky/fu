{"url":"https://api.github.com/repos/owncloud/core/issues/3969","labels_url":"https://api.github.com/repos/owncloud/core/issues/3969/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/3969/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/3969/events","html_url":"https://github.com/owncloud/core/pull/3969","id":16451037,"number":3969,"title":"share api 2","user":{"login":"mtgap","id":1097106,"avatar_url":"https://gravatar.com/avatar/454a73ee5feeb428d0c163a48903332c?d=https%3a%2f%2fidenticons.github.com%2f52d29a66f285a1d61125dd69ac0766b2.png&r=x","gravatar_id":"454a73ee5feeb428d0c163a48903332c","url":"https://api.github.com/users/mtgap","html_url":"https://github.com/mtgap","followers_url":"https://api.github.com/users/mtgap/followers","following_url":"https://api.github.com/users/mtgap/following{/other_user}","gists_url":"https://api.github.com/users/mtgap/gists{/gist_id}","starred_url":"https://api.github.com/users/mtgap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mtgap/subscriptions","organizations_url":"https://api.github.com/users/mtgap/orgs","repos_url":"https://api.github.com/users/mtgap/repos","events_url":"https://api.github.com/users/mtgap/events{/privacy}","received_events_url":"https://api.github.com/users/mtgap/received_events","type":"user","site_admin":false},"labels":[],"state":"closed","assignee":null,"milestone":null,"comments":43,"created_at":"2013-07-08t00:25:09z","updated_at":"2013-10-11t07:46:51z","closed_at":"2013-08-29t13:23:41z","pull_request":{"html_url":"https://github.com/owncloud/core/pull/3969","diff_url":"https://github.com/owncloud/core/pull/3969.diff","patch_url":"https://github.com/owncloud/core/pull/3969.patch"},"body":"this isn't ready to be merged yet, because this is only the backend changes. at this time i would just like a code review of the architecture. you can read this page to get a general overview: https://github.com/owncloud/core/wiki/share-api\r\n\r\nbesides all the new code, the largest change is storing multiple parent references for reshares because it is possible to share to the same user multiple times through group and user shares. by not referencing all parents of a reshare there were unexpected permission and unsharing issues.\r\n\r\nthis took so long, because i wrote unit tests for 'almost' all of the code. it is currently at 95.62% code coverage and the nice thing is that the tests are fast, all ~500 assertions. one test is failing because of the groups backend and is unrelated to the share api.\r\n\r\ntodo:\r\n- [ ] update frontend to use new api and write acceptance tests for it\r\n- [x] update public links\r\n- [x] integrate with files\r\n- [x] integrate with contacts\r\n- [ ] integrate with calendar\r\n- [ ] integrate with encryption app\r\n- [x] user hook listener\r\n- [x] group hook listener\r\n- [x] updater\r\n\r\ni really want to kill all sharing bugs once and for all... ","closed_by":{"login":"mtgap","id":1097106,"avatar_url":"https://gravatar.com/avatar/454a73ee5feeb428d0c163a48903332c?d=https%3a%2f%2fidenticons.github.com%2f52d29a66f285a1d61125dd69ac0766b2.png&r=x","gravatar_id":"454a73ee5feeb428d0c163a48903332c","url":"https://api.github.com/users/mtgap","html_url":"https://github.com/mtgap","followers_url":"https://api.github.com/users/mtgap/followers","following_url":"https://api.github.com/users/mtgap/following{/other_user}","gists_url":"https://api.github.com/users/mtgap/gists{/gist_id}","starred_url":"https://api.github.com/users/mtgap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mtgap/subscriptions","organizations_url":"https://api.github.com/users/mtgap/orgs","repos_url":"https://api.github.com/users/mtgap/repos","events_url":"https://api.github.com/users/mtgap/events{/privacy}","received_events_url":"https://api.github.com/users/mtgap/received_events","type":"user","site_admin":false}}