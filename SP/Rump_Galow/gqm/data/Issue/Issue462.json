{"url":"https://api.github.com/repos/owncloud/core/issues/462","labels_url":"https://api.github.com/repos/owncloud/core/issues/462/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/462/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/462/events","html_url":"https://github.com/owncloud/core/pull/462","id":8406447,"number":462,"title":"add a build url function in oc to avoid quirck url constructions","user":{"login":"emerzh","id":177003,"avatar_url":"https://gravatar.com/avatar/8be57cd98b8864ebcc903ae7106ea420?d=https%3a%2f%2fidenticons.github.com%2f35789e0e5e2d4b3b73630bb168f26d12.png&r=x","gravatar_id":"8be57cd98b8864ebcc903ae7106ea420","url":"https://api.github.com/users/emerzh","html_url":"https://github.com/emerzh","followers_url":"https://api.github.com/users/emerzh/followers","following_url":"https://api.github.com/users/emerzh/following{/other_user}","gists_url":"https://api.github.com/users/emerzh/gists{/gist_id}","starred_url":"https://api.github.com/users/emerzh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/emerzh/subscriptions","organizations_url":"https://api.github.com/users/emerzh/orgs","repos_url":"https://api.github.com/users/emerzh/repos","events_url":"https://api.github.com/users/emerzh/events{/privacy}","received_events_url":"https://api.github.com/users/emerzh/received_events","type":"user","site_admin":false},"labels":[],"state":"closed","assignee":null,"milestone":null,"comments":5,"created_at":"2012-11-15t23:42:21z","updated_at":"2012-11-22t19:09:26z","closed_at":"2012-11-22t19:09:26z","pull_request":{"html_url":"https://github.com/owncloud/core/pull/462","diff_url":"https://github.com/owncloud/core/pull/462.diff","patch_url":"https://github.com/owncloud/core/pull/462.patch"},"body":"in owncloud js, \nwe have a lot of quircky constructed url...\nhaving to encode every param is boring an fault prone...\nsometimes you forget to do it, sometimes you do it twice....\nlet's add a util function that use the current filepath option and add a data paramter...\n\nthe function also test for the ? or & to concatenate the data:\n\njust use it as \n\n``` js\n\nwindow.location = oc.buildurl('files', 'ajax', 'download.php', {file: filename, dir: $('#dir').val()} );\n\noc.buildurl('core', 'ajax', 'vcategories/edit.php', {type: type });\n```\n\ninstead of \n\n```js\nwindow.location = oc.filepath('files', 'ajax', 'download.php') + '?files=' + encodeuricomponent(filename) + '&dir=' + encodeuricomponent($('#dir').val());\n\n//unescape \noc.filepath('core', 'ajax', 'vcategories/edit.php') + '?type=' + type\n```\n\n\nwhat do you guys think about this...?","closed_by":{"login":"emerzh","id":177003,"avatar_url":"https://gravatar.com/avatar/8be57cd98b8864ebcc903ae7106ea420?d=https%3a%2f%2fidenticons.github.com%2f35789e0e5e2d4b3b73630bb168f26d12.png&r=x","gravatar_id":"8be57cd98b8864ebcc903ae7106ea420","url":"https://api.github.com/users/emerzh","html_url":"https://github.com/emerzh","followers_url":"https://api.github.com/users/emerzh/followers","following_url":"https://api.github.com/users/emerzh/following{/other_user}","gists_url":"https://api.github.com/users/emerzh/gists{/gist_id}","starred_url":"https://api.github.com/users/emerzh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/emerzh/subscriptions","organizations_url":"https://api.github.com/users/emerzh/orgs","repos_url":"https://api.github.com/users/emerzh/repos","events_url":"https://api.github.com/users/emerzh/events{/privacy}","received_events_url":"https://api.github.com/users/emerzh/received_events","type":"user","site_admin":false}}