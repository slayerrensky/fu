{"url":"https://api.github.com/repos/owncloud/core/issues/6417","labels_url":"https://api.github.com/repos/owncloud/core/issues/6417/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/6417/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/6417/events","html_url":"https://github.com/owncloud/core/issues/6417","id":24308927,"number":6417,"title":"error upgrading from oc 6.0.0 to 6.0.0a-2.1 on centos with postgres","user":{"login":"marcello-lodi","id":6000058,"avatar_url":"https://gravatar.com/avatar/81043125fb4e7858077bb8654de8b0b2?d=https%3a%2f%2fidenticons.github.com%2fd1d2207ed92160701bf383ad46a6c9ef.png&r=x","gravatar_id":"81043125fb4e7858077bb8654de8b0b2","url":"https://api.github.com/users/marcello-lodi","html_url":"https://github.com/marcello-lodi","followers_url":"https://api.github.com/users/marcello-lodi/followers","following_url":"https://api.github.com/users/marcello-lodi/following{/other_user}","gists_url":"https://api.github.com/users/marcello-lodi/gists{/gist_id}","starred_url":"https://api.github.com/users/marcello-lodi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marcello-lodi/subscriptions","organizations_url":"https://api.github.com/users/marcello-lodi/orgs","repos_url":"https://api.github.com/users/marcello-lodi/repos","events_url":"https://api.github.com/users/marcello-lodi/events{/privacy}","received_events_url":"https://api.github.com/users/marcello-lodi/received_events","type":"user","site_admin":false},"labels":[{"url":"https://api.github.com/repos/owncloud/core/labels/bug","name":"bug","color":"fc2929"},{"url":"https://api.github.com/repos/owncloud/core/labels/db%3apostgresql","name":"db:postgresql","color":"444444"}],"state":"open","assignee":null,"milestone":null,"comments":5,"created_at":"2013-12-15t10:33:31z","updated_at":"2013-12-19t15:21:24z","closed_at":null,"pull_request":{"html_url":null,"diff_url":null,"patch_url":null},"body":"{\"app\":\"core\",\"message\":\"failed to update database structure (exception 'pdoexception' with message 'sqlstate[42601]: syntax error: 7 error:  syntax error at or near \\\"exists\\\"\\nline 1: alter table \\\"oc_appconfig\\\" drop constraint if exists appconf...\\n                                                      ^' in \\/var\\/www\\/html\\/owncloud\\/3rdparty\\/doctrine\\/dbal\\/lib\\/doctrine\\/dbal\\/connection.php:742\\nstack trace:\\n#0 [internal function]: pdo->query('alter table \\\"oc...')\\n#1 \\/var\\/www\\/html\\/owncloud\\/3rdparty\\/doctrine\\/dbal\\/lib\\/doctrine\\/dbal\\/connection.php(742): call_user_func_array(array, array)\\n#2 \\/var\\/www\\/html\\/owncloud\\/lib\\/private\\/db\\/mdb2schemamanager.php(152): doctrine\\\\dbal\\\\connection->query('alter table \\\"oc...')\\n#3 \\/var\\/www\\/html\\/owncloud\\/lib\\/private\\/db\\/mdb2schemamanager.php(91): oc\\\\db\\\\mdb2schemamanager->executeschemachange(object(doctrine\\\\dbal\\\\schema\\\\schemadiff))\\n#4 \\/var\\/www\\/html\\/owncloud\\/lib\\/private\\/db.php(376): oc\\\\db\\\\mdb2schemamanager->updatedbfromstructure('\\/var\\/www\\/html\\/o...')\\n#5 \\/var\\/www\\/html\\/owncloud\\/lib\\/private\\/updater.php(106): oc_db::updatedbfromstructure('\\/var\\/www\\/html\\/o...')\\n#6 \\/var\\/www\\/html\\/owncloud\\/core\\/ajax\\/update.php(34): oc\\\\updater->upgrade()\\n#7 {main}\\n\\nnext exception 'doctrine\\\\dbal\\\\dbalexception' with message 'an exception occurred while executing 'alter table \\\"oc_appconfig\\\" drop constraint if exists appconfig_appid_key_index':\\n\\nsqlstate[42601]: syntax error: 7 error:  syntax error at or near \\\"exists\\\"\\nline 1: alter table \\\"oc_appconfig\\\" drop constraint if exists appconf...\\n                                                      ^' in \\/var\\/www\\/html\\/owncloud\\/3rdparty\\/doctrine\\/dbal\\/lib\\/doctrine\\/dbal\\/dbalexception.php:47\\nstack trace:\\n#0 \\/var\\/www\\/html\\/owncloud\\/3rdparty\\/doctrine\\/dbal\\/lib\\/doctrine\\/dbal\\/connection.php(744): doctrine\\\\dbal\\\\dbalexception::driverexceptionduringquery(object(pdoexception), 'alter table \\\"oc...')\\n#1 \\/var\\/www\\/html\\/owncloud\\/lib\\/private\\/db\\/mdb2schemamanager.php(152): doctrine\\\\dbal\\\\connection->query('alter table \\\"oc...')\\n#2 \\/var\\/www\\/html\\/owncloud\\/lib\\/private\\/db\\/mdb2schemamanager.php(91): oc\\\\db\\\\mdb2schemamanager->executeschemachange(object(doctrine\\\\dbal\\\\schema\\\\schemadiff))\\n#3 \\/var\\/www\\/html\\/owncloud\\/lib\\/private\\/db.php(376): oc\\\\db\\\\mdb2schemamanager->updatedbfromstructure('\\/var\\/www\\/html\\/o...')\\n#4 \\/var\\/www\\/html\\/owncloud\\/lib\\/private\\/updater.php(106): oc_db::updatedbfromstructure('\\/var\\/www\\/html\\/o...')\\n#5 \\/var\\/www\\/html\\/owncloud\\/core\\/ajax\\/update.php(34): oc\\\\updater->upgrade()\\n#6 {main})\",\"level\":4,\"time\":\"2013-12-15t10:20:32+00:00\"}\r\n\r\nunfortunately i forgot to screenshot the full sql error on the web page.","closed_by":null}