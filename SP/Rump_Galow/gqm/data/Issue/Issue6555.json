{"url":"https://api.github.com/repos/owncloud/core/issues/6555","labels_url":"https://api.github.com/repos/owncloud/core/issues/6555/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/6555/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/6555/events","html_url":"https://github.com/owncloud/core/issues/6555","id":24688938,"number":6555,"title":"sql error when deleting file","user":{"login":"wolkenschieber","id":5024238,"avatar_url":"https://gravatar.com/avatar/ab93ecaf8dd66f694e10dcb20a1f2d96?d=https%3a%2f%2fidenticons.github.com%2f2719a56fd6eecdb69c5fee21eee9a99e.png&r=x","gravatar_id":"ab93ecaf8dd66f694e10dcb20a1f2d96","url":"https://api.github.com/users/wolkenschieber","html_url":"https://github.com/wolkenschieber","followers_url":"https://api.github.com/users/wolkenschieber/followers","following_url":"https://api.github.com/users/wolkenschieber/following{/other_user}","gists_url":"https://api.github.com/users/wolkenschieber/gists{/gist_id}","starred_url":"https://api.github.com/users/wolkenschieber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wolkenschieber/subscriptions","organizations_url":"https://api.github.com/users/wolkenschieber/orgs","repos_url":"https://api.github.com/users/wolkenschieber/repos","events_url":"https://api.github.com/users/wolkenschieber/events{/privacy}","received_events_url":"https://api.github.com/users/wolkenschieber/received_events","type":"user","site_admin":false},"labels":[],"state":"open","assignee":null,"milestone":null,"comments":0,"created_at":"2013-12-22t22:03:04z","updated_at":"2013-12-22t22:03:04z","closed_at":null,"pull_request":{"html_url":null,"diff_url":null,"patch_url":null},"body":"hi,\r\n\r\ni discovered following issue when deleting files.\r\n- enable document app\r\n- create new document. it will be labeled \"new document.odt\"\r\n- don't edit, but go to files and delete that document\r\n-> following error message appears in the db's log:\r\n\r\nerror:  value too long for type character varying(30)\r\ninsert into \"oc_files_trash\" (\"id\",\"timestamp\",\"location\",\"type\",\"mime\",\"user\") values ($1,$2,$3,$4,$5,$6)\r\n\r\ncorresponding owncloud log entry:\r\n\r\nerror while running hook (oca\\files_trashbin\\hooks::remove_hook): an exception occurred while executing 'insert into \"oc_files_trash\" (\"id\",\"timestamp\",\"location\",\"type\",\"mime\",\"user\") values (?,?,?,?,?,?)': sqlstate[22001]: string data, right truncated: 7 error: value too long for type character varying(30)\r\n\r\nby looking into the table definition the affected column is \"mime\". it's length is 30, in the database and the database.xml in owncloud. so i guess the mime of odt-file is longer than 30 characters.\r\n\r\nfor completness i'm running:\r\n- owncloud 6.0.0a\r\n- postgres 9.1\r\n- apache 2.2.22\r\n- php 5.3.10\r\n\r\ni couldn't figure out where to put this report. so i filed it in the core package. if that's incorrect please move it to the proper place. thanks","closed_by":null}