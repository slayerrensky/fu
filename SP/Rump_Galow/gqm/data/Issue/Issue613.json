{"url":"https://api.github.com/repos/owncloud/core/issues/613","labels_url":"https://api.github.com/repos/owncloud/core/issues/613/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/613/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/613/events","html_url":"https://github.com/owncloud/core/issues/613","id":8763665,"number":613,"title":"external storage local not controlling space","user":{"login":"lipixx","id":2894121,"avatar_url":"https://gravatar.com/avatar/96d38128f71e0745cb57975dda08c466?d=https%3a%2f%2fidenticons.github.com%2fca6235311349cd26695b63e96c255876.png&r=x","gravatar_id":"96d38128f71e0745cb57975dda08c466","url":"https://api.github.com/users/lipixx","html_url":"https://github.com/lipixx","followers_url":"https://api.github.com/users/lipixx/followers","following_url":"https://api.github.com/users/lipixx/following{/other_user}","gists_url":"https://api.github.com/users/lipixx/gists{/gist_id}","starred_url":"https://api.github.com/users/lipixx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lipixx/subscriptions","organizations_url":"https://api.github.com/users/lipixx/orgs","repos_url":"https://api.github.com/users/lipixx/repos","events_url":"https://api.github.com/users/lipixx/events{/privacy}","received_events_url":"https://api.github.com/users/lipixx/received_events","type":"user","site_admin":false},"labels":[{"url":"https://api.github.com/repos/owncloud/core/labels/1+-+backlog","name":"1 - backlog","color":"ededed"},{"url":"https://api.github.com/repos/owncloud/core/labels/app%3afiles_external","name":"app:files_external","color":"02d7e1"},{"url":"https://api.github.com/repos/owncloud/core/labels/bug","name":"bug","color":"fc2929"}],"state":"closed","assignee":null,"milestone":null,"comments":3,"created_at":"2012-11-28t12:53:54z","updated_at":"2013-08-04t23:48:44z","closed_at":"2013-08-04t23:48:44z","pull_request":{"html_url":null,"diff_url":null,"patch_url":null},"body":"## problem\n\nhaving a local file-system external-storage mount point defined causes owncloud not to verify the disk space left in this mount point.\n\nthis causes that you can put in there files filling up the space, and then continue adding files without noticing that owc is creating empty files (0 bytes).\n\n## how to reproduce\n\n1. implement an owncloud installation, with data folder in /dev/sda1.\n2. create a \"virtual filesystem\" and mount it, for example a fs of 10mb:\n\n[root@/tmp]# dd if=/dev/zero of=projects.disk bs=1 count=0 seek=10m\n[root@/tmp]# mkfs.ext4 projects.disk\n[root@/tmp]# mount -t ext4 /tmp/projects.disk -o loop /mnt/projects-www\n\ngive the right permissions to all.\n\n3. create a new mount point into your admin account in owc, and define the mount point in mount.php.\n\n4. upload a file of 5mb to the folder and check that it is correctly upload.\n5. upload a file of 100kb and check that is correctly upload.\n6. upload a file of 5mb and check that is not correctly upload, only uploaded ~4900kb.\n7. upload a file and see that it's uploaded in owc but the filesize is 0b.\n\n\n## versions affected\n\nowc 4.5.3.\n\n## proposal of correction\nwhen uploading a file be sure that it fits in the folder that is going to be uploaded, because of the folder can have another size that the main filesystem.\n\n\n\n","closed_by":{"login":"jancborchardt","id":925062,"avatar_url":"https://gravatar.com/avatar/2fd3f4d5d762955e5b603794a888fa97?d=https%3a%2f%2fidenticons.github.com%2f84ec51f9ceed468217d4e13abf78da9c.png&r=x","gravatar_id":"2fd3f4d5d762955e5b603794a888fa97","url":"https://api.github.com/users/jancborchardt","html_url":"https://github.com/jancborchardt","followers_url":"https://api.github.com/users/jancborchardt/followers","following_url":"https://api.github.com/users/jancborchardt/following{/other_user}","gists_url":"https://api.github.com/users/jancborchardt/gists{/gist_id}","starred_url":"https://api.github.com/users/jancborchardt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jancborchardt/subscriptions","organizations_url":"https://api.github.com/users/jancborchardt/orgs","repos_url":"https://api.github.com/users/jancborchardt/repos","events_url":"https://api.github.com/users/jancborchardt/events{/privacy}","received_events_url":"https://api.github.com/users/jancborchardt/received_events","type":"user","site_admin":false}}