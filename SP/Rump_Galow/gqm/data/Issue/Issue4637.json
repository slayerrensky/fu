{"url":"https://api.github.com/repos/owncloud/core/issues/4637","labels_url":"https://api.github.com/repos/owncloud/core/issues/4637/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/4637/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/4637/events","html_url":"https://github.com/owncloud/core/issues/4637","id":18724778,"number":4637,"title":"create permission not working as expected","user":{"login":"takuto88","id":1753651,"avatar_url":"https://gravatar.com/avatar/fec6cc9ebe7d090e077b0d167fe434de?d=https%3a%2f%2fidenticons.github.com%2f239e930f71d4905621638dd695764848.png&r=x","gravatar_id":"fec6cc9ebe7d090e077b0d167fe434de","url":"https://api.github.com/users/takuto88","html_url":"https://github.com/takuto88","followers_url":"https://api.github.com/users/takuto88/followers","following_url":"https://api.github.com/users/takuto88/following{/other_user}","gists_url":"https://api.github.com/users/takuto88/gists{/gist_id}","starred_url":"https://api.github.com/users/takuto88/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/takuto88/subscriptions","organizations_url":"https://api.github.com/users/takuto88/orgs","repos_url":"https://api.github.com/users/takuto88/repos","events_url":"https://api.github.com/users/takuto88/events{/privacy}","received_events_url":"https://api.github.com/users/takuto88/received_events","type":"user","site_admin":false},"labels":[],"state":"closed","assignee":null,"milestone":null,"comments":2,"created_at":"2013-08-29t11:14:27z","updated_at":"2013-08-29t11:34:02z","closed_at":"2013-08-29t11:21:26z","pull_request":{"html_url":null,"diff_url":null,"patch_url":null},"body":"### expected behaviour\r\nif you share a folder with somebody else and set only the \"create\" permission, that user should be able to create new files and folders.\r\n\r\n### actual behaviour\r\nthe user who has the \"create\" permission, can create new folders, but new files will always fail. if the file is uploaded via the web interface, the progressbar is shown while uploading and actually does upload the file. after that is done, the file is shown in the web interface as 0 byte file. after a refresh, it is gone. it also does not exist within the file system.\r\n\r\nthis does not affect any specific browser. this also happens with the sync client (1.3.0 / 1.4.0 rc1).\r\n\r\n### steps to reproduce\r\n1. create a new folder e.g. \"permissiontest\" and share it with someone. give that user only the \"create\" permission\r\n2. login as that user using the web interface and upload a new file to the folder that you shared in the previous step.\r\n3.  the file will be shown as 0 byte file. after a refresh, it is gone again.\r\n\r\n### server configuration\r\noperating system: ubuntu 12.04.2 lts\r\n\r\nweb server: apache 2.2.2\r\n\r\ndatabase: mysql 5.5.32\r\n\r\nphp version: 5.3.10\r\n\r\nowncloud version: 5.0.10\r\n\r\n### client configuration\r\nbrowser: happens in any browser - server issue\r\n\r\noperating system: happens using any client os - server issue\r\n\r\n### logs\r\n#### web error log\r\nthat log will not contain any messages when the operation fails.\r\n\r\n#### web server access log\r\nthis is shown in the moment of upload:\r\n```\r\n172.22.20.47 - - [29/aug/2013:12:56:59 +0200] \"post /demo/index.php/core/ajax/translations.php http/1.1\" 200 4323 \"https://cloud.medien-systempartner.de/demo/index.php/apps/files?dir=/shared/permissiontest\" \"mozilla/5.0 (windows nt 6.1; wow64) applewebkit/537.36 (khtml, like gecko) chrome/29.0.1547.57 safari/537.36\"\r\n172.22.20.47 - - [29/aug/2013:12:56:59 +0200] \"post /demo/index.php/apps/files/ajax/upload.php http/1.1\" 200 820 \"https://cloud.medien-systempartner.de/demo/index.php/apps/files?dir=/shared/permissiontest\" \"mozilla/5.0 (windows nt 6.1; wow64) applewebkit/537.36 (khtml, like gecko) chrome/29.0.1547.57 safari/537.36\"\r\n172.22.20.47 - - [29/aug/2013:12:56:59 +0200] \"get /demo/index.php/apps/files/ajax/mimeicon.php http/1.1\" 200 708 \"https://cloud.medien-systempartner.de/demo/index.php/apps/files?dir=/shared/permissiontest\" \"mozilla/5.0 (windows nt 6.1; wow64) applewebkit/537.36 (khtml, like gecko) chrome/29.0.1547.57 safari/537.36\"\r\n80.228.115.210 - - [29/aug/2013:12:57:01 +0200] \"get /demo/cron.php http/1.1\" 200 4115 \"-\" \"curl/7.22.0 (x86_64-pc-linux-gnu) libcurl/7.22.0 openssl/1.0.1 zlib/1.2.3.4 libidn/1.23 librtmp/2.3\"\r\n```\r\n\r\n#### owncloud log (data/owncloud.log)\r\nthis is shown in the moment of upload\r\n```\r\n{\"app\":\"php\",\"message\":\"undefined index: mime at \\/var\\/www\\/cloud.medien-systempartner.de\\/demo\\/apps\\/files\\/ajax\\/mimeicon.php#3\",\"level\":2,\"time\":\"2013-08-29t10:57:58+00:00\"}\r\n```\r\n\r\n#### browser log\r\njson response from \"upload.php\"\r\n```\r\n[{\"status\":\"success\",\"mime\":null,\"size\":null,\"id\":null,\"name\":\"files.png\",\"originalname\":\"files.png\",\"uploadmaxfilesize\":537919488,\"maxhumanfilesize\":\"513 mb\"}]\r\n```\r\n\r\n\r\n\r\n#### screenshots\r\n**permissons**:\r\n![permissions](https://f.cloud.github.com/assets/1753651/1049115/2c830a92-109b-11e3-86c3-cf0e0d5264e3.png)\r\n\r\n**jane doe after uploading a file**:\r\n(the \"new folder\" was successfully created by jane doe)\r\n![jane-before-refresh](https://f.cloud.github.com/assets/1753651/1049118/4af7b432-109b-11e3-9b98-b0f137bf4cdc.png)\r\n\r\n**jane doe after a refresh**:\r\n![image](https://f.cloud.github.com/assets/1753651/1049120/559d51b2-109b-11e3-9fdf-dff183b2a7dc.png)\r\n","closed_by":{"login":"karlitschek","id":867445,"avatar_url":"https://gravatar.com/avatar/87ce2b4531ee1a0c32b50e0d8f049224?d=https%3a%2f%2fidenticons.github.com%2f06e7098636caebfc9c30c9f52eb905df.png&r=x","gravatar_id":"87ce2b4531ee1a0c32b50e0d8f049224","url":"https://api.github.com/users/karlitschek","html_url":"https://github.com/karlitschek","followers_url":"https://api.github.com/users/karlitschek/followers","following_url":"https://api.github.com/users/karlitschek/following{/other_user}","gists_url":"https://api.github.com/users/karlitschek/gists{/gist_id}","starred_url":"https://api.github.com/users/karlitschek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karlitschek/subscriptions","organizations_url":"https://api.github.com/users/karlitschek/orgs","repos_url":"https://api.github.com/users/karlitschek/repos","events_url":"https://api.github.com/users/karlitschek/events{/privacy}","received_events_url":"https://api.github.com/users/karlitschek/received_events","type":"user","site_admin":false}}