{"url":"https://api.github.com/repos/owncloud/core/issues/947","labels_url":"https://api.github.com/repos/owncloud/core/issues/947/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/947/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/947/events","html_url":"https://github.com/owncloud/core/issues/947","id":9383320,"number":947,"title":"when sharing a folder with only the create permission, uploaded files vanish from the system entirely.","user":{"login":"thewebmachine","id":1045052,"avatar_url":"https://gravatar.com/avatar/1d74ee2189f73390db1672eb54dc95fd?d=https%3a%2f%2fidenticons.github.com%2f5e3d388bbdc6bf8d800af87ba47cd7aa.png&r=x","gravatar_id":"1d74ee2189f73390db1672eb54dc95fd","url":"https://api.github.com/users/thewebmachine","html_url":"https://github.com/thewebmachine","followers_url":"https://api.github.com/users/thewebmachine/followers","following_url":"https://api.github.com/users/thewebmachine/following{/other_user}","gists_url":"https://api.github.com/users/thewebmachine/gists{/gist_id}","starred_url":"https://api.github.com/users/thewebmachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thewebmachine/subscriptions","organizations_url":"https://api.github.com/users/thewebmachine/orgs","repos_url":"https://api.github.com/users/thewebmachine/repos","events_url":"https://api.github.com/users/thewebmachine/events{/privacy}","received_events_url":"https://api.github.com/users/thewebmachine/received_events","type":"user","site_admin":false},"labels":[{"url":"https://api.github.com/repos/owncloud/core/labels/bug","name":"bug","color":"fc2929"},{"url":"https://api.github.com/repos/owncloud/core/labels/sharing","name":"sharing","color":"e102d8"}],"state":"closed","assignee":null,"milestone":null,"comments":6,"created_at":"2012-12-18t21:59:04z","updated_at":"2013-08-05t14:37:02z","closed_at":"2013-08-05t14:37:02z","pull_request":{"html_url":null,"diff_url":null,"patch_url":null},"body":"i just confirmed it in version 4.5.4...and i am pretty sure it existed in 4.5.3 and 4.5.1.\r\n\r\nthis may, in some way, be related to: https://github.com/owncloud/core/issues/780\r\n\r\nif create is the only permission a user has to a folder shared to them, when they upload a file it vanishes immediately. \r\n\r\nnow, the expected behavior here should be that the files in that folder can be created by the user, but not modified/deleted/shared after creation (for example, submitting a timely report...time stamped and unmodifiable by other staff, including the original poster) instead, owncloud simply drops the file. \r\n\r\ni checked the local filesystem and it is not there, either. no indication in the logs of anything related to the upload or permissions.\r\n\r\nthis issue doesn't seem to be affected by whether or not a user is local or ldap. i've tried local to local, ldap to local, local to ldap, and ldap to ldap...results are identical.\r\n\r\nmy theory: when using the web interface to upload a file, the create permission is enough to allow the file to be \"touched\" by the web interface to create a placeholder and begin the upload, but the update permission is still needed to update the original touched file once it has finished uploading. however, i have not had a chance to test this theory with a webdav upload yet.\r\n\r\nif i enable the update permission with the create permission, it works...just not with create permission by itself. i don't want, and shouldn't have to use, the update permission. i want users to be able to only submit files to the folder, but not modify existing files in any way...i.e. create permissions.\r\n\r\nsteps to reproduce:\r\n1. create new folder in user1\r\n2. share folder to user2 with only create perms\r\n3. attempt to upload a file with user2 to the folder.\r\n4. refresh folder view.\r\n\r\nfile will upload, then vanish as soon as the page is refreshed. file never appears on the local filesystem or user1's copy of the folder.","closed_by":{"login":"jancborchardt","id":925062,"avatar_url":"https://gravatar.com/avatar/2fd3f4d5d762955e5b603794a888fa97?d=https%3a%2f%2fidenticons.github.com%2f84ec51f9ceed468217d4e13abf78da9c.png&r=x","gravatar_id":"2fd3f4d5d762955e5b603794a888fa97","url":"https://api.github.com/users/jancborchardt","html_url":"https://github.com/jancborchardt","followers_url":"https://api.github.com/users/jancborchardt/followers","following_url":"https://api.github.com/users/jancborchardt/following{/other_user}","gists_url":"https://api.github.com/users/jancborchardt/gists{/gist_id}","starred_url":"https://api.github.com/users/jancborchardt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jancborchardt/subscriptions","organizations_url":"https://api.github.com/users/jancborchardt/orgs","repos_url":"https://api.github.com/users/jancborchardt/repos","events_url":"https://api.github.com/users/jancborchardt/events{/privacy}","received_events_url":"https://api.github.com/users/jancborchardt/received_events","type":"user","site_admin":false}}