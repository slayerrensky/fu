{"url":"https://api.github.com/repos/owncloud/core/issues/3503","labels_url":"https://api.github.com/repos/owncloud/core/issues/3503/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/3503/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/3503/events","html_url":"https://github.com/owncloud/core/issues/3503","id":14786981,"number":3503,"title":"4.5.11: unable to overwrite a file with a dot when uploading new version of this file","user":{"login":"realrancor","id":2248459,"avatar_url":"https://gravatar.com/avatar/f6105e79dfcfb0fcbabb3db061135c08?d=https%3a%2f%2fidenticons.github.com%2f7a70061016eba74d85c060de0f65212d.png&r=x","gravatar_id":"f6105e79dfcfb0fcbabb3db061135c08","url":"https://api.github.com/users/realrancor","html_url":"https://github.com/realrancor","followers_url":"https://api.github.com/users/realrancor/followers","following_url":"https://api.github.com/users/realrancor/following{/other_user}","gists_url":"https://api.github.com/users/realrancor/gists{/gist_id}","starred_url":"https://api.github.com/users/realrancor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/realrancor/subscriptions","organizations_url":"https://api.github.com/users/realrancor/orgs","repos_url":"https://api.github.com/users/realrancor/repos","events_url":"https://api.github.com/users/realrancor/events{/privacy}","received_events_url":"https://api.github.com/users/realrancor/received_events","type":"user","site_admin":false},"labels":[{"url":"https://api.github.com/repos/owncloud/core/labels/v4.5.x","name":"v4.5.x","color":"dddddd"}],"state":"closed","assignee":null,"milestone":null,"comments":1,"created_at":"2013-05-27t08:43:21z","updated_at":"2013-08-07t07:39:20z","closed_at":"2013-08-06t23:10:42z","pull_request":{"html_url":null,"diff_url":null,"patch_url":null},"body":"### expected behaviour\r\nuploading a hidden file .test via the webgui and then uploading the same file again should overwrite the existing file without an error.\r\n\r\n### actual behaviour\r\nuploading a hidden file .test via the webgui and then uploading the same file again doesn't overwrite the existing file. instead an message \"unable to rename\" is shown and the file is named .test(2).\r\n\r\nthe owncloud.log shows that the file is \"not writeable\" but they have the proper permissions:\r\n\r\n     -rw-r--r-- 1 www-data www-data    24 may 27 10:26 .test\r\n     -rw-r--r-- 1 www-data www-data    32 may 27 10:27 .test (2)\r\n\r\nmaybe connected with: https://github.com/owncloud/core/pull/3310, https://github.com/owncloud/core/pull/3318, https://github.com/owncloud/core/pull/3152, https://github.com/owncloud/core/issues/2907\r\n\r\nalso note the wrong call of:\r\n\r\n     dir=%2f&newname=.test&file=+(2).test\r\n\r\nin my webserver log. probably this should be:\r\n\r\n     dir=%2f&newname=.test&file=+.test (2)\r\n\r\ninstead.\r\n\r\n### steps to reproduce\r\n1. upload a file named .test via the upload button in the webgui\r\n2. modify the local .test file\r\n3. upload the same file again via the upload button in the webgui and click on \"overwrite\"\r\n\r\n### server configuration\r\noperating system: debian wheezy\r\n\r\nweb server: nginx 1.4.1\r\n\r\ndatabase: mysql 5.5\r\n\r\nphp version: 5.4.15\r\n\r\nowncloud version: 4.5.11\r\n\r\n### client configuration\r\nbrowser: firefox 21\r\n\r\noperating system: ubuntu\r\n\r\n### logs\r\n#### web server error log\r\nxx.xx.xx.xx - - [27/may/2013:10:27:56 +0200] \"get /?app=files&getfile=ajax/rename.php&dir=%2f&newname=.test&file=+(2).test http/1.1\" 200 72 \"https://example.com/?app=files\" \"mozilla/5.0 (x11; ubuntu; linux x86_64; rv:21.0) gecko/20100101 firefox/21.0\"\r\n\r\n#### php error log\r\n[27-may-2013 08:27:56 utc] php notice:  undefined index: mime in /path/to/apps/files/ajax/mimeicon.php on line 3\r\n\r\n#### owncloud log (data/owncloud.log)\r\n{\"app\":\"core\",\"message\":\"unable to rename, file is not writable : files\\/ (2).test\",\"level\":3,\"time\":1369643347}","closed_by":{"login":"jancborchardt","id":925062,"avatar_url":"https://gravatar.com/avatar/2fd3f4d5d762955e5b603794a888fa97?d=https%3a%2f%2fidenticons.github.com%2f84ec51f9ceed468217d4e13abf78da9c.png&r=x","gravatar_id":"2fd3f4d5d762955e5b603794a888fa97","url":"https://api.github.com/users/jancborchardt","html_url":"https://github.com/jancborchardt","followers_url":"https://api.github.com/users/jancborchardt/followers","following_url":"https://api.github.com/users/jancborchardt/following{/other_user}","gists_url":"https://api.github.com/users/jancborchardt/gists{/gist_id}","starred_url":"https://api.github.com/users/jancborchardt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jancborchardt/subscriptions","organizations_url":"https://api.github.com/users/jancborchardt/orgs","repos_url":"https://api.github.com/users/jancborchardt/repos","events_url":"https://api.github.com/users/jancborchardt/events{/privacy}","received_events_url":"https://api.github.com/users/jancborchardt/received_events","type":"user","site_admin":false}}