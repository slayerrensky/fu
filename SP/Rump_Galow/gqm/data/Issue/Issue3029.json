{"url":"https://api.github.com/repos/owncloud/core/issues/3029","labels_url":"https://api.github.com/repos/owncloud/core/issues/3029/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/3029/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/3029/events","html_url":"https://github.com/owncloud/core/issues/3029","id":13402793,"number":3029,"title":"ampache unallowed xml chars in songlist","user":{"login":"evil2000","id":697191,"avatar_url":"https://gravatar.com/avatar/d87ecd1d4af33f0c9d917e86fc0077a3?d=https%3a%2f%2fidenticons.github.com%2ff19cda2baa6a1669331d38a5996ee88b.png&r=x","gravatar_id":"d87ecd1d4af33f0c9d917e86fc0077a3","url":"https://api.github.com/users/evil2000","html_url":"https://github.com/evil2000","followers_url":"https://api.github.com/users/evil2000/followers","following_url":"https://api.github.com/users/evil2000/following{/other_user}","gists_url":"https://api.github.com/users/evil2000/gists{/gist_id}","starred_url":"https://api.github.com/users/evil2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/evil2000/subscriptions","organizations_url":"https://api.github.com/users/evil2000/orgs","repos_url":"https://api.github.com/users/evil2000/repos","events_url":"https://api.github.com/users/evil2000/events{/privacy}","received_events_url":"https://api.github.com/users/evil2000/received_events","type":"user","site_admin":false},"labels":[],"state":"closed","assignee":null,"milestone":null,"comments":2,"created_at":"2013-04-19t14:17:39z","updated_at":"2013-04-19t15:34:56z","closed_at":"2013-04-19t14:48:33z","pull_request":{"html_url":null,"diff_url":null,"patch_url":null},"body":"in some cases it happens, that control characters appear in id3 tags. then the function numeric_entity_4_char() in apps/media/lib/ampache.php tries to replace them by the numeric representation. but in xml all chars lower then 0x20 (0d32) are not allowed, so this function should take care of this.\r\n\r\ni added one line to the funtion to return nothing if such a control-char is found:\r\n\r\n```\r\nfunction numeric_entity_4_char($char) {\r\n        if (ord($char) < 32) return \"\";\r\n        return \"&#\" . str_pad(ord($char), 3, '0', str_pad_left) . \";\";\r\n}\r\n```\r\n\r\nmaybe it could be added to the next release of owncloud.","closed_by":{"login":"kondou-ger","id":1410802,"avatar_url":"https://gravatar.com/avatar/917dab919ae812f8252b2f501c514b19?d=https%3a%2f%2fidenticons.github.com%2fd07869ed62cb1b7f88b731956ab913ee.png&r=x","gravatar_id":"917dab919ae812f8252b2f501c514b19","url":"https://api.github.com/users/kondou-ger","html_url":"https://github.com/kondou-ger","followers_url":"https://api.github.com/users/kondou-ger/followers","following_url":"https://api.github.com/users/kondou-ger/following{/other_user}","gists_url":"https://api.github.com/users/kondou-ger/gists{/gist_id}","starred_url":"https://api.github.com/users/kondou-ger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kondou-ger/subscriptions","organizations_url":"https://api.github.com/users/kondou-ger/orgs","repos_url":"https://api.github.com/users/kondou-ger/repos","events_url":"https://api.github.com/users/kondou-ger/events{/privacy}","received_events_url":"https://api.github.com/users/kondou-ger/received_events","type":"user","site_admin":false}}