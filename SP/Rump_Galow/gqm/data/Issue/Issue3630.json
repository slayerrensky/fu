{"url":"https://api.github.com/repos/owncloud/core/issues/3630","labels_url":"https://api.github.com/repos/owncloud/core/issues/3630/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/3630/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/3630/events","html_url":"https://github.com/owncloud/core/issues/3630","id":15266668,"number":3630,"title":"sharing: in read only share, rename leads to new file","user":{"login":"dragotin","id":1070214,"avatar_url":"https://gravatar.com/avatar/af829234b31fb915704c1c65ef48eee0?d=https%3a%2f%2fidenticons.github.com%2f3392afab7f424e10623ba95a941f4d34.png&r=x","gravatar_id":"af829234b31fb915704c1c65ef48eee0","url":"https://api.github.com/users/dragotin","html_url":"https://github.com/dragotin","followers_url":"https://api.github.com/users/dragotin/followers","following_url":"https://api.github.com/users/dragotin/following{/other_user}","gists_url":"https://api.github.com/users/dragotin/gists{/gist_id}","starred_url":"https://api.github.com/users/dragotin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dragotin/subscriptions","organizations_url":"https://api.github.com/users/dragotin/orgs","repos_url":"https://api.github.com/users/dragotin/repos","events_url":"https://api.github.com/users/dragotin/events{/privacy}","received_events_url":"https://api.github.com/users/dragotin/received_events","type":"user","site_admin":false},"labels":[{"url":"https://api.github.com/repos/owncloud/core/labels/bug","name":"bug","color":"fc2929"},{"url":"https://api.github.com/repos/owncloud/core/labels/engineering","name":"engineering","color":"e102d8"},{"url":"https://api.github.com/repos/owncloud/core/labels/sharing","name":"sharing","color":"e102d8"}],"state":"open","assignee":{"login":"mtgap","id":1097106,"avatar_url":"https://gravatar.com/avatar/454a73ee5feeb428d0c163a48903332c?d=https%3a%2f%2fidenticons.github.com%2f52d29a66f285a1d61125dd69ac0766b2.png&r=x","gravatar_id":"454a73ee5feeb428d0c163a48903332c","url":"https://api.github.com/users/mtgap","html_url":"https://github.com/mtgap","followers_url":"https://api.github.com/users/mtgap/followers","following_url":"https://api.github.com/users/mtgap/following{/other_user}","gists_url":"https://api.github.com/users/mtgap/gists{/gist_id}","starred_url":"https://api.github.com/users/mtgap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mtgap/subscriptions","organizations_url":"https://api.github.com/users/mtgap/orgs","repos_url":"https://api.github.com/users/mtgap/repos","events_url":"https://api.github.com/users/mtgap/events{/privacy}","received_events_url":"https://api.github.com/users/mtgap/received_events","type":"user","site_admin":false},"milestone":null,"comments":7,"created_at":"2013-06-07t10:47:42z","updated_at":"2013-08-07t12:30:42z","closed_at":null,"pull_request":{"html_url":null,"diff_url":null,"patch_url":null},"body":"## expected behaviour\r\nwhen a read only directory is shared and synced, no action on client side should be able to change content at all on server side.\r\n\r\n### actual behaviour\r\nuser *from* shares a directory with user *tom*, no change permissions except can share. *tom* syncs his shared folder to his desktop. all files get synced down. now *tom* renames a directory within the share from ccc to cccaway. \r\n\r\nthat change, even it should do nothing because of missing permissions, creates a **file** named cccaway on the server. it's visible at both the user *tom* as well as *from*. the web interface pretends that it has a size > 0 but actually it has zero byte if its downloaded.\r\n\r\nthis disturbs the sync client a lot of course.\r\n\r\n### steps to reproduce\r\n1. create a user *from* and a user *tom*\r\n2. let *from* share a directory with *tom* and only give resharing permission\r\n3. let *tom* sync his shared-directory\r\n4. on the client, let *tom* rename a directory within the shared dir.\r\n\r\n### server configuration\r\noperating system: linux\r\n\r\nweb server: apache\r\n\r\ndatabase: sqlite\r\n\r\nphp version: 5.3.15\r\n\r\nowncloud version: stable5 at commit 9046c65af57f9e90d28621a1176d2c2334bdd5df\r\n\r\n### client configuration\r\nclient: version 1.3.0 beta2\r\n\r\noperating system: linux\r\n\r\n### logs\r\n\r\n#### owncloud log (data/owncloud.log)\r\n```\r\n{\"app\":\"files_sharing\",\"message\":\"file source not found for: \\/files\\/fromfrom\\/aaa\",\"level\":3,\"time\":1370595611}\r\n{\"app\":\"files_sharing\",\"message\":\"file source not found for: \\/files\\/fromfrom\\/aaa\",\"level\":3,\"time\":1370595611}\r\n{\"app\":\"files_sharing\",\"message\":\"file source not found for: \\/files\\/fromfrom\\/brokenccc\",\"level\":3,\"time\":1370595611}\r\n{\"app\":\"files_sharing\",\"message\":\"file source not found for: \\/files\\/fromfrom\\/brokenccc\",\"level\":3,\"time\":1370595611}\r\n{\"app\":\"files_sharing\",\"message\":\"file source not found for: \\/files\\/fromfrom\\/ccc\",\"level\":3,\"time\":1370595611}\r\n{\"app\":\"files_sharing\",\"message\":\"file source not found for: \\/files\\/fromfrom\\/ccc\",\"level\":3,\"time\":1370595611}\r\n```\r\n\r\n","closed_by":null}