{"url":"https://api.github.com/repos/owncloud/core/issues/4766","labels_url":"https://api.github.com/repos/owncloud/core/issues/4766/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/4766/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/4766/events","html_url":"https://github.com/owncloud/core/pull/4766","id":19158078,"number":4766,"title":"file upload conflicts dialog","user":{"login":"butonic","id":956847,"avatar_url":"https://gravatar.com/avatar/9760c134cabf66e10dbba06d7525f5c7?d=https%3a%2f%2fidenticons.github.com%2f92925ec1ad893739ed57986f18e2f060.png&r=x","gravatar_id":"9760c134cabf66e10dbba06d7525f5c7","url":"https://api.github.com/users/butonic","html_url":"https://github.com/butonic","followers_url":"https://api.github.com/users/butonic/followers","following_url":"https://api.github.com/users/butonic/following{/other_user}","gists_url":"https://api.github.com/users/butonic/gists{/gist_id}","starred_url":"https://api.github.com/users/butonic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/butonic/subscriptions","organizations_url":"https://api.github.com/users/butonic/orgs","repos_url":"https://api.github.com/users/butonic/repos","events_url":"https://api.github.com/users/butonic/events{/privacy}","received_events_url":"https://api.github.com/users/butonic/received_events","type":"user","site_admin":false},"labels":[],"state":"closed","assignee":null,"milestone":null,"comments":54,"created_at":"2013-09-08t09:02:09z","updated_at":"2013-10-01t12:32:51z","closed_at":"2013-09-19t15:23:08z","pull_request":{"html_url":"https://github.com/owncloud/core/pull/4766","diff_url":"https://github.com/owncloud/core/pull/4766.diff","patch_url":"https://github.com/owncloud/core/pull/4766.patch"},"body":"when uploading an already existing file in oc5 we currently autorename the uploaded file and append a number in brackets. this is a regression from oc4.5 where users were given a choice how to handle a conflict as in every other operating system. this pr adds back a conflicts dialog that pops up when a file already exists on the server:\r\n![bildschirmfoto vom 2013-09-08 10 48 42](https://f.cloud.github.com/assets/956847/1102832/7fe18d42-1863-11e3-8a3b-628927201551.png)\r\n\r\ntechnically, the server will deny an upload when a file already exists and return an 'alreadyexists' error. the browser then shows this dialog and adds subsequent conflicts to it. it uses oc/preview (kudos @georgehrke) to show thumnails for existing files on the server and shows previews for images to be uploaded when the filereader api is available (kudos @icewind1991).\r\n\r\nif modification times differ the older one is highlighted bold. if sizes differ the bigger one is highlighted bold. as ie8 has no filereade api it looks like this:\r\n![bildschirmfoto vom 2013-09-06 23 55 09](https://f.cloud.github.com/assets/956847/1102845/6c3e139a-1864-11e3-8288-87cf4e6f8e2f.png)\r\n\r\nimho not too bad.\r\n\r\nthis is a fallback dialog we will always need because thy sync client or another user / browser might have uploaded a file that we do not know of and the server will now correctly answer with the 'alreadyexists' error.\r\n\r\nwhile this is the minimum we need for file uploads i'll write a design forward for file upload to discuss what can still be improved.\r\n\r\n@karlitschek @bartv2 @icewind1991 @deepdiver1975 @msrex please review. i know about the limitations of this implementation but i won't start going into them unless you discover them. so go ahead and try to break it.","closed_by":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false}}