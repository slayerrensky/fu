{"url":"https://api.github.com/repos/owncloud/core/issues/4201","labels_url":"https://api.github.com/repos/owncloud/core/issues/4201/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/4201/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/4201/events","html_url":"https://github.com/owncloud/core/issues/4201","id":17254469,"number":4201,"title":"ldap-groups not found due to not using a filter","user":{"login":"m4ui","id":5095379,"avatar_url":"https://gravatar.com/avatar/f213942e03bd76249a61e5fdf7fb4d74?d=https%3a%2f%2fidenticons.github.com%2ff52a85be330954001398e86794f1aa8c.png&r=x","gravatar_id":"f213942e03bd76249a61e5fdf7fb4d74","url":"https://api.github.com/users/m4ui","html_url":"https://github.com/m4ui","followers_url":"https://api.github.com/users/m4ui/followers","following_url":"https://api.github.com/users/m4ui/following{/other_user}","gists_url":"https://api.github.com/users/m4ui/gists{/gist_id}","starred_url":"https://api.github.com/users/m4ui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/m4ui/subscriptions","organizations_url":"https://api.github.com/users/m4ui/orgs","repos_url":"https://api.github.com/users/m4ui/repos","events_url":"https://api.github.com/users/m4ui/events{/privacy}","received_events_url":"https://api.github.com/users/m4ui/received_events","type":"user","site_admin":false},"labels":[{"url":"https://api.github.com/repos/owncloud/core/labels/app%3auser_ldap","name":"app:user_ldap","color":"02d7e1"},{"url":"https://api.github.com/repos/owncloud/core/labels/bug","name":"bug","color":"fc2929"},{"url":"https://api.github.com/repos/owncloud/core/labels/sharing","name":"sharing","color":"e102d8"}],"state":"closed","assignee":null,"milestone":null,"comments":7,"created_at":"2013-07-26t09:08:08z","updated_at":"2013-08-30t10:38:31z","closed_at":"2013-08-30t10:38:31z","pull_request":{"html_url":null,"diff_url":null,"patch_url":null},"body":"### expected behaviour\r\nowncloud should show me the group i am looking for when i type its name in the sharing dialogue.\r\n\r\n### actual behaviour\r\nsometimes it does find the groups and shows them, but sometimes it does not.\r\n\r\n### the problem\r\nwe have an ldap-server which contains thousands of groups, but its response is limited to 500 entries. when i type in the name of the group i am looking for /owncloud/core/ajax/share.php is called and it tries to retrieve all the groups. so basically you are getting all the groups there are and you are searching this data instead of letting the ldap-server handle the search (please correct me if i am wrong). if i get lucky the 500 groups in the response contain the group i am looking for and owncloud shows it to me, but a lot of times it does not.\r\n\r\n### possible solution\r\ninstead of doing the search yourself you could just give the ldap-server a filter and it would do the searching for you. since the method getgroups has a parameter called \"filter\" i would suggest you pass it the value of whatever is inside of the text field of the sharing dialogue.\r\n\r\nchanging line 182 in share.php from:\r\n```php\r\n$groups = oc_group::getgroups();\r\n```\r\n\r\nto:\r\n```php\r\n$groups = oc_group::getgroups($_get['search']);\r\n```\r\n\r\ndid the trick for me.\r\n\r\n### server configuration\r\noperating system: red hat enterprise linux server 6.3\r\n\r\nweb server: apache 2.2.15\r\n\r\ndatabase: mysql 5.5.32\r\n\r\nphp version: 5.4.17\r\n\r\nowncloud version: 5.0.9","closed_by":{"login":"blizzz","id":2184312,"avatar_url":"https://gravatar.com/avatar/1898b25a9cb3aa1a0f0febd1359910b9?d=https%3a%2f%2fidenticons.github.com%2fca03acec6deadf508b75eb0cf9ba036c.png&r=x","gravatar_id":"1898b25a9cb3aa1a0f0febd1359910b9","url":"https://api.github.com/users/blizzz","html_url":"https://github.com/blizzz","followers_url":"https://api.github.com/users/blizzz/followers","following_url":"https://api.github.com/users/blizzz/following{/other_user}","gists_url":"https://api.github.com/users/blizzz/gists{/gist_id}","starred_url":"https://api.github.com/users/blizzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blizzz/subscriptions","organizations_url":"https://api.github.com/users/blizzz/orgs","repos_url":"https://api.github.com/users/blizzz/repos","events_url":"https://api.github.com/users/blizzz/events{/privacy}","received_events_url":"https://api.github.com/users/blizzz/received_events","type":"user","site_admin":false}}