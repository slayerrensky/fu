{"url":"https://api.github.com/repos/owncloud/core/issues/4440","labels_url":"https://api.github.com/repos/owncloud/core/issues/4440/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/4440/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/4440/events","html_url":"https://github.com/owncloud/core/issues/4440","id":18094875,"number":4440,"title":"cron dies using ldap with user-filter since 5.0.10","user":{"login":"tkriener","id":5220330,"avatar_url":"https://gravatar.com/avatar/40e008aac1d316fdd795ec7caa6565c6?d=https%3a%2f%2fidenticons.github.com%2fb345367192ca3bcffd712aa6d98f7a9c.png&r=x","gravatar_id":"40e008aac1d316fdd795ec7caa6565c6","url":"https://api.github.com/users/tkriener","html_url":"https://github.com/tkriener","followers_url":"https://api.github.com/users/tkriener/followers","following_url":"https://api.github.com/users/tkriener/following{/other_user}","gists_url":"https://api.github.com/users/tkriener/gists{/gist_id}","starred_url":"https://api.github.com/users/tkriener/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tkriener/subscriptions","organizations_url":"https://api.github.com/users/tkriener/orgs","repos_url":"https://api.github.com/users/tkriener/repos","events_url":"https://api.github.com/users/tkriener/events{/privacy}","received_events_url":"https://api.github.com/users/tkriener/received_events","type":"user","site_admin":false},"labels":[{"url":"https://api.github.com/repos/owncloud/core/labels/app%3auser_ldap","name":"app:user_ldap","color":"02d7e1"},{"url":"https://api.github.com/repos/owncloud/core/labels/v5.x","name":"v5.x","color":"ededed"}],"state":"open","assignee":null,"milestone":{"url":"https://api.github.com/repos/owncloud/core/milestones/8","labels_url":"https://api.github.com/repos/owncloud/core/milestones/8/labels","id":474801,"number":8,"title":"owncloud 5.0.14","description":"","creator":{"login":"butonic","id":956847,"avatar_url":"https://gravatar.com/avatar/9760c134cabf66e10dbba06d7525f5c7?d=https%3a%2f%2fidenticons.github.com%2f92925ec1ad893739ed57986f18e2f060.png&r=x","gravatar_id":"9760c134cabf66e10dbba06d7525f5c7","url":"https://api.github.com/users/butonic","html_url":"https://github.com/butonic","followers_url":"https://api.github.com/users/butonic/followers","following_url":"https://api.github.com/users/butonic/following{/other_user}","gists_url":"https://api.github.com/users/butonic/gists{/gist_id}","starred_url":"https://api.github.com/users/butonic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/butonic/subscriptions","organizations_url":"https://api.github.com/users/butonic/orgs","repos_url":"https://api.github.com/users/butonic/repos","events_url":"https://api.github.com/users/butonic/events{/privacy}","received_events_url":"https://api.github.com/users/butonic/received_events","type":"user","site_admin":false},"open_issues":17,"closed_issues":18,"state":"open","created_at":"2013-11-05t08:56:59z","updated_at":"2013-12-20t19:56:34z","due_on":null},"comments":17,"created_at":"2013-08-15t08:05:54z","updated_at":"2013-11-05t08:57:35z","closed_at":null,"pull_request":{"html_url":null,"diff_url":null,"patch_url":null},"body":"hello,\r\n\r\nwe use the ldap-connection to an active directory with a user-login filter like this:\r\n(&(samaccountname=%uid)(objectclass=user)(memberof=cn=owncloud,ou=security groups,ou=mybusiness,dc=ad,dc=company,dc=de))\r\nand a user-filter like this:\r\n(&(objectclass=user)(mail=*)(memberof=cn=owncloud,ou=security groups,ou=mybusiness,dc=ad,dc=company,dc=de))\r\n\r\nsince 5.0.10 we have the problem, that the cron-job \" php -f /var/www/html/owncloud/cron.php\" seems to die with every second call. it leaves the cron.lock behind.\r\n\r\nin the log i found the following messages:\r\n{\"app\":\"user_ldap\",\"message\":\"bgj \\\"updategroups\\\" \\u2013 dealing with known groups.\",\"level\":0,\"time\":\"2013-08-15t07:49:40+00:00\"}\r\n{\"app\":\"user_ldap\",\"message\":\"requested attribute member not found for cn=administrator templates,ou=security groups,ou=mybusiness,dc=ad,dc=company,dc=de\",\"level\":0,\"time\":\"2013-08-15t07:49:40+00:00\"}\r\n{\"app\":\"user_ldap\",\"message\":\"readattribute failed for dn cn=administrator templates,ou=security groups,ou=mybusiness,dc=ad,dc=company,dc=de\",\"level\":0,\"time\":\"2013-08-15t07:49:40+00:00\"}\r\n{\"app\":\"user_ldap\",\"message\":\"readattribute failed for dn cn=astarotest,ou=security groups,ou=mybusiness,dc=ad,dc=company,dc=de\",\"level\":0,\"time\":\"2013-08-15t07:49:40+00:00\"}\r\n{\"app\":\"core\",\"message\":\"include path for class \\\"oc_external\\\" starts with \\\"apps\\/\\\"\",\"level\":0,\"time\":\"2013-08-15t07:49:40+00:00\"}\r\n{\"app\":\"user_ldap\",\"message\":\"uuid checking \\\\ uuid for cn=ulrich admin,ou=sbsusers,ou=users,ou=mybusiness,dc=ad,dc=company,dc=de using objectguid\",\"level\":0,\"time\":\"2013-08-15t07:49:40+00:00\"}\r\n{\"app\":\"user_ldap\",\"message\":\"requested attribute mail not found for cn=ulrich admin,ou=sbsusers,ou=users,ou=mybusiness,dc=ad,dc=company,dc=de\",\"level\":0,\"time\":\"2013-08-15t07:49:40+00:00\"}\r\n{\"app\":\"user_ldap\",\"message\":\"illegal value for the uuid attribute, reset to autodetect.\",\"level\":1,\"time\":\"2013-08-15t07:49:40+00:00\"}\r\n{\"app\":\"user_ldap\",\"message\":\"readattribute: cn=ulrich admin,ou=sbsusers,ou=users,ou=mybusiness,dc=ad,dc=company,dc=de found\",\"level\":0,\"time\":\"2013-08-15t07:49:40+00:00\"}\r\n{\"app\":\"user_ldap\",\"message\":\"uuid checking \\\\ uuid for cn=ulrich admin,ou=sbsusers,ou=users,ou=mybusiness,dc=ad,dc=company,dc=de using objectguid\",\"level\":0,\"time\":\"2013-08-15t07:49:40+00:00\"}\r\n{\"app\":\"user_ldap\",\"message\":\"requested attribute mail not found for cn=ulrich admin,ou=sbsusers,ou=users,ou=mybusiness,dc=ad,dc=company,dc=de\",\"level\":0,\"time\":\"2013-08-15t07:49:40+00:00\"}\r\n{\"app\":\"user_ldap\",\"message\":\"illegal value for the uuid attribute, reset to autodetect.\",\"level\":1,\"time\":\"2013-08-15t07:49:40+00:00\"}\r\n\r\nthe last messages appear several hundred times.\r\nnormally owncloud should not take this user into account, because he does not match the user-filters, he is just in the group that owncloud reads.\r\n\r\nregards,\r\nthomas kriener","closed_by":null}