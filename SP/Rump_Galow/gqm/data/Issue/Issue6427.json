{"url":"https://api.github.com/repos/owncloud/core/issues/6427","labels_url":"https://api.github.com/repos/owncloud/core/issues/6427/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/6427/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/6427/events","html_url":"https://github.com/owncloud/core/issues/6427","id":24326041,"number":6427,"title":"oc6/6a - files app - file operations are not shown for multibytes locales","user":{"login":"sfyang","id":5391250,"avatar_url":"https://gravatar.com/avatar/d4d659d7dcd1109775498e370f6c1b08?d=https%3a%2f%2fidenticons.github.com%2fdfba3418eb43bc6878ee5f9615d5209b.png&r=x","gravatar_id":"d4d659d7dcd1109775498e370f6c1b08","url":"https://api.github.com/users/sfyang","html_url":"https://github.com/sfyang","followers_url":"https://api.github.com/users/sfyang/followers","following_url":"https://api.github.com/users/sfyang/following{/other_user}","gists_url":"https://api.github.com/users/sfyang/gists{/gist_id}","starred_url":"https://api.github.com/users/sfyang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sfyang/subscriptions","organizations_url":"https://api.github.com/users/sfyang/orgs","repos_url":"https://api.github.com/users/sfyang/repos","events_url":"https://api.github.com/users/sfyang/events{/privacy}","received_events_url":"https://api.github.com/users/sfyang/received_events","type":"user","site_admin":false},"labels":[{"url":"https://api.github.com/repos/owncloud/core/labels/bug","name":"bug","color":"fc2929"}],"state":"closed","assignee":null,"milestone":null,"comments":1,"created_at":"2013-12-16t02:29:39z","updated_at":"2013-12-20t10:00:15z","closed_at":"2013-12-18t11:11:18z","pull_request":{"html_url":null,"diff_url":null,"patch_url":null},"body":"### expected behaviour\r\nin the files app, the operations for a file or directory should be shown when the mouse pointer hovers over it. \r\n\r\n### actual behaviour\r\nif the language setting was set to be one of the multibytes locales such as traditional chinese or japanese, the operations would not appear for most of the time. if the javascript console was turned on when loading the files app page, in firefox it shows \"typeerror: text is undefined\" at core.js line 461, while in chromium (srware iron) it shows \"uncaught typeerror: cannot call method 'replace' of undefined\" at core.js?v=d3673708f656239c4dd25f770054095d line 461.\r\n\r\n### steps to reproduce\r\n1. login to owncloud 6.0 or 6.0a.\r\n2. change language to æ­£é«”ä¸­æ–‡ï¼ˆå?°ç?£ï¼‰.\r\n3. click the navigation sidebar to switch to files app.\r\n4. hover the mouse pointer over any file or directory, and no operations are shown.\r\n\r\n### server configuration\r\noperating system:\r\nubuntu linux 12.04 lts (desktop)\r\n\r\nweb server: \r\napache 2.2,22\r\n\r\ndatabase:\r\nmysql 5.5.34\r\n\r\nphp version:\r\nphp 5.3.10\r\n\r\nowncloud version: (see owncloud admin page)\r\n6.0.0\r\n6.0.0a\r\n\r\nupdated from an older owncloud or fresh install:\r\nupgraded from 5.0.10 using deb package\r\n\r\nlist of activated app:\r\nbookmarks\r\ncalendar\r\ncontacts\r\ndeleted files\r\ndocuments\r\nexternal sites\r\nexternal storage support\r\nfirst run wizard\r\nfull text search\r\nldap user and group backend\r\npdf viewer\r\npictures\r\nshare files\r\ntasks\r\ntext editor\r\nupdater\r\nversions\r\nvideo viewer\r\napp framework\r\nchecksum\r\ninternal messages\r\nnews\r\nsuperlog\r\nuser photo\r\n\r\nthe content of config/config.php: (without the database password and passwordsalt)\r\n```\r\n$config = array (\r\n  'instanceid' => '524b8af686161',\r\n  'passwordsalt' => 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx',\r\n  'datadirectory' => '/var/www/owncloud/data',\r\n  'dbtype' => 'mysql',\r\n  'version' => '6.0.0.14',\r\n  'dbname' => 'owncloud',\r\n  'dbhost' => 'localhost',\r\n  'dbtableprefix' => 'oc_',\r\n  'dbuser' => 'owncloud',\r\n  'dbpassword' => 'xxxxxxxxxxxxxxxx',\r\n  'installed' => true,\r\n  'forcessl' => true,\r\n  'ldapignorenamingrules' => false,\r\n  'loglevel' => '2',\r\n  'theme' => '',\r\n  'maintenance' => false,\r\n);\r\n```\r\n\r\n### client configuration\r\nbrowser:\r\nfirefox 26.0\r\nsrware iron 29.0.1600\r\n\r\noperating system:\r\nubuntu linux 12.04 lts\r\n\r\n### logs\r\n#### web server error log\r\nn/a\r\n\r\n#### owncloud log (data/owncloud.log)\r\nn/a\r\n\r\n#### browser log\r\nthis is the output of javascript console when loading the files app page.\r\nfor firefox:\r\n```\r\n10:20:56.219 get https://localhost/owncloud/index.php/apps/files [http/1.1 200 ok 183ms]\r\n10:20:56.544 get https://localhost/owncloud/remote.php/core.css [http/1.1 304 not modified 112ms]\r\n10:20:56.545 get https://localhost/owncloud/index.php/apps/files/css/files.css [http/1.1 304 not modified 169ms]\r\n10:20:56.546 get https://localhost/owncloud/index.php/apps/files/css/upload.css [http/1.1 304 not modified 386ms]\r\n10:20:56.547 get https://localhost/owncloud/index.php/core/js/config.js [http/1.1 200 ok 272ms]\r\n10:20:56.548 get https://localhost/owncloud/remote.php/core.js [http/1.1 304 not modified 349ms]\r\n10:20:56.549 get https://localhost/owncloud/apps/files/js/file-upload.js [http/1.1 304 not modified 54ms]\r\n10:20:56.550 get https://localhost/owncloud/apps/files/js/jquery.iframe-transport.js [http/1.1 304 not modified 56ms]\r\n10:20:56.551 get https://localhost/owncloud/apps/files/js/jquery.fileupload.js [http/1.1 304 not modified 57ms]\r\n10:20:56.552 get https://localhost/owncloud/apps/files/js/jquery-visibility.js [http/1.1 304 not modified 56ms]\r\n10:20:56.553 get https://localhost/owncloud/apps/files/js/filelist.js [http/1.1 304 not modified 57ms]\r\n10:20:56.554 get https://localhost/owncloud/apps/files/js/fileactions.js [http/1.1 304 not modified 57ms]\r\n10:20:56.555 get https://localhost/owncloud/apps/files/js/files.js [http/1.1 304 not modified 58ms]\r\n10:20:56.556 get https://localhost/owncloud/apps/files/js/keyboardshortcuts.js [http/1.1 304 not modified 59ms]\r\n10:20:56.714 åœ¨åˆ†æž?ã€œbackgroundã€?çš„å€¼æ™‚ç™¼ç”ÿéœ¯èª¤ã€‚  ä¸­æ–·å®£å‘šã€‚ core.css:1\r\n10:20:56.714 é ?æœÿæ‡‰æœ‰ color å?»å‡ºç?¾ã€œtopã€?ã€‚  åœ¨åˆ†æž?ã€œbackgroundã€?çš„å€¼æ™‚ç™¼ç”ÿéœ¯èª¤ã€‚  ä¸­æ–·å®£å‘šã€‚ core.css:1\r\n10:20:56.714 é ?æœÿæ‡‰ç‚ºã€œnoneã€?æˆ–ç¶²å?€ï¼œå?»å‡ºç?¾ã€œprogidã€?ã€‚  åœ¨åˆ†æž?ã€œfilterã€?çš„å€¼æ™‚ç™¼ç”ÿéœ¯èª¤ã€‚  ä¸­æ–·å®£å‘šã€‚ core.css:1\r\n10:20:56.714 æœªçÿ¥çš„ propertyã€œbox-sizingã€?  ä¸­æ–·å®£å‘šã€‚ core.css:1\r\n10:20:56.714 é ?æœÿæ‡‰ç‚ºã€œnoneã€?æˆ–ç¶²å?€ï¼œå?»å‡ºç?¾ã€œalpha(ã€?ã€‚  åœ¨åˆ†æž?ã€œfilterã€?çš„å€¼æ™‚ç™¼ç”ÿéœ¯èª¤ã€‚  ä¸­æ–·å®£å‘šã€‚ core.css:1\r\n10:20:56.714 æœªçÿ¥çš„ pseudo-class æˆ– pseudo-element ã€œ-webkit-scrollbarã€?  ç”±æ–¼æœ‰éœ¯èª¤çš„é?¸æ“‡å™¨æ‰€ä»¥ç•¥é?žè¦?å‰‡çµ„ã€‚ core.css:1\r\n10:20:56.714 æœªçÿ¥çš„ pseudo-class æˆ– pseudo-element ã€œ-webkit-scrollbar-track-pieceã€?  ç”±æ–¼æœ‰éœ¯èª¤çš„é?¸æ“‡å™¨æ‰€ä»¥ç•¥é?žè¦?å‰‡çµ„ã€‚ core.css:1\r\n10:20:56.714 æœªçÿ¥çš„ pseudo-class æˆ– pseudo-element ã€œ-webkit-scrollbar-thumbã€?  ç”±æ–¼æœ‰éœ¯èª¤çš„é?¸æ“‡å™¨æ‰€ä»¥ç•¥é?žè¦?å‰‡çµ„ã€‚ core.css:1\r\n10:20:56.715 æœªçÿ¥çš„ propertyã€œlist-style-indentã€?  ä¸­æ–·å®£å‘šã€‚ core.css:1\r\n10:20:56.715 æœªçÿ¥çš„ propertyã€œuser-selectã€?  ä¸­æ–·å®£å‘šã€‚ core.css:1\r\n10:20:56.716 é ?æœÿæ‡‰æœ‰ color å?»å‡ºç?¾ã€œtopã€?ã€‚  åœ¨åˆ†æž?ã€œbackground-imageã€?çš„å€¼æ™‚ç™¼ç”ÿéœ¯èª¤ã€‚  ä¸­æ–·å®£å‘šã€‚ core.css:1\r\n10:20:56.716 åœ¨åˆ†æž?ã€œbackground-imageã€?çš„å€¼æ™‚ç™¼ç”ÿéœ¯èª¤ã€‚  ä¸­æ–·å®£å‘šã€‚ core.css:1\r\n10:20:56.716 æœªçÿ¥çš„ propertyã€œ-moz-box-shadowã€?  ä¸­æ–·å®£å‘šã€‚ core.css:1\r\n10:20:56.717 é ?æœÿæ‡‰ç‚ºã€œnoneã€?æˆ–ç¶²å?€ï¼œå?»å‡ºç?¾ã€œalpha(ã€?ã€‚  åœ¨åˆ†æž?ã€œfilterã€?çš„å€¼æ™‚ç™¼ç”ÿéœ¯èª¤ã€‚  ä¸­æ–·å®£å‘šã€‚ core.css:1\r\n10:20:56.718 æœªçÿ¥çš„ propertyã€œ-moz-border-radiusã€?  ä¸­æ–·å®£å‘šã€‚ core.css:1\r\n10:20:56.718 æœªçÿ¥çš„ propertyã€œzoomã€?  ä¸­æ–·å®£å‘šã€‚ core.css:1\r\n10:20:56.718 é ?æœÿè¦?æœ‰å®£å‘šï¼œä½†æ‰¾åˆ°ã€œ*ã€?ã€‚  ç•¥é?žï¼œå¾žä¸‹å€‹å®£å‘šé–‹å§‹ç¹¼çºœè™•ç?†ã€‚ core.css:1\r\n10:20:56.718 æœªçÿ¥çš„ propertyã€œ-moz-background-clipã€?  ä¸­æ–·å®£å‘šã€‚ core.css:1\r\n10:20:56.719 æœªçÿ¥çš„ propertyã€œ-moz-border-radius-bottomleftã€?  ä¸­æ–·å®£å‘šã€‚ core.css:1\r\n10:20:56.719 æœªçÿ¥çš„ propertyã€œ-moz-border-radius-bottomrightã€?  ä¸­æ–·å®£å‘šã€‚ core.css:1\r\n10:20:56.720 åœ¨åˆ†æž?ã€œpaddingã€?çš„å€¼æ™‚ç™¼ç”ÿéœ¯èª¤ã€‚  ä¸­æ–·å®£å‘šã€‚ core.css:1\r\n10:20:56.721 æœªçÿ¥çš„ propertyã€œ-moz-background-sizeã€?  ä¸­æ–·å®£å‘šã€‚ core.css:1\r\n10:20:56.722 åœ¨åˆ†æž?ã€œmarginã€?çš„å€¼æ™‚ç™¼ç”ÿéœ¯èª¤ã€‚  ä¸­æ–·å®£å‘šã€‚ core.css:1\r\n10:20:56.767 æœªçÿ¥çš„ propertyã€œ-moz-box-shadowã€?  ä¸­æ–·å®£å‘šã€‚ files.css:1\r\n10:20:56.767 é ?æœÿæ‡‰ç‚ºã€œnoneã€?æˆ–ç¶²å?€ï¼œå?»å‡ºç?¾ã€œalpha(ã€?ã€‚  åœ¨åˆ†æž?ã€œfilterã€?çš„å€¼æ™‚ç™¼ç”ÿéœ¯èª¤ã€‚  ä¸­æ–·å®£å‘šã€‚ files.css:1\r\n10:20:56.767 æœªçÿ¥çš„ propertyã€œbox-sizingã€?  ä¸­æ–·å®£å‘šã€‚ files.css:1\r\n10:20:57.037 æœªçÿ¥çš„ propertyã€œbox-sizingã€?  ä¸­æ–·å®£å‘šã€‚ upload.css:1\r\n10:20:57.037 é ?æœÿæ‡‰ç‚ºã€œnoneã€?æˆ–ç¶²å?€ï¼œå?»å‡ºç?¾ã€œalpha(ã€?ã€‚  åœ¨åˆ†æž?ã€œfilterã€?çš„å€¼æ™‚ç™¼ç”ÿéœ¯èª¤ã€‚  ä¸­æ–·å®£å‘šã€‚ upload.css:1\r\n10:20:57.241 æœªçÿ¥çš„ propertyã€œbox-sizingã€?  ä¸­æ–·å®£å‘šã€‚ files:1\r\n10:20:57.241 æœªçÿ¥çš„ propertyã€œappearanceã€?  ä¸­æ–·å®£å‘šã€‚ files:1\r\n10:20:57.241 æœªçÿ¥çš„ propertyã€œ-moz-border-radiusã€?  ä¸­æ–·å®£å‘šã€‚ files:1\r\n10:20:57.241 åœ¨åˆ†æž?ã€œbackground-imageã€?çš„å€¼æ™‚ç™¼ç”ÿéœ¯èª¤ã€‚  ä¸­æ–·å®£å‘šã€‚ files:1\r\n10:20:57.241 æœªçÿ¥çš„ propertyã€œ-moz-box-shadowã€?  ä¸­æ–·å®£å‘šã€‚ files:1\r\n10:20:57.370 content security policy: é ?é?¢çš„è¨­å®šé˜»æ“‹äº†è³‡æº?è¼‰å…¥: å·²é˜»æ“‹åÿ·è¡œè¡œå…§æœ‡ä»¤ç¢¼ files\r\n10:20:57.377 æœªçÿ¥çš„ propertyã€œbox-sizingã€?  ä¸­æ–·å®£å‘šã€‚ files\r\n10:20:57.531 get https://localhost/owncloud/index.php/core/routes.json [http/1.1 304 not modified 110ms]\r\n10:20:57.532 get https://localhost/owncloud/core/img/logo-wide.svg [http/1.1 304 not modified 2ms]\r\n10:20:57.532 get https://localhost/owncloud/core/img/actions/caret.svg [http/1.1 304 not modified 2ms]\r\n10:20:57.533 get https://localhost/owncloud/settings/img/personal.svg [http/1.1 304 not modified 2ms]\r\n10:20:57.655 get https://localhost/owncloud/settings/img/users.svg [http/1.1 304 not modified 4ms]\r\n10:20:57.656 get https://localhost/owncloud/settings/img/admin.svg [http/1.1 304 not modified 2ms]\r\n10:20:57.657 get https://localhost/owncloud/settings/img/help.svg [http/1.1 304 not modified 3ms]\r\n10:20:57.659 get https://localhost/owncloud/core/img/actions/logout.svg [http/1.1 304 not modified 3ms]\r\n10:20:57.660 get https://localhost/owncloud/core/img/places/files.svg [http/1.1 304 not modified 4ms]\r\n10:20:57.661 get https://localhost/owncloud/apps/documents/img/documents.svg [http/1.1 304 not modified 3ms]\r\n10:20:57.662 get https://localhost/owncloud/core/img/places/picture.svg [http/1.1 304 not modified 5ms]\r\n10:20:57.662 get https://localhost/owncloud/apps/news/img/news.svg [http/1.1 304 not modified 5ms]\r\n10:20:57.663 get https://localhost/owncloud/apps/contacts/img/contacts.svg [http/1.1 304 not modified 6ms]\r\n10:20:57.663 get https://localhost/owncloud/apps/calendar/img/calendar.svg [http/1.1 304 not modified 11ms]\r\n10:20:57.664 get https://localhost/owncloud/apps/tasks/img/tasks.svg [http/1.1 304 not modified 10ms]\r\n10:20:57.664 get https://localhost/owncloud/apps/bookmarks/img/bookmarks.svg [http/1.1 304 not modified 6ms]\r\n10:20:57.665 get https://localhost/owncloud/apps/internal_messages/img/message.png [http/1.1 304 not modified 7ms]\r\n10:20:57.666 get https://localhost/owncloud/settings/img/apps.svg [http/1.1 304 not modified 7ms]\r\n10:20:57.666 get https://localhost/owncloud/core/img/actions/download.svg [http/1.1 304 not modified 9ms]\r\n10:20:57.667 get https://localhost/owncloud/core/img/actions/delete.svg [http/1.1 304 not modified 9ms]\r\n10:20:57.667 post https://localhost/owncloud/index.php/core/ajax/translations.php [http/1.1 200 ok 185ms]\r\n10:20:57.668 get https://localhost/owncloud/core/img/noise.png [http/1.1 304 not modified 7ms]\r\n10:20:57.668 get https://localhost/owncloud/core/img/actions/search.svg [http/1.1 304 not modified 7ms]\r\n10:20:57.669 get https://localhost/owncloud/core/img/actions/upload.svg [http/1.1 304 not modified 1ms]\r\n10:20:57.670 get https://localhost/owncloud/index.php/core/preview.png [http/1.1 200 ok 262ms]\r\n10:20:57.670 get https://localhost/owncloud/index.php/core/preview.png [http/1.1 200 ok 357ms]\r\n10:20:57.671 get https://localhost/owncloud/core/img/breadcrumb.svg [http/1.1 304 not modified 1ms]\r\n10:20:57.985 post https://localhost/owncloud/index.php/core/ajax/translations.php [http/1.1 200 ok 139ms]\r\n10:20:57.986 get https://localhost/owncloud/index.php/avatar/oc-admin/32 [http/1.1 304 not modified 295ms]\r\n10:20:57.986 get https://localhost/owncloud/index.php/avatar/oc-admin/128 [http/1.1 304 not modified 196ms]\r\n10:20:58.162 post https://localhost/owncloud/index.php/core/ajax/translations.php [http/1.1 200 ok 182ms]\r\n10:20:58.402 post https://localhost/owncloud/index.php/core/ajax/translations.php [http/1.1 200 ok 96ms]\r\n10:20:58.403 get https://localhost/owncloud/apps/gallery/templates/slideshow.html [http/1.1 304 not modified 1ms]\r\n10:20:58.404 get https://localhost/owncloud/index.php/avatar/oc-admin/32 [http/1.1 304 not modified 160ms]\r\n10:20:58.389 typeerror: text is undefined core.js:461\r\n10:20:58.395 å·²æ£„ç”¨ getpreventdefault()ã€‚è«‹æ”¹ç”¨ defaultpreventedã€‚ core.js:50\r\n```\r\n\r\nfor srware iron:\r\n```\r\nuncaught typeerror: cannot call method 'replace' of undefined core.js?v=d3673708f656239c4dd25f770054095d:461\r\n_build core.js?v=d3673708f656239c4dd25f770054095d:461\r\nt core.js?v=d3673708f656239c4dd25f770054095d:461\r\nn core.js?v=d3673708f656239c4dd25f770054095d:461\r\nfilelist.createfilesummary filelist.js?v=d3673708f656239c4dd25f770054095d:609\r\n(anonymous function) filelist.js?v=d3673708f656239c4dd25f770054095d:1056\r\nc core.js?v=d3673708f656239c4dd25f770054095d:27\r\np.firewith core.js?v=d3673708f656239c4dd25f770054095d:27\r\nx.extend.ready core.js?v=d3673708f656239c4dd25f770054095d:4\r\nq core.js?v=d3673708f656239c4dd25f770054095d:1\r\n```","closed_by":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false}}