{"url":"https://api.github.com/repos/owncloud/core/issues/4526","labels_url":"https://api.github.com/repos/owncloud/core/issues/4526/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/4526/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/4526/events","html_url":"https://github.com/owncloud/core/issues/4526","id":18274837,"number":4526,"title":"external storage (local) - owncloud calculates free space using root partition","user":{"login":"centinel","id":974074,"avatar_url":"https://gravatar.com/avatar/3382d419cfc434ea16a3551da313f772?d=https%3a%2f%2fidenticons.github.com%2fe0a81c1e0bde288a3a5aa1ea0a323e87.png&r=x","gravatar_id":"3382d419cfc434ea16a3551da313f772","url":"https://api.github.com/users/centinel","html_url":"https://github.com/centinel","followers_url":"https://api.github.com/users/centinel/followers","following_url":"https://api.github.com/users/centinel/following{/other_user}","gists_url":"https://api.github.com/users/centinel/gists{/gist_id}","starred_url":"https://api.github.com/users/centinel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/centinel/subscriptions","organizations_url":"https://api.github.com/users/centinel/orgs","repos_url":"https://api.github.com/users/centinel/repos","events_url":"https://api.github.com/users/centinel/events{/privacy}","received_events_url":"https://api.github.com/users/centinel/received_events","type":"user","site_admin":false},"labels":[{"url":"https://api.github.com/repos/owncloud/core/labels/2+-+concept","name":"2 - concept","color":"ededed"},{"url":"https://api.github.com/repos/owncloud/core/labels/bug","name":"bug","color":"fc2929"}],"state":"closed","assignee":null,"milestone":null,"comments":13,"created_at":"2013-08-20t02:33:27z","updated_at":"2013-11-21t09:53:05z","closed_at":"2013-11-21t09:53:05z","pull_request":{"html_url":null,"diff_url":null,"patch_url":null},"body":"### expected behaviour\r\nmy home server is comprised of a ssd boot disk and a pair of raid1/lvm hard disks that store my data.\r\n\r\nwhen i enable the external storage support app and add the hard disks' lvm volume, owncloud should calculate free space using the volume's filesystem.\r\n\r\n### actual behaviour\r\nowncloud calculates free space using the root directory's filesystem instead. i have confirmed this with the df command. the ssd has 7 gb free, and that's how much free space owncloud thinks i have even when i enter the lvm volume's folder. to be specific, i receive a constant error message at the top of screen that says \"your storage is almost full (98%). \r\n\r\nthis is a duplicate of an earlier issue that was closed due to inactivity: https://github.com/owncloud/core/issues/2099\r\n\r\n### steps to reproduce\r\n1. enable external storage support app\r\n2. go to menu -> admin -> external shares and add a local filesystem that resides on a separate hard disk\r\n\r\n### server configuration\r\noperating system: opensuse 12.3\r\n\r\nweb server: apache2 version 2.2.22-10.8.1\r\n\r\ndatabase: mariadb version 5.5.32-1.4.2\r\n\r\nphp version: 5.3.17-3.4.1\r\n\r\nowncloud version: 5.0.10\r\n\r\n### client configuration\r\nbrowser: firefox 23\r\n\r\noperating system: manjaro linux\r\n\r\n### logs\r\n#### web server error log\r\n\r\n[mon aug 19 21:51:25 2013] [notice] apache/2.2.22 (linux/suse) mod_ssl/2.2.22 openssl/1.0.1e php/5.3.17 configured -- resuming normal operations\r\n[mon aug 19 21:51:27 2013] [error] [client 192.168.1.131] client denied by server configuration: /srv/www/htdocs/owncloud/data/htaccesstest.txt\r\n[mon aug 19 21:51:27 2013] [error] [client 192.168.1.131] file does not exist: /srv/www/htdocs/core\r\n[mon aug 19 21:51:28 2013] [error] [client 192.168.1.131] client denied by server configuration: /srv/www/htdocs/owncloud/data/htaccesstest.txt\r\n[mon aug 19 21:51:28 2013] [error] [client 192.168.1.131] file does not exist: /srv/www/htdocs/core\r\n[mon aug 19 22:00:54 2013] [error] [client 192.168.1.131] client denied by server configuration: /srv/www/htdocs/owncloud/data/htaccesstest.txt\r\n[mon aug 19 22:00:54 2013] [error] [client 192.168.1.131] file does not exist: /srv/www/htdocs/core\r\n[mon aug 19 22:02:39 2013] [error] [client 192.168.1.131] client denied by server configuration: /srv/www/htdocs/owncloud/data/htaccesstest.txt\r\n[mon aug 19 22:04:00 2013] [error] [client 192.168.1.131] client denied by server configuration: /srv/www/htdocs/owncloud/data/htaccesstest.txt\r\n[mon aug 19 22:06:01 2013] [error] [client 192.168.1.131] client denied by server configuration: /srv/www/htdocs/owncloud/data/htaccesstest.txt\r\n[mon aug 19 22:06:28 2013] [error] [client 192.168.1.131] client denied by server configuration: /srv/www/htdocs/owncloud/data/htaccesstest.txt\r\n[mon aug 19 22:06:41 2013] [error] [client 192.168.1.131] client denied by server configuration: /srv/www/htdocs/owncloud/data/htaccesstest.txt\r\n[mon aug 19 22:06:49 2013] [notice] caught sigterm, shutting down\r\n[mon aug 19 22:06:50 2013] [warn] init: session cache is not configured [hint: sslsessioncache]\r\n[mon aug 19 22:06:50 2013] [notice] apache/2.2.22 (linux/suse) mod_ssl/2.2.22 openssl/1.0.1e php/5.3.17 configured -- resuming normal operations\r\n[mon aug 19 22:06:52 2013] [error] [client 192.168.1.131] client denied by server configuration: /srv/www/htdocs/owncloud/data/htaccesstest.txt\r\n[mon aug 19 22:07:08 2013] [error] [client 192.168.1.131] client denied by server configuration: /srv/www/htdocs/owncloud/data/htaccesstest.txt\r\n[mon aug 19 22:07:24 2013] [error] [client 192.168.1.131] client denied by server configuration: /srv/www/htdocs/owncloud/data/htaccesstest.txt\r\n[mon aug 19 22:09:06 2013] [error] [client 192.168.1.131] client denied by server configuration: /srv/www/htdocs/owncloud/data/htaccesstest.txt\r\n[mon aug 19 22:10:12 2013] [error] [client 192.168.1.131] client denied by server configuration: /srv/www/htdocs/owncloud/data/htaccesstest.txt\r\n[mon aug 19 22:10:51 2013] [error] [client 192.168.1.131] client denied by server configuration: /srv/www/htdocs/owncloud/data/htaccesstest.txt\r\n[mon aug 19 22:14:43 2013] [error] [client 192.168.1.131] client denied by server configuration: /srv/www/htdocs/owncloud/data/htaccesstest.txt\r\n[mon aug 19 22:16:19 2013] [error] [client 192.168.1.131] client denied by server configuration: /srv/www/htdocs/owncloud/data/htaccesstest.txt\r\n[mon aug 19 22:16:54 2013] [error] [client 192.168.1.131] client denied by server configuration: /srv/www/htdocs/owncloud/data/htaccesstest.txt\r\n[mon aug 19 22:17:32 2013] [error] [client 192.168.1.131] client denied by server configuration: /srv/www/htdocs/owncloud/data/htaccesstest.txt\r\n[mon aug 19 22:24:25 2013] [error] [client 192.168.1.131] client denied by server configuration: /srv/www/htdocs/owncloud/data/htaccesstest.txt\r\n\r\n\r\n#### owncloud log (data/owncloud.log)\r\n\r\n{\"app\":\"php\",\"message\":\"mysql_close(): 50 is not a valid mysql-link resource at \\/srv\\/www\\/htdocs\\/owncloud\\/lib\\/setup.php#284\",\"level\":2,\"time\":\"2013-08-20t02:00:55+00:00\"}\r\n{\"app\":\"php\",\"message\":\"copy(): unable to find the wrapper \\\"https\\\" - did you forget to enable it when you configured php? at \\/srv\\/www\\/htdocs\\/owncloud\\/lib\\/installer.php#71\",\"level\":2,\"time\":\"2013-08-20t02:02:28+00:00\"}\r\n{\"app\":\"php\",\"message\":\"copy(): unable to find the wrapper \\\"https\\\" - did you forget to enable it when you configured php? at \\/srv\\/www\\/htdocs\\/owncloud\\/lib\\/installer.php#71\",\"level\":2,\"time\":\"2013-08-20t02:02:28+00:00\"}\r\n{\"app\":\"php\",\"message\":\"copy(https:\\/\\/github.com\\/eotryx\\/oc_files_mv\\/archive\\/master.zip): failed to open stream: no such file or directory at \\/srv\\/www\\/htdocs\\/owncloud\\/lib\\/installer.php#71\",\"level\":2,\"time\":\"2013-08-20t02:02:28+00:00\"}\r\n{\"app\":\"core\",\"message\":\"archives of type inode\\/x-empty are not supported\",\"level\":3,\"time\":\"2013-08-20t02:02:28+00:00\"}\r\n{\"app\":\"php\",\"message\":\"copy(): unable to find the wrapper \\\"https\\\" - did you forget to enable it when you configured php? at \\/srv\\/www\\/htdocs\\/owncloud\\/lib\\/installer.php#71\",\"level\":2,\"time\":\"2013-08-20t02:05:54+00:00\"}\r\n{\"app\":\"php\",\"message\":\"copy(): unable to find the wrapper \\\"https\\\" - did you forget to enable it when you configured php? at \\/srv\\/www\\/htdocs\\/owncloud\\/lib\\/installer.php#71\",\"level\":2,\"time\":\"2013-08-20t02:05:54+00:00\"}\r\n{\"app\":\"php\",\"message\":\"copy(https:\\/\\/github.com\\/kadukeitor\\/user_photo\\/archive\\/master.zip): failed to open stream: no such file or directory at \\/srv\\/www\\/htdocs\\/owncloud\\/lib\\/installer.php#71\",\"level\":2,\"time\":\"2013-08-20t02:05:54+00:00\"}\r\n{\"app\":\"core\",\"message\":\"archives of type inode\\/x-empty are not supported\",\"level\":3,\"time\":\"2013-08-20t02:05:54+00:00\"}\r\n{\"app\":\"php\",\"message\":\"copy(): unable to find the wrapper \\\"https\\\" - did you forget to enable it when you configured php? at \\/srv\\/www\\/htdocs\\/owncloud\\/lib\\/installer.php#71\",\"level\":2,\"time\":\"2013-08-20t02:19:37+00:00\"}\r\n{\"app\":\"php\",\"message\":\"copy(): unable to find the wrapper \\\"https\\\" - did you forget to enable it when you configured php? at \\/srv\\/www\\/htdocs\\/owncloud\\/lib\\/installer.php#71\",\"level\":2,\"time\":\"2013-08-20t02:19:37+00:00\"}\r\n{\"app\":\"php\",\"message\":\"copy(https:\\/\\/github.com\\/eotryx\\/oc_files_mv\\/archive\\/master.zip): failed to open stream: no such file or directory at \\/srv\\/www\\/htdocs\\/owncloud\\/lib\\/installer.php#71\",\"level\":2,\"time\":\"2013-08-20t02:19:37+00:00\"}\r\n{\"app\":\"core\",\"message\":\"archives of type inode\\/x-empty are not supported\",\"level\":3,\"time\":\"2013-08-20t02:19:37+00:00\"}","closed_by":{"login":"pvince81","id":277525,"avatar_url":"https://gravatar.com/avatar/e446b529679416eb70eafb4ca4da5bbe?d=https%3a%2f%2fidenticons.github.com%2f89d7c394e6dcdf87a91c75ac3b2ccbe8.png&r=x","gravatar_id":"e446b529679416eb70eafb4ca4da5bbe","url":"https://api.github.com/users/pvince81","html_url":"https://github.com/pvince81","followers_url":"https://api.github.com/users/pvince81/followers","following_url":"https://api.github.com/users/pvince81/following{/other_user}","gists_url":"https://api.github.com/users/pvince81/gists{/gist_id}","starred_url":"https://api.github.com/users/pvince81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvince81/subscriptions","organizations_url":"https://api.github.com/users/pvince81/orgs","repos_url":"https://api.github.com/users/pvince81/repos","events_url":"https://api.github.com/users/pvince81/events{/privacy}","received_events_url":"https://api.github.com/users/pvince81/received_events","type":"user","site_admin":false}}