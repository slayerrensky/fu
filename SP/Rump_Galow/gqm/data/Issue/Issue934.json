{"url":"https://api.github.com/repos/owncloud/core/issues/934","labels_url":"https://api.github.com/repos/owncloud/core/issues/934/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/934/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/934/events","html_url":"https://github.com/owncloud/core/pull/934","id":9365525,"number":934,"title":"smart handling of version history","user":{"login":"schiesbn","id":1589737,"avatar_url":"https://gravatar.com/avatar/8912b598c7b32dd25b87fd168e0b06b2?d=https%3a%2f%2fidenticons.github.com%2f0a323047dbe8329db30eae8dbe96e55e.png&r=x","gravatar_id":"8912b598c7b32dd25b87fd168e0b06b2","url":"https://api.github.com/users/schiesbn","html_url":"https://github.com/schiesbn","followers_url":"https://api.github.com/users/schiesbn/followers","following_url":"https://api.github.com/users/schiesbn/following{/other_user}","gists_url":"https://api.github.com/users/schiesbn/gists{/gist_id}","starred_url":"https://api.github.com/users/schiesbn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schiesbn/subscriptions","organizations_url":"https://api.github.com/users/schiesbn/orgs","repos_url":"https://api.github.com/users/schiesbn/repos","events_url":"https://api.github.com/users/schiesbn/events{/privacy}","received_events_url":"https://api.github.com/users/schiesbn/received_events","type":"user","site_admin":false},"labels":[],"state":"closed","assignee":null,"milestone":null,"comments":9,"created_at":"2012-12-18t12:10:41z","updated_at":"2013-01-14t09:33:27z","closed_at":"2013-01-14t09:33:27z","pull_request":{"html_url":"https://github.com/owncloud/core/pull/934","diff_url":"https://github.com/owncloud/core/pull/934.diff","patch_url":"https://github.com/owncloud/core/pull/934.patch"},"body":"after some discussion with @jancborchardt and  @karlitschek last week we come up with a smart way to expire versions. see also https://github.com/owncloud/core/issues/860\r\n\r\nthis is a first implementation providing following features:\r\n\r\n- switch from post_write hook to write hook to generate versions\r\n- blacklist and file size limit removed\r\n- max. 50% of available disk space from the given user is used to store versions\r\n- following rules are used to keep/expire versions:\r\n    - first hour: every 10 seconds one version is kept\r\n    - after first hour until end of first day: every hour one version is kept\r\n    - after first day we keep one version per day\r\n    - if the max space for versions is exceeded we delete the latest versions until we meet the limit or until only one version is left\r\n\r\n\r\nthis is just a initial version which allows us to to gather some experience with the limits. we can tune this values easily if we see that they need to be adjusted.","closed_by":{"login":"schiesbn","id":1589737,"avatar_url":"https://gravatar.com/avatar/8912b598c7b32dd25b87fd168e0b06b2?d=https%3a%2f%2fidenticons.github.com%2f0a323047dbe8329db30eae8dbe96e55e.png&r=x","gravatar_id":"8912b598c7b32dd25b87fd168e0b06b2","url":"https://api.github.com/users/schiesbn","html_url":"https://github.com/schiesbn","followers_url":"https://api.github.com/users/schiesbn/followers","following_url":"https://api.github.com/users/schiesbn/following{/other_user}","gists_url":"https://api.github.com/users/schiesbn/gists{/gist_id}","starred_url":"https://api.github.com/users/schiesbn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schiesbn/subscriptions","organizations_url":"https://api.github.com/users/schiesbn/orgs","repos_url":"https://api.github.com/users/schiesbn/repos","events_url":"https://api.github.com/users/schiesbn/events{/privacy}","received_events_url":"https://api.github.com/users/schiesbn/received_events","type":"user","site_admin":false}}