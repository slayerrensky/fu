{"url":"https://api.github.com/repos/owncloud/core/issues/3378","labels_url":"https://api.github.com/repos/owncloud/core/issues/3378/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/3378/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/3378/events","html_url":"https://github.com/owncloud/core/issues/3378","id":14385832,"number":3378,"title":"sharing with link results in 404 (cloud not found)","user":{"login":"xandaros","id":265886,"avatar_url":"https://gravatar.com/avatar/21d0322e49e25475736fb5406d638870?d=https%3a%2f%2fidenticons.github.com%2fe68a167172cf0579db7f593692896af5.png&r=x","gravatar_id":"21d0322e49e25475736fb5406d638870","url":"https://api.github.com/users/xandaros","html_url":"https://github.com/xandaros","followers_url":"https://api.github.com/users/xandaros/followers","following_url":"https://api.github.com/users/xandaros/following{/other_user}","gists_url":"https://api.github.com/users/xandaros/gists{/gist_id}","starred_url":"https://api.github.com/users/xandaros/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xandaros/subscriptions","organizations_url":"https://api.github.com/users/xandaros/orgs","repos_url":"https://api.github.com/users/xandaros/repos","events_url":"https://api.github.com/users/xandaros/events{/privacy}","received_events_url":"https://api.github.com/users/xandaros/received_events","type":"user","site_admin":false},"labels":[],"state":"closed","assignee":null,"milestone":null,"comments":3,"created_at":"2013-05-16t00:19:56z","updated_at":"2013-05-22t00:41:27z","closed_at":"2013-05-22t00:41:27z","pull_request":{"html_url":null,"diff_url":null,"patch_url":null},"body":"### expected behaviour\r\nthe person receiving a share link should be able to download in any case\r\n\r\n### actual behaviour\r\nif the person receiving the link is only able to download the file, if he is not logged in.\r\nif he is, however, he only gets \"cloud not found\".\r\n\r\nif the share owner is logged in, he is able to access the file just fine.\r\n\r\n### steps to reproduce\r\n1. share a file with link\r\n2. login as a different user\r\n3. try to open the link\r\n\r\n### server configuration\r\noperating system: ubuntu 12.04 on linux server 3.2.0-41-generic-pae\r\n\r\nweb server: apache 2.2.22\r\n\r\ndatabase: mysql\r\n\r\nphp version: 5.3.10-1ubuntu3.6 \r\n\r\nowncloud version: 5.0.6\r\n\r\n### client configuration\r\nbrowser: firefox 20.0\r\n\r\noperating system: ubuntu 12.10\r\n\r\n### logs\r\n#### web server error log\r\n- nothing -\r\n\r\n#### owncloud log (data/owncloud.log)\r\n- nothing -\r\n\r\n#### browser log\r\nit's not a clientside problem, so nothing here, either\r\n\r\n### additional information\r\ni tracked the error for a while, but it finally become to deep.\r\nif you are logged in as a user and open a shared link, self::$mounts in lib/files/mount.php will only contain, in my example:\r\nlocal::/var/www/owncloud/data/\r\nlocal::/var/www/owncloud/data/test/\r\n(test is the username of the receiving user)\r\n\r\nhowever, if you are not logged in, or logged in as the share owner, they look like this:\r\nlocal::/var/www/owncloud/data/\r\nlocal::/var/www/owncloud/data/xandaros/\r\nshared::/shared\r\n(xandaros is the username of the share owner)\r\n\r\ni think i traced down the problem quite a bit, your turn! :)","closed_by":{"login":"mtgap","id":1097106,"avatar_url":"https://gravatar.com/avatar/454a73ee5feeb428d0c163a48903332c?d=https%3a%2f%2fidenticons.github.com%2f52d29a66f285a1d61125dd69ac0766b2.png&r=x","gravatar_id":"454a73ee5feeb428d0c163a48903332c","url":"https://api.github.com/users/mtgap","html_url":"https://github.com/mtgap","followers_url":"https://api.github.com/users/mtgap/followers","following_url":"https://api.github.com/users/mtgap/following{/other_user}","gists_url":"https://api.github.com/users/mtgap/gists{/gist_id}","starred_url":"https://api.github.com/users/mtgap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mtgap/subscriptions","organizations_url":"https://api.github.com/users/mtgap/orgs","repos_url":"https://api.github.com/users/mtgap/repos","events_url":"https://api.github.com/users/mtgap/events{/privacy}","received_events_url":"https://api.github.com/users/mtgap/received_events","type":"user","site_admin":false}}