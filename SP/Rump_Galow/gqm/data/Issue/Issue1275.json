{"url":"https://api.github.com/repos/owncloud/core/issues/1275","labels_url":"https://api.github.com/repos/owncloud/core/issues/1275/labels{/name}","comments_url":"https://api.github.com/repos/owncloud/core/issues/1275/comments","events_url":"https://api.github.com/repos/owncloud/core/issues/1275/events","html_url":"https://github.com/owncloud/core/issues/1275","id":10225534,"number":1275,"title":"sqlstate[hy000]: general error: 2014 cannot execute queries while other unbuffered queries are active.","user":{"login":"incubatec","id":3351105,"avatar_url":"https://gravatar.com/avatar/945eef0d385748c54e359c37313c2730?d=https%3a%2f%2fidenticons.github.com%2facc18c92b82ec7ffaceda180c047c4f2.png&r=x","gravatar_id":"945eef0d385748c54e359c37313c2730","url":"https://api.github.com/users/incubatec","html_url":"https://github.com/incubatec","followers_url":"https://api.github.com/users/incubatec/followers","following_url":"https://api.github.com/users/incubatec/following{/other_user}","gists_url":"https://api.github.com/users/incubatec/gists{/gist_id}","starred_url":"https://api.github.com/users/incubatec/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/incubatec/subscriptions","organizations_url":"https://api.github.com/users/incubatec/orgs","repos_url":"https://api.github.com/users/incubatec/repos","events_url":"https://api.github.com/users/incubatec/events{/privacy}","received_events_url":"https://api.github.com/users/incubatec/received_events","type":"user","site_admin":false},"labels":[{"url":"https://api.github.com/repos/owncloud/core/labels/bug","name":"bug","color":"fc2929"}],"state":"closed","assignee":null,"milestone":null,"comments":4,"created_at":"2013-01-23t09:26:15z","updated_at":"2013-08-08t15:32:31z","closed_at":"2013-08-08t15:32:31z","pull_request":{"html_url":null,"diff_url":null,"patch_url":null},"body":"there seems to be an error with queries not being executed when the pdo mysql backend is used.\r\n\r\nthis leads to an infinite loop and memory exhaustion:\r\n\r\n[23-jan-2013 09:15:19 utc] db error: db error: \"sqlstate[hy000]: general error: 2014 cannot execute queries while other unbuffered queries are active.  consider using pdostatement::fetchall().  alternatively, if your code is only ever going to run against mysql, you may enable query buffering by setting the pdo::mysql_attr_use_buffered_query attribute.\"<br />offending command was: select `appid` from `ownc_appconfig` where `configkey` = 'enabled' and `configvalue`='yes'<br />\r\n[23-jan-2013 09:15:19 utc] php fatal error:  allowed memory size of 536870912 bytes exhausted (tried to allocate 32 bytes) in /home/moroder/public_html/owncloud/lib/db.php on line 330\r\n\r\neven if you give it 2gb of max_memory.\r\n\r\nthe quick fix is to add the following line to lib/db.php:\r\n\r\n141a142\r\n>                                       $opts[pdo::mysql_attr_use_buffered_query] = true;\r\n\r\nthis fixes the issue for mysql and has been tested in two production environments. please verify and if possible include this for the next releases.\r\n\r\nthomas moroder\r\nhttps://webhosting24.com","closed_by":{"login":"jancborchardt","id":925062,"avatar_url":"https://gravatar.com/avatar/2fd3f4d5d762955e5b603794a888fa97?d=https%3a%2f%2fidenticons.github.com%2f84ec51f9ceed468217d4e13abf78da9c.png&r=x","gravatar_id":"2fd3f4d5d762955e5b603794a888fa97","url":"https://api.github.com/users/jancborchardt","html_url":"https://github.com/jancborchardt","followers_url":"https://api.github.com/users/jancborchardt/followers","following_url":"https://api.github.com/users/jancborchardt/following{/other_user}","gists_url":"https://api.github.com/users/jancborchardt/gists{/gist_id}","starred_url":"https://api.github.com/users/jancborchardt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jancborchardt/subscriptions","organizations_url":"https://api.github.com/users/jancborchardt/orgs","repos_url":"https://api.github.com/users/jancborchardt/repos","events_url":"https://api.github.com/users/jancborchardt/events{/privacy}","received_events_url":"https://api.github.com/users/jancborchardt/received_events","type":"user","site_admin":false}}