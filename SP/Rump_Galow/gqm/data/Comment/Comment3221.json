[{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17381278","html_url":"https://github.com/owncloud/core/issues/3221#issuecomment-17381278","issue_url":"https://api.github.com/repos/owncloud/core/issues/3221","id":17381278,"user":{"login":"kiranos","id":840871,"avatar_url":"https://gravatar.com/avatar/45bcfc648c1ed90ebadd23a484d99376?d=https%3a%2f%2fidenticons.github.com%2fb2013959ac9cf127c7f4a02a6bf3cde1.png&r=x","gravatar_id":"45bcfc648c1ed90ebadd23a484d99376","url":"https://api.github.com/users/kiranos","html_url":"https://github.com/kiranos","followers_url":"https://api.github.com/users/kiranos/followers","following_url":"https://api.github.com/users/kiranos/following{/other_user}","gists_url":"https://api.github.com/users/kiranos/gists{/gist_id}","starred_url":"https://api.github.com/users/kiranos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kiranos/subscriptions","organizations_url":"https://api.github.com/users/kiranos/orgs","repos_url":"https://api.github.com/users/kiranos/repos","events_url":"https://api.github.com/users/kiranos/events{/privacy}","received_events_url":"https://api.github.com/users/kiranos/received_events","type":"user","site_admin":false},"created_at":"2013-05-03t07:12:26z","updated_at":"2013-05-03t07:12:26z","body":"cant this be some kind of solution:\r\nhttp://abhinavsingh.com/blog/2009/12/how-to-use-locks-in-php-cron-jobs-to-avoid-cron-overlaps/\r\n\r\nto actually track the pid, but only available for php-cli but maximum timeout seems sorta crude, just hoping its run out."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17384948","html_url":"https://github.com/owncloud/core/issues/3221#issuecomment-17384948","issue_url":"https://api.github.com/repos/owncloud/core/issues/3221","id":17384948,"user":{"login":"vicdeo","id":991300,"avatar_url":"https://gravatar.com/avatar/57b8c1e26d502d5414e4b2fb875d2994?d=https%3a%2f%2fidenticons.github.com%2fe8357fefe8bad5436de368fa5a419461.png&r=x","gravatar_id":"57b8c1e26d502d5414e4b2fb875d2994","url":"https://api.github.com/users/vicdeo","html_url":"https://github.com/vicdeo","followers_url":"https://api.github.com/users/vicdeo/followers","following_url":"https://api.github.com/users/vicdeo/following{/other_user}","gists_url":"https://api.github.com/users/vicdeo/gists{/gist_id}","starred_url":"https://api.github.com/users/vicdeo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vicdeo/subscriptions","organizations_url":"https://api.github.com/users/vicdeo/orgs","repos_url":"https://api.github.com/users/vicdeo/repos","events_url":"https://api.github.com/users/vicdeo/events{/privacy}","received_events_url":"https://api.github.com/users/vicdeo/received_events","type":"user","site_admin":false},"created_at":"2013-05-03t09:08:21z","updated_at":"2013-05-03t09:08:21z","body":"this solution is platform-dependent.\r\nmay be consider lock older than e.g. 1 hour to be expired  and write a warning to log."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17386625","html_url":"https://github.com/owncloud/core/issues/3221#issuecomment-17386625","issue_url":"https://api.github.com/repos/owncloud/core/issues/3221","id":17386625,"user":{"login":"kiranos","id":840871,"avatar_url":"https://gravatar.com/avatar/45bcfc648c1ed90ebadd23a484d99376?d=https%3a%2f%2fidenticons.github.com%2fb2013959ac9cf127c7f4a02a6bf3cde1.png&r=x","gravatar_id":"45bcfc648c1ed90ebadd23a484d99376","url":"https://api.github.com/users/kiranos","html_url":"https://github.com/kiranos","followers_url":"https://api.github.com/users/kiranos/followers","following_url":"https://api.github.com/users/kiranos/following{/other_user}","gists_url":"https://api.github.com/users/kiranos/gists{/gist_id}","starred_url":"https://api.github.com/users/kiranos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kiranos/subscriptions","organizations_url":"https://api.github.com/users/kiranos/orgs","repos_url":"https://api.github.com/users/kiranos/repos","events_url":"https://api.github.com/users/kiranos/events{/privacy}","received_events_url":"https://api.github.com/users/kiranos/received_events","type":"user","site_admin":false},"created_at":"2013-05-03t09:52:37z","updated_at":"2013-05-03t09:52:37z","body":"there seem to be some solutions to getting \"pid\" in windows http://stackoverflow.com/questions/3679663/how-to-get-pid-from-php-function-exec-in-windows"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17471805","html_url":"https://github.com/owncloud/core/issues/3221#issuecomment-17471805","issue_url":"https://api.github.com/repos/owncloud/core/issues/3221","id":17471805,"user":{"login":"raydiation","id":195053,"avatar_url":"https://gravatar.com/avatar/aa0d7b7302e0d7f4f9513c23b571383a?d=https%3a%2f%2fidenticons.github.com%2faf0a25e27510f77d97634a6bbe653b13.png&r=x","gravatar_id":"aa0d7b7302e0d7f4f9513c23b571383a","url":"https://api.github.com/users/raydiation","html_url":"https://github.com/raydiation","followers_url":"https://api.github.com/users/raydiation/followers","following_url":"https://api.github.com/users/raydiation/following{/other_user}","gists_url":"https://api.github.com/users/raydiation/gists{/gist_id}","starred_url":"https://api.github.com/users/raydiation/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raydiation/subscriptions","organizations_url":"https://api.github.com/users/raydiation/orgs","repos_url":"https://api.github.com/users/raydiation/repos","events_url":"https://api.github.com/users/raydiation/events{/privacy}","received_events_url":"https://api.github.com/users/raydiation/received_events","type":"user","site_admin":false},"created_at":"2013-05-06t08:49:40z","updated_at":"2013-05-06t08:49:40z","body":"after thinking for a while the pid is not unique to that program. what if a different program starts and gets the same pid as the locked one? the file would never be released. \r\n\r\nwhat about http://de1.php.net/flock \r\n\r\napparently the lock will be released if the process dies"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17473032","html_url":"https://github.com/owncloud/core/issues/3221#issuecomment-17473032","issue_url":"https://api.github.com/repos/owncloud/core/issues/3221","id":17473032,"user":{"login":"raydiation","id":195053,"avatar_url":"https://gravatar.com/avatar/aa0d7b7302e0d7f4f9513c23b571383a?d=https%3a%2f%2fidenticons.github.com%2faf0a25e27510f77d97634a6bbe653b13.png&r=x","gravatar_id":"aa0d7b7302e0d7f4f9513c23b571383a","url":"https://api.github.com/users/raydiation","html_url":"https://github.com/raydiation","followers_url":"https://api.github.com/users/raydiation/followers","following_url":"https://api.github.com/users/raydiation/following{/other_user}","gists_url":"https://api.github.com/users/raydiation/gists{/gist_id}","starred_url":"https://api.github.com/users/raydiation/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raydiation/subscriptions","organizations_url":"https://api.github.com/users/raydiation/orgs","repos_url":"https://api.github.com/users/raydiation/repos","events_url":"https://api.github.com/users/raydiation/events{/privacy}","received_events_url":"https://api.github.com/users/raydiation/received_events","type":"user","site_admin":false},"created_at":"2013-05-06t09:25:59z","updated_at":"2013-05-06t09:25:59z","body":"ok, we need a combination :) i read up in the php sourcecode and the releasing of the lock will be handled by the operating system. but if theres a power failure its not guarantueed. so lets put the lock file in the /tmp directory and that directory will be wiped on reboot. problem solved"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17729200","html_url":"https://github.com/owncloud/core/issues/3221#issuecomment-17729200","issue_url":"https://api.github.com/repos/owncloud/core/issues/3221","id":17729200,"user":{"login":"roaima","id":3172148,"avatar_url":"https://gravatar.com/avatar/730eca5d4c0bf12c75ee57452e1c9f36?d=https%3a%2f%2fidenticons.github.com%2f730aed3ce0a42f57c828bf77233aff69.png&r=x","gravatar_id":"730eca5d4c0bf12c75ee57452e1c9f36","url":"https://api.github.com/users/roaima","html_url":"https://github.com/roaima","followers_url":"https://api.github.com/users/roaima/followers","following_url":"https://api.github.com/users/roaima/following{/other_user}","gists_url":"https://api.github.com/users/roaima/gists{/gist_id}","starred_url":"https://api.github.com/users/roaima/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roaima/subscriptions","organizations_url":"https://api.github.com/users/roaima/orgs","repos_url":"https://api.github.com/users/roaima/repos","events_url":"https://api.github.com/users/roaima/events{/privacy}","received_events_url":"https://api.github.com/users/roaima/received_events","type":"user","site_admin":false},"created_at":"2013-05-10t16:09:00z","updated_at":"2013-05-10t16:09:00z","body":"on unix/linux type systems, an outstanding flock or lockf is guaranteed to be released by the os when the process ends.\r\n\r\nyou also cannot guarantee that /tmp will be cleared or wiped on reboot - that's distribution (and sysadmin) dependent.\r\n\r\na solution is to write the pid to the lock file (for debugging purposes) and then hold the file locked for the duration of the cron job. each time through, the cron job must check for a lock before writing its pid. if the lock exists then the previous process is still running. this pattern is very common so there's no need to reinvent the wheel. open-with-exclusive-lock-but-no-wait and exit on failure; write-and-flush pid; do cron work; close lock file; exit(0)\r\n"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17835467","html_url":"https://github.com/owncloud/core/issues/3221#issuecomment-17835467","issue_url":"https://api.github.com/repos/owncloud/core/issues/3221","id":17835467,"user":{"login":"bantu","id":189375,"avatar_url":"https://gravatar.com/avatar/88483d87947219efecfc570465c753b2?d=https%3a%2f%2fidenticons.github.com%2fcdc48f189c0e2e8a870f3d54615a2f0d.png&r=x","gravatar_id":"88483d87947219efecfc570465c753b2","url":"https://api.github.com/users/bantu","html_url":"https://github.com/bantu","followers_url":"https://api.github.com/users/bantu/followers","following_url":"https://api.github.com/users/bantu/following{/other_user}","gists_url":"https://api.github.com/users/bantu/gists{/gist_id}","starred_url":"https://api.github.com/users/bantu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bantu/subscriptions","organizations_url":"https://api.github.com/users/bantu/orgs","repos_url":"https://api.github.com/users/bantu/repos","events_url":"https://api.github.com/users/bantu/events{/privacy}","received_events_url":"https://api.github.com/users/bantu/received_events","type":"user","site_admin":false},"created_at":"2013-05-13t19:40:56z","updated_at":"2013-05-13t19:40:56z","body":"filesystem locking is tedious. i'd use the database for locking and specify a timeout after which the lock is automatically released."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17835702","html_url":"https://github.com/owncloud/core/issues/3221#issuecomment-17835702","issue_url":"https://api.github.com/repos/owncloud/core/issues/3221","id":17835702,"user":{"login":"karlitschek","id":867445,"avatar_url":"https://gravatar.com/avatar/87ce2b4531ee1a0c32b50e0d8f049224?d=https%3a%2f%2fidenticons.github.com%2f06e7098636caebfc9c30c9f52eb905df.png&r=x","gravatar_id":"87ce2b4531ee1a0c32b50e0d8f049224","url":"https://api.github.com/users/karlitschek","html_url":"https://github.com/karlitschek","followers_url":"https://api.github.com/users/karlitschek/followers","following_url":"https://api.github.com/users/karlitschek/following{/other_user}","gists_url":"https://api.github.com/users/karlitschek/gists{/gist_id}","starred_url":"https://api.github.com/users/karlitschek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karlitschek/subscriptions","organizations_url":"https://api.github.com/users/karlitschek/orgs","repos_url":"https://api.github.com/users/karlitschek/repos","events_url":"https://api.github.com/users/karlitschek/events{/privacy}","received_events_url":"https://api.github.com/users/karlitschek/received_events","type":"user","site_admin":false},"created_at":"2013-05-13t19:44:57z","updated_at":"2013-05-13t19:44:57z","body":"actually in my experience a filesystem lock is more reliable than a database. a lot of unix systems do this for 30 years."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17836310","html_url":"https://github.com/owncloud/core/issues/3221#issuecomment-17836310","issue_url":"https://api.github.com/repos/owncloud/core/issues/3221","id":17836310,"user":{"login":"bantu","id":189375,"avatar_url":"https://gravatar.com/avatar/88483d87947219efecfc570465c753b2?d=https%3a%2f%2fidenticons.github.com%2fcdc48f189c0e2e8a870f3d54615a2f0d.png&r=x","gravatar_id":"88483d87947219efecfc570465c753b2","url":"https://api.github.com/users/bantu","html_url":"https://github.com/bantu","followers_url":"https://api.github.com/users/bantu/followers","following_url":"https://api.github.com/users/bantu/following{/other_user}","gists_url":"https://api.github.com/users/bantu/gists{/gist_id}","starred_url":"https://api.github.com/users/bantu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bantu/subscriptions","organizations_url":"https://api.github.com/users/bantu/orgs","repos_url":"https://api.github.com/users/bantu/repos","events_url":"https://api.github.com/users/bantu/events{/privacy}","received_events_url":"https://api.github.com/users/bantu/received_events","type":"user","site_admin":false},"created_at":"2013-05-13t19:56:10z","updated_at":"2013-05-13t20:17:38z","body":"@karlitschek this is probably true for most of existing desktop software. but in this case, network mounts may come into play which may change flock() behaviour. using /tmp as an alternative may also not work as /tmp may not be present, e.g. in a chrooted environment; or may not be writable, e.g. open_basedir. also, those options do not seem to scale well across multiple frontend machines. cheers, andreas"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17838062","html_url":"https://github.com/owncloud/core/issues/3221#issuecomment-17838062","issue_url":"https://api.github.com/repos/owncloud/core/issues/3221","id":17838062,"user":{"login":"raydiation","id":195053,"avatar_url":"https://gravatar.com/avatar/aa0d7b7302e0d7f4f9513c23b571383a?d=https%3a%2f%2fidenticons.github.com%2faf0a25e27510f77d97634a6bbe653b13.png&r=x","gravatar_id":"aa0d7b7302e0d7f4f9513c23b571383a","url":"https://api.github.com/users/raydiation","html_url":"https://github.com/raydiation","followers_url":"https://api.github.com/users/raydiation/followers","following_url":"https://api.github.com/users/raydiation/following{/other_user}","gists_url":"https://api.github.com/users/raydiation/gists{/gist_id}","starred_url":"https://api.github.com/users/raydiation/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raydiation/subscriptions","organizations_url":"https://api.github.com/users/raydiation/orgs","repos_url":"https://api.github.com/users/raydiation/repos","events_url":"https://api.github.com/users/raydiation/events{/privacy}","received_events_url":"https://api.github.com/users/raydiation/received_events","type":"user","site_admin":false},"created_at":"2013-05-13t20:24:47z","updated_at":"2013-05-13t20:24:47z","body":"@bantu well simple then: we require /tmp to be there and writeable. also the timeout is no solution since this will mess up big installations"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17838601","html_url":"https://github.com/owncloud/core/issues/3221#issuecomment-17838601","issue_url":"https://api.github.com/repos/owncloud/core/issues/3221","id":17838601,"user":{"login":"bantu","id":189375,"avatar_url":"https://gravatar.com/avatar/88483d87947219efecfc570465c753b2?d=https%3a%2f%2fidenticons.github.com%2fcdc48f189c0e2e8a870f3d54615a2f0d.png&r=x","gravatar_id":"88483d87947219efecfc570465c753b2","url":"https://api.github.com/users/bantu","html_url":"https://github.com/bantu","followers_url":"https://api.github.com/users/bantu/followers","following_url":"https://api.github.com/users/bantu/following{/other_user}","gists_url":"https://api.github.com/users/bantu/gists{/gist_id}","starred_url":"https://api.github.com/users/bantu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bantu/subscriptions","organizations_url":"https://api.github.com/users/bantu/orgs","repos_url":"https://api.github.com/users/bantu/repos","events_url":"https://api.github.com/users/bantu/events{/privacy}","received_events_url":"https://api.github.com/users/bantu/received_events","type":"user","site_admin":false},"created_at":"2013-05-13t20:32:45z","updated_at":"2013-05-13t20:35:30z","body":"@raydiation since you may have misunderstood:\r\n\r\nnormal behaviour: cron gets lock; cron runs properly; cron releases lock.\r\n\r\nabnormal behaviour: cron gets lock; cron process dies (for whatever reason); lock is released via timeout.\r\n\r\nthere is nothing wrong with having a timeout of 8 minutes or so because the manual suggests calling cron.php every 15 minutes from system cron if pseudo-cron is not used.\r\n\r\nplease also see my edit about open_basedir in my previus post.\r\n\r\nalso, how does /tmp work on \"big installations\"? it usually is local only and does not work across multiple frontend servers."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17838937","html_url":"https://github.com/owncloud/core/issues/3221#issuecomment-17838937","issue_url":"https://api.github.com/repos/owncloud/core/issues/3221","id":17838937,"user":{"login":"raydiation","id":195053,"avatar_url":"https://gravatar.com/avatar/aa0d7b7302e0d7f4f9513c23b571383a?d=https%3a%2f%2fidenticons.github.com%2faf0a25e27510f77d97634a6bbe653b13.png&r=x","gravatar_id":"aa0d7b7302e0d7f4f9513c23b571383a","url":"https://api.github.com/users/raydiation","html_url":"https://github.com/raydiation","followers_url":"https://api.github.com/users/raydiation/followers","following_url":"https://api.github.com/users/raydiation/following{/other_user}","gists_url":"https://api.github.com/users/raydiation/gists{/gist_id}","starred_url":"https://api.github.com/users/raydiation/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raydiation/subscriptions","organizations_url":"https://api.github.com/users/raydiation/orgs","repos_url":"https://api.github.com/users/raydiation/repos","events_url":"https://api.github.com/users/raydiation/events{/privacy}","received_events_url":"https://api.github.com/users/raydiation/received_events","type":"user","site_admin":false},"created_at":"2013-05-13t20:37:37z","updated_at":"2013-05-13t20:38:10z","body":"@bantu my cronjob for fetching 30 news feeds takes 5 minutes and thats one user on one installation so you can safely assume that a timeout wont work on large installations. (its hte io that takes that long btw, also no threads in php banzaii!)"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17839016","html_url":"https://github.com/owncloud/core/issues/3221#issuecomment-17839016","issue_url":"https://api.github.com/repos/owncloud/core/issues/3221","id":17839016,"user":{"login":"bantu","id":189375,"avatar_url":"https://gravatar.com/avatar/88483d87947219efecfc570465c753b2?d=https%3a%2f%2fidenticons.github.com%2fcdc48f189c0e2e8a870f3d54615a2f0d.png&r=x","gravatar_id":"88483d87947219efecfc570465c753b2","url":"https://api.github.com/users/bantu","html_url":"https://github.com/bantu","followers_url":"https://api.github.com/users/bantu/followers","following_url":"https://api.github.com/users/bantu/following{/other_user}","gists_url":"https://api.github.com/users/bantu/gists{/gist_id}","starred_url":"https://api.github.com/users/bantu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bantu/subscriptions","organizations_url":"https://api.github.com/users/bantu/orgs","repos_url":"https://api.github.com/users/bantu/repos","events_url":"https://api.github.com/users/bantu/events{/privacy}","received_events_url":"https://api.github.com/users/bantu/received_events","type":"user","site_admin":false},"created_at":"2013-05-13t20:39:15z","updated_at":"2013-05-13t20:39:30z","body":"@raydiation how does that work (at all) on shared hosting with max_execution_time = 30? ;-)"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17839069","html_url":"https://github.com/owncloud/core/issues/3221#issuecomment-17839069","issue_url":"https://api.github.com/repos/owncloud/core/issues/3221","id":17839069,"user":{"login":"raydiation","id":195053,"avatar_url":"https://gravatar.com/avatar/aa0d7b7302e0d7f4f9513c23b571383a?d=https%3a%2f%2fidenticons.github.com%2faf0a25e27510f77d97634a6bbe653b13.png&r=x","gravatar_id":"aa0d7b7302e0d7f4f9513c23b571383a","url":"https://api.github.com/users/raydiation","html_url":"https://github.com/raydiation","followers_url":"https://api.github.com/users/raydiation/followers","following_url":"https://api.github.com/users/raydiation/following{/other_user}","gists_url":"https://api.github.com/users/raydiation/gists{/gist_id}","starred_url":"https://api.github.com/users/raydiation/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raydiation/subscriptions","organizations_url":"https://api.github.com/users/raydiation/orgs","repos_url":"https://api.github.com/users/raydiation/repos","events_url":"https://api.github.com/users/raydiation/events{/privacy}","received_events_url":"https://api.github.com/users/raydiation/received_events","type":"user","site_admin":false},"created_at":"2013-05-13t20:40:06z","updated_at":"2013-05-13t20:40:06z","body":"@bantu well php sure is interesting ;) nothing i can do."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17839150","html_url":"https://github.com/owncloud/core/issues/3221#issuecomment-17839150","issue_url":"https://api.github.com/repos/owncloud/core/issues/3221","id":17839150,"user":{"login":"bantu","id":189375,"avatar_url":"https://gravatar.com/avatar/88483d87947219efecfc570465c753b2?d=https%3a%2f%2fidenticons.github.com%2fcdc48f189c0e2e8a870f3d54615a2f0d.png&r=x","gravatar_id":"88483d87947219efecfc570465c753b2","url":"https://api.github.com/users/bantu","html_url":"https://github.com/bantu","followers_url":"https://api.github.com/users/bantu/followers","following_url":"https://api.github.com/users/bantu/following{/other_user}","gists_url":"https://api.github.com/users/bantu/gists{/gist_id}","starred_url":"https://api.github.com/users/bantu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bantu/subscriptions","organizations_url":"https://api.github.com/users/bantu/orgs","repos_url":"https://api.github.com/users/bantu/repos","events_url":"https://api.github.com/users/bantu/events{/privacy}","received_events_url":"https://api.github.com/users/bantu/received_events","type":"user","site_admin":false},"created_at":"2013-05-13t20:41:19z","updated_at":"2013-05-13t20:41:19z","body":"@raydiation news feeds are independent. make your cronjobs smaller. handle a few now until you run out of time. schedule the remainer for another cron run."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17839286","html_url":"https://github.com/owncloud/core/issues/3221#issuecomment-17839286","issue_url":"https://api.github.com/repos/owncloud/core/issues/3221","id":17839286,"user":{"login":"raydiation","id":195053,"avatar_url":"https://gravatar.com/avatar/aa0d7b7302e0d7f4f9513c23b571383a?d=https%3a%2f%2fidenticons.github.com%2faf0a25e27510f77d97634a6bbe653b13.png&r=x","gravatar_id":"aa0d7b7302e0d7f4f9513c23b571383a","url":"https://api.github.com/users/raydiation","html_url":"https://github.com/raydiation","followers_url":"https://api.github.com/users/raydiation/followers","following_url":"https://api.github.com/users/raydiation/following{/other_user}","gists_url":"https://api.github.com/users/raydiation/gists{/gist_id}","starred_url":"https://api.github.com/users/raydiation/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raydiation/subscriptions","organizations_url":"https://api.github.com/users/raydiation/orgs","repos_url":"https://api.github.com/users/raydiation/repos","events_url":"https://api.github.com/users/raydiation/events{/privacy}","received_events_url":"https://api.github.com/users/raydiation/received_events","type":"user","site_admin":false},"created_at":"2013-05-13t20:43:19z","updated_at":"2013-05-13t20:44:05z","body":"@bantu btw it will not be killed when run via the cronjob, basically when run from commandline thats fine. also scheduling them is not a solution since this may vary from system to system."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17840855","html_url":"https://github.com/owncloud/core/issues/3221#issuecomment-17840855","issue_url":"https://api.github.com/repos/owncloud/core/issues/3221","id":17840855,"user":{"login":"jakobsack","id":776911,"avatar_url":"https://gravatar.com/avatar/80cb68115ebdd56d1d34b106c1069b55?d=https%3a%2f%2fidenticons.github.com%2f94ea3e04ec2b9cebe10360595baa567b.png&r=x","gravatar_id":"80cb68115ebdd56d1d34b106c1069b55","url":"https://api.github.com/users/jakobsack","html_url":"https://github.com/jakobsack","followers_url":"https://api.github.com/users/jakobsack/followers","following_url":"https://api.github.com/users/jakobsack/following{/other_user}","gists_url":"https://api.github.com/users/jakobsack/gists{/gist_id}","starred_url":"https://api.github.com/users/jakobsack/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakobsack/subscriptions","organizations_url":"https://api.github.com/users/jakobsack/orgs","repos_url":"https://api.github.com/users/jakobsack/repos","events_url":"https://api.github.com/users/jakobsack/events{/privacy}","received_events_url":"https://api.github.com/users/jakobsack/received_events","type":"user","site_admin":false},"created_at":"2013-05-13t21:09:02z","updated_at":"2013-05-13t21:09:02z","body":"@raydiation @bantu if nobody changed the code i wrote the cronjob of the newsapp behaves differently depending on whether it was called by cron/cli or the webserver. when using webcron or the ajax solution only a single feed is fetched, using cron it will download all feeds at once."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17841335","html_url":"https://github.com/owncloud/core/issues/3221#issuecomment-17841335","issue_url":"https://api.github.com/repos/owncloud/core/issues/3221","id":17841335,"user":{"login":"jakobsack","id":776911,"avatar_url":"https://gravatar.com/avatar/80cb68115ebdd56d1d34b106c1069b55?d=https%3a%2f%2fidenticons.github.com%2f94ea3e04ec2b9cebe10360595baa567b.png&r=x","gravatar_id":"80cb68115ebdd56d1d34b106c1069b55","url":"https://api.github.com/users/jakobsack","html_url":"https://github.com/jakobsack","followers_url":"https://api.github.com/users/jakobsack/followers","following_url":"https://api.github.com/users/jakobsack/following{/other_user}","gists_url":"https://api.github.com/users/jakobsack/gists{/gist_id}","starred_url":"https://api.github.com/users/jakobsack/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakobsack/subscriptions","organizations_url":"https://api.github.com/users/jakobsack/orgs","repos_url":"https://api.github.com/users/jakobsack/repos","events_url":"https://api.github.com/users/jakobsack/events{/privacy}","received_events_url":"https://api.github.com/users/jakobsack/received_events","type":"user","site_admin":false},"created_at":"2013-05-13t21:17:31z","updated_at":"2013-05-13t21:17:31z","body":"hi,\r\n\r\nmaybe we should stop thinking about _one_ solution. the reason why i didn't implement a locking at all (the current locking mechanism has been implemented by someone else) was that i could not find a solution that runs smoothly on all plattforms.\r\ni'm not an expert on that topic but my guess is that owncloud should try to use the best solution possible, be it a system call, a flock() or a timeout. furthermore, a configuration option should exist to prevent owncloud from trying  certain possibilities, e.g. flock on a network storage.\r\n\r\nbtw the argument \"/tmp gets cleared after a reboot\" is not valid on a web server. or do you reboot your server once or twice a week? ;-)\r\n\r\nbest,\r\n\r\njakob"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17842653","html_url":"https://github.com/owncloud/core/issues/3221#issuecomment-17842653","issue_url":"https://api.github.com/repos/owncloud/core/issues/3221","id":17842653,"user":{"login":"raydiation","id":195053,"avatar_url":"https://gravatar.com/avatar/aa0d7b7302e0d7f4f9513c23b571383a?d=https%3a%2f%2fidenticons.github.com%2faf0a25e27510f77d97634a6bbe653b13.png&r=x","gravatar_id":"aa0d7b7302e0d7f4f9513c23b571383a","url":"https://api.github.com/users/raydiation","html_url":"https://github.com/raydiation","followers_url":"https://api.github.com/users/raydiation/followers","following_url":"https://api.github.com/users/raydiation/following{/other_user}","gists_url":"https://api.github.com/users/raydiation/gists{/gist_id}","starred_url":"https://api.github.com/users/raydiation/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raydiation/subscriptions","organizations_url":"https://api.github.com/users/raydiation/orgs","repos_url":"https://api.github.com/users/raydiation/repos","events_url":"https://api.github.com/users/raydiation/events{/privacy}","received_events_url":"https://api.github.com/users/raydiation/received_events","type":"user","site_admin":false},"created_at":"2013-05-13t21:37:43z","updated_at":"2013-05-13t21:39:17z","body":"@jakobsack well its when i reboot that sometimes the locks dont get released. yeah the code has changed ;d fetching a single feed once at a time does not scale. well anyway what i mean is: a timeout wont work. regardless of what you do.\r\n"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17929451","html_url":"https://github.com/owncloud/core/issues/3221#issuecomment-17929451","issue_url":"https://api.github.com/repos/owncloud/core/issues/3221","id":17929451,"user":{"login":"raydiation","id":195053,"avatar_url":"https://gravatar.com/avatar/aa0d7b7302e0d7f4f9513c23b571383a?d=https%3a%2f%2fidenticons.github.com%2faf0a25e27510f77d97634a6bbe653b13.png&r=x","gravatar_id":"aa0d7b7302e0d7f4f9513c23b571383a","url":"https://api.github.com/users/raydiation","html_url":"https://github.com/raydiation","followers_url":"https://api.github.com/users/raydiation/followers","following_url":"https://api.github.com/users/raydiation/following{/other_user}","gists_url":"https://api.github.com/users/raydiation/gists{/gist_id}","starred_url":"https://api.github.com/users/raydiation/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raydiation/subscriptions","organizations_url":"https://api.github.com/users/raydiation/orgs","repos_url":"https://api.github.com/users/raydiation/repos","events_url":"https://api.github.com/users/raydiation/events{/privacy}","received_events_url":"https://api.github.com/users/raydiation/received_events","type":"user","site_admin":false},"created_at":"2013-05-15t09:51:47z","updated_at":"2013-05-15t09:51:47z","body":"btw, weve got lots of people running into this issue."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17932425","html_url":"https://github.com/owncloud/core/issues/3221#issuecomment-17932425","issue_url":"https://api.github.com/repos/owncloud/core/issues/3221","id":17932425,"user":{"login":"kiranos","id":840871,"avatar_url":"https://gravatar.com/avatar/45bcfc648c1ed90ebadd23a484d99376?d=https%3a%2f%2fidenticons.github.com%2fb2013959ac9cf127c7f4a02a6bf3cde1.png&r=x","gravatar_id":"45bcfc648c1ed90ebadd23a484d99376","url":"https://api.github.com/users/kiranos","html_url":"https://github.com/kiranos","followers_url":"https://api.github.com/users/kiranos/followers","following_url":"https://api.github.com/users/kiranos/following{/other_user}","gists_url":"https://api.github.com/users/kiranos/gists{/gist_id}","starred_url":"https://api.github.com/users/kiranos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kiranos/subscriptions","organizations_url":"https://api.github.com/users/kiranos/orgs","repos_url":"https://api.github.com/users/kiranos/repos","events_url":"https://api.github.com/users/kiranos/events{/privacy}","received_events_url":"https://api.github.com/users/kiranos/received_events","type":"user","site_admin":false},"created_at":"2013-05-15t11:09:21z","updated_at":"2013-05-15t11:10:02z","body":"someone has to decide which path to take, raydiation it seems like you have investigated possible solutions what is your take, how would you like to fix this? and if we have a clear picture of this solution it would be easier to go ahead (just sum up what has been said so everyone can read the solution at one go)\r\n\r\njust my thoughts"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17932519","html_url":"https://github.com/owncloud/core/issues/3221#issuecomment-17932519","issue_url":"https://api.github.com/repos/owncloud/core/issues/3221","id":17932519,"user":{"login":"raydiation","id":195053,"avatar_url":"https://gravatar.com/avatar/aa0d7b7302e0d7f4f9513c23b571383a?d=https%3a%2f%2fidenticons.github.com%2faf0a25e27510f77d97634a6bbe653b13.png&r=x","gravatar_id":"aa0d7b7302e0d7f4f9513c23b571383a","url":"https://api.github.com/users/raydiation","html_url":"https://github.com/raydiation","followers_url":"https://api.github.com/users/raydiation/followers","following_url":"https://api.github.com/users/raydiation/following{/other_user}","gists_url":"https://api.github.com/users/raydiation/gists{/gist_id}","starred_url":"https://api.github.com/users/raydiation/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raydiation/subscriptions","organizations_url":"https://api.github.com/users/raydiation/orgs","repos_url":"https://api.github.com/users/raydiation/repos","events_url":"https://api.github.com/users/raydiation/events{/privacy}","received_events_url":"https://api.github.com/users/raydiation/received_events","type":"user","site_admin":false},"created_at":"2013-05-15t11:12:14z","updated_at":"2013-05-15t11:12:14z","body":"@kiranos i dont have time right now, im working on my thesis. the soonest date would be mid july"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17932656","html_url":"https://github.com/owncloud/core/issues/3221#issuecomment-17932656","issue_url":"https://api.github.com/repos/owncloud/core/issues/3221","id":17932656,"user":{"login":"kiranos","id":840871,"avatar_url":"https://gravatar.com/avatar/45bcfc648c1ed90ebadd23a484d99376?d=https%3a%2f%2fidenticons.github.com%2fb2013959ac9cf127c7f4a02a6bf3cde1.png&r=x","gravatar_id":"45bcfc648c1ed90ebadd23a484d99376","url":"https://api.github.com/users/kiranos","html_url":"https://github.com/kiranos","followers_url":"https://api.github.com/users/kiranos/followers","following_url":"https://api.github.com/users/kiranos/following{/other_user}","gists_url":"https://api.github.com/users/kiranos/gists{/gist_id}","starred_url":"https://api.github.com/users/kiranos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kiranos/subscriptions","organizations_url":"https://api.github.com/users/kiranos/orgs","repos_url":"https://api.github.com/users/kiranos/repos","events_url":"https://api.github.com/users/kiranos/events{/privacy}","received_events_url":"https://api.github.com/users/kiranos/received_events","type":"user","site_admin":false},"created_at":"2013-05-15t11:15:53z","updated_at":"2013-05-15t11:15:53z","body":"@raydiation no problem, i wasnt thinking a patch just a solution of how to proceed, then core maintainers should prioritize this as they see fit and assign someone for it if noone in the community has time (if there were milestones that were actually used for this... :) )  its a pretty important issue imo"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17933327","html_url":"https://github.com/owncloud/core/issues/3221#issuecomment-17933327","issue_url":"https://api.github.com/repos/owncloud/core/issues/3221","id":17933327,"user":{"login":"raydiation","id":195053,"avatar_url":"https://gravatar.com/avatar/aa0d7b7302e0d7f4f9513c23b571383a?d=https%3a%2f%2fidenticons.github.com%2faf0a25e27510f77d97634a6bbe653b13.png&r=x","gravatar_id":"aa0d7b7302e0d7f4f9513c23b571383a","url":"https://api.github.com/users/raydiation","html_url":"https://github.com/raydiation","followers_url":"https://api.github.com/users/raydiation/followers","following_url":"https://api.github.com/users/raydiation/following{/other_user}","gists_url":"https://api.github.com/users/raydiation/gists{/gist_id}","starred_url":"https://api.github.com/users/raydiation/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raydiation/subscriptions","organizations_url":"https://api.github.com/users/raydiation/orgs","repos_url":"https://api.github.com/users/raydiation/repos","events_url":"https://api.github.com/users/raydiation/events{/privacy}","received_events_url":"https://api.github.com/users/raydiation/received_events","type":"user","site_admin":false},"created_at":"2013-05-15t11:35:02z","updated_at":"2013-05-15t11:35:02z","body":"imo we should lock it based in pid and scriptname"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17949601","html_url":"https://github.com/owncloud/core/issues/3221#issuecomment-17949601","issue_url":"https://api.github.com/repos/owncloud/core/issues/3221","id":17949601,"user":{"login":"icewind1991","id":1283854,"avatar_url":"https://gravatar.com/avatar/7c20f90ca5df67dd2cad22a8e2f80d8f?d=https%3a%2f%2fidenticons.github.com%2fc818423776eba38604496a7caddc0251.png&r=x","gravatar_id":"7c20f90ca5df67dd2cad22a8e2f80d8f","url":"https://api.github.com/users/icewind1991","html_url":"https://github.com/icewind1991","followers_url":"https://api.github.com/users/icewind1991/followers","following_url":"https://api.github.com/users/icewind1991/following{/other_user}","gists_url":"https://api.github.com/users/icewind1991/gists{/gist_id}","starred_url":"https://api.github.com/users/icewind1991/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icewind1991/subscriptions","organizations_url":"https://api.github.com/users/icewind1991/orgs","repos_url":"https://api.github.com/users/icewind1991/repos","events_url":"https://api.github.com/users/icewind1991/events{/privacy}","received_events_url":"https://api.github.com/users/icewind1991/received_events","type":"user","site_admin":false},"created_at":"2013-05-15t16:23:13z","updated_at":"2013-05-15t16:23:13z","body":"i did some work on creating a locking system: https://github.com/owncloud/core/blob/9ff9b923c9141d7729f09e28d8cece67509e139f/lib/lock.php\r\n\r\ni'm not sure how to test this properly though"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/18986860","html_url":"https://github.com/owncloud/core/issues/3221#issuecomment-18986860","issue_url":"https://api.github.com/repos/owncloud/core/issues/3221","id":18986860,"user":{"login":"djurodrljaca","id":4621294,"avatar_url":"https://gravatar.com/avatar/80ec49a9dce5a57521475ee968839e28?d=https%3a%2f%2fidenticons.github.com%2f30b470142d1dd461d1758594b99e9a96.png&r=x","gravatar_id":"80ec49a9dce5a57521475ee968839e28","url":"https://api.github.com/users/djurodrljaca","html_url":"https://github.com/djurodrljaca","followers_url":"https://api.github.com/users/djurodrljaca/followers","following_url":"https://api.github.com/users/djurodrljaca/following{/other_user}","gists_url":"https://api.github.com/users/djurodrljaca/gists{/gist_id}","starred_url":"https://api.github.com/users/djurodrljaca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/djurodrljaca/subscriptions","organizations_url":"https://api.github.com/users/djurodrljaca/orgs","repos_url":"https://api.github.com/users/djurodrljaca/repos","events_url":"https://api.github.com/users/djurodrljaca/events{/privacy}","received_events_url":"https://api.github.com/users/djurodrljaca/received_events","type":"user","site_admin":false},"created_at":"2013-06-05t15:55:34z","updated_at":"2013-06-05t15:55:34z","body":"i am also having this issue (\"another instance of cron.php is still running!\") but i am not really sure what is the problem...\r\n\r\nthere is no cron.lock file in my data folder but i think that for some reason cron is triggered 2 times simultaneously for some reason. it doesn't matter if i trigger the cron job every minute or every 30 minutes i always get this message.\r\n\r\ni might have misunderstood the documentation but i configured it like this:\r\n1) i selected \"cron\" in admin's cron configuration\r\n2) i added a cron job for the user wwwrun (user that is running apache) --> */15  *  *  *  * php -f /srv/www/htdocs/owncloud/cron.php\r\n\r\nis this correct? is it even necessary to add the cron job manually in the system or is it done automatically by owncloud?"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/19532405","html_url":"https://github.com/owncloud/core/issues/3221#issuecomment-19532405","issue_url":"https://api.github.com/repos/owncloud/core/issues/3221","id":19532405,"user":{"login":"kabum","id":245432,"avatar_url":"https://gravatar.com/avatar/a1dea19f88f38ea0b5b5b4d19d5b3107?d=https%3a%2f%2fidenticons.github.com%2f53d8cbb3dbc087a02951dec47438ccdf.png&r=x","gravatar_id":"a1dea19f88f38ea0b5b5b4d19d5b3107","url":"https://api.github.com/users/kabum","html_url":"https://github.com/kabum","followers_url":"https://api.github.com/users/kabum/followers","following_url":"https://api.github.com/users/kabum/following{/other_user}","gists_url":"https://api.github.com/users/kabum/gists{/gist_id}","starred_url":"https://api.github.com/users/kabum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kabum/subscriptions","organizations_url":"https://api.github.com/users/kabum/orgs","repos_url":"https://api.github.com/users/kabum/repos","events_url":"https://api.github.com/users/kabum/events{/privacy}","received_events_url":"https://api.github.com/users/kabum/received_events","type":"user","site_admin":false},"created_at":"2013-06-17t08:38:48z","updated_at":"2013-06-17t08:38:48z","body":"i have the issue too. so if a fix has to be tested, let me know."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/20248797","html_url":"https://github.com/owncloud/core/issues/3221#issuecomment-20248797","issue_url":"https://api.github.com/repos/owncloud/core/issues/3221","id":20248797,"user":{"login":"lunarok","id":1303626,"avatar_url":"https://gravatar.com/avatar/3c19bf35e98e07eede17435f77160eb5?d=https%3a%2f%2fidenticons.github.com%2fcf2fc90b29b31c089da2143cfa9bf5e3.png&r=x","gravatar_id":"3c19bf35e98e07eede17435f77160eb5","url":"https://api.github.com/users/lunarok","html_url":"https://github.com/lunarok","followers_url":"https://api.github.com/users/lunarok/followers","following_url":"https://api.github.com/users/lunarok/following{/other_user}","gists_url":"https://api.github.com/users/lunarok/gists{/gist_id}","starred_url":"https://api.github.com/users/lunarok/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lunarok/subscriptions","organizations_url":"https://api.github.com/users/lunarok/orgs","repos_url":"https://api.github.com/users/lunarok/repos","events_url":"https://api.github.com/users/lunarok/events{/privacy}","received_events_url":"https://api.github.com/users/lunarok/received_events","type":"user","site_admin":false},"created_at":"2013-06-30t15:24:19z","updated_at":"2013-06-30t15:24:19z","body":"same problem here, no update with cron and the error message when launching by hand. please fix as not everyone is able to go delete a lock file on their instance everytime they get this error. thanks"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/21312047","html_url":"https://github.com/owncloud/core/issues/3221#issuecomment-21312047","issue_url":"https://api.github.com/repos/owncloud/core/issues/3221","id":21312047,"user":{"login":"dhasenan","id":578393,"avatar_url":"https://gravatar.com/avatar/6cb33c48bb858ba027b3450b8bc07bb1?d=https%3a%2f%2fidenticons.github.com%2f82be3a8feae88f485627a206c4e812fe.png&r=x","gravatar_id":"6cb33c48bb858ba027b3450b8bc07bb1","url":"https://api.github.com/users/dhasenan","html_url":"https://github.com/dhasenan","followers_url":"https://api.github.com/users/dhasenan/followers","following_url":"https://api.github.com/users/dhasenan/following{/other_user}","gists_url":"https://api.github.com/users/dhasenan/gists{/gist_id}","starred_url":"https://api.github.com/users/dhasenan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dhasenan/subscriptions","organizations_url":"https://api.github.com/users/dhasenan/orgs","repos_url":"https://api.github.com/users/dhasenan/repos","events_url":"https://api.github.com/users/dhasenan/events{/privacy}","received_events_url":"https://api.github.com/users/dhasenan/received_events","type":"user","site_admin":false},"created_at":"2013-07-21t15:49:47z","updated_at":"2013-07-23t10:50:28z","body":"i added a cron job:\r\n`* * * * * find /path/to/owncloud/data/cron.lock -cmin +30 -delete`\r\n\r\nnot the best, but my cron job is taking < 5 minutes to complete, which means if it's still running after half an hour it's out to lunch."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/21312766","html_url":"https://github.com/owncloud/core/issues/3221#issuecomment-21312766","issue_url":"https://api.github.com/repos/owncloud/core/issues/3221","id":21312766,"user":{"login":"kiranos","id":840871,"avatar_url":"https://gravatar.com/avatar/45bcfc648c1ed90ebadd23a484d99376?d=https%3a%2f%2fidenticons.github.com%2fb2013959ac9cf127c7f4a02a6bf3cde1.png&r=x","gravatar_id":"45bcfc648c1ed90ebadd23a484d99376","url":"https://api.github.com/users/kiranos","html_url":"https://github.com/kiranos","followers_url":"https://api.github.com/users/kiranos/followers","following_url":"https://api.github.com/users/kiranos/following{/other_user}","gists_url":"https://api.github.com/users/kiranos/gists{/gist_id}","starred_url":"https://api.github.com/users/kiranos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kiranos/subscriptions","organizations_url":"https://api.github.com/users/kiranos/orgs","repos_url":"https://api.github.com/users/kiranos/repos","events_url":"https://api.github.com/users/kiranos/events{/privacy}","received_events_url":"https://api.github.com/users/kiranos/received_events","type":"user","site_admin":false},"created_at":"2013-07-21t16:37:41z","updated_at":"2013-07-21t16:37:41z","body":"has there been a decision on which way to move ahead with this issue? its pretty important as time goes on and as we have seen how news app is growing fast in popularity"}]