[{"url":"https://api.github.com/repos/owncloud/core/issues/comments/11887917","html_url":"https://github.com/owncloud/core/pull/1079#issuecomment-11887917","issue_url":"https://api.github.com/repos/owncloud/core/issues/1079","id":11887917,"user":{"login":"karlitschek","id":867445,"avatar_url":"https://gravatar.com/avatar/87ce2b4531ee1a0c32b50e0d8f049224?d=https%3a%2f%2fidenticons.github.com%2f06e7098636caebfc9c30c9f52eb905df.png&r=x","gravatar_id":"87ce2b4531ee1a0c32b50e0d8f049224","url":"https://api.github.com/users/karlitschek","html_url":"https://github.com/karlitschek","followers_url":"https://api.github.com/users/karlitschek/followers","following_url":"https://api.github.com/users/karlitschek/following{/other_user}","gists_url":"https://api.github.com/users/karlitschek/gists{/gist_id}","starred_url":"https://api.github.com/users/karlitschek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karlitschek/subscriptions","organizations_url":"https://api.github.com/users/karlitschek/orgs","repos_url":"https://api.github.com/users/karlitschek/repos","events_url":"https://api.github.com/users/karlitschek/events{/privacy}","received_events_url":"https://api.github.com/users/karlitschek/received_events","type":"user","site_admin":false},"created_at":"2013-01-04t16:02:58z","updated_at":"2013-01-04t16:02:58z","body":":+1: great. perhaps we should also just disable 3rdparty apps because this was a huge source for problems for users in the past. some apps are just not compatible even if they say so. we can show a warning that the admin has to reenable them manually again."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/11889409","html_url":"https://github.com/owncloud/core/pull/1079#issuecomment-11889409","issue_url":"https://api.github.com/repos/owncloud/core/issues/1079","id":11889409,"user":{"login":"mtgap","id":1097106,"avatar_url":"https://gravatar.com/avatar/454a73ee5feeb428d0c163a48903332c?d=https%3a%2f%2fidenticons.github.com%2f52d29a66f285a1d61125dd69ac0766b2.png&r=x","gravatar_id":"454a73ee5feeb428d0c163a48903332c","url":"https://api.github.com/users/mtgap","html_url":"https://github.com/mtgap","followers_url":"https://api.github.com/users/mtgap/followers","following_url":"https://api.github.com/users/mtgap/following{/other_user}","gists_url":"https://api.github.com/users/mtgap/gists{/gist_id}","starred_url":"https://api.github.com/users/mtgap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mtgap/subscriptions","organizations_url":"https://api.github.com/users/mtgap/orgs","repos_url":"https://api.github.com/users/mtgap/repos","events_url":"https://api.github.com/users/mtgap/events{/privacy}","received_events_url":"https://api.github.com/users/mtgap/received_events","type":"user","site_admin":false},"created_at":"2013-01-04t16:38:30z","updated_at":"2013-01-04t16:38:30z","body":"i still want 3rdparty apps to be able to update during this time as well though. you would get the long loading time with no feedback if you enable a 3rdparty app afterwards and it needs to do an update.\r\n\r\nmaybe we just need to go through and test all of them prior to release. "},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/11889914","html_url":"https://github.com/owncloud/core/pull/1079#issuecomment-11889914","issue_url":"https://api.github.com/repos/owncloud/core/issues/1079","id":11889914,"user":{"login":"karlitschek","id":867445,"avatar_url":"https://gravatar.com/avatar/87ce2b4531ee1a0c32b50e0d8f049224?d=https%3a%2f%2fidenticons.github.com%2f06e7098636caebfc9c30c9f52eb905df.png&r=x","gravatar_id":"87ce2b4531ee1a0c32b50e0d8f049224","url":"https://api.github.com/users/karlitschek","html_url":"https://github.com/karlitschek","followers_url":"https://api.github.com/users/karlitschek/followers","following_url":"https://api.github.com/users/karlitschek/following{/other_user}","gists_url":"https://api.github.com/users/karlitschek/gists{/gist_id}","starred_url":"https://api.github.com/users/karlitschek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karlitschek/subscriptions","organizations_url":"https://api.github.com/users/karlitschek/orgs","repos_url":"https://api.github.com/users/karlitschek/repos","events_url":"https://api.github.com/users/karlitschek/events{/privacy}","received_events_url":"https://api.github.com/users/karlitschek/received_events","type":"user","site_admin":false},"created_at":"2013-01-04t16:49:07z","updated_at":"2013-01-04t16:49:07z","body":"good point. still :+1: from me"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/11890774","html_url":"https://github.com/owncloud/core/pull/1079#issuecomment-11890774","issue_url":"https://api.github.com/repos/owncloud/core/issues/1079","id":11890774,"user":{"login":"tanghus","id":533222,"avatar_url":"https://gravatar.com/avatar/e625b634822713b2e346ff7c67d26775?d=https%3a%2f%2fidenticons.github.com%2f6d9c90af1c12f5a88e4d5f216bbc1979.png&r=x","gravatar_id":"e625b634822713b2e346ff7c67d26775","url":"https://api.github.com/users/tanghus","html_url":"https://github.com/tanghus","followers_url":"https://api.github.com/users/tanghus/followers","following_url":"https://api.github.com/users/tanghus/following{/other_user}","gists_url":"https://api.github.com/users/tanghus/gists{/gist_id}","starred_url":"https://api.github.com/users/tanghus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tanghus/subscriptions","organizations_url":"https://api.github.com/users/tanghus/orgs","repos_url":"https://api.github.com/users/tanghus/repos","events_url":"https://api.github.com/users/tanghus/events{/privacy}","received_events_url":"https://api.github.com/users/tanghus/received_events","type":"user","site_admin":false},"created_at":"2013-01-04t17:09:23z","updated_at":"2013-01-04t17:09:23z","body":"i haven't tested yet, but this is just f*cking awesome @mtgap !!! and with very little and very clean code :+1: "},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/11890945","html_url":"https://github.com/owncloud/core/pull/1079#issuecomment-11890945","issue_url":"https://api.github.com/repos/owncloud/core/issues/1079","id":11890945,"user":{"login":"zimba12","id":1048336,"avatar_url":"https://gravatar.com/avatar/2f17790a84b5b6e0387ff68c890136cf?d=https%3a%2f%2fidenticons.github.com%2f6849ae30de6b2b49cbc2bcdf545251d3.png&r=x","gravatar_id":"2f17790a84b5b6e0387ff68c890136cf","url":"https://api.github.com/users/zimba12","html_url":"https://github.com/zimba12","followers_url":"https://api.github.com/users/zimba12/followers","following_url":"https://api.github.com/users/zimba12/following{/other_user}","gists_url":"https://api.github.com/users/zimba12/gists{/gist_id}","starred_url":"https://api.github.com/users/zimba12/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zimba12/subscriptions","organizations_url":"https://api.github.com/users/zimba12/orgs","repos_url":"https://api.github.com/users/zimba12/repos","events_url":"https://api.github.com/users/zimba12/events{/privacy}","received_events_url":"https://api.github.com/users/zimba12/received_events","type":"user","site_admin":false},"created_at":"2013-01-04t17:13:49z","updated_at":"2013-01-04t17:13:49z","body":"very nice indeed!"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/11893474","html_url":"https://github.com/owncloud/core/pull/1079#issuecomment-11893474","issue_url":"https://api.github.com/repos/owncloud/core/issues/1079","id":11893474,"user":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false},"created_at":"2013-01-04t18:19:21z","updated_at":"2013-01-04t18:19:21z","body":"@owncloud-bot retest this please"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/11894753","html_url":"https://github.com/owncloud/core/pull/1079#issuecomment-11894753","issue_url":"https://api.github.com/repos/owncloud/core/issues/1079","id":11894753,"user":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false},"created_at":"2013-01-04t18:52:25z","updated_at":"2013-01-04t18:52:25z","body":"@mtgap can you please double check the unit tests? there is something broken in oc_appconfig::getvalue()\r\nhttps://ci.tmit.eu/job/pull-request-analyser/433/console\r\n\r\nthx"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/11895764","html_url":"https://github.com/owncloud/core/pull/1079#issuecomment-11895764","issue_url":"https://api.github.com/repos/owncloud/core/issues/1079","id":11895764,"user":{"login":"mtgap","id":1097106,"avatar_url":"https://gravatar.com/avatar/454a73ee5feeb428d0c163a48903332c?d=https%3a%2f%2fidenticons.github.com%2f52d29a66f285a1d61125dd69ac0766b2.png&r=x","gravatar_id":"454a73ee5feeb428d0c163a48903332c","url":"https://api.github.com/users/mtgap","html_url":"https://github.com/mtgap","followers_url":"https://api.github.com/users/mtgap/followers","following_url":"https://api.github.com/users/mtgap/following{/other_user}","gists_url":"https://api.github.com/users/mtgap/gists{/gist_id}","starred_url":"https://api.github.com/users/mtgap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mtgap/subscriptions","organizations_url":"https://api.github.com/users/mtgap/orgs","repos_url":"https://api.github.com/users/mtgap/repos","events_url":"https://api.github.com/users/mtgap/events{/privacy}","received_events_url":"https://api.github.com/users/mtgap/received_events","type":"user","site_admin":false},"created_at":"2013-01-04t19:18:20z","updated_at":"2013-01-04t19:18:20z","body":"@deepdiver1975 looks like i forgot to copy everything when i moved the background jobs in base.php\r\n\r\ni think it might be fixed now. @owncloud-bot retest this please"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/11901770","html_url":"https://github.com/owncloud/core/pull/1079#issuecomment-11901770","issue_url":"https://api.github.com/repos/owncloud/core/issues/1079","id":11901770,"user":{"login":"mtgap","id":1097106,"avatar_url":"https://gravatar.com/avatar/454a73ee5feeb428d0c163a48903332c?d=https%3a%2f%2fidenticons.github.com%2f52d29a66f285a1d61125dd69ac0766b2.png&r=x","gravatar_id":"454a73ee5feeb428d0c163a48903332c","url":"https://api.github.com/users/mtgap","html_url":"https://github.com/mtgap","followers_url":"https://api.github.com/users/mtgap/followers","following_url":"https://api.github.com/users/mtgap/following{/other_user}","gists_url":"https://api.github.com/users/mtgap/gists{/gist_id}","starred_url":"https://api.github.com/users/mtgap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mtgap/subscriptions","organizations_url":"https://api.github.com/users/mtgap/orgs","repos_url":"https://api.github.com/users/mtgap/repos","events_url":"https://api.github.com/users/mtgap/events{/privacy}","received_events_url":"https://api.github.com/users/mtgap/received_events","type":"user","site_admin":false},"created_at":"2013-01-04t22:01:16z","updated_at":"2013-01-04t22:01:16z","body":"even though i did get two :+1: i still want to keep this open for testing and further review.\r\n\r\ni also need feedback on the next steps i listed."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/11905976","html_url":"https://github.com/owncloud/core/pull/1079#issuecomment-11905976","issue_url":"https://api.github.com/repos/owncloud/core/issues/1079","id":11905976,"user":{"login":"tanghus","id":533222,"avatar_url":"https://gravatar.com/avatar/e625b634822713b2e346ff7c67d26775?d=https%3a%2f%2fidenticons.github.com%2f6d9c90af1c12f5a88e4d5f216bbc1979.png&r=x","gravatar_id":"e625b634822713b2e346ff7c67d26775","url":"https://api.github.com/users/tanghus","html_url":"https://github.com/tanghus","followers_url":"https://api.github.com/users/tanghus/followers","following_url":"https://api.github.com/users/tanghus/following{/other_user}","gists_url":"https://api.github.com/users/tanghus/gists{/gist_id}","starred_url":"https://api.github.com/users/tanghus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tanghus/subscriptions","organizations_url":"https://api.github.com/users/tanghus/orgs","repos_url":"https://api.github.com/users/tanghus/repos","events_url":"https://api.github.com/users/tanghus/events{/privacy}","received_events_url":"https://api.github.com/users/tanghus/received_events","type":"user","site_admin":false},"created_at":"2013-01-05t00:17:16z","updated_at":"2013-01-05t00:17:16z","body":"wrt \"more messages from app updates\"\r\n\r\n> apps' update scripts can send back update progress as well by emitting the update hook e.g. oc_hook::emit('update', 'success', 'moved files to new file cache'); \r\n\r\nare there other ways than emitting signals? you write:\r\n\r\n> apps' update scripts can send back update progress as...\r\n\r\na generic example would be great.\r\n\r\n> only allow admin to run the update?\r\n\r\nwouldn't that keep any user stuck with an old config and new code/db structure? from what i can see only allowing admin to update would require a lot more changes. i see this pr as a small, yet elegant, step forward to providing a much better experience both for users and administrators. designing a new upgrade mechanism **before** oc 5 would almost certain ruin our intend of making a smoother .0 release than we had last ;)\r\n\r\n> show formatted version numbers instead of the internal 4.91.#\r\n\r\nhow do we map internal => version? do we at all before release? afaik kde ha(s| d) the same problem, as they're using 5.x library numbers for 4.x releases. how did they solve it?\r\n\r\nalso on the matter of upgrading: some times you can only do upgrades one user at a time, at first login. i have a couple of those for the oc 5 release. is it possible to create general procedures for both system and personal upgrades? for example for contacts in oc 5 there is both indexing of contact data for the [contacts api](https://github.com/owncloud/core/blob/master/lib/public/contacts.php) and indexing groups/tags/categories for the [categories api](https://github.com/owncloud/core/blob/master/lib/vcategories.php).\r\ndoing such updates for all users on first request would grind any server to a halt (was just on irc with a guy wanting to run the server on an ipod...)\r\n\r\nthis is in no way relevant for this pr, just something we should take into consideration for future improvements of the upgrade process.\r\n\r\nmy conclusion: i think you should merge! it's a huge improvement of what we've got now, we have time to iron out any obvious bugs, but we don't have time to implement a whole new upgrading system."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/11906483","html_url":"https://github.com/owncloud/core/pull/1079#issuecomment-11906483","issue_url":"https://api.github.com/repos/owncloud/core/issues/1079","id":11906483,"user":{"login":"mtgap","id":1097106,"avatar_url":"https://gravatar.com/avatar/454a73ee5feeb428d0c163a48903332c?d=https%3a%2f%2fidenticons.github.com%2f52d29a66f285a1d61125dd69ac0766b2.png&r=x","gravatar_id":"454a73ee5feeb428d0c163a48903332c","url":"https://api.github.com/users/mtgap","html_url":"https://github.com/mtgap","followers_url":"https://api.github.com/users/mtgap/followers","following_url":"https://api.github.com/users/mtgap/following{/other_user}","gists_url":"https://api.github.com/users/mtgap/gists{/gist_id}","starred_url":"https://api.github.com/users/mtgap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mtgap/subscriptions","organizations_url":"https://api.github.com/users/mtgap/orgs","repos_url":"https://api.github.com/users/mtgap/repos","events_url":"https://api.github.com/users/mtgap/events{/privacy}","received_events_url":"https://api.github.com/users/mtgap/received_events","type":"user","site_admin":false},"created_at":"2013-01-05t00:44:03z","updated_at":"2013-01-05t00:44:03z","body":"> are there other ways than emitting signals?\r\n\r\nemitting hooks is the way to do it because it just takes one line: oc_hook::emit('update', 'success', 'moved files to new file cache');\r\n\r\ndon't need to check if anyone is listening either. @icewind1991 gets credit for suggesting to do it this way.\r\n\r\ni'm considering admin only because it seems like it would be weird if a user were to navigate to owncloud before the admin and see the update progress while the admin only sees the maintenance page. \r\n\r\nthere isn't much correlation between the internal version and the real version. the old versions might have to be hardcoded based on the old internal versions. i think the issue was doing a 4.5, which wasn't originally planned and we were already on 4.9 internally. we should be alright in the future if we avoid jumping numbers internally too quickly.\r\n\r\ni like the idea of personal updates separated from the core. however, i hope we can avoid these in the future. we seem to have large rewrites often. it may be worthwhile to take up this cause now because of the file cache changes. there's a good chance of timeouts and general unhappiness with updating the file cache in the next release. @icewind1991, @karlitschek  what do you think? should we pursue this? \r\n"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/11907406","html_url":"https://github.com/owncloud/core/pull/1079#issuecomment-11907406","issue_url":"https://api.github.com/repos/owncloud/core/issues/1079","id":11907406,"user":{"login":"icewind1991","id":1283854,"avatar_url":"https://gravatar.com/avatar/7c20f90ca5df67dd2cad22a8e2f80d8f?d=https%3a%2f%2fidenticons.github.com%2fc818423776eba38604496a7caddc0251.png&r=x","gravatar_id":"7c20f90ca5df67dd2cad22a8e2f80d8f","url":"https://api.github.com/users/icewind1991","html_url":"https://github.com/icewind1991","followers_url":"https://api.github.com/users/icewind1991/followers","following_url":"https://api.github.com/users/icewind1991/following{/other_user}","gists_url":"https://api.github.com/users/icewind1991/gists{/gist_id}","starred_url":"https://api.github.com/users/icewind1991/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icewind1991/subscriptions","organizations_url":"https://api.github.com/users/icewind1991/orgs","repos_url":"https://api.github.com/users/icewind1991/repos","events_url":"https://api.github.com/users/icewind1991/events{/privacy}","received_events_url":"https://api.github.com/users/icewind1991/received_events","type":"user","site_admin":false},"created_at":"2013-01-05t01:40:50z","updated_at":"2013-01-05t01:40:50z","body":"the file cache needs a special update mechanism anyway to make sure there upgrade can new run in the background without masking the goes app unsalable. just as the new scanner works\n\nmichael gapczynski <notifications@github.com> wrote:\n\n>are there other ways than emitting signals?\n>\n>emitting hooks is the way to do it because it just takes one line: oc_hook::emit('update', 'success', 'moved files to new file cache');\n>\n>don't need to check if anyone is listening either. @icewind1991 gets credit for suggesting to do it this way.\n>\n>i'm considering admin only because it seems like it would be weird if a user were to navigate to owncloud before the admin and see the update progress while the admin only sees the maintenance page. \n>\n>there isn't much correlation between the internal version and the real version. the old versions might have to be hardcoded based on the old internal versions. i think the issue was doing a 4.5, which wasn't originally planned and we were already on 4.9 internally. we should be alright in the future if we avoid jumping numbers internally too quickly.\n>\n>i like the idea of personal updates separated from the core. however, i hope we can avoid these in the future. we seem to have large rewrites often. it may be worthwhile to take up this cause now because of the file cache changes. there's a good chance of timeouts and general unhappiness with updating the file cache in the next release. @icewind1991, @karlitschek what do you think? should we pursue this? \n>\n>—\n>reply to this email directly or view it on github. \n>\n>￼ "},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/11913596","html_url":"https://github.com/owncloud/core/pull/1079#issuecomment-11913596","issue_url":"https://api.github.com/repos/owncloud/core/issues/1079","id":11913596,"user":{"login":"bartv2","id":2227877,"avatar_url":"https://gravatar.com/avatar/c2d86a0a66a4be2c904e24034e842f44?d=https%3a%2f%2fidenticons.github.com%2f05e8b1362feb118a386dfd282b20fb84.png&r=x","gravatar_id":"c2d86a0a66a4be2c904e24034e842f44","url":"https://api.github.com/users/bartv2","html_url":"https://github.com/bartv2","followers_url":"https://api.github.com/users/bartv2/followers","following_url":"https://api.github.com/users/bartv2/following{/other_user}","gists_url":"https://api.github.com/users/bartv2/gists{/gist_id}","starred_url":"https://api.github.com/users/bartv2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bartv2/subscriptions","organizations_url":"https://api.github.com/users/bartv2/orgs","repos_url":"https://api.github.com/users/bartv2/repos","events_url":"https://api.github.com/users/bartv2/events{/privacy}","received_events_url":"https://api.github.com/users/bartv2/received_events","type":"user","site_admin":false},"created_at":"2013-01-05t12:49:05z","updated_at":"2013-01-05t12:49:24z","body":"looks good, nothing that can't be done after a merge :+1:"}]