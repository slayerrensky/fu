[{"url":"https://api.github.com/repos/owncloud/core/issues/comments/19692237","html_url":"https://github.com/owncloud/core/pull/3790#issuecomment-19692237","issue_url":"https://api.github.com/repos/owncloud/core/issues/3790","id":19692237,"user":{"login":"owncloud-bot","id":2709266,"avatar_url":"https://gravatar.com/avatar/6e9c466b35bb113112f7401859d614f6?d=https%3a%2f%2fidenticons.github.com%2ffb9254ba3a207c96653361df97807914.png&r=x","gravatar_id":"6e9c466b35bb113112f7401859d614f6","url":"https://api.github.com/users/owncloud-bot","html_url":"https://github.com/owncloud-bot","followers_url":"https://api.github.com/users/owncloud-bot/followers","following_url":"https://api.github.com/users/owncloud-bot/following{/other_user}","gists_url":"https://api.github.com/users/owncloud-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/owncloud-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/owncloud-bot/subscriptions","organizations_url":"https://api.github.com/users/owncloud-bot/orgs","repos_url":"https://api.github.com/users/owncloud-bot/repos","events_url":"https://api.github.com/users/owncloud-bot/events{/privacy}","received_events_url":"https://api.github.com/users/owncloud-bot/received_events","type":"user","site_admin":false},"created_at":"2013-06-19t15:39:01z","updated_at":"2013-06-19t15:39:01z","body":"can one of the admins verify this patch?"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/19693763","html_url":"https://github.com/owncloud/core/pull/3790#issuecomment-19693763","issue_url":"https://api.github.com/repos/owncloud/core/issues/3790","id":19693763,"user":{"login":"schiesbn","id":1589737,"avatar_url":"https://gravatar.com/avatar/8912b598c7b32dd25b87fd168e0b06b2?d=https%3a%2f%2fidenticons.github.com%2f0a323047dbe8329db30eae8dbe96e55e.png&r=x","gravatar_id":"8912b598c7b32dd25b87fd168e0b06b2","url":"https://api.github.com/users/schiesbn","html_url":"https://github.com/schiesbn","followers_url":"https://api.github.com/users/schiesbn/followers","following_url":"https://api.github.com/users/schiesbn/following{/other_user}","gists_url":"https://api.github.com/users/schiesbn/gists{/gist_id}","starred_url":"https://api.github.com/users/schiesbn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schiesbn/subscriptions","organizations_url":"https://api.github.com/users/schiesbn/orgs","repos_url":"https://api.github.com/users/schiesbn/repos","events_url":"https://api.github.com/users/schiesbn/events{/privacy}","received_events_url":"https://api.github.com/users/schiesbn/received_events","type":"user","site_admin":false},"created_at":"2013-06-19t16:00:41z","updated_at":"2013-06-19t16:01:25z","body":"getserverhost() is also used in other apps, e.g. 3rdparty/openid/phpmyid.php.\r\nas far as i understand it getserverhost() should always return the servers host, while the mail domain can be different from the server host.\r\n\r\ni would suggest to read the config value directly where it is needed. if there are more than one place maybe it makes sense to add a getmaildomain() method in util.php."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/19842043","html_url":"https://github.com/owncloud/core/pull/3790#issuecomment-19842043","issue_url":"https://api.github.com/repos/owncloud/core/issues/3790","id":19842043,"user":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false},"created_at":"2013-06-21t21:32:40z","updated_at":"2013-06-21t21:32:40z","body":"@owncloud-bot this is ok to test"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/19842087","html_url":"https://github.com/owncloud/core/pull/3790#issuecomment-19842087","issue_url":"https://api.github.com/repos/owncloud/core/issues/3790","id":19842087,"user":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false},"created_at":"2013-06-21t21:33:42z","updated_at":"2013-06-21t21:33:42z","body":"@igor-pinchuk thanks a lot for your contributions!\r\ncontributions to core repo require a signed contributors agreement: http://owncloud.org/about/contributor-agreement/\r\n\r\nthanks a lot"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/19842441","html_url":"https://github.com/owncloud/core/pull/3790#issuecomment-19842441","issue_url":"https://api.github.com/repos/owncloud/core/issues/3790","id":19842441,"user":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false},"created_at":"2013-06-21t21:41:12z","updated_at":"2013-06-21t21:41:12z","body":"@igor-pinchuk i have to agree to @schiesbn - this is the wrong place to fix the issue.\r\nwhere are you missing the mail domain? thx"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/19865624","html_url":"https://github.com/owncloud/core/pull/3790#issuecomment-19865624","issue_url":"https://api.github.com/repos/owncloud/core/issues/3790","id":19865624,"user":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false},"created_at":"2013-06-22t22:13:30z","updated_at":"2013-06-22t22:13:30z","body":"closing for now until further progress - thx"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/19927979","html_url":"https://github.com/owncloud/core/pull/3790#issuecomment-19927979","issue_url":"https://api.github.com/repos/owncloud/core/issues/3790","id":19927979,"user":{"login":"igor-pinchuk","id":758569,"avatar_url":"https://gravatar.com/avatar/5d5900f505d8d3b8615137727eb01886?d=https%3a%2f%2fidenticons.github.com%2fc91c59f09a1c07980590795bd7f4dc5a.png&r=x","gravatar_id":"5d5900f505d8d3b8615137727eb01886","url":"https://api.github.com/users/igor-pinchuk","html_url":"https://github.com/igor-pinchuk","followers_url":"https://api.github.com/users/igor-pinchuk/followers","following_url":"https://api.github.com/users/igor-pinchuk/following{/other_user}","gists_url":"https://api.github.com/users/igor-pinchuk/gists{/gist_id}","starred_url":"https://api.github.com/users/igor-pinchuk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/igor-pinchuk/subscriptions","organizations_url":"https://api.github.com/users/igor-pinchuk/orgs","repos_url":"https://api.github.com/users/igor-pinchuk/repos","events_url":"https://api.github.com/users/igor-pinchuk/events{/privacy}","received_events_url":"https://api.github.com/users/igor-pinchuk/received_events","type":"user","site_admin":false},"created_at":"2013-06-24t19:01:05z","updated_at":"2013-06-24t19:01:45z","body":"sorry for the late response.\r\n>> where are you missing the mail domain?\r\n\r\nwe use ec2 instance for hosting owncloud. by default all ip-addresses used on ec2 are  blacklisted and most of the emails sent directly via php mail are marked as spam or dropped by remote smtp server.\r\nit is recommended to use amazon simple email service (ses) to reliably send emails from ec2, to use ses one needs first to verify email address ( e.g. name@example.com) or to verify entire domain @example.com.\r\nhttp://aws.amazon.com/ses/\r\n\r\nlets say, host name for owncloud service is owncloud.example.com so owncloud will try to send emails from addresses like lostpassword-noreply@owncloud.example.com (there are at least two more emails: sharing-noreply@, security-noreply@)\r\n\r\nwe have two options to allow owncloud sending emails from ec2 instance via ses:\r\n1. verify all addresses used by owncloud - this is not an option for us because first we have to create these emails or aliases to receive verification emails from ses, also some addresses can be missed or new addresses can appear in newer versions.\r\n2. use ses verified domain @example.com instead of @owncloud.example.com to send email.\r\n\r\noption 2 is preferable for us as we already have ses verified @example.com domain that is used by other services.\r\n\r\nthe problem is that configuration option 'mail_domain' that should substitute domain part in outgoing emails  is not working.\r\n\r\nafter reviewing the code i found a better place for determining email's domain part.\r\nin lib/public/util.php we can change getdefaultemailaddress method like these:\r\n\r\n        public static function getdefaultemailaddress($user_part) {\r\n                $host_name = \\oc_config::getvalue( 'mail_domain', self::getserverhostname());\r\n                $defaultemailaddress = $user_part.'@'.$host_name;\r\n\r\n                if (\\oc_mail::validateaddress($defaultemailaddress)) {\r\n                        return $defaultemailaddress;\r\n                }\r\n\r\n                // in case we cannot build a valid email address from the hostname let's fallback to 'localhost.localdomain'\r\n                return $user_part.'@localhost.localdomain';\r\n        }\r\n\r\nthis method is used for forming email address only and should not influence other features."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/19928970","html_url":"https://github.com/owncloud/core/pull/3790#issuecomment-19928970","issue_url":"https://api.github.com/repos/owncloud/core/issues/3790","id":19928970,"user":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false},"created_at":"2013-06-24t19:15:50z","updated_at":"2013-06-24t19:15:50z","body":"ok. please open a new pull request and close this one.\n\nthx"}]