[{"url":"https://api.github.com/repos/owncloud/core/issues/comments/24496081","html_url":"https://github.com/owncloud/core/issues/4866#issuecomment-24496081","issue_url":"https://api.github.com/repos/owncloud/core/issues/4866","id":24496081,"user":{"login":"blizzz","id":2184312,"avatar_url":"https://gravatar.com/avatar/1898b25a9cb3aa1a0f0febd1359910b9?d=https%3a%2f%2fidenticons.github.com%2fca03acec6deadf508b75eb0cf9ba036c.png&r=x","gravatar_id":"1898b25a9cb3aa1a0f0febd1359910b9","url":"https://api.github.com/users/blizzz","html_url":"https://github.com/blizzz","followers_url":"https://api.github.com/users/blizzz/followers","following_url":"https://api.github.com/users/blizzz/following{/other_user}","gists_url":"https://api.github.com/users/blizzz/gists{/gist_id}","starred_url":"https://api.github.com/users/blizzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blizzz/subscriptions","organizations_url":"https://api.github.com/users/blizzz/orgs","repos_url":"https://api.github.com/users/blizzz/repos","events_url":"https://api.github.com/users/blizzz/events{/privacy}","received_events_url":"https://api.github.com/users/blizzz/received_events","type":"user","site_admin":false},"created_at":"2013-09-16t08:48:13z","updated_at":"2013-09-16t08:48:13z","body":"@icewind1991 "},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/24496322","html_url":"https://github.com/owncloud/core/issues/4866#issuecomment-24496322","issue_url":"https://api.github.com/repos/owncloud/core/issues/4866","id":24496322,"user":{"login":"blizzz","id":2184312,"avatar_url":"https://gravatar.com/avatar/1898b25a9cb3aa1a0f0febd1359910b9?d=https%3a%2f%2fidenticons.github.com%2fca03acec6deadf508b75eb0cf9ba036c.png&r=x","gravatar_id":"1898b25a9cb3aa1a0f0febd1359910b9","url":"https://api.github.com/users/blizzz","html_url":"https://github.com/blizzz","followers_url":"https://api.github.com/users/blizzz/followers","following_url":"https://api.github.com/users/blizzz/following{/other_user}","gists_url":"https://api.github.com/users/blizzz/gists{/gist_id}","starred_url":"https://api.github.com/users/blizzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blizzz/subscriptions","organizations_url":"https://api.github.com/users/blizzz/orgs","repos_url":"https://api.github.com/users/blizzz/repos","events_url":"https://api.github.com/users/blizzz/events{/privacy}","received_events_url":"https://api.github.com/users/blizzz/received_events","type":"user","site_admin":false},"created_at":"2013-09-16t08:53:17z","updated_at":"2013-09-16t08:53:17z","body":"on my production server (5.0.11, original install was, i believe, 4.0 series) it looks like this:\r\n\r\n```\r\nmysql> select count(*) from filecache where etag != ' ';\r\n+----------+\r\n| count(*) |\r\n+----------+\r\n|     6631 |\r\n+----------+\r\n\r\n> select count(*) from filecache where etag = '';\r\n+----------+\r\n| count(*) |\r\n+----------+\r\n|     2002 |\r\n+----------+\r\n\r\n\r\nselect count(*) from filecache;\r\n+----------+\r\n| count(*) |\r\n+----------+\r\n|     8633 |\r\n+----------+\r\n```\r\n"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/24496402","html_url":"https://github.com/owncloud/core/issues/4866#issuecomment-24496402","issue_url":"https://api.github.com/repos/owncloud/core/issues/4866","id":24496402,"user":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false},"created_at":"2013-09-16t08:54:48z","updated_at":"2013-09-16t08:54:48z","body":"[10:51:18] <deepdiver> which entries have no etag? random or any pattern recognizable?\r\n[10:52:52] <deepdiver> are these entries still pointing to existing files/folders?"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/24497105","html_url":"https://github.com/owncloud/core/issues/4866#issuecomment-24497105","issue_url":"https://api.github.com/repos/owncloud/core/issues/4866","id":24497105,"user":{"login":"blizzz","id":2184312,"avatar_url":"https://gravatar.com/avatar/1898b25a9cb3aa1a0f0febd1359910b9?d=https%3a%2f%2fidenticons.github.com%2fca03acec6deadf508b75eb0cf9ba036c.png&r=x","gravatar_id":"1898b25a9cb3aa1a0f0febd1359910b9","url":"https://api.github.com/users/blizzz","html_url":"https://github.com/blizzz","followers_url":"https://api.github.com/users/blizzz/followers","following_url":"https://api.github.com/users/blizzz/following{/other_user}","gists_url":"https://api.github.com/users/blizzz/gists{/gist_id}","starred_url":"https://api.github.com/users/blizzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blizzz/subscriptions","organizations_url":"https://api.github.com/users/blizzz/orgs","repos_url":"https://api.github.com/users/blizzz/repos","events_url":"https://api.github.com/users/blizzz/events{/privacy}","received_events_url":"https://api.github.com/users/blizzz/received_events","type":"user","site_admin":false},"created_at":"2013-09-16t09:08:58z","updated_at":"2013-09-16t09:08:58z","body":"> [10:51:18] which entries have no etag? random or any pattern recognizable?\r\n\r\nrandom pattern.  files, folders, simple text files,  media files, anything.\r\n\r\n>  [10:52:52] are these entries still pointing to existing files/folders?\r\n\r\ncannot say that all are pointing to existing files/folders, but definitely some do!\r\n\r\nlatest mtime of those is june 9th this year."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/24499120","html_url":"https://github.com/owncloud/core/issues/4866#issuecomment-24499120","issue_url":"https://api.github.com/repos/owncloud/core/issues/4866","id":24499120,"user":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false},"created_at":"2013-09-16t09:49:35z","updated_at":"2013-09-16t09:49:35z","body":"i'm pretty sure this is a migration issue from previous versions of owncloud.\r\nthe legacy code to get the etag contains code patch where the etag can be empty:\r\nhttps://github.com/owncloud/core/blob/master/lib/files/cache/legacy.php#l99\r\nhttps://github.com/owncloud/core/blob/master/lib/files/cache/legacy.php#l118\r\n\r\n "},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/24499189","html_url":"https://github.com/owncloud/core/issues/4866#issuecomment-24499189","issue_url":"https://api.github.com/repos/owncloud/core/issues/4866","id":24499189,"user":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false},"created_at":"2013-09-16t09:50:52z","updated_at":"2013-09-16t09:50:52z","body":"i see following tasks:\r\n- [ ] add migration script to fill all empty etags\r\n- [ ] add scanner capabilities to recreate etag if empty"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/24501867","html_url":"https://github.com/owncloud/core/issues/4866#issuecomment-24501867","issue_url":"https://api.github.com/repos/owncloud/core/issues/4866","id":24501867,"user":{"login":"blizzz","id":2184312,"avatar_url":"https://gravatar.com/avatar/1898b25a9cb3aa1a0f0febd1359910b9?d=https%3a%2f%2fidenticons.github.com%2fca03acec6deadf508b75eb0cf9ba036c.png&r=x","gravatar_id":"1898b25a9cb3aa1a0f0febd1359910b9","url":"https://api.github.com/users/blizzz","html_url":"https://github.com/blizzz","followers_url":"https://api.github.com/users/blizzz/followers","following_url":"https://api.github.com/users/blizzz/following{/other_user}","gists_url":"https://api.github.com/users/blizzz/gists{/gist_id}","starred_url":"https://api.github.com/users/blizzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blizzz/subscriptions","organizations_url":"https://api.github.com/users/blizzz/orgs","repos_url":"https://api.github.com/users/blizzz/repos","events_url":"https://api.github.com/users/blizzz/events{/privacy}","received_events_url":"https://api.github.com/users/blizzz/received_events","type":"user","site_admin":false},"created_at":"2013-09-16t10:48:25z","updated_at":"2013-09-16t10:48:25z","body":"with https://github.com/owncloud/core/pull/4869 files without etag are down to 551. those that are left does not exists or are not accessible (files inside a zip archive) or are an external webdav mount, which is deactivated now. "},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/26256933","html_url":"https://github.com/owncloud/core/issues/4866#issuecomment-26256933","issue_url":"https://api.github.com/repos/owncloud/core/issues/4866","id":26256933,"user":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false},"created_at":"2013-10-14t14:03:02z","updated_at":"2013-10-14t14:03:02z","body":"from my point of view fixed with https://github.com/owncloud/core/pull/4869\r\n@dragotin @blizzz agreed?"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/26277008","html_url":"https://github.com/owncloud/core/issues/4866#issuecomment-26277008","issue_url":"https://api.github.com/repos/owncloud/core/issues/4866","id":26277008,"user":{"login":"dragotin","id":1070214,"avatar_url":"https://gravatar.com/avatar/af829234b31fb915704c1c65ef48eee0?d=https%3a%2f%2fidenticons.github.com%2f3392afab7f424e10623ba95a941f4d34.png&r=x","gravatar_id":"af829234b31fb915704c1c65ef48eee0","url":"https://api.github.com/users/dragotin","html_url":"https://github.com/dragotin","followers_url":"https://api.github.com/users/dragotin/followers","following_url":"https://api.github.com/users/dragotin/following{/other_user}","gists_url":"https://api.github.com/users/dragotin/gists{/gist_id}","starred_url":"https://api.github.com/users/dragotin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dragotin/subscriptions","organizations_url":"https://api.github.com/users/dragotin/orgs","repos_url":"https://api.github.com/users/dragotin/repos","events_url":"https://api.github.com/users/dragotin/events{/privacy}","received_events_url":"https://api.github.com/users/dragotin/received_events","type":"user","site_admin":false},"created_at":"2013-10-14t18:22:36z","updated_at":"2013-10-14t18:22:36z","body":"yes, generally i agree, even if i don't fully understand the submit request code. \r\n\r\ncore thing: there should never ever be empty etags. if there are empty etags, they should be generated at the time somebody is asking for it. thanks!"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/26610987","html_url":"https://github.com/owncloud/core/issues/4866#issuecomment-26610987","issue_url":"https://api.github.com/repos/owncloud/core/issues/4866","id":26610987,"user":{"login":"karlitschek","id":867445,"avatar_url":"https://gravatar.com/avatar/87ce2b4531ee1a0c32b50e0d8f049224?d=https%3a%2f%2fidenticons.github.com%2f06e7098636caebfc9c30c9f52eb905df.png&r=x","gravatar_id":"87ce2b4531ee1a0c32b50e0d8f049224","url":"https://api.github.com/users/karlitschek","html_url":"https://github.com/karlitschek","followers_url":"https://api.github.com/users/karlitschek/followers","following_url":"https://api.github.com/users/karlitschek/following{/other_user}","gists_url":"https://api.github.com/users/karlitschek/gists{/gist_id}","starred_url":"https://api.github.com/users/karlitschek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karlitschek/subscriptions","organizations_url":"https://api.github.com/users/karlitschek/orgs","repos_url":"https://api.github.com/users/karlitschek/repos","events_url":"https://api.github.com/users/karlitschek/events{/privacy}","received_events_url":"https://api.github.com/users/karlitschek/received_events","type":"user","site_admin":false},"created_at":"2013-10-18t16:44:48z","updated_at":"2013-10-18t16:44:48z","body":"fixed"}]