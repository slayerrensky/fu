[{"url":"https://api.github.com/repos/owncloud/core/issues/comments/20580663","html_url":"https://github.com/owncloud/core/pull/3969#issuecomment-20580663","issue_url":"https://api.github.com/repos/owncloud/core/issues/3969","id":20580663,"user":{"login":"mtgap","id":1097106,"avatar_url":"https://gravatar.com/avatar/454a73ee5feeb428d0c163a48903332c?d=https%3a%2f%2fidenticons.github.com%2f52d29a66f285a1d61125dd69ac0766b2.png&r=x","gravatar_id":"454a73ee5feeb428d0c163a48903332c","url":"https://api.github.com/users/mtgap","html_url":"https://github.com/mtgap","followers_url":"https://api.github.com/users/mtgap/followers","following_url":"https://api.github.com/users/mtgap/following{/other_user}","gists_url":"https://api.github.com/users/mtgap/gists{/gist_id}","starred_url":"https://api.github.com/users/mtgap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mtgap/subscriptions","organizations_url":"https://api.github.com/users/mtgap/orgs","repos_url":"https://api.github.com/users/mtgap/repos","events_url":"https://api.github.com/users/mtgap/events{/privacy}","received_events_url":"https://api.github.com/users/mtgap/received_events","type":"user","site_admin":false},"created_at":"2013-07-08t00:29:25z","updated_at":"2013-07-08t00:29:25z","body":"@karlitschek @icewind1991 @bartv2 @raydiation @deepdiver1975 "},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/20640500","html_url":"https://github.com/owncloud/core/pull/3969#issuecomment-20640500","issue_url":"https://api.github.com/repos/owncloud/core/issues/3969","id":20640500,"user":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false},"created_at":"2013-07-08t22:18:30z","updated_at":"2013-07-08t22:18:30z","body":"@mtgap what about the pubic api? do you provide a compatibility layer? "},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/20640789","html_url":"https://github.com/owncloud/core/pull/3969#issuecomment-20640789","issue_url":"https://api.github.com/repos/owncloud/core/issues/3969","id":20640789,"user":{"login":"mtgap","id":1097106,"avatar_url":"https://gravatar.com/avatar/454a73ee5feeb428d0c163a48903332c?d=https%3a%2f%2fidenticons.github.com%2f52d29a66f285a1d61125dd69ac0766b2.png&r=x","gravatar_id":"454a73ee5feeb428d0c163a48903332c","url":"https://api.github.com/users/mtgap","html_url":"https://github.com/mtgap","followers_url":"https://api.github.com/users/mtgap/followers","following_url":"https://api.github.com/users/mtgap/following{/other_user}","gists_url":"https://api.github.com/users/mtgap/gists{/gist_id}","starred_url":"https://api.github.com/users/mtgap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mtgap/subscriptions","organizations_url":"https://api.github.com/users/mtgap/orgs","repos_url":"https://api.github.com/users/mtgap/repos","events_url":"https://api.github.com/users/mtgap/events{/privacy}","received_events_url":"https://api.github.com/users/mtgap/received_events","type":"user","site_admin":false},"created_at":"2013-07-08t22:23:52z","updated_at":"2013-07-08t22:23:52z","body":"> @mtgap what about the pubic api? do you provide a compatibility layer?\r\n\r\nno, i see no need to do that, because i was the main person to integrate it with apps originally anyways. it will only cause more pain."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/20641084","html_url":"https://github.com/owncloud/core/pull/3969#issuecomment-20641084","issue_url":"https://api.github.com/repos/owncloud/core/issues/3969","id":20641084,"user":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false},"created_at":"2013-07-08t22:29:46z","updated_at":"2013-07-08t22:29:46z","body":"> no, i see no need to do that,\r\n\r\nwell - we have no clue on which and how many apps exist out there relying on the public api.\r\nbreaking the api that way is very unkind and can cause many mad dev to scream at us."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/20800338","html_url":"https://github.com/owncloud/core/pull/3969#issuecomment-20800338","issue_url":"https://api.github.com/repos/owncloud/core/issues/3969","id":20800338,"user":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false},"created_at":"2013-07-11t09:39:13z","updated_at":"2013-07-11t09:39:13z","body":"@owncloud-bot retest this please"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/20820488","html_url":"https://github.com/owncloud/core/pull/3969#issuecomment-20820488","issue_url":"https://api.github.com/repos/owncloud/core/issues/3969","id":20820488,"user":{"login":"schiesbn","id":1589737,"avatar_url":"https://gravatar.com/avatar/8912b598c7b32dd25b87fd168e0b06b2?d=https%3a%2f%2fidenticons.github.com%2f0a323047dbe8329db30eae8dbe96e55e.png&r=x","gravatar_id":"8912b598c7b32dd25b87fd168e0b06b2","url":"https://api.github.com/users/schiesbn","html_url":"https://github.com/schiesbn","followers_url":"https://api.github.com/users/schiesbn/followers","following_url":"https://api.github.com/users/schiesbn/following{/other_user}","gists_url":"https://api.github.com/users/schiesbn/gists{/gist_id}","starred_url":"https://api.github.com/users/schiesbn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schiesbn/subscriptions","organizations_url":"https://api.github.com/users/schiesbn/orgs","repos_url":"https://api.github.com/users/schiesbn/repos","events_url":"https://api.github.com/users/schiesbn/events{/privacy}","received_events_url":"https://api.github.com/users/schiesbn/received_events","type":"user","site_admin":false},"created_at":"2013-07-11t15:37:33z","updated_at":"2013-07-11t15:37:33z","body":"i tried to play a bit around with this branch. but i realized that all calls still go through lib/public/share.php. if i understood you correctly this file will be gone in the final version. so at the moment there is nothing which could be really tested and where we could play around, right?\r\n\r\nwhat are you plans regarding the public api? as tom, i'm not sure if i like the idea to break compatibility here. stability is the main purpose of the public api. for example the encryption app depends highly on lib/public/share.php to find out who has access to a given file, no matter to whom the file belongs. how will this work in the future? \r\nit would be really important to know this as early as possible to know what needs to be done if the api really breaks. we have at least 4 important apps which needs to be adjusted (files, contacts, calendar and encryption). this could be a lot of work, not only to migrate but also to stabilize the code again.\r\n\r\non remark on your definitions in the wiki. you describe share type as \"user\" , \"group\", \"link\", \"email address\". email doesn't really fit in here. it is just a way to transport the link, this doesn't really matter here. i would say that share types are only \"user\", \"group\" and \"link\" (maybe \"public\" would be a even better name).\r\n\r\ngenerally i like the new structure even if i'm not completely sure if i already understood all the details how the components play together and how the new public api will fit in. what is your estimation, when will we have a first version where we can test some stuff in the real world?"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/20824448","html_url":"https://github.com/owncloud/core/pull/3969#issuecomment-20824448","issue_url":"https://api.github.com/repos/owncloud/core/issues/3969","id":20824448,"user":{"login":"karlitschek","id":867445,"avatar_url":"https://gravatar.com/avatar/87ce2b4531ee1a0c32b50e0d8f049224?d=https%3a%2f%2fidenticons.github.com%2f06e7098636caebfc9c30c9f52eb905df.png&r=x","gravatar_id":"87ce2b4531ee1a0c32b50e0d8f049224","url":"https://api.github.com/users/karlitschek","html_url":"https://github.com/karlitschek","followers_url":"https://api.github.com/users/karlitschek/followers","following_url":"https://api.github.com/users/karlitschek/following{/other_user}","gists_url":"https://api.github.com/users/karlitschek/gists{/gist_id}","starred_url":"https://api.github.com/users/karlitschek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karlitschek/subscriptions","organizations_url":"https://api.github.com/users/karlitschek/orgs","repos_url":"https://api.github.com/users/karlitschek/repos","events_url":"https://api.github.com/users/karlitschek/events{/privacy}","received_events_url":"https://api.github.com/users/karlitschek/received_events","type":"user","site_admin":false},"created_at":"2013-07-11t16:30:19z","updated_at":"2013-07-11t16:30:19z","body":"the idea behind this restructuring of the shareing code was, well to restructure it but to not change the logic itself, the database structure or the api.\r\ni'm sure that everybody who was involved in stabilizing the existing sharing in the last 12 month agrees with me that starting from scratch would be horror. i'm not going to agree to breaking everything that we have today.\r\n\r\n@mtgap what do you suggest? \r\n\r\nfrank"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/20829518","html_url":"https://github.com/owncloud/core/pull/3969#issuecomment-20829518","issue_url":"https://api.github.com/repos/owncloud/core/issues/3969","id":20829518,"user":{"login":"mtgap","id":1097106,"avatar_url":"https://gravatar.com/avatar/454a73ee5feeb428d0c163a48903332c?d=https%3a%2f%2fidenticons.github.com%2f52d29a66f285a1d61125dd69ac0766b2.png&r=x","gravatar_id":"454a73ee5feeb428d0c163a48903332c","url":"https://api.github.com/users/mtgap","html_url":"https://github.com/mtgap","followers_url":"https://api.github.com/users/mtgap/followers","following_url":"https://api.github.com/users/mtgap/following{/other_user}","gists_url":"https://api.github.com/users/mtgap/gists{/gist_id}","starred_url":"https://api.github.com/users/mtgap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mtgap/subscriptions","organizations_url":"https://api.github.com/users/mtgap/orgs","repos_url":"https://api.github.com/users/mtgap/repos","events_url":"https://api.github.com/users/mtgap/events{/privacy}","received_events_url":"https://api.github.com/users/mtgap/received_events","type":"user","site_admin":false},"created_at":"2013-07-11t17:53:54z","updated_at":"2013-07-11t17:53:54z","body":"> i tried to play a bit around with this branch. but i realized that all calls still go through lib/public/share.php. if i understood you correctly this file will be gone in the final version. so at the moment there is nothing which could be really tested and where we could play around, right?\r\n\r\nas i said in the description, this was only opened for code review and tracking progress of all of the tasks that you mentioned. all of the tasks are already listed and as usual will be completed by me.\r\n\r\n> what is your estimation, when will we have a first version where we can test some stuff in the real world?\r\n\r\nprobably by the end of the month. \r\n\r\n> the idea behind this restructuring of the shareing code was, well to restructure it but to not change the logic itself, the database structure or the api.\r\n\r\ni understand that it doesn't look like the same logic, but it is the same exact model, definitions, and flow for sharing content. changing the database was a consequence of realizing the necessity of storing multiple parent references for reshares as mentioned in the description. that was not in the original plan for this rewrite and i spent days trying to avoid it, in the end it is the only major design difference. at that point, i decided i might as well restructure the database layout to something proper because i would have to do an update anyways. \r\n\r\n> i'm sure that everybody who was involved in stabilizing the existing sharing in the last 12 month agrees with me that starting from scratch would be horror. i'm not going to agree to breaking everything that we have today.\r\n\r\ni don't believe that's fair to say, when there were only a few occasions of others contributing to the code. the code is at 95% code coverage and acceptance tests will come when i tie it into the ui - nothing should break. the tests for sharing now represent 25% of the tests run for core - this will become one of the most stable parts of owncloud. all with the hope that the bus factor will not be an issue in the future.\r\n"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/21655429","html_url":"https://github.com/owncloud/core/pull/3969#issuecomment-21655429","issue_url":"https://api.github.com/repos/owncloud/core/issues/3969","id":21655429,"user":{"login":"owncloud-bot","id":2709266,"avatar_url":"https://gravatar.com/avatar/6e9c466b35bb113112f7401859d614f6?d=https%3a%2f%2fidenticons.github.com%2ffb9254ba3a207c96653361df97807914.png&r=x","gravatar_id":"6e9c466b35bb113112f7401859d614f6","url":"https://api.github.com/users/owncloud-bot","html_url":"https://github.com/owncloud-bot","followers_url":"https://api.github.com/users/owncloud-bot/followers","following_url":"https://api.github.com/users/owncloud-bot/following{/other_user}","gists_url":"https://api.github.com/users/owncloud-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/owncloud-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/owncloud-bot/subscriptions","organizations_url":"https://api.github.com/users/owncloud-bot/orgs","repos_url":"https://api.github.com/users/owncloud-bot/repos","events_url":"https://api.github.com/users/owncloud-bot/events{/privacy}","received_events_url":"https://api.github.com/users/owncloud-bot/received_events","type":"user","site_admin":false},"created_at":"2013-07-27t00:12:06z","updated_at":"2013-07-27t00:12:06z","body":"test **failed**.\nrefer to this link for build results: https://ci.owncloud.org/job/pull-request-analyser/225/"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/21801217","html_url":"https://github.com/owncloud/core/pull/3969#issuecomment-21801217","issue_url":"https://api.github.com/repos/owncloud/core/issues/3969","id":21801217,"user":{"login":"owncloud-bot","id":2709266,"avatar_url":"https://gravatar.com/avatar/6e9c466b35bb113112f7401859d614f6?d=https%3a%2f%2fidenticons.github.com%2ffb9254ba3a207c96653361df97807914.png&r=x","gravatar_id":"6e9c466b35bb113112f7401859d614f6","url":"https://api.github.com/users/owncloud-bot","html_url":"https://github.com/owncloud-bot","followers_url":"https://api.github.com/users/owncloud-bot/followers","following_url":"https://api.github.com/users/owncloud-bot/following{/other_user}","gists_url":"https://api.github.com/users/owncloud-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/owncloud-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/owncloud-bot/subscriptions","organizations_url":"https://api.github.com/users/owncloud-bot/orgs","repos_url":"https://api.github.com/users/owncloud-bot/repos","events_url":"https://api.github.com/users/owncloud-bot/events{/privacy}","received_events_url":"https://api.github.com/users/owncloud-bot/received_events","type":"user","site_admin":false},"created_at":"2013-07-30t15:54:54z","updated_at":"2013-07-30t15:54:54z","body":"test **failed**.\nrefer to this link for build results: https://ci.owncloud.org/job/pull-request-analyser/274/"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/21801223","html_url":"https://github.com/owncloud/core/pull/3969#issuecomment-21801223","issue_url":"https://api.github.com/repos/owncloud/core/issues/3969","id":21801223,"user":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false},"created_at":"2013-07-30t15:54:57z","updated_at":"2013-07-30t15:54:57z","body":"assuming we accept the database changes:\r\nwhere is the migration code to transfer existing shares to the new structures?\r\n\r\ni hope this has been planned and is possible with a coverage of 100%.\r\n\r\nour users will not accept data loss in this area."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/21801298","html_url":"https://github.com/owncloud/core/pull/3969#issuecomment-21801298","issue_url":"https://api.github.com/repos/owncloud/core/issues/3969","id":21801298,"user":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false},"created_at":"2013-07-30t15:56:05z","updated_at":"2013-07-30t15:56:05z","body":"in addition i'm missing indices on the new tables"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/21803081","html_url":"https://github.com/owncloud/core/pull/3969#issuecomment-21803081","issue_url":"https://api.github.com/repos/owncloud/core/issues/3969","id":21803081,"user":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false},"created_at":"2013-07-30t16:20:39z","updated_at":"2013-07-30t16:20:39z","body":"@mtgap my comments above regarding proper namespace in phpdoc comments apply to various places - please adopt accordingly.\r\n\r\ngenerally speaking i like the way this is all coded - nice job.\r\ni hope we can get all the remaining open issues resolved and merge this to oc6.\r\n\r\n"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/21887453","html_url":"https://github.com/owncloud/core/pull/3969#issuecomment-21887453","issue_url":"https://api.github.com/repos/owncloud/core/issues/3969","id":21887453,"user":{"login":"owncloud-bot","id":2709266,"avatar_url":"https://gravatar.com/avatar/6e9c466b35bb113112f7401859d614f6?d=https%3a%2f%2fidenticons.github.com%2ffb9254ba3a207c96653361df97807914.png&r=x","gravatar_id":"6e9c466b35bb113112f7401859d614f6","url":"https://api.github.com/users/owncloud-bot","html_url":"https://github.com/owncloud-bot","followers_url":"https://api.github.com/users/owncloud-bot/followers","following_url":"https://api.github.com/users/owncloud-bot/following{/other_user}","gists_url":"https://api.github.com/users/owncloud-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/owncloud-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/owncloud-bot/subscriptions","organizations_url":"https://api.github.com/users/owncloud-bot/orgs","repos_url":"https://api.github.com/users/owncloud-bot/repos","events_url":"https://api.github.com/users/owncloud-bot/events{/privacy}","received_events_url":"https://api.github.com/users/owncloud-bot/received_events","type":"user","site_admin":false},"created_at":"2013-07-31t19:08:58z","updated_at":"2013-07-31t19:08:58z","body":"test **failed**.\nrefer to this link for build results: https://ci.owncloud.org/job/pull-request-analyser/290/"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/21902247","html_url":"https://github.com/owncloud/core/pull/3969#issuecomment-21902247","issue_url":"https://api.github.com/repos/owncloud/core/issues/3969","id":21902247,"user":{"login":"owncloud-bot","id":2709266,"avatar_url":"https://gravatar.com/avatar/6e9c466b35bb113112f7401859d614f6?d=https%3a%2f%2fidenticons.github.com%2ffb9254ba3a207c96653361df97807914.png&r=x","gravatar_id":"6e9c466b35bb113112f7401859d614f6","url":"https://api.github.com/users/owncloud-bot","html_url":"https://github.com/owncloud-bot","followers_url":"https://api.github.com/users/owncloud-bot/followers","following_url":"https://api.github.com/users/owncloud-bot/following{/other_user}","gists_url":"https://api.github.com/users/owncloud-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/owncloud-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/owncloud-bot/subscriptions","organizations_url":"https://api.github.com/users/owncloud-bot/orgs","repos_url":"https://api.github.com/users/owncloud-bot/repos","events_url":"https://api.github.com/users/owncloud-bot/events{/privacy}","received_events_url":"https://api.github.com/users/owncloud-bot/received_events","type":"user","site_admin":false},"created_at":"2013-07-31t22:52:46z","updated_at":"2013-07-31t22:52:46z","body":"test **failed**.\nrefer to this link for build results: https://ci.owncloud.org/job/pull-request-analyser/295/"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/21909835","html_url":"https://github.com/owncloud/core/pull/3969#issuecomment-21909835","issue_url":"https://api.github.com/repos/owncloud/core/issues/3969","id":21909835,"user":{"login":"owncloud-bot","id":2709266,"avatar_url":"https://gravatar.com/avatar/6e9c466b35bb113112f7401859d614f6?d=https%3a%2f%2fidenticons.github.com%2ffb9254ba3a207c96653361df97807914.png&r=x","gravatar_id":"6e9c466b35bb113112f7401859d614f6","url":"https://api.github.com/users/owncloud-bot","html_url":"https://github.com/owncloud-bot","followers_url":"https://api.github.com/users/owncloud-bot/followers","following_url":"https://api.github.com/users/owncloud-bot/following{/other_user}","gists_url":"https://api.github.com/users/owncloud-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/owncloud-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/owncloud-bot/subscriptions","organizations_url":"https://api.github.com/users/owncloud-bot/orgs","repos_url":"https://api.github.com/users/owncloud-bot/repos","events_url":"https://api.github.com/users/owncloud-bot/events{/privacy}","received_events_url":"https://api.github.com/users/owncloud-bot/received_events","type":"user","site_admin":false},"created_at":"2013-08-01t02:14:49z","updated_at":"2013-08-01t02:14:49z","body":"test **failed**.\nrefer to this link for build results: https://ci.owncloud.org/job/pull-request-analyser/296/"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/21980674","html_url":"https://github.com/owncloud/core/pull/3969#issuecomment-21980674","issue_url":"https://api.github.com/repos/owncloud/core/issues/3969","id":21980674,"user":{"login":"mtgap","id":1097106,"avatar_url":"https://gravatar.com/avatar/454a73ee5feeb428d0c163a48903332c?d=https%3a%2f%2fidenticons.github.com%2f52d29a66f285a1d61125dd69ac0766b2.png&r=x","gravatar_id":"454a73ee5feeb428d0c163a48903332c","url":"https://api.github.com/users/mtgap","html_url":"https://github.com/mtgap","followers_url":"https://api.github.com/users/mtgap/followers","following_url":"https://api.github.com/users/mtgap/following{/other_user}","gists_url":"https://api.github.com/users/mtgap/gists{/gist_id}","starred_url":"https://api.github.com/users/mtgap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mtgap/subscriptions","organizations_url":"https://api.github.com/users/mtgap/orgs","repos_url":"https://api.github.com/users/mtgap/repos","events_url":"https://api.github.com/users/mtgap/events{/privacy}","received_events_url":"https://api.github.com/users/mtgap/received_events","type":"user","site_admin":false},"created_at":"2013-08-02t01:03:44z","updated_at":"2013-08-02t01:03:44z","body":"i decided to give backward compatibility a shot, but a few minutes in i realized that i can just leave everything there and it will still work. i'll leave the old share javascript so that the old dialog will continue to function as well.\r\n\r\nso the only potential of things being 'broken' is an app calling the old share methods for a different app's content that is ported to the new share api. they won't get any new shares in this scenario. \r\n\r\ni'm a little behind on my schedule, because i'm having trouble implementing @jancborchardt's complicated sharing dialog design changes. i'll try to do the basics for now so people can test it, won't be very exciting though. "},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22007808","html_url":"https://github.com/owncloud/core/pull/3969#issuecomment-22007808","issue_url":"https://api.github.com/repos/owncloud/core/issues/3969","id":22007808,"user":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false},"created_at":"2013-08-02t14:08:42z","updated_at":"2013-08-02t14:08:42z","body":"> i'm a little behind on my schedule, because i'm having trouble implementing @jancborchardt's complicated sharing dialog design changes.\r\n\r\ncan we have this on another pull request? divide and conquer is the rule!"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22008051","html_url":"https://github.com/owncloud/core/pull/3969#issuecomment-22008051","issue_url":"https://api.github.com/repos/owncloud/core/issues/3969","id":22008051,"user":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false},"created_at":"2013-08-02t14:12:30z","updated_at":"2013-08-02t14:12:30z","body":"@mtgap are you aware the fact that your sql statements are broken on sqlite, pg and oracle?\r\n\r\ni'm sorry to say but this is not looking very promising."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22008491","html_url":"https://github.com/owncloud/core/pull/3969#issuecomment-22008491","issue_url":"https://api.github.com/repos/owncloud/core/issues/3969","id":22008491,"user":{"login":"mtgap","id":1097106,"avatar_url":"https://gravatar.com/avatar/454a73ee5feeb428d0c163a48903332c?d=https%3a%2f%2fidenticons.github.com%2f52d29a66f285a1d61125dd69ac0766b2.png&r=x","gravatar_id":"454a73ee5feeb428d0c163a48903332c","url":"https://api.github.com/users/mtgap","html_url":"https://github.com/mtgap","followers_url":"https://api.github.com/users/mtgap/followers","following_url":"https://api.github.com/users/mtgap/following{/other_user}","gists_url":"https://api.github.com/users/mtgap/gists{/gist_id}","starred_url":"https://api.github.com/users/mtgap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mtgap/subscriptions","organizations_url":"https://api.github.com/users/mtgap/orgs","repos_url":"https://api.github.com/users/mtgap/repos","events_url":"https://api.github.com/users/mtgap/events{/privacy}","received_events_url":"https://api.github.com/users/mtgap/received_events","type":"user","site_admin":false},"created_at":"2013-08-02t14:18:37z","updated_at":"2013-08-02t14:19:09z","body":"> can we have this on another pull request? divide and conquer is the rule!\r\n\r\nthat would mean testing is not possible without everyone merging branches, unless of course you trust my unit tests.\r\n\r\n> @mtgap are you aware the fact that your sql statements are broken on sqlite, pg and oracle?\r\n\r\nit's just the deleting queries that are failing that get called for every method. i'm looking for an alternative.\r\n\r\n"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22011488","html_url":"https://github.com/owncloud/core/pull/3969#issuecomment-22011488","issue_url":"https://api.github.com/repos/owncloud/core/issues/3969","id":22011488,"user":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false},"created_at":"2013-08-02t15:02:30z","updated_at":"2013-08-02t15:02:30z","body":"> that would mean testing is not possible without everyone merging branches,\r\n\r\nwell - can the existing dialog work with the new api?\r\n\r\nto be honest with you - a heart transplantation with 3 month of rehabilitation is the least we need.\r\n\r\nand please respond to my questions above regarding missing index and *most important* data migration.\r\n\r\nthx"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22011526","html_url":"https://github.com/owncloud/core/pull/3969#issuecomment-22011526","issue_url":"https://api.github.com/repos/owncloud/core/issues/3969","id":22011526,"user":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false},"created_at":"2013-08-02t15:03:07z","updated_at":"2013-08-02t15:03:07z","body":"> it's just the deleting queries that are failing that get called for every method. i'm looking for an alternative.\r\n\r\nit's not *just* - it's failing - period."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22013498","html_url":"https://github.com/owncloud/core/pull/3969#issuecomment-22013498","issue_url":"https://api.github.com/repos/owncloud/core/issues/3969","id":22013498,"user":{"login":"mtgap","id":1097106,"avatar_url":"https://gravatar.com/avatar/454a73ee5feeb428d0c163a48903332c?d=https%3a%2f%2fidenticons.github.com%2f52d29a66f285a1d61125dd69ac0766b2.png&r=x","gravatar_id":"454a73ee5feeb428d0c163a48903332c","url":"https://api.github.com/users/mtgap","html_url":"https://github.com/mtgap","followers_url":"https://api.github.com/users/mtgap/followers","following_url":"https://api.github.com/users/mtgap/following{/other_user}","gists_url":"https://api.github.com/users/mtgap/gists{/gist_id}","starred_url":"https://api.github.com/users/mtgap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mtgap/subscriptions","organizations_url":"https://api.github.com/users/mtgap/orgs","repos_url":"https://api.github.com/users/mtgap/repos","events_url":"https://api.github.com/users/mtgap/events{/privacy}","received_events_url":"https://api.github.com/users/mtgap/received_events","type":"user","site_admin":false},"created_at":"2013-08-02t15:31:44z","updated_at":"2013-08-02t15:31:44z","body":"> where is the migration code to transfer existing shares to the new structures?\r\n\r\ncoming soon.\r\n\r\n> well - can the existing dialog work with the new api?\r\n\r\ni'll try it, but i know that people are just going to report issues that are already known and affiliate the problems with these changes... \r\n\r\n> it's not just - it's failing - period.\r\n\r\nyou're blowing it out of proportion... \r\n"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22017290","html_url":"https://github.com/owncloud/core/pull/3969#issuecomment-22017290","issue_url":"https://api.github.com/repos/owncloud/core/issues/3969","id":22017290,"user":{"login":"owncloud-bot","id":2709266,"avatar_url":"https://gravatar.com/avatar/6e9c466b35bb113112f7401859d614f6?d=https%3a%2f%2fidenticons.github.com%2ffb9254ba3a207c96653361df97807914.png&r=x","gravatar_id":"6e9c466b35bb113112f7401859d614f6","url":"https://api.github.com/users/owncloud-bot","html_url":"https://github.com/owncloud-bot","followers_url":"https://api.github.com/users/owncloud-bot/followers","following_url":"https://api.github.com/users/owncloud-bot/following{/other_user}","gists_url":"https://api.github.com/users/owncloud-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/owncloud-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/owncloud-bot/subscriptions","organizations_url":"https://api.github.com/users/owncloud-bot/orgs","repos_url":"https://api.github.com/users/owncloud-bot/repos","events_url":"https://api.github.com/users/owncloud-bot/events{/privacy}","received_events_url":"https://api.github.com/users/owncloud-bot/received_events","type":"user","site_admin":false},"created_at":"2013-08-02t16:30:02z","updated_at":"2013-08-02t16:30:02z","body":"test **failed**.\nrefer to this link for build results: https://ci.owncloud.org/job/pull-request-analyser/356/"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22022858","html_url":"https://github.com/owncloud/core/pull/3969#issuecomment-22022858","issue_url":"https://api.github.com/repos/owncloud/core/issues/3969","id":22022858,"user":{"login":"mtgap","id":1097106,"avatar_url":"https://gravatar.com/avatar/454a73ee5feeb428d0c163a48903332c?d=https%3a%2f%2fidenticons.github.com%2f52d29a66f285a1d61125dd69ac0766b2.png&r=x","gravatar_id":"454a73ee5feeb428d0c163a48903332c","url":"https://api.github.com/users/mtgap","html_url":"https://github.com/mtgap","followers_url":"https://api.github.com/users/mtgap/followers","following_url":"https://api.github.com/users/mtgap/following{/other_user}","gists_url":"https://api.github.com/users/mtgap/gists{/gist_id}","starred_url":"https://api.github.com/users/mtgap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mtgap/subscriptions","organizations_url":"https://api.github.com/users/mtgap/orgs","repos_url":"https://api.github.com/users/mtgap/repos","events_url":"https://api.github.com/users/mtgap/events{/privacy}","received_events_url":"https://api.github.com/users/mtgap/received_events","type":"user","site_admin":false},"created_at":"2013-08-02t18:02:53z","updated_at":"2013-08-02t18:02:53z","body":"the tests are now almost corrected. all failing tests are on oracle and deal with insertid according to this trace: https://ci.owncloud.org/job/pull-request-analyser/356/testreport/junit/(root)/test_share_sharetype_group/testgetshareswithsharewithfilter_4/"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22023936","html_url":"https://github.com/owncloud/core/pull/3969#issuecomment-22023936","issue_url":"https://api.github.com/repos/owncloud/core/issues/3969","id":22023936,"user":{"login":"owncloud-bot","id":2709266,"avatar_url":"https://gravatar.com/avatar/6e9c466b35bb113112f7401859d614f6?d=https%3a%2f%2fidenticons.github.com%2ffb9254ba3a207c96653361df97807914.png&r=x","gravatar_id":"6e9c466b35bb113112f7401859d614f6","url":"https://api.github.com/users/owncloud-bot","html_url":"https://github.com/owncloud-bot","followers_url":"https://api.github.com/users/owncloud-bot/followers","following_url":"https://api.github.com/users/owncloud-bot/following{/other_user}","gists_url":"https://api.github.com/users/owncloud-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/owncloud-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/owncloud-bot/subscriptions","organizations_url":"https://api.github.com/users/owncloud-bot/orgs","repos_url":"https://api.github.com/users/owncloud-bot/repos","events_url":"https://api.github.com/users/owncloud-bot/events{/privacy}","received_events_url":"https://api.github.com/users/owncloud-bot/received_events","type":"user","site_admin":false},"created_at":"2013-08-02t18:21:16z","updated_at":"2013-08-02t18:21:16z","body":"test **failed**.\nrefer to this link for build results: https://ci.owncloud.org/job/pull-request-analyser/358/"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22057538","html_url":"https://github.com/owncloud/core/pull/3969#issuecomment-22057538","issue_url":"https://api.github.com/repos/owncloud/core/issues/3969","id":22057538,"user":{"login":"owncloud-bot","id":2709266,"avatar_url":"https://gravatar.com/avatar/6e9c466b35bb113112f7401859d614f6?d=https%3a%2f%2fidenticons.github.com%2ffb9254ba3a207c96653361df97807914.png&r=x","gravatar_id":"6e9c466b35bb113112f7401859d614f6","url":"https://api.github.com/users/owncloud-bot","html_url":"https://github.com/owncloud-bot","followers_url":"https://api.github.com/users/owncloud-bot/followers","following_url":"https://api.github.com/users/owncloud-bot/following{/other_user}","gists_url":"https://api.github.com/users/owncloud-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/owncloud-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/owncloud-bot/subscriptions","organizations_url":"https://api.github.com/users/owncloud-bot/orgs","repos_url":"https://api.github.com/users/owncloud-bot/repos","events_url":"https://api.github.com/users/owncloud-bot/events{/privacy}","received_events_url":"https://api.github.com/users/owncloud-bot/received_events","type":"user","site_admin":false},"created_at":"2013-08-03t16:41:27z","updated_at":"2013-08-03t16:41:27z","body":"test **failed**.\nrefer to this link for build results: https://ci.owncloud.org/job/pull-request-analyser/371/"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22151449","html_url":"https://github.com/owncloud/core/pull/3969#issuecomment-22151449","issue_url":"https://api.github.com/repos/owncloud/core/issues/3969","id":22151449,"user":{"login":"owncloud-bot","id":2709266,"avatar_url":"https://gravatar.com/avatar/6e9c466b35bb113112f7401859d614f6?d=https%3a%2f%2fidenticons.github.com%2ffb9254ba3a207c96653361df97807914.png&r=x","gravatar_id":"6e9c466b35bb113112f7401859d614f6","url":"https://api.github.com/users/owncloud-bot","html_url":"https://github.com/owncloud-bot","followers_url":"https://api.github.com/users/owncloud-bot/followers","following_url":"https://api.github.com/users/owncloud-bot/following{/other_user}","gists_url":"https://api.github.com/users/owncloud-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/owncloud-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/owncloud-bot/subscriptions","organizations_url":"https://api.github.com/users/owncloud-bot/orgs","repos_url":"https://api.github.com/users/owncloud-bot/repos","events_url":"https://api.github.com/users/owncloud-bot/events{/privacy}","received_events_url":"https://api.github.com/users/owncloud-bot/received_events","type":"user","site_admin":false},"created_at":"2013-08-06t00:47:25z","updated_at":"2013-08-06t00:47:25z","body":"test **failed**.\nrefer to this link for build results: https://ci.owncloud.org/job/pull-request-analyser/399/"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22181784","html_url":"https://github.com/owncloud/core/pull/3969#issuecomment-22181784","issue_url":"https://api.github.com/repos/owncloud/core/issues/3969","id":22181784,"user":{"login":"butonic","id":956847,"avatar_url":"https://gravatar.com/avatar/9760c134cabf66e10dbba06d7525f5c7?d=https%3a%2f%2fidenticons.github.com%2f92925ec1ad893739ed57986f18e2f060.png&r=x","gravatar_id":"9760c134cabf66e10dbba06d7525f5c7","url":"https://api.github.com/users/butonic","html_url":"https://github.com/butonic","followers_url":"https://api.github.com/users/butonic/followers","following_url":"https://api.github.com/users/butonic/following{/other_user}","gists_url":"https://api.github.com/users/butonic/gists{/gist_id}","starred_url":"https://api.github.com/users/butonic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/butonic/subscriptions","organizations_url":"https://api.github.com/users/butonic/orgs","repos_url":"https://api.github.com/users/butonic/repos","events_url":"https://api.github.com/users/butonic/events{/privacy}","received_events_url":"https://api.github.com/users/butonic/received_events","type":"user","site_admin":false},"created_at":"2013-08-06t14:19:05z","updated_at":"2013-08-06t14:19:05z","body":"i tried to make this work with oracle and found the following issues: \r\n- [ ] try removing the table name parameter from insertid() in https://github.com/owncloud/core/blob/aa3c1a09cbd342f93f988914a1a9ab1ba3deb94e/lib/share/sharetype/common.php#l71 this will allow doctrine to use the sequence of the last id inserted\r\n- [ ] doctrine needs to emulate limit / offset with a subselect, breaking the fromrow magic:\r\n```\r\nphp fatal error:  call to undefined method oc\\share\\share::setdoctrinerownum() in /home/jfd/repositories/oc/core/lib/share/share.php on line 433\r\nphp stack trace:\r\nphp   1. {main}() /usr/bin/phpunit:0\r\nphp   2. phpunit_textui_command::main() /usr/bin/phpunit:46\r\nphp   3. phpunit_textui_command->run() /usr/share/php/phpunit/textui/command.php:130\r\nphp   4. phpunit_textui_testrunner->dorun() /usr/share/php/phpunit/textui/command.php:192\r\nphp   5. phpunit_framework_testsuite->run() /usr/share/php/phpunit/textui/testrunner.php:325\r\nphp   6. phpunit_framework_testsuite->run() /usr/share/php/phpunit/framework/testsuite.php:705\r\nphp   7. phpunit_framework_testsuite->runtest() /usr/share/php/phpunit/framework/testsuite.php:745\r\nphp   8. phpunit_framework_testcase->run() /usr/share/php/phpunit/framework/testsuite.php:772\r\nphp   9. phpunit_framework_testresult->run() /usr/share/php/phpunit/framework/testcase.php:751\r\nphp  10. php_invoker->invoke() /usr/share/php/phpunit/framework/testresult.php:647\r\nphp  11. call_user_func_array() /usr/share/php/php/invoker.php:93\r\nphp  12. phpunit_framework_testcase->runbare() /usr/share/php/php/invoker.php:93\r\nphp  13. phpunit_framework_testcase->runtest() /usr/share/php/phpunit/framework/testcase.php:804\r\nphp  14. reflectionmethod->invokeargs() /usr/share/php/phpunit/framework/testcase.php:942\r\nphp  15. test\\share\\sharetype\\sharetype->testgetshareswithlimitoffset() /usr/share/php/phpunit/framework/testcase.php:942\r\nphp  16. oc\\share\\sharetype\\group->getshares() /home/jfd/repositories/oc/core/tests/lib/share/sharetype/sharetype.php:142\r\nphp  17. oc\\share\\sharetype\\common->getshares() /home/jfd/repositories/oc/core/lib/share/sharetype/group.php:165\r\nphp  18. oc\\share\\sharefactory->maptoshare() /home/jfd/repositories/oc/core/lib/share/sharetype/common.php:164\r\nphp  19. oc\\share\\share::fromrow() /home/jfd/repositories/oc/core/lib/share/sharefactory.php:35\r\n```\r\ni got around it by skipping the additional doctrine_rownum column in https://github.com/owncloud/core/blob/aa3c1a09cbd342f93f988914a1a9ab1ba3deb94e/lib/share/share.php#l433:\r\n```php\r\n\t\tforeach ($row as $column => $value) {\r\n\t\t\tif (strcasecmp('doctrine_rownum',$column) === 0) {\r\n\t\t\t\tcontinue; //skip pagination column\r\n\t\t\t}\r\n\t\t\t$property = $instance::columntoproperty($column);\r\n```\r\n\r\n- [ ] the limit / offset workaround als breaks joins that select columns with the same name from two tables like in\r\n```sql\r\nora-00918: column ambiguously defined select a.* from (select \"oc_shares\".*, \"oc_shares_links\".* from \"oc_shares\" join \"oc_shares_links\" on \"oc_shares\".\"id\" = \"oc_shares_links\".\"id\" where \"share_type_id\" = :param1 and \"item_type\" = :param2 and \"oc_shares\".\"id\" = :param3) a where rownum <= 1\r\n```\r\nthe  marks the place where the error appears. the reason are the two `id` columns from oc_shares and oc_shares_links. the solution is to specify exactly which columns you need from which table or give them a unique name with eg `id as link_id`. this is where i stopped getting sharing to work on oracle, because i don't know what the code following the select requires.\r\n- [ ] if you want more debug output try changing the code of oci8exception in https://github.com/owncloud/3rdparty/blob/master/doctrine/dbal/lib/doctrine/dbal/driver/oci8/oci8exception.php#l28\r\n```php\r\n    static public function fromerrorinfo($error)\r\n    {\r\n        $indicator = substr_replace($error['sqltext'], '', $error['offset'], 0);\r\n        return new self($error['message'] .' '.$indicator, $error['code']);\r\n    }\r\n```\r\ni don't know why this is not upstream. @bartv2 should we send this as a patch?\r\n\r\nin general using tables like shares, shares_links, shares_users, shares_groups with a common id column is the textbook implementation for storing classes and subclasses in a rdbms. while the approach allows you to define custom data that goes with every share type, it is a maintenance nightmare because every share type an app introduces needs to be reflected in the database schema. should we need to change something with the core share table (and i bet at some point in time we will) we will very likely have to touch all subclasses and db tables.  that is not gonna work painless. an rdmbs is a bad storage for oo concepts, see https://en.wikipedia.org/wiki/object-relational_impedance_mismatch\r\n\r\nimho a solution would be to use a text based (and indexed) type column that can be used to instantiate the correct class for handling the tupel / row. this leaves us with additional data that could be stored in a type specific table. for data that does not need to be searched we can add a varchar/text `data` column storing json, for data that needs to be indexed we can add a varchar/text `custom` column. but i need to see a use case where we need a custom column, yet. even the token may be useful for private links when sending them via email (although we might switch to /user/mtgap/path/to/shared/file.txt based links). furthermore, varchar only uses space when necessary.\r\n\r\n@karlitschek @bartv2 @deepdiver1975 @icewind1991 @mtgap or anyone with db knowledge: opinions?"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22254478","html_url":"https://github.com/owncloud/core/pull/3969#issuecomment-22254478","issue_url":"https://api.github.com/repos/owncloud/core/issues/3969","id":22254478,"user":{"login":"mtgap","id":1097106,"avatar_url":"https://gravatar.com/avatar/454a73ee5feeb428d0c163a48903332c?d=https%3a%2f%2fidenticons.github.com%2f52d29a66f285a1d61125dd69ac0766b2.png&r=x","gravatar_id":"454a73ee5feeb428d0c163a48903332c","url":"https://api.github.com/users/mtgap","html_url":"https://github.com/mtgap","followers_url":"https://api.github.com/users/mtgap/followers","following_url":"https://api.github.com/users/mtgap/following{/other_user}","gists_url":"https://api.github.com/users/mtgap/gists{/gist_id}","starred_url":"https://api.github.com/users/mtgap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mtgap/subscriptions","organizations_url":"https://api.github.com/users/mtgap/orgs","repos_url":"https://api.github.com/users/mtgap/repos","events_url":"https://api.github.com/users/mtgap/events{/privacy}","received_events_url":"https://api.github.com/users/mtgap/received_events","type":"user","site_admin":false},"created_at":"2013-08-07t14:20:59z","updated_at":"2013-08-07t14:20:59z","body":"> try removing the table name parameter from insertid()\r\n\r\nshouldn't we remove the parameter from the method then?\r\n\r\n> doctrine needs to emulate limit / offset with a subselect, breaking the fromrow magic:\r\n\r\n@raydiation is this affecting the appframework as well?\r\n\r\ni don't really care what the database implementation looks like, but i'm not a fan of storing multiple values in the same column.\r\n\r\n> (although we might switch to /user/mtgap/path/to/shared/file.txt based links\r\n\r\nwe already tried this and it turned out to be a bad decision."}]