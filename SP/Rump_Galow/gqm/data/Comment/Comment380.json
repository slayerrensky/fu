[{"url":"https://api.github.com/repos/owncloud/core/issues/comments/10304682","html_url":"https://github.com/owncloud/core/pull/380#issuecomment-10304682","issue_url":"https://api.github.com/repos/owncloud/core/issues/380","id":10304682,"user":{"login":"mtgap","id":1097106,"avatar_url":"https://gravatar.com/avatar/454a73ee5feeb428d0c163a48903332c?d=https%3a%2f%2fidenticons.github.com%2f52d29a66f285a1d61125dd69ac0766b2.png&r=x","gravatar_id":"454a73ee5feeb428d0c163a48903332c","url":"https://api.github.com/users/mtgap","html_url":"https://github.com/mtgap","followers_url":"https://api.github.com/users/mtgap/followers","following_url":"https://api.github.com/users/mtgap/following{/other_user}","gists_url":"https://api.github.com/users/mtgap/gists{/gist_id}","starred_url":"https://api.github.com/users/mtgap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mtgap/subscriptions","organizations_url":"https://api.github.com/users/mtgap/orgs","repos_url":"https://api.github.com/users/mtgap/repos","events_url":"https://api.github.com/users/mtgap/events{/privacy}","received_events_url":"https://api.github.com/users/mtgap/received_events","type":"user","site_admin":false},"created_at":"2012-11-12t21:16:54z","updated_at":"2012-11-12t21:16:54z","body":"what is the intention of using the alphaid() function?"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/10306043","html_url":"https://github.com/owncloud/core/pull/380#issuecomment-10306043","issue_url":"https://api.github.com/repos/owncloud/core/issues/380","id":10306043,"user":{"login":"butonic","id":956847,"avatar_url":"https://gravatar.com/avatar/9760c134cabf66e10dbba06d7525f5c7?d=https%3a%2f%2fidenticons.github.com%2f92925ec1ad893739ed57986f18e2f060.png&r=x","gravatar_id":"9760c134cabf66e10dbba06d7525f5c7","url":"https://api.github.com/users/butonic","html_url":"https://github.com/butonic","followers_url":"https://api.github.com/users/butonic/followers","following_url":"https://api.github.com/users/butonic/following{/other_user}","gists_url":"https://api.github.com/users/butonic/gists{/gist_id}","starred_url":"https://api.github.com/users/butonic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/butonic/subscriptions","organizations_url":"https://api.github.com/users/butonic/orgs","repos_url":"https://api.github.com/users/butonic/repos","events_url":"https://api.github.com/users/butonic/events{/privacy}","received_events_url":"https://api.github.com/users/butonic/received_events","type":"user","site_admin":false},"created_at":"2012-11-12t21:56:56z","updated_at":"2012-11-12t21:56:56z","body":"alphaid() can be used to map numeric ids to a short alphanumeric string. i was first thinking of using it to generate the token from the share id but then i realized that then the token would not be random and could not be used as a pseudo password. i still like the way the token is generated because is uses a lot of characters but if there is already code in oc that generates tokens i'll use that. "},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/10306493","html_url":"https://github.com/owncloud/core/pull/380#issuecomment-10306493","issue_url":"https://api.github.com/repos/owncloud/core/issues/380","id":10306493,"user":{"login":"lukasreschke","id":878997,"avatar_url":"https://gravatar.com/avatar/f080e75d370a4d8e550983a4898bcf3b?d=https%3a%2f%2fidenticons.github.com%2ff12e47d5bb5359a9f58e8217413be790.png&r=x","gravatar_id":"f080e75d370a4d8e550983a4898bcf3b","url":"https://api.github.com/users/lukasreschke","html_url":"https://github.com/lukasreschke","followers_url":"https://api.github.com/users/lukasreschke/followers","following_url":"https://api.github.com/users/lukasreschke/following{/other_user}","gists_url":"https://api.github.com/users/lukasreschke/gists{/gist_id}","starred_url":"https://api.github.com/users/lukasreschke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukasreschke/subscriptions","organizations_url":"https://api.github.com/users/lukasreschke/orgs","repos_url":"https://api.github.com/users/lukasreschke/repos","events_url":"https://api.github.com/users/lukasreschke/events{/privacy}","received_events_url":"https://api.github.com/users/lukasreschke/received_events","type":"user","site_admin":false},"created_at":"2012-11-12t22:13:10z","updated_at":"2012-11-12t22:13:13z","body":"> but if there is already code in oc that generates tokens i'll use that.\r\n\r\n`oc_util::generate_random_bytes()`"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/10307915","html_url":"https://github.com/owncloud/core/pull/380#issuecomment-10307915","issue_url":"https://api.github.com/repos/owncloud/core/issues/380","id":10307915,"user":{"login":"butonic","id":956847,"avatar_url":"https://gravatar.com/avatar/9760c134cabf66e10dbba06d7525f5c7?d=https%3a%2f%2fidenticons.github.com%2f92925ec1ad893739ed57986f18e2f060.png&r=x","gravatar_id":"9760c134cabf66e10dbba06d7525f5c7","url":"https://api.github.com/users/butonic","html_url":"https://github.com/butonic","followers_url":"https://api.github.com/users/butonic/followers","following_url":"https://api.github.com/users/butonic/following{/other_user}","gists_url":"https://api.github.com/users/butonic/gists{/gist_id}","starred_url":"https://api.github.com/users/butonic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/butonic/subscriptions","organizations_url":"https://api.github.com/users/butonic/orgs","repos_url":"https://api.github.com/users/butonic/repos","events_url":"https://api.github.com/users/butonic/events{/privacy}","received_events_url":"https://api.github.com/users/butonic/received_events","type":"user","site_admin":false},"created_at":"2012-11-12t22:47:03z","updated_at":"2012-11-12t22:47:03z","body":"i think i updated everything with the exception of the uid owner not being the actual owner ... any ideas how to do this in a clean way?"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/10343104","html_url":"https://github.com/owncloud/core/pull/380#issuecomment-10343104","issue_url":"https://api.github.com/repos/owncloud/core/issues/380","id":10343104,"user":{"login":"butonic","id":956847,"avatar_url":"https://gravatar.com/avatar/9760c134cabf66e10dbba06d7525f5c7?d=https%3a%2f%2fidenticons.github.com%2f92925ec1ad893739ed57986f18e2f060.png&r=x","gravatar_id":"9760c134cabf66e10dbba06d7525f5c7","url":"https://api.github.com/users/butonic","html_url":"https://github.com/butonic","followers_url":"https://api.github.com/users/butonic/followers","following_url":"https://api.github.com/users/butonic/following{/other_user}","gists_url":"https://api.github.com/users/butonic/gists{/gist_id}","starred_url":"https://api.github.com/users/butonic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/butonic/subscriptions","organizations_url":"https://api.github.com/users/butonic/orgs","repos_url":"https://api.github.com/users/butonic/repos","events_url":"https://api.github.com/users/butonic/events{/privacy}","received_events_url":"https://api.github.com/users/butonic/received_events","type":"user","site_admin":false},"created_at":"2012-11-13t20:53:53z","updated_at":"2012-11-13t20:53:53z","body":"@mtgap @lukasreschke @deepdiver1975 @karlitschek @tanghus i think this should do it. please test and give it your thumbs up!"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/10395287","html_url":"https://github.com/owncloud/core/pull/380#issuecomment-10395287","issue_url":"https://api.github.com/repos/owncloud/core/issues/380","id":10395287,"user":{"login":"mtgap","id":1097106,"avatar_url":"https://gravatar.com/avatar/454a73ee5feeb428d0c163a48903332c?d=https%3a%2f%2fidenticons.github.com%2f52d29a66f285a1d61125dd69ac0766b2.png&r=x","gravatar_id":"454a73ee5feeb428d0c163a48903332c","url":"https://api.github.com/users/mtgap","html_url":"https://github.com/mtgap","followers_url":"https://api.github.com/users/mtgap/followers","following_url":"https://api.github.com/users/mtgap/following{/other_user}","gists_url":"https://api.github.com/users/mtgap/gists{/gist_id}","starred_url":"https://api.github.com/users/mtgap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mtgap/subscriptions","organizations_url":"https://api.github.com/users/mtgap/orgs","repos_url":"https://api.github.com/users/mtgap/repos","events_url":"https://api.github.com/users/mtgap/events{/privacy}","received_events_url":"https://api.github.com/users/mtgap/received_events","type":"user","site_admin":false},"created_at":"2012-11-15t02:26:09z","updated_at":"2012-11-15t02:26:09z","body":"everything seems to work and it fixes issue #382. the patch didn't apply cleanly for me, there was an issue with the db update. i think there was another update in master to it.\r\n\r\nyou still have the token_length constant in the code. after that :+1 what is our standard for pull requests is it alright that there are multiple commits that undo previous commits? "},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/10395597","html_url":"https://github.com/owncloud/core/pull/380#issuecomment-10395597","issue_url":"https://api.github.com/repos/owncloud/core/issues/380","id":10395597,"user":{"login":"tanghus","id":533222,"avatar_url":"https://gravatar.com/avatar/e625b634822713b2e346ff7c67d26775?d=https%3a%2f%2fidenticons.github.com%2f6d9c90af1c12f5a88e4d5f216bbc1979.png&r=x","gravatar_id":"e625b634822713b2e346ff7c67d26775","url":"https://api.github.com/users/tanghus","html_url":"https://github.com/tanghus","followers_url":"https://api.github.com/users/tanghus/followers","following_url":"https://api.github.com/users/tanghus/following{/other_user}","gists_url":"https://api.github.com/users/tanghus/gists{/gist_id}","starred_url":"https://api.github.com/users/tanghus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tanghus/subscriptions","organizations_url":"https://api.github.com/users/tanghus/orgs","repos_url":"https://api.github.com/users/tanghus/repos","events_url":"https://api.github.com/users/tanghus/events{/privacy}","received_events_url":"https://api.github.com/users/tanghus/received_events","type":"user","site_admin":false},"created_at":"2012-11-15t02:41:53z","updated_at":"2012-11-15t02:41:53z","body":"> the patch didn't apply cleanly for me, there was an issue with the db update. i think there was another update in master to it.\r\n\r\nthat was me. i bumped the version last night. sorry.\r\n\r\n> what is our standard for pull requests is it alright that there are multiple commits that undo previous commits? \r\n\r\nif you merge it while @deepdiver1975 is asleep ;)  you should bump version to (4, 91, 02)"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/10451126","html_url":"https://github.com/owncloud/core/pull/380#issuecomment-10451126","issue_url":"https://api.github.com/repos/owncloud/core/issues/380","id":10451126,"user":{"login":"butonic","id":956847,"avatar_url":"https://gravatar.com/avatar/9760c134cabf66e10dbba06d7525f5c7?d=https%3a%2f%2fidenticons.github.com%2f92925ec1ad893739ed57986f18e2f060.png&r=x","gravatar_id":"9760c134cabf66e10dbba06d7525f5c7","url":"https://api.github.com/users/butonic","html_url":"https://github.com/butonic","followers_url":"https://api.github.com/users/butonic/followers","following_url":"https://api.github.com/users/butonic/following{/other_user}","gists_url":"https://api.github.com/users/butonic/gists{/gist_id}","starred_url":"https://api.github.com/users/butonic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/butonic/subscriptions","organizations_url":"https://api.github.com/users/butonic/orgs","repos_url":"https://api.github.com/users/butonic/repos","events_url":"https://api.github.com/users/butonic/events{/privacy}","received_events_url":"https://api.github.com/users/butonic/received_events","type":"user","site_admin":false},"created_at":"2012-11-16t15:45:43z","updated_at":"2012-11-16t15:46:22z","body":"we should keep the individual commits if possible .. but the fixes removed a lot of code and my git rewrite foo was not as god as i had hoped, so i just squashed them into one commit.\r\n\r\nthe token_length is used to prevent a magic number in the call of generate_random_bytes.\r\n\r\nalso increased the version to (4, 91, 02)"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/10550161","html_url":"https://github.com/owncloud/core/pull/380#issuecomment-10550161","issue_url":"https://api.github.com/repos/owncloud/core/issues/380","id":10550161,"user":{"login":"butonic","id":956847,"avatar_url":"https://gravatar.com/avatar/9760c134cabf66e10dbba06d7525f5c7?d=https%3a%2f%2fidenticons.github.com%2f92925ec1ad893739ed57986f18e2f060.png&r=x","gravatar_id":"9760c134cabf66e10dbba06d7525f5c7","url":"https://api.github.com/users/butonic","html_url":"https://github.com/butonic","followers_url":"https://api.github.com/users/butonic/followers","following_url":"https://api.github.com/users/butonic/following{/other_user}","gists_url":"https://api.github.com/users/butonic/gists{/gist_id}","starred_url":"https://api.github.com/users/butonic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/butonic/subscriptions","organizations_url":"https://api.github.com/users/butonic/orgs","repos_url":"https://api.github.com/users/butonic/repos","events_url":"https://api.github.com/users/butonic/events{/privacy}","received_events_url":"https://api.github.com/users/butonic/received_events","type":"user","site_admin":false},"created_at":"2012-11-20t11:03:16z","updated_at":"2012-11-20t11:03:16z","body":"@mtgap @tanghus i think i addressed all the issues. please retest and give me your :+1: "},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/10556307","html_url":"https://github.com/owncloud/core/pull/380#issuecomment-10556307","issue_url":"https://api.github.com/repos/owncloud/core/issues/380","id":10556307,"user":{"login":"butonic","id":956847,"avatar_url":"https://gravatar.com/avatar/9760c134cabf66e10dbba06d7525f5c7?d=https%3a%2f%2fidenticons.github.com%2f92925ec1ad893739ed57986f18e2f060.png&r=x","gravatar_id":"9760c134cabf66e10dbba06d7525f5c7","url":"https://api.github.com/users/butonic","html_url":"https://github.com/butonic","followers_url":"https://api.github.com/users/butonic/followers","following_url":"https://api.github.com/users/butonic/following{/other_user}","gists_url":"https://api.github.com/users/butonic/gists{/gist_id}","starred_url":"https://api.github.com/users/butonic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/butonic/subscriptions","organizations_url":"https://api.github.com/users/butonic/orgs","repos_url":"https://api.github.com/users/butonic/repos","events_url":"https://api.github.com/users/butonic/events{/privacy}","received_events_url":"https://api.github.com/users/butonic/received_events","type":"user","site_admin":false},"created_at":"2012-11-20t14:25:10z","updated_at":"2012-11-20t14:25:10z","body":"@karlitschek. i have the backport ready for stable45 but will wait for this to be pulled before committing it"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/10632455","html_url":"https://github.com/owncloud/core/pull/380#issuecomment-10632455","issue_url":"https://api.github.com/repos/owncloud/core/issues/380","id":10632455,"user":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false},"created_at":"2012-11-22t12:05:36z","updated_at":"2012-11-22t12:05:36z","body":"tested :+1: "},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/10635467","html_url":"https://github.com/owncloud/core/pull/380#issuecomment-10635467","issue_url":"https://api.github.com/repos/owncloud/core/issues/380","id":10635467,"user":{"login":"schiesbn","id":1589737,"avatar_url":"https://gravatar.com/avatar/8912b598c7b32dd25b87fd168e0b06b2?d=https%3a%2f%2fidenticons.github.com%2f0a323047dbe8329db30eae8dbe96e55e.png&r=x","gravatar_id":"8912b598c7b32dd25b87fd168e0b06b2","url":"https://api.github.com/users/schiesbn","html_url":"https://github.com/schiesbn","followers_url":"https://api.github.com/users/schiesbn/followers","following_url":"https://api.github.com/users/schiesbn/following{/other_user}","gists_url":"https://api.github.com/users/schiesbn/gists{/gist_id}","starred_url":"https://api.github.com/users/schiesbn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schiesbn/subscriptions","organizations_url":"https://api.github.com/users/schiesbn/orgs","repos_url":"https://api.github.com/users/schiesbn/repos","events_url":"https://api.github.com/users/schiesbn/events{/privacy}","received_events_url":"https://api.github.com/users/schiesbn/received_events","type":"user","site_admin":false},"created_at":"2012-11-22t14:08:42z","updated_at":"2012-11-22t14:17:42z","body":"i just tried it especially with respect to issue https://github.com/owncloud/core/issues/117\r\n\r\n- sharing a file from the shared folder with a public link works.\r\n- sharing a whole directory from the shared folder results in \"cloud not found\"\r\n\r\nanother issue:\r\n\r\nthe sharing drop down shows \"null\" as token for public links created before i applied the patch. i also can't remove the link and create a new one because removing the broken link results in a error message. i think we need a update routine which transfer old share links to the new ones. it is probably enough to just generate all missing tokens in the database during the first run."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/10658325","html_url":"https://github.com/owncloud/core/pull/380#issuecomment-10658325","issue_url":"https://api.github.com/repos/owncloud/core/issues/380","id":10658325,"user":{"login":"magicfab","id":317514,"avatar_url":"https://gravatar.com/avatar/223e89d1821a18795a9d0f3c7595facf?d=https%3a%2f%2fidenticons.github.com%2ff1a134f14c508836ee1cae626d73e90d.png&r=x","gravatar_id":"223e89d1821a18795a9d0f3c7595facf","url":"https://api.github.com/users/magicfab","html_url":"https://github.com/magicfab","followers_url":"https://api.github.com/users/magicfab/followers","following_url":"https://api.github.com/users/magicfab/following{/other_user}","gists_url":"https://api.github.com/users/magicfab/gists{/gist_id}","starred_url":"https://api.github.com/users/magicfab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/magicfab/subscriptions","organizations_url":"https://api.github.com/users/magicfab/orgs","repos_url":"https://api.github.com/users/magicfab/repos","events_url":"https://api.github.com/users/magicfab/events{/privacy}","received_events_url":"https://api.github.com/users/magicfab/received_events","type":"user","site_admin":false},"created_at":"2012-11-23t12:31:10z","updated_at":"2012-11-23t12:31:10z","body":"can you provide an example of resulting shared file / directory urls?"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/10658373","html_url":"https://github.com/owncloud/core/pull/380#issuecomment-10658373","issue_url":"https://api.github.com/repos/owncloud/core/issues/380","id":10658373,"user":{"login":"butonic","id":956847,"avatar_url":"https://gravatar.com/avatar/9760c134cabf66e10dbba06d7525f5c7?d=https%3a%2f%2fidenticons.github.com%2f92925ec1ad893739ed57986f18e2f060.png&r=x","gravatar_id":"9760c134cabf66e10dbba06d7525f5c7","url":"https://api.github.com/users/butonic","html_url":"https://github.com/butonic","followers_url":"https://api.github.com/users/butonic/followers","following_url":"https://api.github.com/users/butonic/following{/other_user}","gists_url":"https://api.github.com/users/butonic/gists{/gist_id}","starred_url":"https://api.github.com/users/butonic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/butonic/subscriptions","organizations_url":"https://api.github.com/users/butonic/orgs","repos_url":"https://api.github.com/users/butonic/repos","events_url":"https://api.github.com/users/butonic/events{/privacy}","received_events_url":"https://api.github.com/users/butonic/received_events","type":"user","site_admin":false},"created_at":"2012-11-23t12:33:39z","updated_at":"2012-11-23t12:34:40z","body":"after this pull request the produced share links look like this\r\nhttp://localhost/core/public.php?service=files&t=c01a7fb374c9c71d3e41d8c513ddaa6f\r\n\r\nthe hash could be shortened but  that should be done in another pull request"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/10661642","html_url":"https://github.com/owncloud/core/pull/380#issuecomment-10661642","issue_url":"https://api.github.com/repos/owncloud/core/issues/380","id":10661642,"user":{"login":"butonic","id":956847,"avatar_url":"https://gravatar.com/avatar/9760c134cabf66e10dbba06d7525f5c7?d=https%3a%2f%2fidenticons.github.com%2f92925ec1ad893739ed57986f18e2f060.png&r=x","gravatar_id":"9760c134cabf66e10dbba06d7525f5c7","url":"https://api.github.com/users/butonic","html_url":"https://github.com/butonic","followers_url":"https://api.github.com/users/butonic/followers","following_url":"https://api.github.com/users/butonic/following{/other_user}","gists_url":"https://api.github.com/users/butonic/gists{/gist_id}","starred_url":"https://api.github.com/users/butonic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/butonic/subscriptions","organizations_url":"https://api.github.com/users/butonic/orgs","repos_url":"https://api.github.com/users/butonic/repos","events_url":"https://api.github.com/users/butonic/events{/privacy}","received_events_url":"https://api.github.com/users/butonic/received_events","type":"user","site_admin":false},"created_at":"2012-11-23t14:55:20z","updated_at":"2012-11-23t14:55:20z","body":"@schiesbn could you retest the issue with sharing a directory from a shared folder? null links should now be replaced by old pre token links."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/10662504","html_url":"https://github.com/owncloud/core/pull/380#issuecomment-10662504","issue_url":"https://api.github.com/repos/owncloud/core/issues/380","id":10662504,"user":{"login":"schiesbn","id":1589737,"avatar_url":"https://gravatar.com/avatar/8912b598c7b32dd25b87fd168e0b06b2?d=https%3a%2f%2fidenticons.github.com%2f0a323047dbe8329db30eae8dbe96e55e.png&r=x","gravatar_id":"8912b598c7b32dd25b87fd168e0b06b2","url":"https://api.github.com/users/schiesbn","html_url":"https://github.com/schiesbn","followers_url":"https://api.github.com/users/schiesbn/followers","following_url":"https://api.github.com/users/schiesbn/following{/other_user}","gists_url":"https://api.github.com/users/schiesbn/gists{/gist_id}","starred_url":"https://api.github.com/users/schiesbn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schiesbn/subscriptions","organizations_url":"https://api.github.com/users/schiesbn/orgs","repos_url":"https://api.github.com/users/schiesbn/repos","events_url":"https://api.github.com/users/schiesbn/events{/privacy}","received_events_url":"https://api.github.com/users/schiesbn/received_events","type":"user","site_admin":false},"created_at":"2012-11-23t15:24:54z","updated_at":"2012-11-23t15:29:58z","body":"@butonic i still get a \"cloud not found\" in some situations.\r\n\r\nlet me give you an example:\r\n\r\n- user1 has a folder \"/demo/foo/bar\" and shares the top level folder \"/demo\" with user2\r\n- user2 can now reshare files within the folder with a public link\r\n- user2 can also reshare the folder \"demo\" with a public link\r\n- but user2 can not reshare folder below \"/demo\", e.g. \"/demo/foo\". this will result in \"cloud not found\"\r\n\r\ni only had a short look at your code, but i think the problem is most likely that you use the function getid() in apps/files_sharing/public.php to find the file cache id of the given folder. but this only works for the root folder (\"demo\" in the example above) because all the folders below the root folder are not stored in oc_share.\r\n\r\non stable45 i use the function getsourcepath() in apps/files_sharing/lib/util.php to get the real path of a file/folder stored somewhere in the shared folder. the same functions are also available in apps/files_sharing/lib/sharedstorage.php but marked as private. for stable45 i copied them to util.php to be able to use them  outside of oc_filestorage_shared to find shared files, e.g. on the webdav back-end.\r\n\r\nmaybe this is useful for you to resolve the issue."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/10662746","html_url":"https://github.com/owncloud/core/pull/380#issuecomment-10662746","issue_url":"https://api.github.com/repos/owncloud/core/issues/380","id":10662746,"user":{"login":"schiesbn","id":1589737,"avatar_url":"https://gravatar.com/avatar/8912b598c7b32dd25b87fd168e0b06b2?d=https%3a%2f%2fidenticons.github.com%2f0a323047dbe8329db30eae8dbe96e55e.png&r=x","gravatar_id":"8912b598c7b32dd25b87fd168e0b06b2","url":"https://api.github.com/users/schiesbn","html_url":"https://github.com/schiesbn","followers_url":"https://api.github.com/users/schiesbn/followers","following_url":"https://api.github.com/users/schiesbn/following{/other_user}","gists_url":"https://api.github.com/users/schiesbn/gists{/gist_id}","starred_url":"https://api.github.com/users/schiesbn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schiesbn/subscriptions","organizations_url":"https://api.github.com/users/schiesbn/orgs","repos_url":"https://api.github.com/users/schiesbn/repos","events_url":"https://api.github.com/users/schiesbn/events{/privacy}","received_events_url":"https://api.github.com/users/schiesbn/received_events","type":"user","site_admin":false},"created_at":"2012-11-23t15:32:56z","updated_at":"2012-11-23t15:34:28z","body":"regarding the fallback mode for pre-token links. i would prefer to increase the version number of the files_sharing app and update the update script to add a token to all link-shares. this would avoid the overhead to maintain the fallback code."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/10665018","html_url":"https://github.com/owncloud/core/pull/380#issuecomment-10665018","issue_url":"https://api.github.com/repos/owncloud/core/issues/380","id":10665018,"user":{"login":"butonic","id":956847,"avatar_url":"https://gravatar.com/avatar/9760c134cabf66e10dbba06d7525f5c7?d=https%3a%2f%2fidenticons.github.com%2f92925ec1ad893739ed57986f18e2f060.png&r=x","gravatar_id":"9760c134cabf66e10dbba06d7525f5c7","url":"https://api.github.com/users/butonic","html_url":"https://github.com/butonic","followers_url":"https://api.github.com/users/butonic/followers","following_url":"https://api.github.com/users/butonic/following{/other_user}","gists_url":"https://api.github.com/users/butonic/gists{/gist_id}","starred_url":"https://api.github.com/users/butonic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/butonic/subscriptions","organizations_url":"https://api.github.com/users/butonic/orgs","repos_url":"https://api.github.com/users/butonic/repos","events_url":"https://api.github.com/users/butonic/events{/privacy}","received_events_url":"https://api.github.com/users/butonic/received_events","type":"user","site_admin":false},"created_at":"2012-11-23t17:01:11z","updated_at":"2012-11-23t17:01:11z","body":"@schiesbn i cannot reproduce the example you described. are you using token based links? has the folder previously been shared with a dil/dir based link? could you try with a clean database? are you using ldap (although i don't think it has anything to do with the issue)?"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/10711286","html_url":"https://github.com/owncloud/core/pull/380#issuecomment-10711286","issue_url":"https://api.github.com/repos/owncloud/core/issues/380","id":10711286,"user":{"login":"schiesbn","id":1589737,"avatar_url":"https://gravatar.com/avatar/8912b598c7b32dd25b87fd168e0b06b2?d=https%3a%2f%2fidenticons.github.com%2f0a323047dbe8329db30eae8dbe96e55e.png&r=x","gravatar_id":"8912b598c7b32dd25b87fd168e0b06b2","url":"https://api.github.com/users/schiesbn","html_url":"https://github.com/schiesbn","followers_url":"https://api.github.com/users/schiesbn/followers","following_url":"https://api.github.com/users/schiesbn/following{/other_user}","gists_url":"https://api.github.com/users/schiesbn/gists{/gist_id}","starred_url":"https://api.github.com/users/schiesbn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schiesbn/subscriptions","organizations_url":"https://api.github.com/users/schiesbn/orgs","repos_url":"https://api.github.com/users/schiesbn/repos","events_url":"https://api.github.com/users/schiesbn/events{/privacy}","received_events_url":"https://api.github.com/users/schiesbn/received_events","type":"user","site_admin":false},"created_at":"2012-11-26t10:51:03z","updated_at":"2012-11-26t10:51:46z","body":"@butonic i just tried it with an empty database. the problem only appears if user2 creates a folder/file in a shared folder. so the right example is:\r\n\r\n- user1 has a folder \"/demo\" and shares the folder \"/demo\" with user2\r\n- user2 can reshare files and folders within the \"demo\"-folder with a public link\r\n- but if user2 creates a new folder \"shared/demo/foo\" or file \"shared/demo/test.txt\" and tries to share it with a public link he will get a  \"cloud not found\"\r\n\r\n"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/10716730","html_url":"https://github.com/owncloud/core/pull/380#issuecomment-10716730","issue_url":"https://api.github.com/repos/owncloud/core/issues/380","id":10716730,"user":{"login":"schiesbn","id":1589737,"avatar_url":"https://gravatar.com/avatar/8912b598c7b32dd25b87fd168e0b06b2?d=https%3a%2f%2fidenticons.github.com%2f0a323047dbe8329db30eae8dbe96e55e.png&r=x","gravatar_id":"8912b598c7b32dd25b87fd168e0b06b2","url":"https://api.github.com/users/schiesbn","html_url":"https://github.com/schiesbn","followers_url":"https://api.github.com/users/schiesbn/followers","following_url":"https://api.github.com/users/schiesbn/following{/other_user}","gists_url":"https://api.github.com/users/schiesbn/gists{/gist_id}","starred_url":"https://api.github.com/users/schiesbn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schiesbn/subscriptions","organizations_url":"https://api.github.com/users/schiesbn/orgs","repos_url":"https://api.github.com/users/schiesbn/repos","events_url":"https://api.github.com/users/schiesbn/events{/privacy}","received_events_url":"https://api.github.com/users/schiesbn/received_events","type":"user","site_admin":false},"created_at":"2012-11-26t14:15:18z","updated_at":"2012-11-26t14:29:34z","body":"@butonic i found the problem and fixed it in pull request 581. the problem was that we added the user who created the file as file owner to the file cache and not the actual owner.\r\n\r\nthis should fix the issue but i didn't test it until now together with your version"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/10720047","html_url":"https://github.com/owncloud/core/pull/380#issuecomment-10720047","issue_url":"https://api.github.com/repos/owncloud/core/issues/380","id":10720047,"user":{"login":"butonic","id":956847,"avatar_url":"https://gravatar.com/avatar/9760c134cabf66e10dbba06d7525f5c7?d=https%3a%2f%2fidenticons.github.com%2f92925ec1ad893739ed57986f18e2f060.png&r=x","gravatar_id":"9760c134cabf66e10dbba06d7525f5c7","url":"https://api.github.com/users/butonic","html_url":"https://github.com/butonic","followers_url":"https://api.github.com/users/butonic/followers","following_url":"https://api.github.com/users/butonic/following{/other_user}","gists_url":"https://api.github.com/users/butonic/gists{/gist_id}","starred_url":"https://api.github.com/users/butonic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/butonic/subscriptions","organizations_url":"https://api.github.com/users/butonic/orgs","repos_url":"https://api.github.com/users/butonic/repos","events_url":"https://api.github.com/users/butonic/events{/privacy}","received_events_url":"https://api.github.com/users/butonic/received_events","type":"user","site_admin":false},"created_at":"2012-11-26t15:42:43z","updated_at":"2012-11-26t15:42:43z","body":"since the isses reported by @schiesbn are fixed in #581 and a fallback for old links has been implemented i'll merge this."}]