[{"url":"https://api.github.com/repos/owncloud/core/issues/comments/24819577","html_url":"https://github.com/owncloud/core/pull/4922#issuecomment-24819577","issue_url":"https://api.github.com/repos/owncloud/core/issues/4922","id":24819577,"user":{"login":"owncloud-bot","id":2709266,"avatar_url":"https://gravatar.com/avatar/6e9c466b35bb113112f7401859d614f6?d=https%3a%2f%2fidenticons.github.com%2ffb9254ba3a207c96653361df97807914.png&r=x","gravatar_id":"6e9c466b35bb113112f7401859d614f6","url":"https://api.github.com/users/owncloud-bot","html_url":"https://github.com/owncloud-bot","followers_url":"https://api.github.com/users/owncloud-bot/followers","following_url":"https://api.github.com/users/owncloud-bot/following{/other_user}","gists_url":"https://api.github.com/users/owncloud-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/owncloud-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/owncloud-bot/subscriptions","organizations_url":"https://api.github.com/users/owncloud-bot/orgs","repos_url":"https://api.github.com/users/owncloud-bot/repos","events_url":"https://api.github.com/users/owncloud-bot/events{/privacy}","received_events_url":"https://api.github.com/users/owncloud-bot/received_events","type":"user","site_admin":false},"created_at":"2013-09-20t15:42:47z","updated_at":"2013-09-20t15:42:47z","body":"test **failed**.\nrefer to this link for build results: https://ci.owncloud.org/job/pull-request-analyser/1125/"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/24846856","html_url":"https://github.com/owncloud/core/pull/4922#issuecomment-24846856","issue_url":"https://api.github.com/repos/owncloud/core/issues/4922","id":24846856,"user":{"login":"icewind1991","id":1283854,"avatar_url":"https://gravatar.com/avatar/7c20f90ca5df67dd2cad22a8e2f80d8f?d=https%3a%2f%2fidenticons.github.com%2fc818423776eba38604496a7caddc0251.png&r=x","gravatar_id":"7c20f90ca5df67dd2cad22a8e2f80d8f","url":"https://api.github.com/users/icewind1991","html_url":"https://github.com/icewind1991","followers_url":"https://api.github.com/users/icewind1991/followers","following_url":"https://api.github.com/users/icewind1991/following{/other_user}","gists_url":"https://api.github.com/users/icewind1991/gists{/gist_id}","starred_url":"https://api.github.com/users/icewind1991/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icewind1991/subscriptions","organizations_url":"https://api.github.com/users/icewind1991/orgs","repos_url":"https://api.github.com/users/icewind1991/repos","events_url":"https://api.github.com/users/icewind1991/events{/privacy}","received_events_url":"https://api.github.com/users/icewind1991/received_events","type":"user","site_admin":false},"created_at":"2013-09-20t23:01:42z","updated_at":"2013-09-20t23:01:42z","body":":-1: adding the mount will change the storage of every existing file in  `/$user/files` causing a full scan against the now empty cache for `/$user/files` which leads to all files getting a new fileid and etag resulting in broken shares and syncing after upgrade."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/24869328","html_url":"https://github.com/owncloud/core/pull/4922#issuecomment-24869328","issue_url":"https://api.github.com/repos/owncloud/core/issues/4922","id":24869328,"user":{"login":"andrewsbrown","id":541880,"avatar_url":"https://gravatar.com/avatar/38c02df0c1936fa7f421a633424f588a?d=https%3a%2f%2fidenticons.github.com%2fe879ad3b77f230336dca4990faed9ef0.png&r=x","gravatar_id":"38c02df0c1936fa7f421a633424f588a","url":"https://api.github.com/users/andrewsbrown","html_url":"https://github.com/andrewsbrown","followers_url":"https://api.github.com/users/andrewsbrown/followers","following_url":"https://api.github.com/users/andrewsbrown/following{/other_user}","gists_url":"https://api.github.com/users/andrewsbrown/gists{/gist_id}","starred_url":"https://api.github.com/users/andrewsbrown/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrewsbrown/subscriptions","organizations_url":"https://api.github.com/users/andrewsbrown/orgs","repos_url":"https://api.github.com/users/andrewsbrown/repos","events_url":"https://api.github.com/users/andrewsbrown/events{/privacy}","received_events_url":"https://api.github.com/users/andrewsbrown/received_events","type":"user","site_admin":false},"created_at":"2013-09-21t19:44:10z","updated_at":"2013-09-21t19:44:10z","body":"@butonic, i tested like you asked on both webdav and shared files and it seemed to work; only the correct search results were coming up. i will say that the webdav app was a bit buggy--it would list files from demo.owncloud.org, then it wouldn't, etc., so i don't know how much i trust that (plus i'm not very familiar with that app)."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/24871531","html_url":"https://github.com/owncloud/core/pull/4922#issuecomment-24871531","issue_url":"https://api.github.com/repos/owncloud/core/issues/4922","id":24871531,"user":{"login":"butonic","id":956847,"avatar_url":"https://gravatar.com/avatar/9760c134cabf66e10dbba06d7525f5c7?d=https%3a%2f%2fidenticons.github.com%2f92925ec1ad893739ed57986f18e2f060.png&r=x","gravatar_id":"9760c134cabf66e10dbba06d7525f5c7","url":"https://api.github.com/users/butonic","html_url":"https://github.com/butonic","followers_url":"https://api.github.com/users/butonic/followers","following_url":"https://api.github.com/users/butonic/following{/other_user}","gists_url":"https://api.github.com/users/butonic/gists{/gist_id}","starred_url":"https://api.github.com/users/butonic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/butonic/subscriptions","organizations_url":"https://api.github.com/users/butonic/orgs","repos_url":"https://api.github.com/users/butonic/repos","events_url":"https://api.github.com/users/butonic/events{/privacy}","received_events_url":"https://api.github.com/users/butonic/received_events","type":"user","site_admin":false},"created_at":"2013-09-21t22:00:13z","updated_at":"2013-09-21t22:00:13z","body":"@icewind1991 if the tests don't show the problem can you at least reproduce the problem in the web ui? i know this will invalidate all file ids. but it solves this issue correctly. now if you have a better idea how to solve this problem out with it. :)"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/24871848","html_url":"https://github.com/owncloud/core/pull/4922#issuecomment-24871848","issue_url":"https://api.github.com/repos/owncloud/core/issues/4922","id":24871848,"user":{"login":"icewind1991","id":1283854,"avatar_url":"https://gravatar.com/avatar/7c20f90ca5df67dd2cad22a8e2f80d8f?d=https%3a%2f%2fidenticons.github.com%2fc818423776eba38604496a7caddc0251.png&r=x","gravatar_id":"7c20f90ca5df67dd2cad22a8e2f80d8f","url":"https://api.github.com/users/icewind1991","html_url":"https://github.com/icewind1991","followers_url":"https://api.github.com/users/icewind1991/followers","following_url":"https://api.github.com/users/icewind1991/following{/other_user}","gists_url":"https://api.github.com/users/icewind1991/gists{/gist_id}","starred_url":"https://api.github.com/users/icewind1991/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icewind1991/subscriptions","organizations_url":"https://api.github.com/users/icewind1991/orgs","repos_url":"https://api.github.com/users/icewind1991/repos","events_url":"https://api.github.com/users/icewind1991/events{/privacy}","received_events_url":"https://api.github.com/users/icewind1991/received_events","type":"user","site_admin":false},"created_at":"2013-09-21t22:22:10z","updated_at":"2013-09-21t22:22:10z","body":"i can't reproduce it in the web ui either, when i search for a file that also exists outside /$user/files (gallery thumbnail in this case) it doesn't show up in the search results.\r\n\r\ni've verified the behavior of https://github.com/owncloud/core/blob/master/lib/files/view.php#l1001 in the debugger and i can see it properly filtering out any search results that are not in the view."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/24872347","html_url":"https://github.com/owncloud/core/pull/4922#issuecomment-24872347","issue_url":"https://api.github.com/repos/owncloud/core/issues/4922","id":24872347,"user":{"login":"andrewsbrown","id":541880,"avatar_url":"https://gravatar.com/avatar/38c02df0c1936fa7f421a633424f588a?d=https%3a%2f%2fidenticons.github.com%2fe879ad3b77f230336dca4990faed9ef0.png&r=x","gravatar_id":"38c02df0c1936fa7f421a633424f588a","url":"https://api.github.com/users/andrewsbrown","html_url":"https://github.com/andrewsbrown","followers_url":"https://api.github.com/users/andrewsbrown/followers","following_url":"https://api.github.com/users/andrewsbrown/following{/other_user}","gists_url":"https://api.github.com/users/andrewsbrown/gists{/gist_id}","starred_url":"https://api.github.com/users/andrewsbrown/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrewsbrown/subscriptions","organizations_url":"https://api.github.com/users/andrewsbrown/orgs","repos_url":"https://api.github.com/users/andrewsbrown/repos","events_url":"https://api.github.com/users/andrewsbrown/events{/privacy}","received_events_url":"https://api.github.com/users/andrewsbrown/received_events","type":"user","site_admin":false},"created_at":"2013-09-21t22:58:52z","updated_at":"2013-09-21t22:58:52z","body":"@icewind1991, i understand what you are saying but here is what i see at https://github.com/owncloud/core/blob/master/lib/files/view.php#l1001:\r\n\r\n- $this->fakeroot is '/test/files' on my test system\r\n- $mountpoint is '/test/' and when concatenated with files starting with 'files_versions' or 'files_trashbin' and subsequently truncated by substr(), it becomes 'test/files'\r\n- so files from the versions and trash apps are then added to $results\r\n"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/24872689","html_url":"https://github.com/owncloud/core/pull/4922#issuecomment-24872689","issue_url":"https://api.github.com/repos/owncloud/core/issues/4922","id":24872689,"user":{"login":"icewind1991","id":1283854,"avatar_url":"https://gravatar.com/avatar/7c20f90ca5df67dd2cad22a8e2f80d8f?d=https%3a%2f%2fidenticons.github.com%2fc818423776eba38604496a7caddc0251.png&r=x","gravatar_id":"7c20f90ca5df67dd2cad22a8e2f80d8f","url":"https://api.github.com/users/icewind1991","html_url":"https://github.com/icewind1991","followers_url":"https://api.github.com/users/icewind1991/followers","following_url":"https://api.github.com/users/icewind1991/following{/other_user}","gists_url":"https://api.github.com/users/icewind1991/gists{/gist_id}","starred_url":"https://api.github.com/users/icewind1991/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icewind1991/subscriptions","organizations_url":"https://api.github.com/users/icewind1991/orgs","repos_url":"https://api.github.com/users/icewind1991/repos","events_url":"https://api.github.com/users/icewind1991/events{/privacy}","received_events_url":"https://api.github.com/users/icewind1991/received_events","type":"user","site_admin":false},"created_at":"2013-09-21t23:27:05z","updated_at":"2013-09-21t23:27:05z","body":"@andrewsbrown ok, now the bug makes sense to me, that's easy to solve by checking for a '/' after the fakeroot\r\n\r\nhttps://github.com/owncloud/core/pull/4938"}]