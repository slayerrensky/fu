[{"url":"https://api.github.com/repos/owncloud/core/issues/comments/21602194","html_url":"https://github.com/owncloud/core/issues/4186#issuecomment-21602194","issue_url":"https://api.github.com/repos/owncloud/core/issues/4186","id":21602194,"user":{"login":"kondou-ger","id":1410802,"avatar_url":"https://gravatar.com/avatar/917dab919ae812f8252b2f501c514b19?d=https%3a%2f%2fidenticons.github.com%2fd07869ed62cb1b7f88b731956ab913ee.png&r=x","gravatar_id":"917dab919ae812f8252b2f501c514b19","url":"https://api.github.com/users/kondou-ger","html_url":"https://github.com/kondou-ger","followers_url":"https://api.github.com/users/kondou-ger/followers","following_url":"https://api.github.com/users/kondou-ger/following{/other_user}","gists_url":"https://api.github.com/users/kondou-ger/gists{/gist_id}","starred_url":"https://api.github.com/users/kondou-ger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kondou-ger/subscriptions","organizations_url":"https://api.github.com/users/kondou-ger/orgs","repos_url":"https://api.github.com/users/kondou-ger/repos","events_url":"https://api.github.com/users/kondou-ger/events{/privacy}","received_events_url":"https://api.github.com/users/kondou-ger/received_events","type":"user","site_admin":false},"created_at":"2013-07-26t05:27:50z","updated_at":"2013-07-26t05:27:50z","body":"@blizzz"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/21604814","html_url":"https://github.com/owncloud/core/issues/4186#issuecomment-21604814","issue_url":"https://api.github.com/repos/owncloud/core/issues/4186","id":21604814,"user":{"login":"blizzz","id":2184312,"avatar_url":"https://gravatar.com/avatar/1898b25a9cb3aa1a0f0febd1359910b9?d=https%3a%2f%2fidenticons.github.com%2fca03acec6deadf508b75eb0cf9ba036c.png&r=x","gravatar_id":"1898b25a9cb3aa1a0f0febd1359910b9","url":"https://api.github.com/users/blizzz","html_url":"https://github.com/blizzz","followers_url":"https://api.github.com/users/blizzz/followers","following_url":"https://api.github.com/users/blizzz/following{/other_user}","gists_url":"https://api.github.com/users/blizzz/gists{/gist_id}","starred_url":"https://api.github.com/users/blizzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blizzz/subscriptions","organizations_url":"https://api.github.com/users/blizzz/orgs","repos_url":"https://api.github.com/users/blizzz/repos","events_url":"https://api.github.com/users/blizzz/events{/privacy}","received_events_url":"https://api.github.com/users/blizzz/received_events","type":"user","site_admin":false},"created_at":"2013-07-26t07:04:05z","updated_at":"2013-07-26t07:04:05z","body":"@k4k do you remember https://github.com/owncloud/core/issues/2600 ? adding port to host was a temporary workaround back then, before the fix of the linked bugreport. \r\n\r\n"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/21640736","html_url":"https://github.com/owncloud/core/issues/4186#issuecomment-21640736","issue_url":"https://api.github.com/repos/owncloud/core/issues/4186","id":21640736,"user":{"login":"k4k","id":524645,"avatar_url":"https://gravatar.com/avatar/d2370393332e368172e3c4010c60583e?d=https%3a%2f%2fidenticons.github.com%2f43224029fd81008db71a32b3d37e8c30.png&r=x","gravatar_id":"d2370393332e368172e3c4010c60583e","url":"https://api.github.com/users/k4k","html_url":"https://github.com/k4k","followers_url":"https://api.github.com/users/k4k/followers","following_url":"https://api.github.com/users/k4k/following{/other_user}","gists_url":"https://api.github.com/users/k4k/gists{/gist_id}","starred_url":"https://api.github.com/users/k4k/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/k4k/subscriptions","organizations_url":"https://api.github.com/users/k4k/orgs","repos_url":"https://api.github.com/users/k4k/repos","events_url":"https://api.github.com/users/k4k/events{/privacy}","received_events_url":"https://api.github.com/users/k4k/received_events","type":"user","site_admin":false},"created_at":"2013-07-26t18:52:13z","updated_at":"2013-07-26t18:53:56z","body":"@blizzz after posting the above i went through and did more testing. my test and results are below:\r\n\r\nfresh install of 5.0.6\r\nldaps://servername.com with port in \"advanced\" tab set to 3269 works. tcpdump -i eth0 port 3269 shows no traffic but port 636 does (this is consistent with the behaviour from #2600).\r\n\r\nupgrade to 5.0.9\r\nldaps://servername.com with port in \"advanced\" tab set to 3269 fails to bind. tcpdump -i eth0 port 3269 shows no traffic nor does port 636. changing \"port\" in \"advanced\" tab to 636 succeeds.\r\n\r\nit seems as though the port being set to something other than 636 or 389 in the advanced tab is the culprit here."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/21710013","html_url":"https://github.com/owncloud/core/issues/4186#issuecomment-21710013","issue_url":"https://api.github.com/repos/owncloud/core/issues/4186","id":21710013,"user":{"login":"blizzz","id":2184312,"avatar_url":"https://gravatar.com/avatar/1898b25a9cb3aa1a0f0febd1359910b9?d=https%3a%2f%2fidenticons.github.com%2fca03acec6deadf508b75eb0cf9ba036c.png&r=x","gravatar_id":"1898b25a9cb3aa1a0f0febd1359910b9","url":"https://api.github.com/users/blizzz","html_url":"https://github.com/blizzz","followers_url":"https://api.github.com/users/blizzz/followers","following_url":"https://api.github.com/users/blizzz/following{/other_user}","gists_url":"https://api.github.com/users/blizzz/gists{/gist_id}","starred_url":"https://api.github.com/users/blizzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blizzz/subscriptions","organizations_url":"https://api.github.com/users/blizzz/orgs","repos_url":"https://api.github.com/users/blizzz/repos","events_url":"https://api.github.com/users/blizzz/events{/privacy}","received_events_url":"https://api.github.com/users/blizzz/received_events","type":"user","site_admin":false},"created_at":"2013-07-29t10:00:45z","updated_at":"2013-07-29t10:00:45z","body":"please excuse me, i should read it more carefully. i will look into it, but it may take 2-3 days."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22032740","html_url":"https://github.com/owncloud/core/issues/4186#issuecomment-22032740","issue_url":"https://api.github.com/repos/owncloud/core/issues/4186","id":22032740,"user":{"login":"blizzz","id":2184312,"avatar_url":"https://gravatar.com/avatar/1898b25a9cb3aa1a0f0febd1359910b9?d=https%3a%2f%2fidenticons.github.com%2fca03acec6deadf508b75eb0cf9ba036c.png&r=x","gravatar_id":"1898b25a9cb3aa1a0f0febd1359910b9","url":"https://api.github.com/users/blizzz","html_url":"https://github.com/blizzz","followers_url":"https://api.github.com/users/blizzz/followers","following_url":"https://api.github.com/users/blizzz/following{/other_user}","gists_url":"https://api.github.com/users/blizzz/gists{/gist_id}","starred_url":"https://api.github.com/users/blizzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blizzz/subscriptions","organizations_url":"https://api.github.com/users/blizzz/orgs","repos_url":"https://api.github.com/users/blizzz/repos","events_url":"https://api.github.com/users/blizzz/events{/privacy}","received_events_url":"https://api.github.com/users/blizzz/received_events","type":"user","site_admin":false},"created_at":"2013-08-02t20:20:07z","updated_at":"2013-08-02t20:20:07z","body":"i have a setup here with port 7636 (and not listening on 636) and it works using stable5 (few minor changes since 5.0.9 but nothing that affects the connection) having ldaps://servername.com as host with port in \"advanced\" tab set to 7636 :\r\n\r\n```\r\naug  2 22:09:14 elwood slapd[24947]: conn=1004 fd=15 accept from ip=192.168.56.1:57134 (ip=0.0.0.0:7636)\r\naug  2 22:09:14 elwood slapd[24947]: conn=1004 fd=15 tls established tls_ssf=128 ssf=128\r\naug  2 22:09:14 elwood slapd[24947]: conn=1004 op=0 bind dn=\"uid=owncloudsystemuser,cn=sysusers,cn=owncloud,dc=owncloud,dc=bzoc\" method=128\r\naug  2 22:09:14 elwood slapd[24947]: conn=1004 op=0 bind dn=\"uid=owncloudsystemuser,cn=sysusers,cn=owncloud,dc=owncloud,dc=bzoc\" mech=simple ssf=0\r\naug  2 22:09:14 elwood slapd[24947]: conn=1004 op=0 result tag=97 err=0 text=\r\naug  2 22:09:14 elwood slapd[24947]: conn=1004 op=1 unbind\r\naug  2 22:09:14 elwood slapd[24947]: conn=1004 fd=15 closed\r\n```\r\n\r\nalso, traffic is arriving at 7636:\r\n\r\n```\r\ntcpdump -i eth1 port 7636\r\ntcpdump: verbose output suppressed, use -v or -vv for full protocol decode\r\nlistening on eth1, link-type en10mb (ethernet), capture size 65535 bytes\r\n22:10:57.894073 ip 192.168.56.1.57224 > elwood.owncloud.bzoc.7636: flags [s], seq 3332604422, win 14600, options [mss 1460,sackok,ts val 37215082 ecr 0,nop,wscale 7], length 0\r\n22:10:57.894134 ip elwood.owncloud.bzoc.7636 > 192.168.56.1.57224: flags [s.], seq 2335039035, ack 3332604423, win 14480, options [mss 1460,sackok,ts val 7456104 ecr 37215082,nop,wscale 3], length 0\r\n22:10:57.894319 ip 192.168.56.1.57224 > elwood.owncloud.bzoc.7636: flags [.], ack 1, win 115, options [nop,nop,ts val 37215082 ecr 7456104], length 0\r\n22:10:57.898126 ip 192.168.56.1.57224 > elwood.owncloud.bzoc.7636: flags [p.], seq 1:118, ack 1, win 115, options [nop,nop,ts val 37215082 ecr 7456104], length 117\r\n22:10:57.898165 ip elwood.owncloud.bzoc.7636 > 192.168.56.1.57224: flags [.], ack 118, win 1810, options [nop,nop,ts val 7456105 ecr 37215082], length 0\r\n22:10:57.902197 ip elwood.owncloud.bzoc.7636 > 192.168.56.1.57224: flags [.], seq 1:1449, ack 118, win 1810, options [nop,nop,ts val 7456106 ecr 37215082], length 1448\r\n22:10:57.902344 ip 192.168.56.1.57224 > elwood.owncloud.bzoc.7636: flags [.], ack 1449, win 137, options [nop,nop,ts val 37215084 ecr 7456106], length 0\r\n22:10:57.902388 ip elwood.owncloud.bzoc.7636 > 192.168.56.1.57224: flags [p.], seq 1449:2711, ack 118, win 1810, options [nop,nop,ts val 7456106 ecr 37215082], length 1262\r\n22:10:57.902515 ip 192.168.56.1.57224 > elwood.owncloud.bzoc.7636: flags [.], ack 2711, win 160, options [nop,nop,ts val 37215084 ecr 7456106], length 0\r\n22:10:57.906160 ip 192.168.56.1.57224 > elwood.owncloud.bzoc.7636: flags [p.], seq 118:257, ack 2711, win 160, options [nop,nop,ts val 37215084 ecr 7456106], length 139\r\n22:10:57.906172 ip 192.168.56.1.57224 > elwood.owncloud.bzoc.7636: flags [p.], seq 257:263, ack 2711, win 160, options [nop,nop,ts val 37215084 ecr 7456106], length 6\r\n22:10:57.906175 ip 192.168.56.1.57224 > elwood.owncloud.bzoc.7636: flags [p.], seq 263:476, ack 2711, win 160, options [nop,nop,ts val 37215084 ecr 7456106], length 213\r\n22:10:57.906794 ip elwood.owncloud.bzoc.7636 > 192.168.56.1.57224: flags [.], ack 476, win 1944, options [nop,nop,ts val 7456107 ecr 37215084], length 0\r\n22:10:57.909499 ip elwood.owncloud.bzoc.7636 > 192.168.56.1.57224: flags [p.], seq 2711:2770, ack 476, win 1944, options [nop,nop,ts val 7456108 ecr 37215084], length 59\r\n22:10:57.909906 ip 192.168.56.1.57224 > elwood.owncloud.bzoc.7636: flags [p.], seq 476:721, ack 2770, win 160, options [nop,nop,ts val 37215086 ecr 7456108], length 245\r\n22:10:57.925703 ip elwood.owncloud.bzoc.7636 > 192.168.56.1.57224: flags [p.], seq 2770:2860, ack 721, win 2078, options [nop,nop,ts val 7456112 ecr 37215086], length 90\r\n22:10:57.927399 ip 192.168.56.1.57224 > elwood.owncloud.bzoc.7636: flags [p.], seq 721:790, ack 2860, win 160, options [nop,nop,ts val 37215090 ecr 7456112], length 69\r\n22:10:57.927461 ip 192.168.56.1.57224 > elwood.owncloud.bzoc.7636: flags [p.], seq 790:923, ack 2860, win 160, options [nop,nop,ts val 37215090 ecr 7456112], length 133\r\n22:10:57.927470 ip 192.168.56.1.57224 > elwood.owncloud.bzoc.7636: flags [f.], seq 923, ack 2860, win 160, options [nop,nop,ts val 37215090 ecr 7456112], length 0\r\n22:10:57.927946 ip elwood.owncloud.bzoc.7636 > 192.168.56.1.57224: flags [p.], seq 2860:2897, ack 924, win 2212, options [nop,nop,ts val 7456113 ecr 37215090], length 37\r\n22:10:57.928152 ip 192.168.56.1.57224 > elwood.owncloud.bzoc.7636: flags [r], seq 3332605346, win 0, length 0\r\n```\r\n\r\nif you run openldap, can you set the debug level to 256 and check /var/log/syslog after clicking on \"test configuration\"? and post the output please. or adequate for other ldap servers."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22048173","html_url":"https://github.com/owncloud/core/issues/4186#issuecomment-22048173","issue_url":"https://api.github.com/repos/owncloud/core/issues/4186","id":22048173,"user":{"login":"k4k","id":524645,"avatar_url":"https://gravatar.com/avatar/d2370393332e368172e3c4010c60583e?d=https%3a%2f%2fidenticons.github.com%2f43224029fd81008db71a32b3d37e8c30.png&r=x","gravatar_id":"d2370393332e368172e3c4010c60583e","url":"https://api.github.com/users/k4k","html_url":"https://github.com/k4k","followers_url":"https://api.github.com/users/k4k/followers","following_url":"https://api.github.com/users/k4k/following{/other_user}","gists_url":"https://api.github.com/users/k4k/gists{/gist_id}","starred_url":"https://api.github.com/users/k4k/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/k4k/subscriptions","organizations_url":"https://api.github.com/users/k4k/orgs","repos_url":"https://api.github.com/users/k4k/repos","events_url":"https://api.github.com/users/k4k/events{/privacy}","received_events_url":"https://api.github.com/users/k4k/received_events","type":"user","site_admin":false},"created_at":"2013-08-03t04:15:08z","updated_at":"2013-08-03t04:15:08z","body":"i will be on holiday for the next week. when i return to the office i will\r\nsee what logs i can get. i am connecting to windows server 2008 r2 active\r\ndirectory. i don't think there will be any logs of any use on the active\r\ndirectory server, however, as tcpdump on the owncloud server does not show\r\nany traffic being sent when the port is set to something other than 636. no\r\noutbound traffic should equal no knowledge on the ad server of any\r\nconnection attempts. i will double check to be sure, though.\r\non aug 2, 2013 4:21 pm, \"blizzz\" <notifications@github.com> wrote:\r\n\r\n> i have a setup here with port 7636 (and not listening on 636) and it works\r\n> using stable5 (few minor changes since 5.0.9 but nothing that affects the\r\n> connection) having ldaps://servername.com as host with port in \"advanced\"\r\n> tab set to 7636 :\r\n>\r\n> aug  2 22:09:14 elwood slapd[24947]: conn=1004 fd=15 accept from ip=192.168.56.1:57134 (ip=0.0.0.0:7636)\r\n> aug  2 22:09:14 elwood slapd[24947]: conn=1004 fd=15 tls established tls_ssf=128 ssf=128\r\n> aug  2 22:09:14 elwood slapd[24947]: conn=1004 op=0 bind dn=\"uid=owncloudsystemuser,cn=sysusers,cn=owncloud,dc=owncloud,dc=bzoc\" method=128\r\n> aug  2 22:09:14 elwood slapd[24947]: conn=1004 op=0 bind dn=\"uid=owncloudsystemuser,cn=sysusers,cn=owncloud,dc=owncloud,dc=bzoc\" mech=simple ssf=0\r\n> aug  2 22:09:14 elwood slapd[24947]: conn=1004 op=0 result tag=97 err=0 text=\r\n> aug  2 22:09:14 elwood slapd[24947]: conn=1004 op=1 unbind\r\n> aug  2 22:09:14 elwood slapd[24947]: conn=1004 fd=15 closed\r\n>\r\n> also, traffic is arriving at 7636:\r\n>\r\n> tcpdump -i eth1 port 7636\r\n> tcpdump: verbose output suppressed, use -v or -vv for full protocol decode\r\n> listening on eth1, link-type en10mb (ethernet), capture size 65535 bytes\r\n> 22:10:57.894073 ip 192.168.56.1.57224 > elwood.owncloud.bzoc.7636: flags [s], seq 3332604422, win 14600, options [mss 1460,sackok,ts val 37215082 ecr 0,nop,wscale 7], length 0\r\n> 22:10:57.894134 ip elwood.owncloud.bzoc.7636 > 192.168.56.1.57224: flags [s.], seq 2335039035, ack 3332604423, win 14480, options [mss 1460,sackok,ts val 7456104 ecr 37215082,nop,wscale 3], length 0\r\n> 22:10:57.894319 ip 192.168.56.1.57224 > elwood.owncloud.bzoc.7636: flags [.], ack 1, win 115, options [nop,nop,ts val 37215082 ecr 7456104], length 0\r\n> 22:10:57.898126 ip 192.168.56.1.57224 > elwood.owncloud.bzoc.7636: flags [p.], seq 1:118, ack 1, win 115, options [nop,nop,ts val 37215082 ecr 7456104], length 117\r\n> 22:10:57.898165 ip elwood.owncloud.bzoc.7636 > 192.168.56.1.57224: flags [.], ack 118, win 1810, options [nop,nop,ts val 7456105 ecr 37215082], length 0\r\n> 22:10:57.902197 ip elwood.owncloud.bzoc.7636 > 192.168.56.1.57224: flags [.], seq 1:1449, ack 118, win 1810, options [nop,nop,ts val 7456106 ecr 37215082], length 1448\r\n> 22:10:57.902344 ip 192.168.56.1.57224 > elwood.owncloud.bzoc.7636: flags [.], ack 1449, win 137, options [nop,nop,ts val 37215084 ecr 7456106], length 0\r\n> 22:10:57.902388 ip elwood.owncloud.bzoc.7636 > 192.168.56.1.57224: flags [p.], seq 1449:2711, ack 118, win 1810, options [nop,nop,ts val 7456106 ecr 37215082], length 1262\r\n> 22:10:57.902515 ip 192.168.56.1.57224 > elwood.owncloud.bzoc.7636: flags [.], ack 2711, win 160, options [nop,nop,ts val 37215084 ecr 7456106], length 0\r\n> 22:10:57.906160 ip 192.168.56.1.57224 > elwood.owncloud.bzoc.7636: flags [p.], seq 118:257, ack 2711, win 160, options [nop,nop,ts val 37215084 ecr 7456106], length 139\r\n> 22:10:57.906172 ip 192.168.56.1.57224 > elwood.owncloud.bzoc.7636: flags [p.], seq 257:263, ack 2711, win 160, options [nop,nop,ts val 37215084 ecr 7456106], length 6\r\n> 22:10:57.906175 ip 192.168.56.1.57224 > elwood.owncloud.bzoc.7636: flags [p.], seq 263:476, ack 2711, win 160, options [nop,nop,ts val 37215084 ecr 7456106], length 213\r\n> 22:10:57.906794 ip elwood.owncloud.bzoc.7636 > 192.168.56.1.57224: flags [.], ack 476, win 1944, options [nop,nop,ts val 7456107 ecr 37215084], length 0\r\n> 22:10:57.909499 ip elwood.owncloud.bzoc.7636 > 192.168.56.1.57224: flags [p.], seq 2711:2770, ack 476, win 1944, options [nop,nop,ts val 7456108 ecr 37215084], length 59\r\n> 22:10:57.909906 ip 192.168.56.1.57224 > elwood.owncloud.bzoc.7636: flags [p.], seq 476:721, ack 2770, win 160, options [nop,nop,ts val 37215086 ecr 7456108], length 245\r\n> 22:10:57.925703 ip elwood.owncloud.bzoc.7636 > 192.168.56.1.57224: flags [p.], seq 2770:2860, ack 721, win 2078, options [nop,nop,ts val 7456112 ecr 37215086], length 90\r\n> 22:10:57.927399 ip 192.168.56.1.57224 > elwood.owncloud.bzoc.7636: flags [p.], seq 721:790, ack 2860, win 160, options [nop,nop,ts val 37215090 ecr 7456112], length 69\r\n> 22:10:57.927461 ip 192.168.56.1.57224 > elwood.owncloud.bzoc.7636: flags [p.], seq 790:923, ack 2860, win 160, options [nop,nop,ts val 37215090 ecr 7456112], length 133\r\n> 22:10:57.927470 ip 192.168.56.1.57224 > elwood.owncloud.bzoc.7636: flags [f.], seq 923, ack 2860, win 160, options [nop,nop,ts val 37215090 ecr 7456112], length 0\r\n> 22:10:57.927946 ip elwood.owncloud.bzoc.7636 > 192.168.56.1.57224: flags [p.], seq 2860:2897, ack 924, win 2212, options [nop,nop,ts val 7456113 ecr 37215090], length 37\r\n> 22:10:57.928152 ip 192.168.56.1.57224 > elwood.owncloud.bzoc.7636: flags [r], seq 3332605346, win 0, length 0\r\n>\r\n> if you run openldap, can you set the debug level to 256 and check\r\n> /var/log/syslog after clicking on \"test configuration\"? and post the output\r\n> please. or adequate for other ldap servers.\r\n>\r\n> —\r\n> reply to this email directly or view it on github<https://github.com/owncloud/core/issues/4186#issuecomment-22032740>\r\n> .\r\n>"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22771581","html_url":"https://github.com/owncloud/core/issues/4186#issuecomment-22771581","issue_url":"https://api.github.com/repos/owncloud/core/issues/4186","id":22771581,"user":{"login":"blizzz","id":2184312,"avatar_url":"https://gravatar.com/avatar/1898b25a9cb3aa1a0f0febd1359910b9?d=https%3a%2f%2fidenticons.github.com%2fca03acec6deadf508b75eb0cf9ba036c.png&r=x","gravatar_id":"1898b25a9cb3aa1a0f0febd1359910b9","url":"https://api.github.com/users/blizzz","html_url":"https://github.com/blizzz","followers_url":"https://api.github.com/users/blizzz/followers","following_url":"https://api.github.com/users/blizzz/following{/other_user}","gists_url":"https://api.github.com/users/blizzz/gists{/gist_id}","starred_url":"https://api.github.com/users/blizzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blizzz/subscriptions","organizations_url":"https://api.github.com/users/blizzz/orgs","repos_url":"https://api.github.com/users/blizzz/repos","events_url":"https://api.github.com/users/blizzz/events{/privacy}","received_events_url":"https://api.github.com/users/blizzz/received_events","type":"user","site_admin":false},"created_at":"2013-08-16t14:59:48z","updated_at":"2013-08-16t14:59:48z","body":"hope you enjoyed your holidays! any news to share?"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/23494567","html_url":"https://github.com/owncloud/core/issues/4186#issuecomment-23494567","issue_url":"https://api.github.com/repos/owncloud/core/issues/4186","id":23494567,"user":{"login":"k4k","id":524645,"avatar_url":"https://gravatar.com/avatar/d2370393332e368172e3c4010c60583e?d=https%3a%2f%2fidenticons.github.com%2f43224029fd81008db71a32b3d37e8c30.png&r=x","gravatar_id":"d2370393332e368172e3c4010c60583e","url":"https://api.github.com/users/k4k","html_url":"https://github.com/k4k","followers_url":"https://api.github.com/users/k4k/followers","following_url":"https://api.github.com/users/k4k/following{/other_user}","gists_url":"https://api.github.com/users/k4k/gists{/gist_id}","starred_url":"https://api.github.com/users/k4k/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/k4k/subscriptions","organizations_url":"https://api.github.com/users/k4k/orgs","repos_url":"https://api.github.com/users/k4k/repos","events_url":"https://api.github.com/users/k4k/events{/privacy}","received_events_url":"https://api.github.com/users/k4k/received_events","type":"user","site_admin":false},"created_at":"2013-08-29t14:42:42z","updated_at":"2013-08-29t14:42:42z","body":"@blizzz sorry for the delay in getting back to you. when i returned to the office i found 5.0.10 was released and upgraded my test server. it seems this issue has been resolved. i can specify a custom port as well as an ldaps uri string and i'm getting traffic over the expected port. closing this ticket, resolved in oc5.0.10"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/24089080","html_url":"https://github.com/owncloud/core/issues/4186#issuecomment-24089080","issue_url":"https://api.github.com/repos/owncloud/core/issues/4186","id":24089080,"user":{"login":"k4k","id":524645,"avatar_url":"https://gravatar.com/avatar/d2370393332e368172e3c4010c60583e?d=https%3a%2f%2fidenticons.github.com%2f43224029fd81008db71a32b3d37e8c30.png&r=x","gravatar_id":"d2370393332e368172e3c4010c60583e","url":"https://api.github.com/users/k4k","html_url":"https://github.com/k4k","followers_url":"https://api.github.com/users/k4k/followers","following_url":"https://api.github.com/users/k4k/following{/other_user}","gists_url":"https://api.github.com/users/k4k/gists{/gist_id}","starred_url":"https://api.github.com/users/k4k/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/k4k/subscriptions","organizations_url":"https://api.github.com/users/k4k/orgs","repos_url":"https://api.github.com/users/k4k/repos","events_url":"https://api.github.com/users/k4k/events{/privacy}","received_events_url":"https://api.github.com/users/k4k/received_events","type":"user","site_admin":false},"created_at":"2013-09-09t15:56:43z","updated_at":"2013-09-09t15:56:43z","body":"@blizzz it seems i was wrong about this. i'm wondering if this has something to do with the server os... i can't explain it but i have three servers. two production systems and a test system. the test system is ubuntu 12.04 and the production systems are rhel 6.4. on the test system, the upgrade to 5.0.10 went smoothly and the ports work as expected. on the rhel systems, however, i upgrade them and 636 is still required in the port field to get a successful bind.\r\n\r\nany thoughts?"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/24091359","html_url":"https://github.com/owncloud/core/issues/4186#issuecomment-24091359","issue_url":"https://api.github.com/repos/owncloud/core/issues/4186","id":24091359,"user":{"login":"k4k","id":524645,"avatar_url":"https://gravatar.com/avatar/d2370393332e368172e3c4010c60583e?d=https%3a%2f%2fidenticons.github.com%2f43224029fd81008db71a32b3d37e8c30.png&r=x","gravatar_id":"d2370393332e368172e3c4010c60583e","url":"https://api.github.com/users/k4k","html_url":"https://github.com/k4k","followers_url":"https://api.github.com/users/k4k/followers","following_url":"https://api.github.com/users/k4k/following{/other_user}","gists_url":"https://api.github.com/users/k4k/gists{/gist_id}","starred_url":"https://api.github.com/users/k4k/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/k4k/subscriptions","organizations_url":"https://api.github.com/users/k4k/orgs","repos_url":"https://api.github.com/users/k4k/repos","events_url":"https://api.github.com/users/k4k/events{/privacy}","received_events_url":"https://api.github.com/users/k4k/received_events","type":"user","site_admin":false},"created_at":"2013-09-09t16:20:58z","updated_at":"2013-09-09t16:20:58z","body":"some additional information:\r\n\r\ni just ran\r\n```\r\ntcpdump -i eth0 dst host domain_controller.tld and not port 53 -vvv\r\n```\r\nwhen port 636 is set in advanced configuration i get the following output\r\n```\r\n12:14:53.771222 ip (tos 0x0, ttl 64, id 62231, offset 0, flags [df], proto tcp (6), length 52)\r\n    xxxxx.xxxx.xxxx.xxx.58531 > xxxxxxxx.xxxxx.xxxx.org.ldaps: flags [s], cksum 0x8344 (correct), seq 349997834, win 14600, options [mss 1460,nop,nop,sackok,nop,wscale 7], length 0\r\n12:14:53.771676 ip (tos 0x0, ttl 64, id 62232, offset 0, flags [df], proto tcp (6), length 40)\r\n   xxxxx.xxxxx.xxxx.org.58531 > xxxxxxxx.xxxxx.xxxx.org.ldaps: flags [.], cksum 0x6e57 (correct), seq 349997835, ack 1941510795, win 115, length 0\r\n12:14:53.772233 ip (tos 0x0, ttl 64, id 62233, offset 0, flags [df], proto tcp (6), length 142)\r\n   xxxxx.xxxxx.xxxx.org.58531 > xxxxxxxx.xxxxx.xxxx.org.ldaps: flags [p.], cksum 0x2c3f (incorrect -> 0xc040), seq 0:102, ack 1, win 115, length 102\r\n12:14:53.772715 ip (tos 0x0, ttl 64, id 62234, offset 0, flags [df], proto tcp (6), length 40)\r\n    xxxxx.xxxxx.xxxx.org.58531 > xxxxxxxx.xxxxx.xxxx.org.ldaps: flags [.], cksum 0x6827 (correct), seq 102, ack 1461, win 137, length 0\r\n12:14:53.772738 ip (tos 0x0, ttl 64, id 62235, offset 0, flags [df], proto tcp (6), length 40)\r\n    xxxxx.xxxx.xxxx.org.58531 > xxxxxxxx.xxxxx.xxxx.org.ldaps: flags [.], cksum 0x629f (correct), seq 102, ack 2854, win 160, length 0\r\n12:14:53.774852 ip (tos 0x0, ttl 64, id 62236, offset 0, flags [df], proto tcp (6), length 245)\r\n    xxxxx.xxxxx.xxxx.org.58531 > xxxxxxxx.xxxxx.xxxx.ldaps: flags [p.], cksum 0x2ca6 (incorrect -> 0x704c), seq 102:307, ack 2854, win 160, length 205\r\n12:14:53.776386 ip (tos 0x0, ttl 64, id 62237, offset 0, flags [df], proto tcp (6), length 125)\r\n    xxxxx.xxxxx.xxxx.org.58531 > xxxxxxxx.xxxx.xxxx.org.ldaps: flags [p.], cksum 0x2c2e (incorrect -> 0x449b), seq 307:392, ack 2913, win 160, length 85\r\n12:14:53.779274 ip (tos 0x0, ttl 64, id 62238, offset 0, flags [df], proto tcp (6), length 77)\r\n   xxxxx.xxxx.xxxx.org.58531 > xxxxxxxx.xxxxx.xxxx.org.ldaps: flags [p.], cksum 0x2bfe (incorrect -> 0x0660), seq 392:429, ack 2966, win 160, length 37\r\n12:14:53.779397 ip (tos 0x0, ttl 64, id 62239, offset 0, flags [df], proto tcp (6), length 77)\r\n    xxxxx.xxxxx.xxxx.58531 > xxxxxxxx.xxxx.xxxxx.org.ldaps: flags [p.], cksum 0x2bfe (incorrect -> 0x9bae), seq 429:466, ack 2966, win 160, length 37\r\n12:14:53.779479 ip (tos 0x0, ttl 64, id 62240, offset 0, flags [df], proto tcp (6), length 40)\r\n    xxxxx.xxxxx.xxxx.58531 > xxxxxxxx.xxxxx.xxxx.org.ldaps: flags [f.], cksum 0x60c2 (correct), seq 466, ack 2966, win 160, length 0\r\n```\r\nand it binds successfully.\r\n\r\nif i change my port to 3269 i get no output from the same tcpdump command. it's seems with anything other than 389 or 636 in the port field, oc does not send out any requests.\r\n\r\ni also checked server logs and this seems to be the case there as well. i see incoming traffic when set to 636 and nothing when set to anything else."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/24092126","html_url":"https://github.com/owncloud/core/issues/4186#issuecomment-24092126","issue_url":"https://api.github.com/repos/owncloud/core/issues/4186","id":24092126,"user":{"login":"blizzz","id":2184312,"avatar_url":"https://gravatar.com/avatar/1898b25a9cb3aa1a0f0febd1359910b9?d=https%3a%2f%2fidenticons.github.com%2fca03acec6deadf508b75eb0cf9ba036c.png&r=x","gravatar_id":"1898b25a9cb3aa1a0f0febd1359910b9","url":"https://api.github.com/users/blizzz","html_url":"https://github.com/blizzz","followers_url":"https://api.github.com/users/blizzz/followers","following_url":"https://api.github.com/users/blizzz/following{/other_user}","gists_url":"https://api.github.com/users/blizzz/gists{/gist_id}","starred_url":"https://api.github.com/users/blizzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blizzz/subscriptions","organizations_url":"https://api.github.com/users/blizzz/orgs","repos_url":"https://api.github.com/users/blizzz/repos","events_url":"https://api.github.com/users/blizzz/events{/privacy}","received_events_url":"https://api.github.com/users/blizzz/received_events","type":"user","site_admin":false},"created_at":"2013-09-09t16:28:53z","updated_at":"2013-09-09t16:28:53z","body":"> on the rhel systems, however, i upgrade them and 636 is still required in the port field to get a successful bind.\r\n\r\nyou mean it always tries to connect to port 636?\r\n\r\ndid something change on your production server? firewall or something?\r\n\r\ni search for bugs and/or weird behaviour with ldap_connect and rhel, but without any finding that matches. "},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/24095833","html_url":"https://github.com/owncloud/core/issues/4186#issuecomment-24095833","issue_url":"https://api.github.com/repos/owncloud/core/issues/4186","id":24095833,"user":{"login":"k4k","id":524645,"avatar_url":"https://gravatar.com/avatar/d2370393332e368172e3c4010c60583e?d=https%3a%2f%2fidenticons.github.com%2f43224029fd81008db71a32b3d37e8c30.png&r=x","gravatar_id":"d2370393332e368172e3c4010c60583e","url":"https://api.github.com/users/k4k","html_url":"https://github.com/k4k","followers_url":"https://api.github.com/users/k4k/followers","following_url":"https://api.github.com/users/k4k/following{/other_user}","gists_url":"https://api.github.com/users/k4k/gists{/gist_id}","starred_url":"https://api.github.com/users/k4k/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/k4k/subscriptions","organizations_url":"https://api.github.com/users/k4k/orgs","repos_url":"https://api.github.com/users/k4k/repos","events_url":"https://api.github.com/users/k4k/events{/privacy}","received_events_url":"https://api.github.com/users/k4k/received_events","type":"user","site_admin":false},"created_at":"2013-09-09t17:08:33z","updated_at":"2013-09-09t17:10:07z","body":"(sorry about the close/open, having pebkac issues today)\r\n\r\n> you mean it always tries to connect to port 636?\r\n\r\ni mean that if i set it to 636, it will connect using 636 but if i set it to the port i actually use for ad (3269, in order to traverse multiple domains) i get no network traffic.\r\n\r\n> did something change on your production server? firewall or something?\r\n\r\nnothing has changed on the production server. the only changes that get applied are periodic system updates (automatic) and oc updates when i notice they're available.\r\n\r\nconnecting to the ad server works fine using the following command on both the ubuntu and rhel systems:\r\n```\r\n[root@xxxxxxx ~]# ldapsearch -h ldaps://xxxxxxxxxxxx.xxxxx.xxxx.org:3269 -d xxxx@xxxxx.xxxx.org -w \r\n```\r\nresults in verbose output from the ad server.\r\n"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/24110349","html_url":"https://github.com/owncloud/core/issues/4186#issuecomment-24110349","issue_url":"https://api.github.com/repos/owncloud/core/issues/4186","id":24110349,"user":{"login":"k4k","id":524645,"avatar_url":"https://gravatar.com/avatar/d2370393332e368172e3c4010c60583e?d=https%3a%2f%2fidenticons.github.com%2f43224029fd81008db71a32b3d37e8c30.png&r=x","gravatar_id":"d2370393332e368172e3c4010c60583e","url":"https://api.github.com/users/k4k","html_url":"https://github.com/k4k","followers_url":"https://api.github.com/users/k4k/followers","following_url":"https://api.github.com/users/k4k/following{/other_user}","gists_url":"https://api.github.com/users/k4k/gists{/gist_id}","starred_url":"https://api.github.com/users/k4k/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/k4k/subscriptions","organizations_url":"https://api.github.com/users/k4k/orgs","repos_url":"https://api.github.com/users/k4k/repos","events_url":"https://api.github.com/users/k4k/events{/privacy}","received_events_url":"https://api.github.com/users/k4k/received_events","type":"user","site_admin":false},"created_at":"2013-09-09t20:08:44z","updated_at":"2013-09-09t20:08:44z","body":"@blizzz i got it!\r\n\r\nit's an selinux issue. i'm not sure why it suddenly became an issue (or why turning selinux to permissive didn't fix it) but after analyzing audit.log i saw the following lines:\r\n```\r\ntype=avc msg=audit(1378756901.594:14817): avc:  denied  { name_connect } for  pid=3176 comm=\"httpd\" dest=3269 scontext=unconfined_u:system_r:httpd_t:s0 tcontext=system_u:object_r:port_t:s0 tclass=tcp_socket\r\ntype=syscall msg=audit(1378756901.594:14817): arch=c000003e syscall=42 success=no exit=-13 a0=15 a1=7f10668e0570 a2=10 a3=0 items=0 ppid=3171 pid=3176 auid=0 uid=48 gid=48 euid=48 suid=48 fsuid=48 egid=48 sgid=48 fsgid=48 tty=(none) ses=35 comm=\"httpd\" exe=\"/usr/sbin/httpd\" subj=unconfined_u:system_r:httpd_t:s0 key=(null)\r\ntype=sockaddr msg=audit(1378756901.594:14817): saddr=02000cc50a5b0b3c0000000000000000\r\ntype=avc msg=audit(1378756902.695:14818): avc:  denied  { name_connect } for  pid=3177 comm=\"httpd\" dest=3269 scontext=unconfined_u:system_r:httpd_t:s0 tcontext=system_u:object_r:port_t:s0 tclass=tcp_socket\r\ntype=syscall msg=audit(1378756902.695:14818): arch=c000003e syscall=42 success=no exit=-13 a0=15 a1=7f10668dd380 a2=10 a3=0 items=0 ppid=3171 pid=3177 auid=0 uid=48 gid=48 euid=48 suid=48 fsuid=48 egid=48 sgid=48 fsgid=48 tty=(none) ses=35 comm=\"httpd\" exe=\"/usr/sbin/httpd\" subj=unconfined_u:system_r:httpd_t:s0 key=(null)\r\ntype=sockaddr msg=audit(1378756902.695:14818): saddr=02000cc50a5b0b3c0000000000000000\r\n```\r\nrunning that through audit2allow generated the following .te file:\r\n```\r\n\r\nmodule myname_connect 1.0;\r\n\r\nrequire {\r\n        type httpd_t;\r\n        type port_t;\r\n        class tcp_socket name_connect;\r\n}\r\n\r\n#============= httpd_t ==============\r\n\r\n#!!!! this avc can be allowed using one of the these booleans:\r\n#     allow_ypbind, httpd_can_network_connect\r\nallow httpd_t port_t:tcp_socket name_connect;\r\n```\r\n\r\nfor those that find this while trying to fix their own system, create the .te file i've pasted above and run the following commands:\r\n```\r\ncheckmodule -m -m -o myname_connect.mod myname_connect.te\r\nsemodule_package -o myname_connect.pp -m myname_connect.mod\r\nsemodule -i myname_connect.pp\r\n```\r\nthen for good measure i restarted httpd. i was then able to change the port to something other than 636."}]