[{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17220640","html_url":"https://github.com/owncloud/core/issues/3190#issuecomment-17220640","issue_url":"https://api.github.com/repos/owncloud/core/issues/3190","id":17220640,"user":{"login":"butonic","id":956847,"avatar_url":"https://gravatar.com/avatar/9760c134cabf66e10dbba06d7525f5c7?d=https%3a%2f%2fidenticons.github.com%2f92925ec1ad893739ed57986f18e2f060.png&r=x","gravatar_id":"9760c134cabf66e10dbba06d7525f5c7","url":"https://api.github.com/users/butonic","html_url":"https://github.com/butonic","followers_url":"https://api.github.com/users/butonic/followers","following_url":"https://api.github.com/users/butonic/following{/other_user}","gists_url":"https://api.github.com/users/butonic/gists{/gist_id}","starred_url":"https://api.github.com/users/butonic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/butonic/subscriptions","organizations_url":"https://api.github.com/users/butonic/orgs","repos_url":"https://api.github.com/users/butonic/repos","events_url":"https://api.github.com/users/butonic/events{/privacy}","received_events_url":"https://api.github.com/users/butonic/received_events","type":"user","site_admin":false},"created_at":"2013-04-30t10:53:17z","updated_at":"2013-04-30t10:53:17z","body":"pulling @icewind1991 @deepdiver1975 @raydiation @bartv2 @karlitschek here for an opinion on how to test utf8 capability of the files app and webdav."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17221362","html_url":"https://github.com/owncloud/core/issues/3190#issuecomment-17221362","issue_url":"https://api.github.com/repos/owncloud/core/issues/3190","id":17221362,"user":{"login":"danimo","id":1315934,"avatar_url":"https://gravatar.com/avatar/9467db6bbeaac42484603e0788aec39d?d=https%3a%2f%2fidenticons.github.com%2f296ab09e5a31dcf357f4d4784453db99.png&r=x","gravatar_id":"9467db6bbeaac42484603e0788aec39d","url":"https://api.github.com/users/danimo","html_url":"https://github.com/danimo","followers_url":"https://api.github.com/users/danimo/followers","following_url":"https://api.github.com/users/danimo/following{/other_user}","gists_url":"https://api.github.com/users/danimo/gists{/gist_id}","starred_url":"https://api.github.com/users/danimo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danimo/subscriptions","organizations_url":"https://api.github.com/users/danimo/orgs","repos_url":"https://api.github.com/users/danimo/repos","events_url":"https://api.github.com/users/danimo/events{/privacy}","received_events_url":"https://api.github.com/users/danimo/received_events","type":"user","site_admin":false},"created_at":"2013-04-30t11:15:03z","updated_at":"2013-04-30t11:18:39z","body":"ok, let's handle this case by case:\r\n\r\n1. storage backends (even local ones, as they could be nfs mounts) need to be checked for utf8-safety. storing and reading back a sophisticated string like the above sounds like a good approach. this should be complemented with documentation in the admin manual. also we have hints that in order to store utf-8 with nfs on nfs-servers running windows, nfsv4 is needed. i do not have more information than that. several hardware vendors, e.g. [dell](http://www.dell.com/us/business/p/powervault-nx/fs), are known to drive their nfs servers with windows server, so this could actually be a pretty common problem.\r\n\r\n2. the problem of unicode equivalence is on a not on storage system, but on file level: in general, most storage backends will allow both forms, or even both forms in one filename, and in fact there is little we can do about nfd \"leaking in\" from somewhere. dropbox advises the users of their apis [to normalize to nfc](https://www.dropbox.com/developers/core/api), and while this is simple with http (the rfc advises on nfc form for percent encoding), it cannot be forced on nfs, samba, or whatever.  all that can be done is checking for nfc-formedness when reading the file name from the backend. the backend setup process is the wrong place to check for this. recommended reading on this topic: [unicode equivalence](http://en.wikipedia.org/wiki/unicode_equivalence)."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17833696","html_url":"https://github.com/owncloud/core/issues/3190#issuecomment-17833696","issue_url":"https://api.github.com/repos/owncloud/core/issues/3190","id":17833696,"user":{"login":"bantu","id":189375,"avatar_url":"https://gravatar.com/avatar/88483d87947219efecfc570465c753b2?d=https%3a%2f%2fidenticons.github.com%2fcdc48f189c0e2e8a870f3d54615a2f0d.png&r=x","gravatar_id":"88483d87947219efecfc570465c753b2","url":"https://api.github.com/users/bantu","html_url":"https://github.com/bantu","followers_url":"https://api.github.com/users/bantu/followers","following_url":"https://api.github.com/users/bantu/following{/other_user}","gists_url":"https://api.github.com/users/bantu/gists{/gist_id}","starred_url":"https://api.github.com/users/bantu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bantu/subscriptions","organizations_url":"https://api.github.com/users/bantu/orgs","repos_url":"https://api.github.com/users/bantu/repos","events_url":"https://api.github.com/users/bantu/events{/privacy}","received_events_url":"https://api.github.com/users/bantu/received_events","type":"user","site_admin":false},"created_at":"2013-05-13t19:11:49z","updated_at":"2013-05-13t19:11:49z","body":"@danimo you can get rid of the utf8 dependency on the filesystem by using randomly generated ascii/hex characters as filesystem filenames and putting the original filename into the db, which surely supports utf8. this will also get rid of any problems regarding max filename or max pathname length etc."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17833805","html_url":"https://github.com/owncloud/core/issues/3190#issuecomment-17833805","issue_url":"https://api.github.com/repos/owncloud/core/issues/3190","id":17833805,"user":{"login":"danimo","id":1315934,"avatar_url":"https://gravatar.com/avatar/9467db6bbeaac42484603e0788aec39d?d=https%3a%2f%2fidenticons.github.com%2f296ab09e5a31dcf357f4d4784453db99.png&r=x","gravatar_id":"9467db6bbeaac42484603e0788aec39d","url":"https://api.github.com/users/danimo","html_url":"https://github.com/danimo","followers_url":"https://api.github.com/users/danimo/followers","following_url":"https://api.github.com/users/danimo/following{/other_user}","gists_url":"https://api.github.com/users/danimo/gists{/gist_id}","starred_url":"https://api.github.com/users/danimo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danimo/subscriptions","organizations_url":"https://api.github.com/users/danimo/orgs","repos_url":"https://api.github.com/users/danimo/repos","events_url":"https://api.github.com/users/danimo/events{/privacy}","received_events_url":"https://api.github.com/users/danimo/received_events","type":"user","site_admin":false},"created_at":"2013-05-13t19:13:43z","updated_at":"2013-05-13t19:13:43z","body":"@bantu this is sort of what we do on windows, but it has several disadvantages, the most important being that the database may never get lost."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17834083","html_url":"https://github.com/owncloud/core/issues/3190#issuecomment-17834083","issue_url":"https://api.github.com/repos/owncloud/core/issues/3190","id":17834083,"user":{"login":"bantu","id":189375,"avatar_url":"https://gravatar.com/avatar/88483d87947219efecfc570465c753b2?d=https%3a%2f%2fidenticons.github.com%2fcdc48f189c0e2e8a870f3d54615a2f0d.png&r=x","gravatar_id":"88483d87947219efecfc570465c753b2","url":"https://api.github.com/users/bantu","html_url":"https://github.com/bantu","followers_url":"https://api.github.com/users/bantu/followers","following_url":"https://api.github.com/users/bantu/following{/other_user}","gists_url":"https://api.github.com/users/bantu/gists{/gist_id}","starred_url":"https://api.github.com/users/bantu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bantu/subscriptions","organizations_url":"https://api.github.com/users/bantu/orgs","repos_url":"https://api.github.com/users/bantu/repos","events_url":"https://api.github.com/users/bantu/events{/privacy}","received_events_url":"https://api.github.com/users/bantu/received_events","type":"user","site_admin":false},"created_at":"2013-05-13t19:18:39z","updated_at":"2013-05-13t19:18:39z","body":"@danimo don't you think that is a reasonable assumption?"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17834270","html_url":"https://github.com/owncloud/core/issues/3190#issuecomment-17834270","issue_url":"https://api.github.com/repos/owncloud/core/issues/3190","id":17834270,"user":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false},"created_at":"2013-05-13t19:21:55z","updated_at":"2013-05-13t19:21:55z","body":"the current implementation for windows can be extended to store the mapping of real file/folder names to their physical name in a second storage. e.g. a hidden file within the directories.\r\n\r\nin case the database is lost we can recreate the names on the initial scan.\r\n\r\nprs are welcome ..."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17834460","html_url":"https://github.com/owncloud/core/issues/3190#issuecomment-17834460","issue_url":"https://api.github.com/repos/owncloud/core/issues/3190","id":17834460,"user":{"login":"bantu","id":189375,"avatar_url":"https://gravatar.com/avatar/88483d87947219efecfc570465c753b2?d=https%3a%2f%2fidenticons.github.com%2fcdc48f189c0e2e8a870f3d54615a2f0d.png&r=x","gravatar_id":"88483d87947219efecfc570465c753b2","url":"https://api.github.com/users/bantu","html_url":"https://github.com/bantu","followers_url":"https://api.github.com/users/bantu/followers","following_url":"https://api.github.com/users/bantu/following{/other_user}","gists_url":"https://api.github.com/users/bantu/gists{/gist_id}","starred_url":"https://api.github.com/users/bantu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bantu/subscriptions","organizations_url":"https://api.github.com/users/bantu/orgs","repos_url":"https://api.github.com/users/bantu/repos","events_url":"https://api.github.com/users/bantu/events{/privacy}","received_events_url":"https://api.github.com/users/bantu/received_events","type":"user","site_admin":false},"created_at":"2013-05-13t19:25:19z","updated_at":"2013-05-13t19:25:45z","body":"@deepdiver1975 yeah no, a hidden file probably won't do it. at least not on a system with many concurrent write accesses. also poorly scales across multiple servers. just use the database and implement preriodic sql dumps instead?"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17834852","html_url":"https://github.com/owncloud/core/issues/3190#issuecomment-17834852","issue_url":"https://api.github.com/repos/owncloud/core/issues/3190","id":17834852,"user":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false},"created_at":"2013-05-13t19:31:39z","updated_at":"2013-05-13t19:31:39z","body":"> at least not on a system with many concurrent write accesses.\r\n\r\nshould not be an issue as this file will write to in case a file is created, deleted or renamed.\r\nand there should be one file in each subfolder for sure."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17835051","html_url":"https://github.com/owncloud/core/issues/3190#issuecomment-17835051","issue_url":"https://api.github.com/repos/owncloud/core/issues/3190","id":17835051,"user":{"login":"bantu","id":189375,"avatar_url":"https://gravatar.com/avatar/88483d87947219efecfc570465c753b2?d=https%3a%2f%2fidenticons.github.com%2fcdc48f189c0e2e8a870f3d54615a2f0d.png&r=x","gravatar_id":"88483d87947219efecfc570465c753b2","url":"https://api.github.com/users/bantu","html_url":"https://github.com/bantu","followers_url":"https://api.github.com/users/bantu/followers","following_url":"https://api.github.com/users/bantu/following{/other_user}","gists_url":"https://api.github.com/users/bantu/gists{/gist_id}","starred_url":"https://api.github.com/users/bantu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bantu/subscriptions","organizations_url":"https://api.github.com/users/bantu/orgs","repos_url":"https://api.github.com/users/bantu/repos","events_url":"https://api.github.com/users/bantu/events{/privacy}","received_events_url":"https://api.github.com/users/bantu/received_events","type":"user","site_admin":false},"created_at":"2013-05-13t19:34:26z","updated_at":"2013-05-13t19:35:36z","body":"@deepdiver1975 kind of how svn did it (and failed)? what's wrong with with using the db? it seems to be a db you are looking for."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17835330","html_url":"https://github.com/owncloud/core/issues/3190#issuecomment-17835330","issue_url":"https://api.github.com/repos/owncloud/core/issues/3190","id":17835330,"user":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false},"created_at":"2013-05-13t19:38:49z","updated_at":"2013-05-13t19:39:00z","body":"> kind of how svn did it\r\n\r\nyes\r\n\r\n> (and failed)\r\n\r\nhmm - as long as the files are not accessible by users directly i don't see an issue with that.\r\n\r\n> what's wrong with with using my suggestion?\r\n\r\nnothing - with the exceptions that database backup strategies are within the responsibility of the system operator.\r\nwe as a community cannot do much here i'd say.\r\n"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17837240","html_url":"https://github.com/owncloud/core/issues/3190#issuecomment-17837240","issue_url":"https://api.github.com/repos/owncloud/core/issues/3190","id":17837240,"user":{"login":"bantu","id":189375,"avatar_url":"https://gravatar.com/avatar/88483d87947219efecfc570465c753b2?d=https%3a%2f%2fidenticons.github.com%2fcdc48f189c0e2e8a870f3d54615a2f0d.png&r=x","gravatar_id":"88483d87947219efecfc570465c753b2","url":"https://api.github.com/users/bantu","html_url":"https://github.com/bantu","followers_url":"https://api.github.com/users/bantu/followers","following_url":"https://api.github.com/users/bantu/following{/other_user}","gists_url":"https://api.github.com/users/bantu/gists{/gist_id}","starred_url":"https://api.github.com/users/bantu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bantu/subscriptions","organizations_url":"https://api.github.com/users/bantu/orgs","repos_url":"https://api.github.com/users/bantu/repos","events_url":"https://api.github.com/users/bantu/events{/privacy}","received_events_url":"https://api.github.com/users/bantu/received_events","type":"user","site_admin":false},"created_at":"2013-05-13t20:12:07z","updated_at":"2013-05-13t20:12:07z","body":"well, you require a db - so why not use it?"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17837575","html_url":"https://github.com/owncloud/core/issues/3190#issuecomment-17837575","issue_url":"https://api.github.com/repos/owncloud/core/issues/3190","id":17837575,"user":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false},"created_at":"2013-05-13t20:17:15z","updated_at":"2013-05-13t20:17:15z","body":"> well, you require a db - so why not use it?\r\n\r\nmaybe i've been not precise enough: the main data storage will be the database. the hidden file is just the fallback."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17837685","html_url":"https://github.com/owncloud/core/issues/3190#issuecomment-17837685","issue_url":"https://api.github.com/repos/owncloud/core/issues/3190","id":17837685,"user":{"login":"bantu","id":189375,"avatar_url":"https://gravatar.com/avatar/88483d87947219efecfc570465c753b2?d=https%3a%2f%2fidenticons.github.com%2fcdc48f189c0e2e8a870f3d54615a2f0d.png&r=x","gravatar_id":"88483d87947219efecfc570465c753b2","url":"https://api.github.com/users/bantu","html_url":"https://github.com/bantu","followers_url":"https://api.github.com/users/bantu/followers","following_url":"https://api.github.com/users/bantu/following{/other_user}","gists_url":"https://api.github.com/users/bantu/gists{/gist_id}","starred_url":"https://api.github.com/users/bantu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bantu/subscriptions","organizations_url":"https://api.github.com/users/bantu/orgs","repos_url":"https://api.github.com/users/bantu/repos","events_url":"https://api.github.com/users/bantu/events{/privacy}","received_events_url":"https://api.github.com/users/bantu/received_events","type":"user","site_admin":false},"created_at":"2013-05-13t20:19:16z","updated_at":"2013-05-13t20:19:16z","body":"@deepdiver1975 oh, yeah, that wasn't clear. must have missed it. sorry."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17837779","html_url":"https://github.com/owncloud/core/issues/3190#issuecomment-17837779","issue_url":"https://api.github.com/repos/owncloud/core/issues/3190","id":17837779,"user":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false},"created_at":"2013-05-13t20:20:46z","updated_at":"2013-05-13t20:20:46z","body":">  must have missed it. sorry.\r\n\r\nno prob"}]