[{"url":"https://api.github.com/repos/owncloud/core/issues/comments/16433167","html_url":"https://github.com/owncloud/core/issues/2936#issuecomment-16433167","issue_url":"https://api.github.com/repos/owncloud/core/issues/2936","id":16433167,"user":{"login":"jancborchardt","id":925062,"avatar_url":"https://gravatar.com/avatar/2fd3f4d5d762955e5b603794a888fa97?d=https%3a%2f%2fidenticons.github.com%2f84ec51f9ceed468217d4e13abf78da9c.png&r=x","gravatar_id":"2fd3f4d5d762955e5b603794a888fa97","url":"https://api.github.com/users/jancborchardt","html_url":"https://github.com/jancborchardt","followers_url":"https://api.github.com/users/jancborchardt/followers","following_url":"https://api.github.com/users/jancborchardt/following{/other_user}","gists_url":"https://api.github.com/users/jancborchardt/gists{/gist_id}","starred_url":"https://api.github.com/users/jancborchardt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jancborchardt/subscriptions","organizations_url":"https://api.github.com/users/jancborchardt/orgs","repos_url":"https://api.github.com/users/jancborchardt/repos","events_url":"https://api.github.com/users/jancborchardt/events{/privacy}","received_events_url":"https://api.github.com/users/jancborchardt/received_events","type":"user","site_admin":false},"created_at":"2013-04-16t08:47:03z","updated_at":"2013-04-16t08:47:03z","body":"@schiesbn this sounds like it might be related to what you explained in #2931, or you probably know what to do about this. :)"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/16438489","html_url":"https://github.com/owncloud/core/issues/2936#issuecomment-16438489","issue_url":"https://api.github.com/repos/owncloud/core/issues/2936","id":16438489,"user":{"login":"schiesbn","id":1589737,"avatar_url":"https://gravatar.com/avatar/8912b598c7b32dd25b87fd168e0b06b2?d=https%3a%2f%2fidenticons.github.com%2f0a323047dbe8329db30eae8dbe96e55e.png&r=x","gravatar_id":"8912b598c7b32dd25b87fd168e0b06b2","url":"https://api.github.com/users/schiesbn","html_url":"https://github.com/schiesbn","followers_url":"https://api.github.com/users/schiesbn/followers","following_url":"https://api.github.com/users/schiesbn/following{/other_user}","gists_url":"https://api.github.com/users/schiesbn/gists{/gist_id}","starred_url":"https://api.github.com/users/schiesbn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schiesbn/subscriptions","organizations_url":"https://api.github.com/users/schiesbn/orgs","repos_url":"https://api.github.com/users/schiesbn/repos","events_url":"https://api.github.com/users/schiesbn/events{/privacy}","received_events_url":"https://api.github.com/users/schiesbn/received_events","type":"user","site_admin":false},"created_at":"2013-04-16t11:06:51z","updated_at":"2013-04-16t11:08:05z","body":"thanks for your detailed report!\r\n\r\nthe main idea is, that owncloud should give every user a fair share of the free space for additional data like the trash bin but also for versions. i see the problem you run into. the question is if it is possible to improve the situation and what's the best way to improve it.\r\n\r\nthere is probably a more general problem in the calculation if no quota is set. in your example \\oc\\files\\filesystem::free_space('/') will return 9gb if 1gb is already in use. if we use the free_space() than we don't have to subtract the trash bin size and the size of the users files because free_space() should take this already into account. i will fix this.\r\n\r\nbut even than the other question remains. dividing the remaining free space by the number of users guarantees that every user gets his share of the free space for additional data such as trash and versions. otherwise some users could occupy most of the free space so that other users doesn't have anything left for their trash bin.\r\nthe expire function will be only called if the user puts another file to the trash and it will only expire his own files for performance reasons. this means that if usera occupies 50% of the remaining space for his trash no other user will be able to put something into the trash bin until the expire function for usera will be called.\r\n\r\nbut maybe that's not a real problem. because a user could also occupy the whole space with regular files. if the admin don't want this to happen he can set a quota for each user. if no quota is set every user is free to grab all the remaining space and keep it as long as he wish. so i would just remove the division by the number of users, sounds this like a fair solution?\r\n\r\nopinion? @jancborchardt what do you think from the user expectation point of view?"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/16438810","html_url":"https://github.com/owncloud/core/issues/2936#issuecomment-16438810","issue_url":"https://api.github.com/repos/owncloud/core/issues/2936","id":16438810,"user":{"login":"trobert94","id":4163601,"avatar_url":"https://gravatar.com/avatar/80a7f535d5f593238b3f8b0f75bfb9b3?d=https%3a%2f%2fidenticons.github.com%2ff248275375905409a040da48a672d484.png&r=x","gravatar_id":"80a7f535d5f593238b3f8b0f75bfb9b3","url":"https://api.github.com/users/trobert94","html_url":"https://github.com/trobert94","followers_url":"https://api.github.com/users/trobert94/followers","following_url":"https://api.github.com/users/trobert94/following{/other_user}","gists_url":"https://api.github.com/users/trobert94/gists{/gist_id}","starred_url":"https://api.github.com/users/trobert94/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trobert94/subscriptions","organizations_url":"https://api.github.com/users/trobert94/orgs","repos_url":"https://api.github.com/users/trobert94/repos","events_url":"https://api.github.com/users/trobert94/events{/privacy}","received_events_url":"https://api.github.com/users/trobert94/received_events","type":"user","site_admin":false},"created_at":"2013-04-16t11:17:09z","updated_at":"2013-04-16t11:19:31z","body":"\"but maybe that's not a real problem. because a user could also occupy the whole space with regular files. if the admin don't want this to happen he can set a quota for each user. if no quota is set every user is free to grab all the remaining space and keep it as long as he wish. so i would just remove the division by the number of users, sounds this like a fair solution?\"\r\n\r\nthat's what i personally think. in my case for example, i trust my users not to use the whole space, so i didn't set any quota. and as you said they can use the whole space with files, so why not with the trash? this solution seems rather logical to me. if i don't trust my users anymore i will set quotas and they won't be able to use the whole space with their files and their trash anymore."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/16440389","html_url":"https://github.com/owncloud/core/issues/2936#issuecomment-16440389","issue_url":"https://api.github.com/repos/owncloud/core/issues/2936","id":16440389,"user":{"login":"schiesbn","id":1589737,"avatar_url":"https://gravatar.com/avatar/8912b598c7b32dd25b87fd168e0b06b2?d=https%3a%2f%2fidenticons.github.com%2f0a323047dbe8329db30eae8dbe96e55e.png&r=x","gravatar_id":"8912b598c7b32dd25b87fd168e0b06b2","url":"https://api.github.com/users/schiesbn","html_url":"https://github.com/schiesbn","followers_url":"https://api.github.com/users/schiesbn/followers","following_url":"https://api.github.com/users/schiesbn/following{/other_user}","gists_url":"https://api.github.com/users/schiesbn/gists{/gist_id}","starred_url":"https://api.github.com/users/schiesbn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schiesbn/subscriptions","organizations_url":"https://api.github.com/users/schiesbn/orgs","repos_url":"https://api.github.com/users/schiesbn/repos","events_url":"https://api.github.com/users/schiesbn/events{/privacy}","received_events_url":"https://api.github.com/users/schiesbn/received_events","type":"user","site_admin":false},"created_at":"2013-04-16t11:58:46z","updated_at":"2013-04-16t11:58:46z","body":"@trobert94 i just prepared a pull request ( #2945 ). would be great if you could also give it a try on your set-up."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/16443845","html_url":"https://github.com/owncloud/core/issues/2936#issuecomment-16443845","issue_url":"https://api.github.com/repos/owncloud/core/issues/2936","id":16443845,"user":{"login":"trobert94","id":4163601,"avatar_url":"https://gravatar.com/avatar/80a7f535d5f593238b3f8b0f75bfb9b3?d=https%3a%2f%2fidenticons.github.com%2ff248275375905409a040da48a672d484.png&r=x","gravatar_id":"80a7f535d5f593238b3f8b0f75bfb9b3","url":"https://api.github.com/users/trobert94","html_url":"https://github.com/trobert94","followers_url":"https://api.github.com/users/trobert94/followers","following_url":"https://api.github.com/users/trobert94/following{/other_user}","gists_url":"https://api.github.com/users/trobert94/gists{/gist_id}","starred_url":"https://api.github.com/users/trobert94/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trobert94/subscriptions","organizations_url":"https://api.github.com/users/trobert94/orgs","repos_url":"https://api.github.com/users/trobert94/repos","events_url":"https://api.github.com/users/trobert94/events{/privacy}","received_events_url":"https://api.github.com/users/trobert94/received_events","type":"user","site_admin":false},"created_at":"2013-04-16t13:17:39z","updated_at":"2013-04-16t13:17:39z","body":"seems good, and it's working fine on my set-up. thanks!"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/16493806","html_url":"https://github.com/owncloud/core/issues/2936#issuecomment-16493806","issue_url":"https://api.github.com/repos/owncloud/core/issues/2936","id":16493806,"user":{"login":"schiesbn","id":1589737,"avatar_url":"https://gravatar.com/avatar/8912b598c7b32dd25b87fd168e0b06b2?d=https%3a%2f%2fidenticons.github.com%2f0a323047dbe8329db30eae8dbe96e55e.png&r=x","gravatar_id":"8912b598c7b32dd25b87fd168e0b06b2","url":"https://api.github.com/users/schiesbn","html_url":"https://github.com/schiesbn","followers_url":"https://api.github.com/users/schiesbn/followers","following_url":"https://api.github.com/users/schiesbn/following{/other_user}","gists_url":"https://api.github.com/users/schiesbn/gists{/gist_id}","starred_url":"https://api.github.com/users/schiesbn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schiesbn/subscriptions","organizations_url":"https://api.github.com/users/schiesbn/orgs","repos_url":"https://api.github.com/users/schiesbn/repos","events_url":"https://api.github.com/users/schiesbn/events{/privacy}","received_events_url":"https://api.github.com/users/schiesbn/received_events","type":"user","site_admin":false},"created_at":"2013-04-17t08:43:43z","updated_at":"2013-04-17t08:43:43z","body":"fix is merged and will be released with the next bug fix release"}]