[{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22864327","html_url":"https://github.com/owncloud/core/pull/4514#issuecomment-22864327","issue_url":"https://api.github.com/repos/owncloud/core/issues/4514","id":22864327,"user":{"login":"ringmaster","id":127738,"avatar_url":"https://gravatar.com/avatar/2e4c262dd7f74a26b28f905c0fa15048?d=https%3a%2f%2fidenticons.github.com%2f968ec2eda9ddfebb1b5a00c05b9cc674.png&r=x","gravatar_id":"2e4c262dd7f74a26b28f905c0fa15048","url":"https://api.github.com/users/ringmaster","html_url":"https://github.com/ringmaster","followers_url":"https://api.github.com/users/ringmaster/followers","following_url":"https://api.github.com/users/ringmaster/following{/other_user}","gists_url":"https://api.github.com/users/ringmaster/gists{/gist_id}","starred_url":"https://api.github.com/users/ringmaster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ringmaster/subscriptions","organizations_url":"https://api.github.com/users/ringmaster/orgs","repos_url":"https://api.github.com/users/ringmaster/repos","events_url":"https://api.github.com/users/ringmaster/events{/privacy}","received_events_url":"https://api.github.com/users/ringmaster/received_events","type":"user","site_admin":false},"created_at":"2013-08-19t10:59:13z","updated_at":"2013-08-19t10:59:13z","body":"review, thoughts? @schiesbn @kabum @deepdiver1975 @karlitschek \r\n\r\ncame about as a result of reviewing #4239 and #3629 on windows."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22864712","html_url":"https://github.com/owncloud/core/pull/4514#issuecomment-22864712","issue_url":"https://api.github.com/repos/owncloud/core/issues/4514","id":22864712,"user":{"login":"karlitschek","id":867445,"avatar_url":"https://gravatar.com/avatar/87ce2b4531ee1a0c32b50e0d8f049224?d=https%3a%2f%2fidenticons.github.com%2f06e7098636caebfc9c30c9f52eb905df.png&r=x","gravatar_id":"87ce2b4531ee1a0c32b50e0d8f049224","url":"https://api.github.com/users/karlitschek","html_url":"https://github.com/karlitschek","followers_url":"https://api.github.com/users/karlitschek/followers","following_url":"https://api.github.com/users/karlitschek/following{/other_user}","gists_url":"https://api.github.com/users/karlitschek/gists{/gist_id}","starred_url":"https://api.github.com/users/karlitschek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karlitschek/subscriptions","organizations_url":"https://api.github.com/users/karlitschek/orgs","repos_url":"https://api.github.com/users/karlitschek/repos","events_url":"https://api.github.com/users/karlitschek/events{/privacy}","received_events_url":"https://api.github.com/users/karlitschek/received_events","type":"user","site_admin":false},"created_at":"2013-08-19t11:08:47z","updated_at":"2013-08-19t11:08:47z","body":":+1: "},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22930154","html_url":"https://github.com/owncloud/core/pull/4514#issuecomment-22930154","issue_url":"https://api.github.com/repos/owncloud/core/issues/4514","id":22930154,"user":{"login":"schiesbn","id":1589737,"avatar_url":"https://gravatar.com/avatar/8912b598c7b32dd25b87fd168e0b06b2?d=https%3a%2f%2fidenticons.github.com%2f0a323047dbe8329db30eae8dbe96e55e.png&r=x","gravatar_id":"8912b598c7b32dd25b87fd168e0b06b2","url":"https://api.github.com/users/schiesbn","html_url":"https://github.com/schiesbn","followers_url":"https://api.github.com/users/schiesbn/followers","following_url":"https://api.github.com/users/schiesbn/following{/other_user}","gists_url":"https://api.github.com/users/schiesbn/gists{/gist_id}","starred_url":"https://api.github.com/users/schiesbn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schiesbn/subscriptions","organizations_url":"https://api.github.com/users/schiesbn/orgs","repos_url":"https://api.github.com/users/schiesbn/repos","events_url":"https://api.github.com/users/schiesbn/events{/privacy}","received_events_url":"https://api.github.com/users/schiesbn/received_events","type":"user","site_admin":false},"created_at":"2013-08-20t08:37:51z","updated_at":"2013-08-20t08:37:51z","body":"i looked at the code and also tested it on gnu/linux... works great and the code looks good to me!\r\n\r\ni don't see any problem with the caching of the result. we cache the decrypted key anyway during the whole session.\r\n\r\njust one note, maybe it makes sense to update the error message here: https://github.com/owncloud/core/blob/9528c4625e76fa3e578941b6133e5cf4a1335bdb/apps/files_encryption/hooks/hooks.php#l42 and the error log here https://github.com/owncloud/core/pull/4514/files#l0l58 with a hint that it might be useful to set the path to the openssl.conf in config.php?\r\n\r\notherwise i think you can merge the code and backport it to stable5. :+1:"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22945018","html_url":"https://github.com/owncloud/core/pull/4514#issuecomment-22945018","issue_url":"https://api.github.com/repos/owncloud/core/issues/4514","id":22945018,"user":{"login":"bantu","id":189375,"avatar_url":"https://gravatar.com/avatar/88483d87947219efecfc570465c753b2?d=https%3a%2f%2fidenticons.github.com%2fcdc48f189c0e2e8a870f3d54615a2f0d.png&r=x","gravatar_id":"88483d87947219efecfc570465c753b2","url":"https://api.github.com/users/bantu","html_url":"https://github.com/bantu","followers_url":"https://api.github.com/users/bantu/followers","following_url":"https://api.github.com/users/bantu/following{/other_user}","gists_url":"https://api.github.com/users/bantu/gists{/gist_id}","starred_url":"https://api.github.com/users/bantu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bantu/subscriptions","organizations_url":"https://api.github.com/users/bantu/orgs","repos_url":"https://api.github.com/users/bantu/repos","events_url":"https://api.github.com/users/bantu/events{/privacy}","received_events_url":"https://api.github.com/users/bantu/received_events","type":"user","site_admin":false},"created_at":"2013-08-20t13:35:56z","updated_at":"2013-08-20t13:35:56z","body":":-1: https://github.com/owncloud/core/pull/4514/files#r5867910 needs addressing."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/23275067","html_url":"https://github.com/owncloud/core/pull/4514#issuecomment-23275067","issue_url":"https://api.github.com/repos/owncloud/core/issues/4514","id":23275067,"user":{"login":"ringmaster","id":127738,"avatar_url":"https://gravatar.com/avatar/2e4c262dd7f74a26b28f905c0fa15048?d=https%3a%2f%2fidenticons.github.com%2f968ec2eda9ddfebb1b5a00c05b9cc674.png&r=x","gravatar_id":"2e4c262dd7f74a26b28f905c0fa15048","url":"https://api.github.com/users/ringmaster","html_url":"https://github.com/ringmaster","followers_url":"https://api.github.com/users/ringmaster/followers","following_url":"https://api.github.com/users/ringmaster/following{/other_user}","gists_url":"https://api.github.com/users/ringmaster/gists{/gist_id}","starred_url":"https://api.github.com/users/ringmaster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ringmaster/subscriptions","organizations_url":"https://api.github.com/users/ringmaster/orgs","repos_url":"https://api.github.com/users/ringmaster/repos","events_url":"https://api.github.com/users/ringmaster/events{/privacy}","received_events_url":"https://api.github.com/users/ringmaster/received_events","type":"user","site_admin":false},"created_at":"2013-08-26t16:18:19z","updated_at":"2013-08-26t16:18:19z","body":"to address previously mentioned concerns, i've eliminated the caching of the private key generation, which it turns out could be used twice in a request (once for the site's pkey, once for the currently logged-in user).  if you call `getopensslpkey()` then it initializes a new private key every time.  it also takes 3+ seconds to do so.  the first time encryption is configured, it does this a few times, which is unavoidable.  also, this is called at least twice on the first time a user logs in after encryption is enabled.  on subsequent logins, the keyfiles exist, and so a new private key is not generated.  i think this is the optimal compromise between security and speed.\r\n\r\nplease re-review."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/23285520","html_url":"https://github.com/owncloud/core/pull/4514#issuecomment-23285520","issue_url":"https://api.github.com/repos/owncloud/core/issues/4514","id":23285520,"user":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false},"created_at":"2013-08-26t18:46:10z","updated_at":"2013-08-26t18:46:10z","body":"@owncloud-bot retest this please"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/23335235","html_url":"https://github.com/owncloud/core/pull/4514#issuecomment-23335235","issue_url":"https://api.github.com/repos/owncloud/core/issues/4514","id":23335235,"user":{"login":"schiesbn","id":1589737,"avatar_url":"https://gravatar.com/avatar/8912b598c7b32dd25b87fd168e0b06b2?d=https%3a%2f%2fidenticons.github.com%2f0a323047dbe8329db30eae8dbe96e55e.png&r=x","gravatar_id":"8912b598c7b32dd25b87fd168e0b06b2","url":"https://api.github.com/users/schiesbn","html_url":"https://github.com/schiesbn","followers_url":"https://api.github.com/users/schiesbn/followers","following_url":"https://api.github.com/users/schiesbn/following{/other_user}","gists_url":"https://api.github.com/users/schiesbn/gists{/gist_id}","starred_url":"https://api.github.com/users/schiesbn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schiesbn/subscriptions","organizations_url":"https://api.github.com/users/schiesbn/orgs","repos_url":"https://api.github.com/users/schiesbn/repos","events_url":"https://api.github.com/users/schiesbn/events{/privacy}","received_events_url":"https://api.github.com/users/schiesbn/received_events","type":"user","site_admin":false},"created_at":"2013-08-27t13:24:59z","updated_at":"2013-08-27t13:24:59z","body":"@ringmaster sounds like a good compromise :+1: "},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/23575223","html_url":"https://github.com/owncloud/core/pull/4514#issuecomment-23575223","issue_url":"https://api.github.com/repos/owncloud/core/issues/4514","id":23575223,"user":{"login":"ringmaster","id":127738,"avatar_url":"https://gravatar.com/avatar/2e4c262dd7f74a26b28f905c0fa15048?d=https%3a%2f%2fidenticons.github.com%2f968ec2eda9ddfebb1b5a00c05b9cc674.png&r=x","gravatar_id":"2e4c262dd7f74a26b28f905c0fa15048","url":"https://api.github.com/users/ringmaster","html_url":"https://github.com/ringmaster","followers_url":"https://api.github.com/users/ringmaster/followers","following_url":"https://api.github.com/users/ringmaster/following{/other_user}","gists_url":"https://api.github.com/users/ringmaster/gists{/gist_id}","starred_url":"https://api.github.com/users/ringmaster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ringmaster/subscriptions","organizations_url":"https://api.github.com/users/ringmaster/orgs","repos_url":"https://api.github.com/users/ringmaster/repos","events_url":"https://api.github.com/users/ringmaster/events{/privacy}","received_events_url":"https://api.github.com/users/ringmaster/received_events","type":"user","site_admin":false},"created_at":"2013-08-30t17:00:17z","updated_at":"2013-08-30t17:00:17z","body":"i think i've addressed all the concerns above.  good to go?  @deepdiver1975 @bantu ?"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/23575616","html_url":"https://github.com/owncloud/core/pull/4514#issuecomment-23575616","issue_url":"https://api.github.com/repos/owncloud/core/issues/4514","id":23575616,"user":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false},"created_at":"2013-08-30t17:06:47z","updated_at":"2013-08-30t17:06:47z","body":"@ringmaster can you please rebase? thx"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/23604084","html_url":"https://github.com/owncloud/core/pull/4514#issuecomment-23604084","issue_url":"https://api.github.com/repos/owncloud/core/issues/4514","id":23604084,"user":{"login":"bantu","id":189375,"avatar_url":"https://gravatar.com/avatar/88483d87947219efecfc570465c753b2?d=https%3a%2f%2fidenticons.github.com%2fcdc48f189c0e2e8a870f3d54615a2f0d.png&r=x","gravatar_id":"88483d87947219efecfc570465c753b2","url":"https://api.github.com/users/bantu","html_url":"https://github.com/bantu","followers_url":"https://api.github.com/users/bantu/followers","following_url":"https://api.github.com/users/bantu/following{/other_user}","gists_url":"https://api.github.com/users/bantu/gists{/gist_id}","starred_url":"https://api.github.com/users/bantu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bantu/subscriptions","organizations_url":"https://api.github.com/users/bantu/orgs","repos_url":"https://api.github.com/users/bantu/repos","events_url":"https://api.github.com/users/bantu/events{/privacy}","received_events_url":"https://api.github.com/users/bantu/received_events","type":"user","site_admin":false},"created_at":"2013-08-31t10:20:09z","updated_at":"2013-08-31t10:20:09z","body":"i shall review this later today again."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/23632347","html_url":"https://github.com/owncloud/core/pull/4514#issuecomment-23632347","issue_url":"https://api.github.com/repos/owncloud/core/issues/4514","id":23632347,"user":{"login":"owncloud-bot","id":2709266,"avatar_url":"https://gravatar.com/avatar/6e9c466b35bb113112f7401859d614f6?d=https%3a%2f%2fidenticons.github.com%2ffb9254ba3a207c96653361df97807914.png&r=x","gravatar_id":"6e9c466b35bb113112f7401859d614f6","url":"https://api.github.com/users/owncloud-bot","html_url":"https://github.com/owncloud-bot","followers_url":"https://api.github.com/users/owncloud-bot/followers","following_url":"https://api.github.com/users/owncloud-bot/following{/other_user}","gists_url":"https://api.github.com/users/owncloud-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/owncloud-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/owncloud-bot/subscriptions","organizations_url":"https://api.github.com/users/owncloud-bot/orgs","repos_url":"https://api.github.com/users/owncloud-bot/repos","events_url":"https://api.github.com/users/owncloud-bot/events{/privacy}","received_events_url":"https://api.github.com/users/owncloud-bot/received_events","type":"user","site_admin":false},"created_at":"2013-09-01t20:23:00z","updated_at":"2013-09-01t20:23:00z","body":"test passed.\nrefer to this link for build results: https://ci.owncloud.org/job/pull-request-analyser/822/"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/23634467","html_url":"https://github.com/owncloud/core/pull/4514#issuecomment-23634467","issue_url":"https://api.github.com/repos/owncloud/core/issues/4514","id":23634467,"user":{"login":"bantu","id":189375,"avatar_url":"https://gravatar.com/avatar/88483d87947219efecfc570465c753b2?d=https%3a%2f%2fidenticons.github.com%2fcdc48f189c0e2e8a870f3d54615a2f0d.png&r=x","gravatar_id":"88483d87947219efecfc570465c753b2","url":"https://api.github.com/users/bantu","html_url":"https://github.com/bantu","followers_url":"https://api.github.com/users/bantu/followers","following_url":"https://api.github.com/users/bantu/following{/other_user}","gists_url":"https://api.github.com/users/bantu/gists{/gist_id}","starred_url":"https://api.github.com/users/bantu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bantu/subscriptions","organizations_url":"https://api.github.com/users/bantu/orgs","repos_url":"https://api.github.com/users/bantu/repos","events_url":"https://api.github.com/users/bantu/events{/privacy}","received_events_url":"https://api.github.com/users/bantu/received_events","type":"user","site_admin":false},"created_at":"2013-09-01t22:19:19z","updated_at":"2013-09-01t22:19:19z","body":":+1: fine with me."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/23657574","html_url":"https://github.com/owncloud/core/pull/4514#issuecomment-23657574","issue_url":"https://api.github.com/repos/owncloud/core/issues/4514","id":23657574,"user":{"login":"schiesbn","id":1589737,"avatar_url":"https://gravatar.com/avatar/8912b598c7b32dd25b87fd168e0b06b2?d=https%3a%2f%2fidenticons.github.com%2f0a323047dbe8329db30eae8dbe96e55e.png&r=x","gravatar_id":"8912b598c7b32dd25b87fd168e0b06b2","url":"https://api.github.com/users/schiesbn","html_url":"https://github.com/schiesbn","followers_url":"https://api.github.com/users/schiesbn/followers","following_url":"https://api.github.com/users/schiesbn/following{/other_user}","gists_url":"https://api.github.com/users/schiesbn/gists{/gist_id}","starred_url":"https://api.github.com/users/schiesbn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schiesbn/subscriptions","organizations_url":"https://api.github.com/users/schiesbn/orgs","repos_url":"https://api.github.com/users/schiesbn/repos","events_url":"https://api.github.com/users/schiesbn/events{/privacy}","received_events_url":"https://api.github.com/users/schiesbn/received_events","type":"user","site_admin":false},"created_at":"2013-09-02t12:33:07z","updated_at":"2013-09-02t12:33:07z","body":"just for reference. i added the key size during early development to avoid different default sizes depending on your distribution and to guarantee a specific key size/strength. in fact this was a reasons why the encryption worked for sam but not for me at some point in development. but i no longer remember the exact reason. \r\n\r\ngeneral i have no objection on making it configurable. but we have to double check that this is really the only place where we refer to a specific key size."}]