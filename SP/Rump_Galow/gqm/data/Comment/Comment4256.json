[{"url":"https://api.github.com/repos/owncloud/core/issues/comments/21919456","html_url":"https://github.com/owncloud/core/issues/4256#issuecomment-21919456","issue_url":"https://api.github.com/repos/owncloud/core/issues/4256","id":21919456,"user":{"login":"axelparatre","id":5129515,"avatar_url":"https://gravatar.com/avatar/94fbfc4609c44416bffaccc0146fe885?d=https%3a%2f%2fidenticons.github.com%2f16aa94846730f9684415f4563500a878.png&r=x","gravatar_id":"94fbfc4609c44416bffaccc0146fe885","url":"https://api.github.com/users/axelparatre","html_url":"https://github.com/axelparatre","followers_url":"https://api.github.com/users/axelparatre/followers","following_url":"https://api.github.com/users/axelparatre/following{/other_user}","gists_url":"https://api.github.com/users/axelparatre/gists{/gist_id}","starred_url":"https://api.github.com/users/axelparatre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/axelparatre/subscriptions","organizations_url":"https://api.github.com/users/axelparatre/orgs","repos_url":"https://api.github.com/users/axelparatre/repos","events_url":"https://api.github.com/users/axelparatre/events{/privacy}","received_events_url":"https://api.github.com/users/axelparatre/received_events","type":"user","site_admin":false},"created_at":"2013-08-01t07:25:23z","updated_at":"2013-08-07t15:48:16z","body":"### expected behaviour\r\nwe should be able to download files\r\n\r\n### actual behaviour\r\non some directory we can't download anymore any of the files in there. we get this message when we try to preview a picture : the requested content cannot be loaded. please try again later. when we try to download the file it's a 0 octet file. \r\n\r\n### steps to reproduce\r\ni don't know how to reproduce this issue. all i can say is that it is in a shared folder and i've got 6 account with different right to access (some on read only and some with write access). we also use encryption internal app\r\n\r\n### server configuration\r\noperating system:\r\nubuntu server\r\n\r\nweb server: \r\napache 2\r\n\r\ndatabase:\r\nmysql 5\r\n\r\nphp version:\r\nphp 5.x\r\n\r\nowncloud version:\r\n5.0.9\r\n\r\n### logs\r\n#### web server error log\r\nno logs registered at the time we click to download a file\r\n\r\n#### owncloud log (data/owncloud.log)\r\n{\"app\":\"php\",\"message\":\"encryption key not found for \\\"\\/*masked by me*\\/files\\/photos\\/ramatuelle\\/plage tahiti - villa amala - r\\u00e9f. 7643 (location)\\/_dsc8873.jpg\\\" during attempted read via stream at \\/app\\/cloud\\/***\\/apps\\/files_encryption\\/lib\\/stream.php#187\",\"level\":4,\"time\":1375341709}"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/21919540","html_url":"https://github.com/owncloud/core/issues/4256#issuecomment-21919540","issue_url":"https://api.github.com/repos/owncloud/core/issues/4256","id":21919540,"user":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false},"created_at":"2013-08-01t07:27:21z","updated_at":"2013-08-01t07:27:21z","body":"@schiesbn "},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/21920942","html_url":"https://github.com/owncloud/core/issues/4256#issuecomment-21920942","issue_url":"https://api.github.com/repos/owncloud/core/issues/4256","id":21920942,"user":{"login":"schiesbn","id":1589737,"avatar_url":"https://gravatar.com/avatar/8912b598c7b32dd25b87fd168e0b06b2?d=https%3a%2f%2fidenticons.github.com%2f0a323047dbe8329db30eae8dbe96e55e.png&r=x","gravatar_id":"8912b598c7b32dd25b87fd168e0b06b2","url":"https://api.github.com/users/schiesbn","html_url":"https://github.com/schiesbn","followers_url":"https://api.github.com/users/schiesbn/followers","following_url":"https://api.github.com/users/schiesbn/following{/other_user}","gists_url":"https://api.github.com/users/schiesbn/gists{/gist_id}","starred_url":"https://api.github.com/users/schiesbn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schiesbn/subscriptions","organizations_url":"https://api.github.com/users/schiesbn/orgs","repos_url":"https://api.github.com/users/schiesbn/repos","events_url":"https://api.github.com/users/schiesbn/events{/privacy}","received_events_url":"https://api.github.com/users/schiesbn/received_events","type":"user","site_admin":false},"created_at":"2013-08-01t08:01:11z","updated_at":"2013-08-01t08:01:11z","body":"@axelparatre who uploaded the file? the owner of the folder or a different user? who can't download the pictures? the owner of the folder, the user who uploaded it? someone else who should have access to the file? or nobody?\r\n\r\ncould you check if the key exists at all and that it is not empty? it should be stored in data/<user who owns the folder/files_encryption/keyfiles/photos\\/ramatuelle\\/plage tahiti - villa amala - r\\u00e9f. 7643 (location)\\/_dsc8873.jpg.key\r\n\r\nfurther for every user access to the file a share-key should be exists  in data/<user who owns the folder/files_encryption/share-keys/photos\\/ramatuelle\\/plage tahiti - villa amala - r\\u00e9f. 7643 (location)\\/_dsc8873.jpg.username.sharekey"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/21921772","html_url":"https://github.com/owncloud/core/issues/4256#issuecomment-21921772","issue_url":"https://api.github.com/repos/owncloud/core/issues/4256","id":21921772,"user":{"login":"schiesbn","id":1589737,"avatar_url":"https://gravatar.com/avatar/8912b598c7b32dd25b87fd168e0b06b2?d=https%3a%2f%2fidenticons.github.com%2f0a323047dbe8329db30eae8dbe96e55e.png&r=x","gravatar_id":"8912b598c7b32dd25b87fd168e0b06b2","url":"https://api.github.com/users/schiesbn","html_url":"https://github.com/schiesbn","followers_url":"https://api.github.com/users/schiesbn/followers","following_url":"https://api.github.com/users/schiesbn/following{/other_user}","gists_url":"https://api.github.com/users/schiesbn/gists{/gist_id}","starred_url":"https://api.github.com/users/schiesbn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schiesbn/subscriptions","organizations_url":"https://api.github.com/users/schiesbn/orgs","repos_url":"https://api.github.com/users/schiesbn/repos","events_url":"https://api.github.com/users/schiesbn/events{/privacy}","received_events_url":"https://api.github.com/users/schiesbn/received_events","type":"user","site_admin":false},"created_at":"2013-08-01t08:21:55z","updated_at":"2013-08-01t08:22:14z","body":"i just tried to reproduce it with three users: user1, user2 and user3\r\n- user1 created folder pictures\r\n- user1 shared folder pictures to user2 with write permissions\r\n- user1 shared folder pictures to user3 without write permissions\r\n- user2 opens the shared folder \"pictures\" and created the same sub-folder like shown in your error message and uploaded a image with the same file name\r\n- all users can access the file again\r\n\r\nsome more questions: did you uploaded the files with the web interface or with the sync client? is the folder located on a external storage?"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/21922558","html_url":"https://github.com/owncloud/core/issues/4256#issuecomment-21922558","issue_url":"https://api.github.com/repos/owncloud/core/issues/4256","id":21922558,"user":{"login":"axelparatre","id":5129515,"avatar_url":"https://gravatar.com/avatar/94fbfc4609c44416bffaccc0146fe885?d=https%3a%2f%2fidenticons.github.com%2f16aa94846730f9684415f4563500a878.png&r=x","gravatar_id":"94fbfc4609c44416bffaccc0146fe885","url":"https://api.github.com/users/axelparatre","html_url":"https://github.com/axelparatre","followers_url":"https://api.github.com/users/axelparatre/followers","following_url":"https://api.github.com/users/axelparatre/following{/other_user}","gists_url":"https://api.github.com/users/axelparatre/gists{/gist_id}","starred_url":"https://api.github.com/users/axelparatre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/axelparatre/subscriptions","organizations_url":"https://api.github.com/users/axelparatre/orgs","repos_url":"https://api.github.com/users/axelparatre/repos","events_url":"https://api.github.com/users/axelparatre/events{/privacy}","received_events_url":"https://api.github.com/users/axelparatre/received_events","type":"user","site_admin":false},"created_at":"2013-08-01t08:39:34z","updated_at":"2013-08-01t08:39:34z","body":"who uploaded the file? one of the user with write permission. \r\nthe owner of the folder, the user who uploaded it? uploaded by web interface by an user who is not the owner of this folder\r\nthe owner of the folder or a different user? it's not the owner. \r\nwho can't download the pictures? someone else who should have access to the file? or nobody? all users can't access to the files.\r\ncould you check if the key exists at all and that it is not empty? i can see the .key files (same number of file between this folder and the web interface\r\nfurther for every user access to the file a share-key should be exists : yes they exist too. i can count 450 of them. it seems correct because we have 50 files shared with 8 users/groups plus the owner = 9. 9 x 50 = 450\r\nis the folder located on a external storage? no it is not, it's a local drive in the server. i don't have trouble in this storage.\r\n\r\nthanks,\r\n"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22260916","html_url":"https://github.com/owncloud/core/issues/4256#issuecomment-22260916","issue_url":"https://api.github.com/repos/owncloud/core/issues/4256","id":22260916,"user":{"login":"axelparatre","id":5129515,"avatar_url":"https://gravatar.com/avatar/94fbfc4609c44416bffaccc0146fe885?d=https%3a%2f%2fidenticons.github.com%2f16aa94846730f9684415f4563500a878.png&r=x","gravatar_id":"94fbfc4609c44416bffaccc0146fe885","url":"https://api.github.com/users/axelparatre","html_url":"https://github.com/axelparatre","followers_url":"https://api.github.com/users/axelparatre/followers","following_url":"https://api.github.com/users/axelparatre/following{/other_user}","gists_url":"https://api.github.com/users/axelparatre/gists{/gist_id}","starred_url":"https://api.github.com/users/axelparatre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/axelparatre/subscriptions","organizations_url":"https://api.github.com/users/axelparatre/orgs","repos_url":"https://api.github.com/users/axelparatre/repos","events_url":"https://api.github.com/users/axelparatre/events{/privacy}","received_events_url":"https://api.github.com/users/axelparatre/received_events","type":"user","site_admin":false},"created_at":"2013-08-07t15:46:20z","updated_at":"2013-08-07t15:50:01z","body":"hi,\r\n\r\ni know how to reproduce this bug. there some useless steps but this is what i've done to reproduce this bug.\r\n\r\n### steps to reproduce\r\n\r\n1. create a new owncloud server and login with admin user\r\n2. create a folder named photos\r\n3. then in this folder create folder 1 and folder 2\r\n4. in folder 1 upload some pictures\r\n5. create 3 users test1, test2 and test3 (same login and password)\r\n6. share \"photos\" to test1 with write permission and test2 with read-only permission\r\n7. upload some pictures with test1 in \"folder 2\"\r\n8. activate encryption app\r\n9. logout\r\n10. login with test2\r\n11. go to photos/folder 1/\r\n12. try to preview one of the pictures and you get the error message : the requested content cannot be loaded. please try again later.\r\n"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/23224399","html_url":"https://github.com/owncloud/core/issues/4256#issuecomment-23224399","issue_url":"https://api.github.com/repos/owncloud/core/issues/4256","id":23224399,"user":{"login":"axelparatre","id":5129515,"avatar_url":"https://gravatar.com/avatar/94fbfc4609c44416bffaccc0146fe885?d=https%3a%2f%2fidenticons.github.com%2f16aa94846730f9684415f4563500a878.png&r=x","gravatar_id":"94fbfc4609c44416bffaccc0146fe885","url":"https://api.github.com/users/axelparatre","html_url":"https://github.com/axelparatre","followers_url":"https://api.github.com/users/axelparatre/followers","following_url":"https://api.github.com/users/axelparatre/following{/other_user}","gists_url":"https://api.github.com/users/axelparatre/gists{/gist_id}","starred_url":"https://api.github.com/users/axelparatre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/axelparatre/subscriptions","organizations_url":"https://api.github.com/users/axelparatre/orgs","repos_url":"https://api.github.com/users/axelparatre/repos","events_url":"https://api.github.com/users/axelparatre/events{/privacy}","received_events_url":"https://api.github.com/users/axelparatre/received_events","type":"user","site_admin":false},"created_at":"2013-08-25t09:06:49z","updated_at":"2013-08-25t09:06:49z","body":"hi, anyone can reproduce this bug and help me about this ? any idea ?"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/28979441","html_url":"https://github.com/owncloud/core/issues/4256#issuecomment-28979441","issue_url":"https://api.github.com/repos/owncloud/core/issues/4256","id":28979441,"user":{"login":"pvince81","id":277525,"avatar_url":"https://gravatar.com/avatar/e446b529679416eb70eafb4ca4da5bbe?d=https%3a%2f%2fidenticons.github.com%2f89d7c394e6dcdf87a91c75ac3b2ccbe8.png&r=x","gravatar_id":"e446b529679416eb70eafb4ca4da5bbe","url":"https://api.github.com/users/pvince81","html_url":"https://github.com/pvince81","followers_url":"https://api.github.com/users/pvince81/followers","following_url":"https://api.github.com/users/pvince81/following{/other_user}","gists_url":"https://api.github.com/users/pvince81/gists{/gist_id}","starred_url":"https://api.github.com/users/pvince81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvince81/subscriptions","organizations_url":"https://api.github.com/users/pvince81/orgs","repos_url":"https://api.github.com/users/pvince81/repos","events_url":"https://api.github.com/users/pvince81/events{/privacy}","received_events_url":"https://api.github.com/users/pvince81/received_events","type":"user","site_admin":false},"created_at":"2013-11-21t12:21:01z","updated_at":"2013-11-21t12:21:01z","body":"does it still happen in oc 5.0.13 or oc 6 beta 5 ?\r\n\r\nas far as i know there have been many fixes related to encryption since then."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/28980208","html_url":"https://github.com/owncloud/core/issues/4256#issuecomment-28980208","issue_url":"https://api.github.com/repos/owncloud/core/issues/4256","id":28980208,"user":{"login":"schiesbn","id":1589737,"avatar_url":"https://gravatar.com/avatar/8912b598c7b32dd25b87fd168e0b06b2?d=https%3a%2f%2fidenticons.github.com%2f0a323047dbe8329db30eae8dbe96e55e.png&r=x","gravatar_id":"8912b598c7b32dd25b87fd168e0b06b2","url":"https://api.github.com/users/schiesbn","html_url":"https://github.com/schiesbn","followers_url":"https://api.github.com/users/schiesbn/followers","following_url":"https://api.github.com/users/schiesbn/following{/other_user}","gists_url":"https://api.github.com/users/schiesbn/gists{/gist_id}","starred_url":"https://api.github.com/users/schiesbn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schiesbn/subscriptions","organizations_url":"https://api.github.com/users/schiesbn/orgs","repos_url":"https://api.github.com/users/schiesbn/repos","events_url":"https://api.github.com/users/schiesbn/events{/privacy}","received_events_url":"https://api.github.com/users/schiesbn/received_events","type":"user","site_admin":false},"created_at":"2013-11-21t12:31:06z","updated_at":"2013-11-21t12:35:35z","body":"if you enable the encryption and log in as user1 then the file can't be encrypted for user2 since user2 is not yet ready for encryption (no encryption keys are generated). to make this work you have to login in the reverse order after enabling encryption. first the users who received the share and then the owner of the share.\r\ni know that for complex set-ups this might not be possible. in this case the only solution is to re-share the file after every user is ready. owncloud 6 will provide a adequate error message so that you know what you have to do."}]