[{"url":"https://api.github.com/repos/owncloud/core/issues/comments/29686619","html_url":"https://github.com/owncloud/core/issues/6156#issuecomment-29686619","issue_url":"https://api.github.com/repos/owncloud/core/issues/6156","id":29686619,"user":{"login":"inos-github","id":6089198,"avatar_url":"https://gravatar.com/avatar/36cd6714a7c68469f159c8f7028df3ea?d=https%3a%2f%2fidenticons.github.com%2fd738b5744a9060c02ffd41eb7e885ae1.png&r=x","gravatar_id":"36cd6714a7c68469f159c8f7028df3ea","url":"https://api.github.com/users/inos-github","html_url":"https://github.com/inos-github","followers_url":"https://api.github.com/users/inos-github/followers","following_url":"https://api.github.com/users/inos-github/following{/other_user}","gists_url":"https://api.github.com/users/inos-github/gists{/gist_id}","starred_url":"https://api.github.com/users/inos-github/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/inos-github/subscriptions","organizations_url":"https://api.github.com/users/inos-github/orgs","repos_url":"https://api.github.com/users/inos-github/repos","events_url":"https://api.github.com/users/inos-github/events{/privacy}","received_events_url":"https://api.github.com/users/inos-github/received_events","type":"user","site_admin":false},"created_at":"2013-12-03t06:31:04z","updated_at":"2013-12-03t06:31:04z","body":"the corresponding error in the log:\r\n```\r\nerror\tmail\tsmtp error: the following recipients failed: xxxxx@xxxx.yy\r\n```"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/29687621","html_url":"https://github.com/owncloud/core/issues/6156#issuecomment-29687621","issue_url":"https://api.github.com/repos/owncloud/core/issues/6156","id":29687621,"user":{"login":"inos-github","id":6089198,"avatar_url":"https://gravatar.com/avatar/36cd6714a7c68469f159c8f7028df3ea?d=https%3a%2f%2fidenticons.github.com%2fd738b5744a9060c02ffd41eb7e885ae1.png&r=x","gravatar_id":"36cd6714a7c68469f159c8f7028df3ea","url":"https://api.github.com/users/inos-github","html_url":"https://github.com/inos-github","followers_url":"https://api.github.com/users/inos-github/followers","following_url":"https://api.github.com/users/inos-github/following{/other_user}","gists_url":"https://api.github.com/users/inos-github/gists{/gist_id}","starred_url":"https://api.github.com/users/inos-github/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/inos-github/subscriptions","organizations_url":"https://api.github.com/users/inos-github/orgs","repos_url":"https://api.github.com/users/inos-github/repos","events_url":"https://api.github.com/users/inos-github/events{/privacy}","received_events_url":"https://api.github.com/users/inos-github/received_events","type":"user","site_admin":false},"created_at":"2013-12-03t07:00:17z","updated_at":"2013-12-03t08:26:23z","body":"a possible fix, applicable for both cases:\r\n- case 'informrecipients'\r\n- case 'email' (just change the $from variable to $from_address)\r\n\r\n```\r\n...\r\n$default_from = ocp\\util::getdefaultemailaddress('sharing-noreply');\r\n$from = ocp\\config::getuservalue(\\ocp\\user::getuser(), 'settings', 'email', $default$\r\nif (\\oc_config::getvalue('mail_domain') == substr(strrchr($default_from, \"@\"), 1)) {\r\n      if (\\oc_config::getvalue('mail_domain') != substr(strrchr($from, \"@\"), 1)) {\r\n             $from = $default_from;\r\n      }\r\n}\r\n...\r\n```  \r\n\r\n"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/29718387","html_url":"https://github.com/owncloud/core/issues/6156#issuecomment-29718387","issue_url":"https://api.github.com/repos/owncloud/core/issues/6156","id":29718387,"user":{"login":"inos-github","id":6089198,"avatar_url":"https://gravatar.com/avatar/36cd6714a7c68469f159c8f7028df3ea?d=https%3a%2f%2fidenticons.github.com%2fd738b5744a9060c02ffd41eb7e885ae1.png&r=x","gravatar_id":"36cd6714a7c68469f159c8f7028df3ea","url":"https://api.github.com/users/inos-github","html_url":"https://github.com/inos-github","followers_url":"https://api.github.com/users/inos-github/followers","following_url":"https://api.github.com/users/inos-github/following{/other_user}","gists_url":"https://api.github.com/users/inos-github/gists{/gist_id}","starred_url":"https://api.github.com/users/inos-github/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/inos-github/subscriptions","organizations_url":"https://api.github.com/users/inos-github/orgs","repos_url":"https://api.github.com/users/inos-github/repos","events_url":"https://api.github.com/users/inos-github/events{/privacy}","received_events_url":"https://api.github.com/users/inos-github/received_events","type":"user","site_admin":false},"created_at":"2013-12-03t15:23:19z","updated_at":"2013-12-03t15:23:19z","body":"you are sure, this is an enhancement?\r\n- the share dialogue already has the two mentioned features to send emails ('notify by email' and mail a link).\r\n- the config.php provides the mail_domain option to allow the usage of smtp server, requesting a dedicated mail domain.\r\n- the mail system is designed to respect the 'mail_domain' setting and this works well for the password reset\r\n- the user profile offers an email setting for each user (with an mail domain not under control of the admin).\r\n\r\nthe test-case:\r\n- smtp server requires an dedicated mail domain in the \"from\" address, specified in mail_domain (config.php).\r\n- a user specifies a mail address with a different mail domain in the user profile.\r\n- this user shares a file with the 'notify by email' option set or by sending a link by mail\r\n\r\n-> sending the mail is broken and an error is logged."}]