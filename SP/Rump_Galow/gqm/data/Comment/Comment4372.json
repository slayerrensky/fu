[{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22385765","html_url":"https://github.com/owncloud/core/pull/4372#issuecomment-22385765","issue_url":"https://api.github.com/repos/owncloud/core/issues/4372","id":22385765,"user":{"login":"karlitschek","id":867445,"avatar_url":"https://gravatar.com/avatar/87ce2b4531ee1a0c32b50e0d8f049224?d=https%3a%2f%2fidenticons.github.com%2f06e7098636caebfc9c30c9f52eb905df.png&r=x","gravatar_id":"87ce2b4531ee1a0c32b50e0d8f049224","url":"https://api.github.com/users/karlitschek","html_url":"https://github.com/karlitschek","followers_url":"https://api.github.com/users/karlitschek/followers","following_url":"https://api.github.com/users/karlitschek/following{/other_user}","gists_url":"https://api.github.com/users/karlitschek/gists{/gist_id}","starred_url":"https://api.github.com/users/karlitschek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karlitschek/subscriptions","organizations_url":"https://api.github.com/users/karlitschek/orgs","repos_url":"https://api.github.com/users/karlitschek/repos","events_url":"https://api.github.com/users/karlitschek/events{/privacy}","received_events_url":"https://api.github.com/users/karlitschek/received_events","type":"user","site_admin":false},"created_at":"2013-08-09t10:04:39z","updated_at":"2013-08-09t10:04:39z","body":":+1: "},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22387619","html_url":"https://github.com/owncloud/core/pull/4372#issuecomment-22387619","issue_url":"https://api.github.com/repos/owncloud/core/issues/4372","id":22387619,"user":{"login":"owncloud-bot","id":2709266,"avatar_url":"https://gravatar.com/avatar/6e9c466b35bb113112f7401859d614f6?d=https%3a%2f%2fidenticons.github.com%2ffb9254ba3a207c96653361df97807914.png&r=x","gravatar_id":"6e9c466b35bb113112f7401859d614f6","url":"https://api.github.com/users/owncloud-bot","html_url":"https://github.com/owncloud-bot","followers_url":"https://api.github.com/users/owncloud-bot/followers","following_url":"https://api.github.com/users/owncloud-bot/following{/other_user}","gists_url":"https://api.github.com/users/owncloud-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/owncloud-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/owncloud-bot/subscriptions","organizations_url":"https://api.github.com/users/owncloud-bot/orgs","repos_url":"https://api.github.com/users/owncloud-bot/repos","events_url":"https://api.github.com/users/owncloud-bot/events{/privacy}","received_events_url":"https://api.github.com/users/owncloud-bot/received_events","type":"user","site_admin":false},"created_at":"2013-08-09t10:56:20z","updated_at":"2013-08-09t10:56:20z","body":"test passed.\nrefer to this link for build results: https://ci.owncloud.org/job/pull-request-analyser/459/"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22388866","html_url":"https://github.com/owncloud/core/pull/4372#issuecomment-22388866","issue_url":"https://api.github.com/repos/owncloud/core/issues/4372","id":22388866,"user":{"login":"kabum","id":245432,"avatar_url":"https://gravatar.com/avatar/a1dea19f88f38ea0b5b5b4d19d5b3107?d=https%3a%2f%2fidenticons.github.com%2f53d8cbb3dbc087a02951dec47438ccdf.png&r=x","gravatar_id":"a1dea19f88f38ea0b5b5b4d19d5b3107","url":"https://api.github.com/users/kabum","html_url":"https://github.com/kabum","followers_url":"https://api.github.com/users/kabum/followers","following_url":"https://api.github.com/users/kabum/following{/other_user}","gists_url":"https://api.github.com/users/kabum/gists{/gist_id}","starred_url":"https://api.github.com/users/kabum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kabum/subscriptions","organizations_url":"https://api.github.com/users/kabum/orgs","repos_url":"https://api.github.com/users/kabum/repos","events_url":"https://api.github.com/users/kabum/events{/privacy}","received_events_url":"https://api.github.com/users/kabum/received_events","type":"user","site_admin":false},"created_at":"2013-08-09t11:30:18z","updated_at":"2013-08-09t11:30:18z","body":":+1:\r\n\r\nwill this be automatically handled by the update script?"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22400085","html_url":"https://github.com/owncloud/core/pull/4372#issuecomment-22400085","issue_url":"https://api.github.com/repos/owncloud/core/issues/4372","id":22400085,"user":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false},"created_at":"2013-08-09t15:01:47z","updated_at":"2013-08-09t15:01:47z","body":"@butonic is there really the need to save an empty/null value as config value in the db?\r\nmy interpretation of empty/null is: not set and i'd expect no entry in the db."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22412829","html_url":"https://github.com/owncloud/core/pull/4372#issuecomment-22412829","issue_url":"https://api.github.com/repos/owncloud/core/issues/4372","id":22412829,"user":{"login":"butonic","id":956847,"avatar_url":"https://gravatar.com/avatar/9760c134cabf66e10dbba06d7525f5c7?d=https%3a%2f%2fidenticons.github.com%2f92925ec1ad893739ed57986f18e2f060.png&r=x","gravatar_id":"9760c134cabf66e10dbba06d7525f5c7","url":"https://api.github.com/users/butonic","html_url":"https://github.com/butonic","followers_url":"https://api.github.com/users/butonic/followers","following_url":"https://api.github.com/users/butonic/following{/other_user}","gists_url":"https://api.github.com/users/butonic/gists{/gist_id}","starred_url":"https://api.github.com/users/butonic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/butonic/subscriptions","organizations_url":"https://api.github.com/users/butonic/orgs","repos_url":"https://api.github.com/users/butonic/repos","events_url":"https://api.github.com/users/butonic/events{/privacy}","received_events_url":"https://api.github.com/users/butonic/received_events","type":"user","site_admin":false},"created_at":"2013-08-09t18:06:17z","updated_at":"2013-08-09t18:06:17z","body":"i'll cc @owncloud/developer to prevent the following question from popping up again and again:\r\n\r\n*is there really the need to save an empty/null value as config value in the db?\r\nmy interpretation of empty/null is: not set and i'd expect no entry in the db.*\r\n\r\ntl;dr:  yes, we need to allow null values in string columns like appconfig.configvalue.\r\n\r\nthe pr is called 'allow *empty* configvalue in appconfig' for good reasons. `''` is called emtystring or a zero length string, a valid column value. null is used to mark the absence of a valid column data. (see [wikipedia](http://en.wikipedia.org/wiki/null_(sql))). they are technically different but in the and both say this is empty. instead of arguing about the difference of these values let us look at the ugly facts of life.\r\n\r\nhow does oracle treat `''` vs null? this has been precisely answered on [stackoverflow](http://stackoverflow.com/a/203551/828717):\r\n```\r\na zero length varchar is treated as null.\r\n'' is not treated as null.\r\n'' when assigned to a char(1) becomes ' ' (char types are blank padded strings).\r\n'' when assigned to a varchar2(1) becomes '' which is a zero length string and a zero length string is null in oracle (it is no long '')\r\n```\r\n\r\nso now we know we have to take into account that `''` is treated as null by oracle. to make all rdbms behave the same and not cae about this stuff we use a dbal. as a result `''` looks like null from ownclouds perspective. from the [portability section of the doctrine manual](http://docs.doctrine-project.org/projects/doctrine1/en/latest/en/manual/configuration.html#portability):\r\n```\r\nportability_empty_to_null\r\nconvert empty strings values to null in data in and output. needed because oracle considers empty strings to be null, while most other dbmsâ€™s know the difference between empty and null.\r\n```\r\nor for stable5 the [mdb2 portability documentation](http://pear.php.net/manual/en/package.database.mdb2.intro-portability.php):\r\n```\r\nmdb2_portability_empty_to_null\r\nconvert empty strings values to null in data in and output. needed because oracle considers empty strings to be null, while most other dbmss know the difference between empty and null.\r\n```\r\n**this one is important.** it means that comparisons like `$row['path']===''` will **never** evaluate to `true`, so check your code!\r\n\r\nnow, my main argument against notnull is that you cannot know what applications will store in a string column (the only problematic column type). `''` is a very valid corner case. the first app that comes to mind using it is the filecache, which stores `''` in the path column for root entries of a mountpoint. to allow that we must allow null in string columns. the appconfig configvalue is the next best column and there is even some app in the apps repo whose presence alone does exactly that: it tries to insert an empty string into appconfig.configvalue and i always have to allow null values in the db_structure.xml. and who knows, maybe for good reason.\r\n\r\nfurthermore, you only really need notnull when using primary key or unique key constraints. these two constraints enforce it.\r\n\r\nnote that defining a default value like `<default></default>` on a column that is also defined as `<notnull>true</notnull>` is a contradiction in itself for oracle and since we are writing portable code also for all other rdbms.\r\n\r\nany questions?"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22413795","html_url":"https://github.com/owncloud/core/pull/4372#issuecomment-22413795","issue_url":"https://api.github.com/repos/owncloud/core/issues/4372","id":22413795,"user":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false},"created_at":"2013-08-09t18:20:46z","updated_at":"2013-08-09t18:20:46z","body":"@butonic thanks a lot for you in depth explanation - much appreciated!\r\n\r\nmy question was more related to the php api layer around class oc_appconfig.\r\n"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22421402","html_url":"https://github.com/owncloud/core/pull/4372#issuecomment-22421402","issue_url":"https://api.github.com/repos/owncloud/core/issues/4372","id":22421402,"user":{"login":"butonic","id":956847,"avatar_url":"https://gravatar.com/avatar/9760c134cabf66e10dbba06d7525f5c7?d=https%3a%2f%2fidenticons.github.com%2f92925ec1ad893739ed57986f18e2f060.png&r=x","gravatar_id":"9760c134cabf66e10dbba06d7525f5c7","url":"https://api.github.com/users/butonic","html_url":"https://github.com/butonic","followers_url":"https://api.github.com/users/butonic/followers","following_url":"https://api.github.com/users/butonic/following{/other_user}","gists_url":"https://api.github.com/users/butonic/gists{/gist_id}","starred_url":"https://api.github.com/users/butonic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/butonic/subscriptions","organizations_url":"https://api.github.com/users/butonic/orgs","repos_url":"https://api.github.com/users/butonic/repos","events_url":"https://api.github.com/users/butonic/events{/privacy}","received_events_url":"https://api.github.com/users/butonic/received_events","type":"user","site_admin":false},"created_at":"2013-08-09t20:28:47z","updated_at":"2013-08-09t20:28:47z","body":"i agree, for the appconfig table, storing (app, key, value) triples, it would make sense to delete a row/tupel when configvalue is null or emptystring. i'll update the pr on monday.\n\n\n\n\"thomas mã¼ller\" <notifications@github.com> schrieb:\n>@butonic thanks a lot for you in depth explanation - much appreciated!\n>\n>my question was more related to the php api layer around class\n>oc_appconfig.\n>\n>\n>---\n>reply to this email directly or view it on github:\n>https://github.com/owncloud/core/pull/4372#issuecomment-22413795\n\n-- \ndiese nachricht wurde von meinem android-mobiltelefon mit k-9 mail gesendet."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22421606","html_url":"https://github.com/owncloud/core/pull/4372#issuecomment-22421606","issue_url":"https://api.github.com/repos/owncloud/core/issues/4372","id":22421606,"user":{"login":"blizzz","id":2184312,"avatar_url":"https://gravatar.com/avatar/1898b25a9cb3aa1a0f0febd1359910b9?d=https%3a%2f%2fidenticons.github.com%2fca03acec6deadf508b75eb0cf9ba036c.png&r=x","gravatar_id":"1898b25a9cb3aa1a0f0febd1359910b9","url":"https://api.github.com/users/blizzz","html_url":"https://github.com/blizzz","followers_url":"https://api.github.com/users/blizzz/followers","following_url":"https://api.github.com/users/blizzz/following{/other_user}","gists_url":"https://api.github.com/users/blizzz/gists{/gist_id}","starred_url":"https://api.github.com/users/blizzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blizzz/subscriptions","organizations_url":"https://api.github.com/users/blizzz/orgs","repos_url":"https://api.github.com/users/blizzz/repos","events_url":"https://api.github.com/users/blizzz/events{/privacy}","received_events_url":"https://api.github.com/users/blizzz/received_events","type":"user","site_admin":false},"created_at":"2013-08-09t20:32:00z","updated_at":"2013-08-09t20:32:00z","body":"on friday 09 august 2013 13:28:59 jã¶rn friedrich dreyer wrote:\r\n> i agree, for the appconfig table, storing (app, key, value) triples, it\r\n> would make sense to delete a row/tupel when configvalue is null or\r\n> emptystring. i'll update the pr on monday.\r\n\r\nwhy if the default value is not-empty and a setting actually can be empty?"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22421819","html_url":"https://github.com/owncloud/core/pull/4372#issuecomment-22421819","issue_url":"https://api.github.com/repos/owncloud/core/issues/4372","id":22421819,"user":{"login":"butonic","id":956847,"avatar_url":"https://gravatar.com/avatar/9760c134cabf66e10dbba06d7525f5c7?d=https%3a%2f%2fidenticons.github.com%2f92925ec1ad893739ed57986f18e2f060.png&r=x","gravatar_id":"9760c134cabf66e10dbba06d7525f5c7","url":"https://api.github.com/users/butonic","html_url":"https://github.com/butonic","followers_url":"https://api.github.com/users/butonic/followers","following_url":"https://api.github.com/users/butonic/following{/other_user}","gists_url":"https://api.github.com/users/butonic/gists{/gist_id}","starred_url":"https://api.github.com/users/butonic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/butonic/subscriptions","organizations_url":"https://api.github.com/users/butonic/orgs","repos_url":"https://api.github.com/users/butonic/repos","events_url":"https://api.github.com/users/butonic/events{/privacy}","received_events_url":"https://api.github.com/users/butonic/received_events","type":"user","site_admin":false},"created_at":"2013-08-09t20:36:03z","updated_at":"2013-08-09t20:36:03z","body":"yes, i have to take it back. we need to be able to store an empty string / null, because otherwise we cannot overwrite or 'unset' a hardcoded default setting. \n\n\n\nblizzz <notifications@github.com> schrieb:\n>on friday 09 august 2013 13:28:59 jã¶rn friedrich dreyer wrote:\n>> i agree, for the appconfig table, storing (app, key, value) triples,\n>it\n>> would make sense to delete a row/tupel when configvalue is null or\n>> emptystring. i'll update the pr on monday.\n>\n>why if the default value is not-empty and a setting actually can be\n>empty?\n>\n>---\n>reply to this email directly or view it on github:\n>https://github.com/owncloud/core/pull/4372#issuecomment-22421606\n\n-- \ndiese nachricht wurde von meinem android-mobiltelefon mit k-9 mail gesendet."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22422805","html_url":"https://github.com/owncloud/core/pull/4372#issuecomment-22422805","issue_url":"https://api.github.com/repos/owncloud/core/issues/4372","id":22422805,"user":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false},"created_at":"2013-08-09t20:58:33z","updated_at":"2013-08-09t20:58:33z","body":"> why if the default value is not-empty and a setting actually can be empty?\r\n\r\nhehe punch the dev for a that crazy implementation :punch: "}]