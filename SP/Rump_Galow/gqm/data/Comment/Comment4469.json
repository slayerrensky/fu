[{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22774207","html_url":"https://github.com/owncloud/core/issues/4469#issuecomment-22774207","issue_url":"https://api.github.com/repos/owncloud/core/issues/4469","id":22774207,"user":{"login":"kabum","id":245432,"avatar_url":"https://gravatar.com/avatar/a1dea19f88f38ea0b5b5b4d19d5b3107?d=https%3a%2f%2fidenticons.github.com%2f53d8cbb3dbc087a02951dec47438ccdf.png&r=x","gravatar_id":"a1dea19f88f38ea0b5b5b4d19d5b3107","url":"https://api.github.com/users/kabum","html_url":"https://github.com/kabum","followers_url":"https://api.github.com/users/kabum/followers","following_url":"https://api.github.com/users/kabum/following{/other_user}","gists_url":"https://api.github.com/users/kabum/gists{/gist_id}","starred_url":"https://api.github.com/users/kabum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kabum/subscriptions","organizations_url":"https://api.github.com/users/kabum/orgs","repos_url":"https://api.github.com/users/kabum/repos","events_url":"https://api.github.com/users/kabum/events{/privacy}","received_events_url":"https://api.github.com/users/kabum/received_events","type":"user","site_admin":false},"created_at":"2013-08-16t15:37:14z","updated_at":"2013-08-16t15:37:14z","body":":+1: for minify on release"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22774398","html_url":"https://github.com/owncloud/core/issues/4469#issuecomment-22774398","issue_url":"https://api.github.com/repos/owncloud/core/issues/4469","id":22774398,"user":{"login":"bantu","id":189375,"avatar_url":"https://gravatar.com/avatar/88483d87947219efecfc570465c753b2?d=https%3a%2f%2fidenticons.github.com%2fcdc48f189c0e2e8a870f3d54615a2f0d.png&r=x","gravatar_id":"88483d87947219efecfc570465c753b2","url":"https://api.github.com/users/bantu","html_url":"https://github.com/bantu","followers_url":"https://api.github.com/users/bantu/followers","following_url":"https://api.github.com/users/bantu/following{/other_user}","gists_url":"https://api.github.com/users/bantu/gists{/gist_id}","starred_url":"https://api.github.com/users/bantu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bantu/subscriptions","organizations_url":"https://api.github.com/users/bantu/orgs","repos_url":"https://api.github.com/users/bantu/repos","events_url":"https://api.github.com/users/bantu/events{/privacy}","received_events_url":"https://api.github.com/users/bantu/received_events","type":"user","site_admin":false},"created_at":"2013-08-16t15:39:36z","updated_at":"2013-08-16t15:39:36z","body":"yes, delivering js and friends via php is a bad idea. might want to checkout https://github.com/kriswallsmith/assetic"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22774650","html_url":"https://github.com/owncloud/core/issues/4469#issuecomment-22774650","issue_url":"https://api.github.com/repos/owncloud/core/issues/4469","id":22774650,"user":{"login":"ringmaster","id":127738,"avatar_url":"https://gravatar.com/avatar/2e4c262dd7f74a26b28f905c0fa15048?d=https%3a%2f%2fidenticons.github.com%2f968ec2eda9ddfebb1b5a00c05b9cc674.png&r=x","gravatar_id":"2e4c262dd7f74a26b28f905c0fa15048","url":"https://api.github.com/users/ringmaster","html_url":"https://github.com/ringmaster","followers_url":"https://api.github.com/users/ringmaster/followers","following_url":"https://api.github.com/users/ringmaster/following{/other_user}","gists_url":"https://api.github.com/users/ringmaster/gists{/gist_id}","starred_url":"https://api.github.com/users/ringmaster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ringmaster/subscriptions","organizations_url":"https://api.github.com/users/ringmaster/orgs","repos_url":"https://api.github.com/users/ringmaster/repos","events_url":"https://api.github.com/users/ringmaster/events{/privacy}","received_events_url":"https://api.github.com/users/ringmaster/received_events","type":"user","site_admin":false},"created_at":"2013-08-16t15:43:16z","updated_at":"2013-08-16t15:43:16z","body":"as another alternative, owncloud could obtain these minified resources from a static location, and if the file does not exist at the location, owncloud could generate the file.\r\n\r\nthis could be done via .htaccess:\r\n\r\n    rewritecond %{request_filename} !-f\r\n    rewriterule /css/(*).css /remote.php/core.css?v=$1\r\n\r\n remote.php would send the minified css like it does now, but it would also write the minified css to the file `{$hash}.css`  something could be added to cron for garbage collection."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22776283","html_url":"https://github.com/owncloud/core/issues/4469#issuecomment-22776283","issue_url":"https://api.github.com/repos/owncloud/core/issues/4469","id":22776283,"user":{"login":"icewind1991","id":1283854,"avatar_url":"https://gravatar.com/avatar/7c20f90ca5df67dd2cad22a8e2f80d8f?d=https%3a%2f%2fidenticons.github.com%2fc818423776eba38604496a7caddc0251.png&r=x","gravatar_id":"7c20f90ca5df67dd2cad22a8e2f80d8f","url":"https://api.github.com/users/icewind1991","html_url":"https://github.com/icewind1991","followers_url":"https://api.github.com/users/icewind1991/followers","following_url":"https://api.github.com/users/icewind1991/following{/other_user}","gists_url":"https://api.github.com/users/icewind1991/gists{/gist_id}","starred_url":"https://api.github.com/users/icewind1991/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icewind1991/subscriptions","organizations_url":"https://api.github.com/users/icewind1991/orgs","repos_url":"https://api.github.com/users/icewind1991/repos","events_url":"https://api.github.com/users/icewind1991/events{/privacy}","received_events_url":"https://api.github.com/users/icewind1991/received_events","type":"user","site_admin":false},"created_at":"2013-08-16t16:08:21z","updated_at":"2013-08-16t16:08:21z","body":"we cant depend on .htaccess"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22776956","html_url":"https://github.com/owncloud/core/issues/4469#issuecomment-22776956","issue_url":"https://api.github.com/repos/owncloud/core/issues/4469","id":22776956,"user":{"login":"kabum","id":245432,"avatar_url":"https://gravatar.com/avatar/a1dea19f88f38ea0b5b5b4d19d5b3107?d=https%3a%2f%2fidenticons.github.com%2f53d8cbb3dbc087a02951dec47438ccdf.png&r=x","gravatar_id":"a1dea19f88f38ea0b5b5b4d19d5b3107","url":"https://api.github.com/users/kabum","html_url":"https://github.com/kabum","followers_url":"https://api.github.com/users/kabum/followers","following_url":"https://api.github.com/users/kabum/following{/other_user}","gists_url":"https://api.github.com/users/kabum/gists{/gist_id}","starred_url":"https://api.github.com/users/kabum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kabum/subscriptions","organizations_url":"https://api.github.com/users/kabum/orgs","repos_url":"https://api.github.com/users/kabum/repos","events_url":"https://api.github.com/users/kabum/events{/privacy}","received_events_url":"https://api.github.com/users/kabum/received_events","type":"user","site_admin":false},"created_at":"2013-08-16t16:19:16z","updated_at":"2013-08-16t16:19:16z","body":"and on mod_rewrite"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22809152","html_url":"https://github.com/owncloud/core/issues/4469#issuecomment-22809152","issue_url":"https://api.github.com/repos/owncloud/core/issues/4469","id":22809152,"user":{"login":"itheiss","id":2655169,"avatar_url":"https://gravatar.com/avatar/fe6a0bc751adff26322b32adb09b9741?d=https%3a%2f%2fidenticons.github.com%2f42aaa95a916d9b0755076a13cec2f75f.png&r=x","gravatar_id":"fe6a0bc751adff26322b32adb09b9741","url":"https://api.github.com/users/itheiss","html_url":"https://github.com/itheiss","followers_url":"https://api.github.com/users/itheiss/followers","following_url":"https://api.github.com/users/itheiss/following{/other_user}","gists_url":"https://api.github.com/users/itheiss/gists{/gist_id}","starred_url":"https://api.github.com/users/itheiss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/itheiss/subscriptions","organizations_url":"https://api.github.com/users/itheiss/orgs","repos_url":"https://api.github.com/users/itheiss/repos","events_url":"https://api.github.com/users/itheiss/events{/privacy}","received_events_url":"https://api.github.com/users/itheiss/received_events","type":"user","site_admin":false},"created_at":"2013-08-17t10:14:24z","updated_at":"2013-08-17t10:14:24z","body":"i have the slight feeling two totally different things are getting mixed up.\r\n\r\n**minification** of js and css is commonly referred to as reducing size by removing unnecessary characters, as well as unneeded \"white space\" characters like space, new line, and tab. additionally code can be further formatted onto a single line instead of multiple.\r\n\r\n**compression** is achieved by using gzip or deflate.\r\n\r\nminification is definitely in the responsibility of the application and should be done as part of the release process. whereas compression should not be in the responsibility of the application."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22859704","html_url":"https://github.com/owncloud/core/issues/4469#issuecomment-22859704","issue_url":"https://api.github.com/repos/owncloud/core/issues/4469","id":22859704,"user":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false},"created_at":"2013-08-19t09:19:11z","updated_at":"2013-08-19t09:19:11z","body":"@karlitschek decission? :wink: "},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22861235","html_url":"https://github.com/owncloud/core/issues/4469#issuecomment-22861235","issue_url":"https://api.github.com/repos/owncloud/core/issues/4469","id":22861235,"user":{"login":"karlitschek","id":867445,"avatar_url":"https://gravatar.com/avatar/87ce2b4531ee1a0c32b50e0d8f049224?d=https%3a%2f%2fidenticons.github.com%2f06e7098636caebfc9c30c9f52eb905df.png&r=x","gravatar_id":"87ce2b4531ee1a0c32b50e0d8f049224","url":"https://api.github.com/users/karlitschek","html_url":"https://github.com/karlitschek","followers_url":"https://api.github.com/users/karlitschek/followers","following_url":"https://api.github.com/users/karlitschek/following{/other_user}","gists_url":"https://api.github.com/users/karlitschek/gists{/gist_id}","starred_url":"https://api.github.com/users/karlitschek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karlitschek/subscriptions","organizations_url":"https://api.github.com/users/karlitschek/orgs","repos_url":"https://api.github.com/users/karlitschek/repos","events_url":"https://api.github.com/users/karlitschek/events{/privacy}","received_events_url":"https://api.github.com/users/karlitschek/received_events","type":"user","site_admin":false},"created_at":"2013-08-19t09:50:16z","updated_at":"2013-08-19t09:50:16z","body":"agreed. compression is not he topic here. this is done by the webserver. we should try to not do the minification during runtime. caching the minified version is also bad because we have to fire up the whole php/owncloud code only to load a js file. \r\nso let's kill the minification code completely. the developers than have two option in the future.\r\n1.) add the non minified js file to owncloud and use if directly. the additional load is probably minimal. and the server will be way faster.\r\n2.) if the developer thinks that using a minified version is worth the work than the developer should commit two files (non minified and minified) and load the minified version. note: we always need the non minified version because this is a agpl requirement. bu all our own minification code should be killed. \r\n"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22862691","html_url":"https://github.com/owncloud/core/issues/4469#issuecomment-22862691","issue_url":"https://api.github.com/repos/owncloud/core/issues/4469","id":22862691,"user":{"login":"ringmaster","id":127738,"avatar_url":"https://gravatar.com/avatar/2e4c262dd7f74a26b28f905c0fa15048?d=https%3a%2f%2fidenticons.github.com%2f968ec2eda9ddfebb1b5a00c05b9cc674.png&r=x","gravatar_id":"2e4c262dd7f74a26b28f905c0fa15048","url":"https://api.github.com/users/ringmaster","html_url":"https://github.com/ringmaster","followers_url":"https://api.github.com/users/ringmaster/followers","following_url":"https://api.github.com/users/ringmaster/following{/other_user}","gists_url":"https://api.github.com/users/ringmaster/gists{/gist_id}","starred_url":"https://api.github.com/users/ringmaster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ringmaster/subscriptions","organizations_url":"https://api.github.com/users/ringmaster/orgs","repos_url":"https://api.github.com/users/ringmaster/repos","events_url":"https://api.github.com/users/ringmaster/events{/privacy}","received_events_url":"https://api.github.com/users/ringmaster/received_events","type":"user","site_admin":false},"created_at":"2013-08-19t10:20:02z","updated_at":"2013-08-19t10:20:02z","body":"as an addendum:  developers wishing to use non-minified versions of the source for debugging purposes should look into javascript source maps, described here:  http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/\r\n\r\nit may be worthwhile to add these markers to our minified files, as the overhead is small and yet debugging remains sane."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22863882","html_url":"https://github.com/owncloud/core/issues/4469#issuecomment-22863882","issue_url":"https://api.github.com/repos/owncloud/core/issues/4469","id":22863882,"user":{"login":"icewind1991","id":1283854,"avatar_url":"https://gravatar.com/avatar/7c20f90ca5df67dd2cad22a8e2f80d8f?d=https%3a%2f%2fidenticons.github.com%2fc818423776eba38604496a7caddc0251.png&r=x","gravatar_id":"7c20f90ca5df67dd2cad22a8e2f80d8f","url":"https://api.github.com/users/icewind1991","html_url":"https://github.com/icewind1991","followers_url":"https://api.github.com/users/icewind1991/followers","following_url":"https://api.github.com/users/icewind1991/following{/other_user}","gists_url":"https://api.github.com/users/icewind1991/gists{/gist_id}","starred_url":"https://api.github.com/users/icewind1991/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icewind1991/subscriptions","organizations_url":"https://api.github.com/users/icewind1991/orgs","repos_url":"https://api.github.com/users/icewind1991/repos","events_url":"https://api.github.com/users/icewind1991/events{/privacy}","received_events_url":"https://api.github.com/users/icewind1991/received_events","type":"user","site_admin":false},"created_at":"2013-08-19t10:48:31z","updated_at":"2013-08-19t10:48:31z","body":"oc's minification also does concatenation of the files, which is probably a bigger speed gain then the actual minification and not something an app can do itself if it's removed from core"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22868073","html_url":"https://github.com/owncloud/core/issues/4469#issuecomment-22868073","issue_url":"https://api.github.com/repos/owncloud/core/issues/4469","id":22868073,"user":{"login":"butonic","id":956847,"avatar_url":"https://gravatar.com/avatar/9760c134cabf66e10dbba06d7525f5c7?d=https%3a%2f%2fidenticons.github.com%2f92925ec1ad893739ed57986f18e2f060.png&r=x","gravatar_id":"9760c134cabf66e10dbba06d7525f5c7","url":"https://api.github.com/users/butonic","html_url":"https://github.com/butonic","followers_url":"https://api.github.com/users/butonic/followers","following_url":"https://api.github.com/users/butonic/following{/other_user}","gists_url":"https://api.github.com/users/butonic/gists{/gist_id}","starred_url":"https://api.github.com/users/butonic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/butonic/subscriptions","organizations_url":"https://api.github.com/users/butonic/orgs","repos_url":"https://api.github.com/users/butonic/repos","events_url":"https://api.github.com/users/butonic/events{/privacy}","received_events_url":"https://api.github.com/users/butonic/received_events","type":"user","site_admin":false},"created_at":"2013-08-19t12:27:17z","updated_at":"2013-08-19t12:27:17z","body":"looking at the requests number of requests we are making concatenating files to save extra http trips to the server seems like a good idea. but it actually it only adds complexity and makes caching core.js nearly impossible because depending on what app you load the content of core.js and core.css changes.\r\n\r\nat a second glance it seems that we are not allowing css files to be cached. have a look at the response headers of an arbitrary css file\r\n```\r\nhttp/1.1 304 not modified\r\ndate: mon, 19 aug 2013 12:10:27 gmt\r\nserver: apache/2.2.22 (ubuntu)\r\nconnection: keep-alive\r\nkeep-alive: timeout=5, max=95\r\nexpires: thu, 19 nov 1981 08:52:00 gmt\r\ncache-control: cache\r\nvary: accept-encoding\r\n```\r\n\r\nthe expires date is in the past, causing the browser to re-fetch all of the css files. just have a look at the network tab in chromium or firefox. we also have the `?v=<hash of file>` query parameter to make sure changed files get updated immediately and don't need a cache invalidation.\r\n\r\nin the end we should completely remove the minification and the file concatenation, because it breaks the caching mechanisms inherent to http. fixing the expires header for css files should give us all the speed improvement we need."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22868135","html_url":"https://github.com/owncloud/core/issues/4469#issuecomment-22868135","issue_url":"https://api.github.com/repos/owncloud/core/issues/4469","id":22868135,"user":{"login":"butonic","id":956847,"avatar_url":"https://gravatar.com/avatar/9760c134cabf66e10dbba06d7525f5c7?d=https%3a%2f%2fidenticons.github.com%2f92925ec1ad893739ed57986f18e2f060.png&r=x","gravatar_id":"9760c134cabf66e10dbba06d7525f5c7","url":"https://api.github.com/users/butonic","html_url":"https://github.com/butonic","followers_url":"https://api.github.com/users/butonic/followers","following_url":"https://api.github.com/users/butonic/following{/other_user}","gists_url":"https://api.github.com/users/butonic/gists{/gist_id}","starred_url":"https://api.github.com/users/butonic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/butonic/subscriptions","organizations_url":"https://api.github.com/users/butonic/orgs","repos_url":"https://api.github.com/users/butonic/repos","events_url":"https://api.github.com/users/butonic/events{/privacy}","received_events_url":"https://api.github.com/users/butonic/received_events","type":"user","site_admin":false},"created_at":"2013-08-19t12:28:35z","updated_at":"2013-08-19t12:28:35z","body":":+1: for killing result of premature optimization"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/23229223","html_url":"https://github.com/owncloud/core/issues/4469#issuecomment-23229223","issue_url":"https://api.github.com/repos/owncloud/core/issues/4469","id":23229223,"user":{"login":"bartv2","id":2227877,"avatar_url":"https://gravatar.com/avatar/c2d86a0a66a4be2c904e24034e842f44?d=https%3a%2f%2fidenticons.github.com%2f05e8b1362feb118a386dfd282b20fb84.png&r=x","gravatar_id":"c2d86a0a66a4be2c904e24034e842f44","url":"https://api.github.com/users/bartv2","html_url":"https://github.com/bartv2","followers_url":"https://api.github.com/users/bartv2/followers","following_url":"https://api.github.com/users/bartv2/following{/other_user}","gists_url":"https://api.github.com/users/bartv2/gists{/gist_id}","starred_url":"https://api.github.com/users/bartv2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bartv2/subscriptions","organizations_url":"https://api.github.com/users/bartv2/orgs","repos_url":"https://api.github.com/users/bartv2/repos","events_url":"https://api.github.com/users/bartv2/events{/privacy}","received_events_url":"https://api.github.com/users/bartv2/received_events","type":"user","site_admin":false},"created_at":"2013-08-25t15:05:57z","updated_at":"2013-08-25t15:05:57z","body":"the core.js and core.css files only depend on which apps you have enabled. "}]