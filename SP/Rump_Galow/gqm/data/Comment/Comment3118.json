[{"url":"https://api.github.com/repos/owncloud/core/issues/comments/16991657","html_url":"https://github.com/owncloud/core/issues/3118#issuecomment-16991657","issue_url":"https://api.github.com/repos/owncloud/core/issues/3118","id":16991657,"user":{"login":"kabum","id":245432,"avatar_url":"https://gravatar.com/avatar/a1dea19f88f38ea0b5b5b4d19d5b3107?d=https%3a%2f%2fidenticons.github.com%2f53d8cbb3dbc087a02951dec47438ccdf.png&r=x","gravatar_id":"a1dea19f88f38ea0b5b5b4d19d5b3107","url":"https://api.github.com/users/kabum","html_url":"https://github.com/kabum","followers_url":"https://api.github.com/users/kabum/followers","following_url":"https://api.github.com/users/kabum/following{/other_user}","gists_url":"https://api.github.com/users/kabum/gists{/gist_id}","starred_url":"https://api.github.com/users/kabum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kabum/subscriptions","organizations_url":"https://api.github.com/users/kabum/orgs","repos_url":"https://api.github.com/users/kabum/repos","events_url":"https://api.github.com/users/kabum/events{/privacy}","received_events_url":"https://api.github.com/users/kabum/received_events","type":"user","site_admin":false},"created_at":"2013-04-25t07:07:44z","updated_at":"2013-04-25t07:07:44z","body":"cc @icewind1991 @bartv2 \r\ndup of #2762?"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17001059","html_url":"https://github.com/owncloud/core/issues/3118#issuecomment-17001059","issue_url":"https://api.github.com/repos/owncloud/core/issues/3118","id":17001059,"user":{"login":"dlangh","id":1436671,"avatar_url":"https://gravatar.com/avatar/fb2ca85006b97f41414e77a50734624b?d=https%3a%2f%2fidenticons.github.com%2fe67d9b6e2b27c3305a0f5e6a0da2b99c.png&r=x","gravatar_id":"fb2ca85006b97f41414e77a50734624b","url":"https://api.github.com/users/dlangh","html_url":"https://github.com/dlangh","followers_url":"https://api.github.com/users/dlangh/followers","following_url":"https://api.github.com/users/dlangh/following{/other_user}","gists_url":"https://api.github.com/users/dlangh/gists{/gist_id}","starred_url":"https://api.github.com/users/dlangh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlangh/subscriptions","organizations_url":"https://api.github.com/users/dlangh/orgs","repos_url":"https://api.github.com/users/dlangh/repos","events_url":"https://api.github.com/users/dlangh/events{/privacy}","received_events_url":"https://api.github.com/users/dlangh/received_events","type":"user","site_admin":false},"created_at":"2013-04-25t11:21:24z","updated_at":"2013-04-25t11:21:24z","body":"i wanted to post a note to say that i too am having this problem.  my problem is with the client sync app.  the performance is utterly terrible, i mean beyond describing.  i feel like i've transported back to the days of a 14.4k modem.\r\n\r\ni am running owncloud server 5.0.5.  i was previously running 4.5 and i had no problems using the sync client.  also fyi when i tried to upgrade to 5.0 it stalled and never finished upgrading (i let it run for days!).  i finally gave up on that and blew away 4.5 and installed 5.0.5 from scratch, so this problem would have nothing to do with a problematic upgrade.\r\n\r\nmy problem is specifically with the owncloud client on mac.  i also upgraded this morning to 1.2.5 which i see is recently out, that did not help.  it transfers at speeds in the kilobytes.  just to prove how bad this is.  i was testing bittorrent sync this morning and while owncloud transfered < 1mb of data, the bittorrent sync client transfered > 500mb.  this is on the same client and server.  in fact bittorrent sync transfered 1gb in a few minutes which is pretty much on par for my network speed.\r\n\r\ni really want to be of a positive mind-set but this is a major problem and one i see many others are reporting.   whatever it is this should be priority one as it renders owncloud useless.  i think this product has great potential, but right now it's basically of no value to me and i'm forced to find alternatives.  i cannot say how dissapointed i was when i saw 1.2.5 was released and a fix for this was not part of it.  anything else you guys work on should take a back seat to this until it's resolved."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17002204","html_url":"https://github.com/owncloud/core/issues/3118#issuecomment-17002204","issue_url":"https://api.github.com/repos/owncloud/core/issues/3118","id":17002204,"user":{"login":"munialabs","id":1596314,"avatar_url":"https://gravatar.com/avatar/da21dbbb41ecd737b9220a907c2171cd?d=https%3a%2f%2fidenticons.github.com%2f7c7a372c51afcc10f6bbd137d025db6d.png&r=x","gravatar_id":"da21dbbb41ecd737b9220a907c2171cd","url":"https://api.github.com/users/munialabs","html_url":"https://github.com/munialabs","followers_url":"https://api.github.com/users/munialabs/followers","following_url":"https://api.github.com/users/munialabs/following{/other_user}","gists_url":"https://api.github.com/users/munialabs/gists{/gist_id}","starred_url":"https://api.github.com/users/munialabs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/munialabs/subscriptions","organizations_url":"https://api.github.com/users/munialabs/orgs","repos_url":"https://api.github.com/users/munialabs/repos","events_url":"https://api.github.com/users/munialabs/events{/privacy}","received_events_url":"https://api.github.com/users/munialabs/received_events","type":"user","site_admin":false},"created_at":"2013-04-25t11:51:25z","updated_at":"2013-04-25t11:51:25z","body":"i second that opinion, i would like to stress that owncloud is excellent work--\r\nbut my 70000 files needed more than a week to upload in my internal network.\r\nas i only need dropbox-like syncing, i switched to seafile, which, thanks to git,\r\nshows much more performance (about 30 minutes).\r\n\r\nagain, thank you for all your work! \r\n\r\nbut this bug is a show-stopper and should be handled with upmost priority.\r\n"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17002239","html_url":"https://github.com/owncloud/core/issues/3118#issuecomment-17002239","issue_url":"https://api.github.com/repos/owncloud/core/issues/3118","id":17002239,"user":{"login":"kabum","id":245432,"avatar_url":"https://gravatar.com/avatar/a1dea19f88f38ea0b5b5b4d19d5b3107?d=https%3a%2f%2fidenticons.github.com%2f53d8cbb3dbc087a02951dec47438ccdf.png&r=x","gravatar_id":"a1dea19f88f38ea0b5b5b4d19d5b3107","url":"https://api.github.com/users/kabum","html_url":"https://github.com/kabum","followers_url":"https://api.github.com/users/kabum/followers","following_url":"https://api.github.com/users/kabum/following{/other_user}","gists_url":"https://api.github.com/users/kabum/gists{/gist_id}","starred_url":"https://api.github.com/users/kabum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kabum/subscriptions","organizations_url":"https://api.github.com/users/kabum/orgs","repos_url":"https://api.github.com/users/kabum/repos","events_url":"https://api.github.com/users/kabum/events{/privacy}","received_events_url":"https://api.github.com/users/kabum/received_events","type":"user","site_admin":false},"created_at":"2013-04-25t11:52:35z","updated_at":"2013-04-25t11:52:35z","body":"what database did you use?"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17002421","html_url":"https://github.com/owncloud/core/issues/3118#issuecomment-17002421","issue_url":"https://api.github.com/repos/owncloud/core/issues/3118","id":17002421,"user":{"login":"munialabs","id":1596314,"avatar_url":"https://gravatar.com/avatar/da21dbbb41ecd737b9220a907c2171cd?d=https%3a%2f%2fidenticons.github.com%2f7c7a372c51afcc10f6bbd137d025db6d.png&r=x","gravatar_id":"da21dbbb41ecd737b9220a907c2171cd","url":"https://api.github.com/users/munialabs","html_url":"https://github.com/munialabs","followers_url":"https://api.github.com/users/munialabs/followers","following_url":"https://api.github.com/users/munialabs/following{/other_user}","gists_url":"https://api.github.com/users/munialabs/gists{/gist_id}","starred_url":"https://api.github.com/users/munialabs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/munialabs/subscriptions","organizations_url":"https://api.github.com/users/munialabs/orgs","repos_url":"https://api.github.com/users/munialabs/repos","events_url":"https://api.github.com/users/munialabs/events{/privacy}","received_events_url":"https://api.github.com/users/munialabs/received_events","type":"user","site_admin":false},"created_at":"2013-04-25t11:57:10z","updated_at":"2013-04-25t11:57:10z","body":"i used sqlite. and if i remember correctly i also used mysql on the raspberry pi.\r\nbut no postgresql."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17002518","html_url":"https://github.com/owncloud/core/issues/3118#issuecomment-17002518","issue_url":"https://api.github.com/repos/owncloud/core/issues/3118","id":17002518,"user":{"login":"kabum","id":245432,"avatar_url":"https://gravatar.com/avatar/a1dea19f88f38ea0b5b5b4d19d5b3107?d=https%3a%2f%2fidenticons.github.com%2f53d8cbb3dbc087a02951dec47438ccdf.png&r=x","gravatar_id":"a1dea19f88f38ea0b5b5b4d19d5b3107","url":"https://api.github.com/users/kabum","html_url":"https://github.com/kabum","followers_url":"https://api.github.com/users/kabum/followers","following_url":"https://api.github.com/users/kabum/following{/other_user}","gists_url":"https://api.github.com/users/kabum/gists{/gist_id}","starred_url":"https://api.github.com/users/kabum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kabum/subscriptions","organizations_url":"https://api.github.com/users/kabum/orgs","repos_url":"https://api.github.com/users/kabum/repos","events_url":"https://api.github.com/users/kabum/events{/privacy}","received_events_url":"https://api.github.com/users/kabum/received_events","type":"user","site_admin":false},"created_at":"2013-04-25t11:59:43z","updated_at":"2013-04-25t11:59:43z","body":"in my case sqlite was the show-stopper. using mysql, uploads are pretty fast."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17005507","html_url":"https://github.com/owncloud/core/issues/3118#issuecomment-17005507","issue_url":"https://api.github.com/repos/owncloud/core/issues/3118","id":17005507,"user":{"login":"dlangh","id":1436671,"avatar_url":"https://gravatar.com/avatar/fb2ca85006b97f41414e77a50734624b?d=https%3a%2f%2fidenticons.github.com%2fe67d9b6e2b27c3305a0f5e6a0da2b99c.png&r=x","gravatar_id":"fb2ca85006b97f41414e77a50734624b","url":"https://api.github.com/users/dlangh","html_url":"https://github.com/dlangh","followers_url":"https://api.github.com/users/dlangh/followers","following_url":"https://api.github.com/users/dlangh/following{/other_user}","gists_url":"https://api.github.com/users/dlangh/gists{/gist_id}","starred_url":"https://api.github.com/users/dlangh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlangh/subscriptions","organizations_url":"https://api.github.com/users/dlangh/orgs","repos_url":"https://api.github.com/users/dlangh/repos","events_url":"https://api.github.com/users/dlangh/events{/privacy}","received_events_url":"https://api.github.com/users/dlangh/received_events","type":"user","site_admin":false},"created_at":"2013-04-25t13:08:00z","updated_at":"2013-04-25t13:08:00z","body":"i don't remember choosing a database, so i have to assume that means sqlite.  having said that since someone else mentioned raspberry pi, where the hardware could possibly be the bottleneck (i have 4 pi's and i love them but when i tested owncloud 4.5 on one of them it was just too slow for me.  in that case it was web access.  my owncloud server is running on a 2.2 ghz mac mini with 4gb ram, so performance should not be an issue.\r\n\r\nhaving said this i will give mysql a try and report back here my findings.\r\n\r\nthanks!\r\n\r\ndon"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17005785","html_url":"https://github.com/owncloud/core/issues/3118#issuecomment-17005785","issue_url":"https://api.github.com/repos/owncloud/core/issues/3118","id":17005785,"user":{"login":"munialabs","id":1596314,"avatar_url":"https://gravatar.com/avatar/da21dbbb41ecd737b9220a907c2171cd?d=https%3a%2f%2fidenticons.github.com%2f7c7a372c51afcc10f6bbd137d025db6d.png&r=x","gravatar_id":"da21dbbb41ecd737b9220a907c2171cd","url":"https://api.github.com/users/munialabs","html_url":"https://github.com/munialabs","followers_url":"https://api.github.com/users/munialabs/followers","following_url":"https://api.github.com/users/munialabs/following{/other_user}","gists_url":"https://api.github.com/users/munialabs/gists{/gist_id}","starred_url":"https://api.github.com/users/munialabs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/munialabs/subscriptions","organizations_url":"https://api.github.com/users/munialabs/orgs","repos_url":"https://api.github.com/users/munialabs/repos","events_url":"https://api.github.com/users/munialabs/events{/privacy}","received_events_url":"https://api.github.com/users/munialabs/received_events","type":"user","site_admin":false},"created_at":"2013-04-25t13:13:41z","updated_at":"2013-04-25t13:13:41z","body":"as a sidenote: i also had owncloud running on some quad-core amd, x4 631 i think, under linux mint, and the client was just the laptop next to it, connected via a 100mbit switch. the performance was not different to my pogoplug and also not different to my raspberry pi. on both the amd and the pogoplug i'm quite confident that i have chosen sqlite. \r\n"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17013016","html_url":"https://github.com/owncloud/core/issues/3118#issuecomment-17013016","issue_url":"https://api.github.com/repos/owncloud/core/issues/3118","id":17013016,"user":{"login":"kabum","id":245432,"avatar_url":"https://gravatar.com/avatar/a1dea19f88f38ea0b5b5b4d19d5b3107?d=https%3a%2f%2fidenticons.github.com%2f53d8cbb3dbc087a02951dec47438ccdf.png&r=x","gravatar_id":"a1dea19f88f38ea0b5b5b4d19d5b3107","url":"https://api.github.com/users/kabum","html_url":"https://github.com/kabum","followers_url":"https://api.github.com/users/kabum/followers","following_url":"https://api.github.com/users/kabum/following{/other_user}","gists_url":"https://api.github.com/users/kabum/gists{/gist_id}","starred_url":"https://api.github.com/users/kabum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kabum/subscriptions","organizations_url":"https://api.github.com/users/kabum/orgs","repos_url":"https://api.github.com/users/kabum/repos","events_url":"https://api.github.com/users/kabum/events{/privacy}","received_events_url":"https://api.github.com/users/kabum/received_events","type":"user","site_admin":false},"created_at":"2013-04-25t15:13:09z","updated_at":"2013-04-25t15:13:09z","body":"if just one php module is installed(sqlite, mysql, psql), owncloud\nautomatically chooses this and no choices are listed;)"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17017331","html_url":"https://github.com/owncloud/core/issues/3118#issuecomment-17017331","issue_url":"https://api.github.com/repos/owncloud/core/issues/3118","id":17017331,"user":{"login":"jerrac","id":910764,"avatar_url":"https://gravatar.com/avatar/94f514db175a8d425d11b59ddb9914bd?d=https%3a%2f%2fidenticons.github.com%2f2d4e93eae23e52be61d73752b1cd8716.png&r=x","gravatar_id":"94f514db175a8d425d11b59ddb9914bd","url":"https://api.github.com/users/jerrac","html_url":"https://github.com/jerrac","followers_url":"https://api.github.com/users/jerrac/followers","following_url":"https://api.github.com/users/jerrac/following{/other_user}","gists_url":"https://api.github.com/users/jerrac/gists{/gist_id}","starred_url":"https://api.github.com/users/jerrac/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jerrac/subscriptions","organizations_url":"https://api.github.com/users/jerrac/orgs","repos_url":"https://api.github.com/users/jerrac/repos","events_url":"https://api.github.com/users/jerrac/events{/privacy}","received_events_url":"https://api.github.com/users/jerrac/received_events","type":"user","site_admin":false},"created_at":"2013-04-25t16:17:00z","updated_at":"2013-04-25t16:17:00z","body":"i haven't tried anything but mysql."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17037884","html_url":"https://github.com/owncloud/core/issues/3118#issuecomment-17037884","issue_url":"https://api.github.com/repos/owncloud/core/issues/3118","id":17037884,"user":{"login":"dlangh","id":1436671,"avatar_url":"https://gravatar.com/avatar/fb2ca85006b97f41414e77a50734624b?d=https%3a%2f%2fidenticons.github.com%2fe67d9b6e2b27c3305a0f5e6a0da2b99c.png&r=x","gravatar_id":"fb2ca85006b97f41414e77a50734624b","url":"https://api.github.com/users/dlangh","html_url":"https://github.com/dlangh","followers_url":"https://api.github.com/users/dlangh/followers","following_url":"https://api.github.com/users/dlangh/following{/other_user}","gists_url":"https://api.github.com/users/dlangh/gists{/gist_id}","starred_url":"https://api.github.com/users/dlangh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlangh/subscriptions","organizations_url":"https://api.github.com/users/dlangh/orgs","repos_url":"https://api.github.com/users/dlangh/repos","events_url":"https://api.github.com/users/dlangh/events{/privacy}","received_events_url":"https://api.github.com/users/dlangh/received_events","type":"user","site_admin":false},"created_at":"2013-04-25t20:21:35z","updated_at":"2013-04-25t20:21:35z","body":"ok, i performed the following:\r\n\r\n1. installed owncloud server on ubuntu server, setup apache with ssl the works.  this was a completely new installation, no legacy files, no upgrade, no migration.  brand new owncloud server 5.0.5.  this time i used mysql for the database backend, not sqlite as before.  this box really isn't doing much at the moment, no other activity and it's an internal box of mine.\r\n2. i confirmed owncloud web interface loads and works via https://\r\n3. opened my client app on mac version 1.2.5.  i deleted all sync folders in the client so i had none anymore.  the old ones were pointing to my original owncloud server on my mac mini, so i figured best to wipe them and start clean with client as well.\r\n4. i created a new sync client definition.  it connected without issue and let me create new sync folder.\r\n5. sync started running.\r\n6. in ssh terminal on ubuntu server, cd into the owncloud data folder.  this folder is btw not located in the owncloud webroot, i have an external drive i am using, i don't expect that is the cause but trying to provide as much info as i can.  after going into the files folder for my user i can see the new folder i synced, if i go into that i can see it's folders/files being populated.\r\n7. running du -c from the files folder tells me that in fact files are continuing to be populated, but again the speed is horrific.  if i wait a few seconds and rerun the command, i *might* get 10-25k increase.  it is still painfully slow.  after about 10 mins and maybe 2 mb transfered, i finally aborted and gave up.\r\n\r\nthat is my experience, for me mysql was no help.\r\n\r\n\r\n\r\n"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17038368","html_url":"https://github.com/owncloud/core/issues/3118#issuecomment-17038368","issue_url":"https://api.github.com/repos/owncloud/core/issues/3118","id":17038368,"user":{"login":"kabum","id":245432,"avatar_url":"https://gravatar.com/avatar/a1dea19f88f38ea0b5b5b4d19d5b3107?d=https%3a%2f%2fidenticons.github.com%2f53d8cbb3dbc087a02951dec47438ccdf.png&r=x","gravatar_id":"a1dea19f88f38ea0b5b5b4d19d5b3107","url":"https://api.github.com/users/kabum","html_url":"https://github.com/kabum","followers_url":"https://api.github.com/users/kabum/followers","following_url":"https://api.github.com/users/kabum/following{/other_user}","gists_url":"https://api.github.com/users/kabum/gists{/gist_id}","starred_url":"https://api.github.com/users/kabum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kabum/subscriptions","organizations_url":"https://api.github.com/users/kabum/orgs","repos_url":"https://api.github.com/users/kabum/repos","events_url":"https://api.github.com/users/kabum/events{/privacy}","received_events_url":"https://api.github.com/users/kabum/received_events","type":"user","site_admin":false},"created_at":"2013-04-25t20:29:29z","updated_at":"2013-04-25t20:29:29z","body":"@dlangh thanks for your detailed report. here at my (virtual) machine with ubuntu 12.04 and oc 5.0.5 (upgraded from fresh 5.0.0) my 2gb documents folder (< 20k files) was uploaded in 20-30 minutes. and for me sqlite was the bottleneck. \r\n\r\nmaybe @icewind1991 has a glue."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17057293","html_url":"https://github.com/owncloud/core/issues/3118#issuecomment-17057293","issue_url":"https://api.github.com/repos/owncloud/core/issues/3118","id":17057293,"user":{"login":"dermase","id":4262318,"avatar_url":"https://gravatar.com/avatar/0c7e47a1bb8c54daee595a73104ab331?d=https%3a%2f%2fidenticons.github.com%2f9d56e04ad1c8747916284b47e01bc680.png&r=x","gravatar_id":"0c7e47a1bb8c54daee595a73104ab331","url":"https://api.github.com/users/dermase","html_url":"https://github.com/dermase","followers_url":"https://api.github.com/users/dermase/followers","following_url":"https://api.github.com/users/dermase/following{/other_user}","gists_url":"https://api.github.com/users/dermase/gists{/gist_id}","starred_url":"https://api.github.com/users/dermase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dermase/subscriptions","organizations_url":"https://api.github.com/users/dermase/orgs","repos_url":"https://api.github.com/users/dermase/repos","events_url":"https://api.github.com/users/dermase/events{/privacy}","received_events_url":"https://api.github.com/users/dermase/received_events","type":"user","site_admin":false},"created_at":"2013-04-26t06:19:00z","updated_at":"2013-04-26t06:20:00z","body":"having the same problem here. my system:\r\nwindows 7 x64 sp1\r\nusing current downloadable version of xamp\r\ni used mysql as database\r\n\r\ncontent was about 2 gb mainly pdf-documents in several sub directories.\r\nsome files were bigger.\r\nupload to server was something around 5 files in one minute and approximately 10mb in total.\r\nserver was within local network, 100mbit connection, running also with windows 7 x64 sp1\r\nany more info i'll be happy to submit"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17080881","html_url":"https://github.com/owncloud/core/issues/3118#issuecomment-17080881","issue_url":"https://api.github.com/repos/owncloud/core/issues/3118","id":17080881,"user":{"login":"tfelice","id":4266120,"avatar_url":"https://gravatar.com/avatar/480b7915974b193a4e31dbf91b6d84e2?d=https%3a%2f%2fidenticons.github.com%2fa1b4c8fd9f382bc9363bd48d86289d59.png&r=x","gravatar_id":"480b7915974b193a4e31dbf91b6d84e2","url":"https://api.github.com/users/tfelice","html_url":"https://github.com/tfelice","followers_url":"https://api.github.com/users/tfelice/followers","following_url":"https://api.github.com/users/tfelice/following{/other_user}","gists_url":"https://api.github.com/users/tfelice/gists{/gist_id}","starred_url":"https://api.github.com/users/tfelice/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tfelice/subscriptions","organizations_url":"https://api.github.com/users/tfelice/orgs","repos_url":"https://api.github.com/users/tfelice/repos","events_url":"https://api.github.com/users/tfelice/events{/privacy}","received_events_url":"https://api.github.com/users/tfelice/received_events","type":"user","site_admin":false},"created_at":"2013-04-26t15:21:37z","updated_at":"2013-04-26t15:21:37z","body":"my experience is similar, and i'm using postgresql with owncloud 5.0.5.  uploads of a single file seem pretty normal, but whenever there are large amounts of files, it's so slow as to be unusable.  i started to sync windows server (using client 1.2.5) that had maybe 200,000 files totaling about 180 gb, to an owncloud server to which the client machine had a gigabit ethernet path.  even across gigabit ethernet, the progress was so slow that it would have taken ten days to complete had i not interrupted it after two days.\r\n\r\nthe server is ubuntu 12.04 64-bit, running php 5.3.10-1ubuntu3.6  and postgresql 9.1+129ubuntu1.  \r\n\r\nwe're interesting in providing a private backup to our customers and are interested in using owncloud as a service provider, but obviously we won't go any further in this direction until we see our test install work well."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17105388","html_url":"https://github.com/owncloud/core/issues/3118#issuecomment-17105388","issue_url":"https://api.github.com/repos/owncloud/core/issues/3118","id":17105388,"user":{"login":"arjenr","id":4269186,"avatar_url":"https://gravatar.com/avatar/990c6923345d76f0f25ca590c5c31595?d=https%3a%2f%2fidenticons.github.com%2f06549fe41859ef90de670dda222c9b4b.png&r=x","gravatar_id":"990c6923345d76f0f25ca590c5c31595","url":"https://api.github.com/users/arjenr","html_url":"https://github.com/arjenr","followers_url":"https://api.github.com/users/arjenr/followers","following_url":"https://api.github.com/users/arjenr/following{/other_user}","gists_url":"https://api.github.com/users/arjenr/gists{/gist_id}","starred_url":"https://api.github.com/users/arjenr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arjenr/subscriptions","organizations_url":"https://api.github.com/users/arjenr/orgs","repos_url":"https://api.github.com/users/arjenr/repos","events_url":"https://api.github.com/users/arjenr/events{/privacy}","received_events_url":"https://api.github.com/users/arjenr/received_events","type":"user","site_admin":false},"created_at":"2013-04-26t23:24:38z","updated_at":"2013-04-26t23:24:38z","body":"on my system with owncloud 5.0.5 on opensuse 12.3 with sqlite as db i notice the same issue.\r\ni use nginx with php-fpm\r\n\r\nsince i can hear the disk activity, i have focussed in that venue to trace the issue.\r\n\r\ni have noticed that on every propfind the owncloud.db and owncloud.db-journal is openen multiple times with noexist as a result given. surprising since owncloud.db exists.\r\n\r\nowncloud.db-journal is being created and deleted repeatedly.\r\n\r\nopened the owncloud.db with sqlite3 and issued a pragma journal_mode = wal\r\n\r\nthis has mitigated the issue greatly, but i still notice a lot of file open commands on the owncloud data dir.\r\n\r\nthis leads me to believe that the connection to the database is opened and closed repetitively.\r\nin de lib/db.php i do notice some code which tests access to the database. i have not tersely researched the code. well i can read it, but only with half a clue... ;-) but i think that connections to the database are not persistent and are opened and closed about 3 times for each query (on propfind).\r\n\r\nexpensive in sqlite and perhaps also on other (remote) db backends.\r\n\r\ni hope this can help in resolving the issue.\r\n\r\nbb, arjen"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17112155","html_url":"https://github.com/owncloud/core/issues/3118#issuecomment-17112155","issue_url":"https://api.github.com/repos/owncloud/core/issues/3118","id":17112155,"user":{"login":"kabum","id":245432,"avatar_url":"https://gravatar.com/avatar/a1dea19f88f38ea0b5b5b4d19d5b3107?d=https%3a%2f%2fidenticons.github.com%2f53d8cbb3dbc087a02951dec47438ccdf.png&r=x","gravatar_id":"a1dea19f88f38ea0b5b5b4d19d5b3107","url":"https://api.github.com/users/kabum","html_url":"https://github.com/kabum","followers_url":"https://api.github.com/users/kabum/followers","following_url":"https://api.github.com/users/kabum/following{/other_user}","gists_url":"https://api.github.com/users/kabum/gists{/gist_id}","starred_url":"https://api.github.com/users/kabum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kabum/subscriptions","organizations_url":"https://api.github.com/users/kabum/orgs","repos_url":"https://api.github.com/users/kabum/repos","events_url":"https://api.github.com/users/kabum/events{/privacy}","received_events_url":"https://api.github.com/users/kabum/received_events","type":"user","site_admin":false},"created_at":"2013-04-27t07:44:48z","updated_at":"2013-04-27t07:44:48z","body":"@arjenr thanks to your great research!"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17114045","html_url":"https://github.com/owncloud/core/issues/3118#issuecomment-17114045","issue_url":"https://api.github.com/repos/owncloud/core/issues/3118","id":17114045,"user":{"login":"arjenr","id":4269186,"avatar_url":"https://gravatar.com/avatar/990c6923345d76f0f25ca590c5c31595?d=https%3a%2f%2fidenticons.github.com%2f06549fe41859ef90de670dda222c9b4b.png&r=x","gravatar_id":"990c6923345d76f0f25ca590c5c31595","url":"https://api.github.com/users/arjenr","html_url":"https://github.com/arjenr","followers_url":"https://api.github.com/users/arjenr/followers","following_url":"https://api.github.com/users/arjenr/following{/other_user}","gists_url":"https://api.github.com/users/arjenr/gists{/gist_id}","starred_url":"https://api.github.com/users/arjenr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arjenr/subscriptions","organizations_url":"https://api.github.com/users/arjenr/orgs","repos_url":"https://api.github.com/users/arjenr/repos","events_url":"https://api.github.com/users/arjenr/events{/privacy}","received_events_url":"https://api.github.com/users/arjenr/received_events","type":"user","site_admin":false},"created_at":"2013-04-27t10:36:56z","updated_at":"2013-04-27t10:36:56z","body":"@kabum \r\n\r\nyou are welcome :-)\r\n\r\nbut looking again, i am unsure on the fact that it is related to propfind. (i did not look into the code) i look at log files and the strace and correlate them. so i think it is at put that all the repetitive database open seem to happen. as is mentioned elsewhere."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17115625","html_url":"https://github.com/owncloud/core/issues/3118#issuecomment-17115625","issue_url":"https://api.github.com/repos/owncloud/core/issues/3118","id":17115625,"user":{"login":"tfelice","id":4266120,"avatar_url":"https://gravatar.com/avatar/480b7915974b193a4e31dbf91b6d84e2?d=https%3a%2f%2fidenticons.github.com%2fa1b4c8fd9f382bc9363bd48d86289d59.png&r=x","gravatar_id":"480b7915974b193a4e31dbf91b6d84e2","url":"https://api.github.com/users/tfelice","html_url":"https://github.com/tfelice","followers_url":"https://api.github.com/users/tfelice/followers","following_url":"https://api.github.com/users/tfelice/following{/other_user}","gists_url":"https://api.github.com/users/tfelice/gists{/gist_id}","starred_url":"https://api.github.com/users/tfelice/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tfelice/subscriptions","organizations_url":"https://api.github.com/users/tfelice/orgs","repos_url":"https://api.github.com/users/tfelice/repos","events_url":"https://api.github.com/users/tfelice/events{/privacy}","received_events_url":"https://api.github.com/users/tfelice/received_events","type":"user","site_admin":false},"created_at":"2013-04-27t12:48:55z","updated_at":"2013-04-27t12:48:55z","body":"i don't know if this helps at all, but i did a tcpdump on the server, which uses a local copy of postgresql, to see the traffic on localhost:5432, and i see the following curious output (incorrect checksums).  this is while a couple of clients are actively syncing, and i see the file count incrementing on the server, so the slow file transfers are still in progress.  doesn't seem to be any filesystem problems on the server; when i use scp i get transfer speed close to 300x what i'm getting with the owncloud client.\r\n\r\nip (tos 0x0, ttl 64, id 778, offset 0, flags [df], proto tcp (6), length 126)\r\n    127.0.0.1.41236 > 127.0.0.1.5432: flags [p.], cksum 0xfe72 (incorrect -> 0x3830), seq 721585049:721585123, ack 4005059246, win 768, options [nop,nop,ts val 17694106 ecr 17694104], length 74\r\nip (tos 0x0, ttl 64, id 14240, offset 0, flags [df], proto tcp (6), length 126)\r\n    127.0.0.1.5432 > 127.0.0.1.41236: flags [p.], cksum 0xfe72 (incorrect -> 0x52d3), seq 1:75, ack 74, win 613, options [nop,nop,ts val 17694106 ecr 17694106], length 74\r\nip (tos 0x0, ttl 64, id 779, offset 0, flags [df], proto tcp (6), length 158)\r\n    127.0.0.1.41236 > 127.0.0.1.5432: flags [p.], cksum 0xfe92 (incorrect -> 0xc084), seq 74:180, ack 75, win 768, options [nop,nop,ts val 17694106 ecr 17694106], length 106\r\nip (tos 0x0, ttl 64, id 14241, offset 0, flags [df], proto tcp (6), length 174)\r\n    127.0.0.1.5432 > 127.0.0.1.41236: flags [p.], cksum 0xfea2 (incorrect -> 0x9ee1), seq 75:197, ack 180, win 613, options [nop,nop,ts val 17694106 ecr 17694106], length 122\r\nip (tos 0x0, ttl 64, id 780, offset 0, flags [df], proto tcp (6), length 142)\r\n    127.0.0.1.41236 > 127.0.0.1.5432: flags [p.], cksum 0xfe82 (incorrect -> 0x4d4b), seq 180:270, ack 197, win 768, options [nop,nop,ts val 17694106 ecr 17694106], length 90\r\nip (tos 0x0, ttl 64, id 14242, offset 0, flags [df], proto tcp (6), length 142)\r\n    127.0.0.1.5432 > 127.0.0.1.41236: flags [p.], cksum 0xfe82 (incorrect -> 0xc627), seq 197:287, ack 270, win 613, options [nop,nop,ts val 17694106 ecr 17694106], length 90\r\nip (tos 0x0, ttl 64, id 781, offset 0, flags [df], proto tcp (6), length 158)\r\n    127.0.0.1.41236 > 127.0.0.1.5432: flags [p.], cksum 0xfe92 (incorrect -> 0xdaba), seq 270:376, ack 287, win 768, options [nop,nop,ts val 17694106 ecr 17694106], length 106\r\nip (tos 0x0, ttl 64, id 14243, offset 0, flags [df], proto tcp (6), length 126)\r\n    127.0.0.1.5432 > 127.0.0.1.41236: flags [p.], cksum 0xfe72 (incorrect -> 0x1d7f), seq 287:361, ack 376, win 613, options [nop,nop,ts val 17694106 ecr 17694106], length 74\r\nip (tos 0x0, ttl 64, id 782, offset 0, flags [df], proto tcp (6), length 126)\r\n    127.0.0.1.41236 > 127.0.0.1.5432: flags [p.], cksum 0xfe72 (incorrect -> 0xbfb2), seq 376:450, ack 361, win 768, options [nop,nop,ts val 17694108 ecr 17694106], length 74\r\nip (tos 0x0, ttl 64, id 14244, offset 0, flags [df], proto tcp (6), length 126)\r\n    127.0.0.1.5432 > 127.0.0.1.41236: flags [p.], cksum 0xfe72 (incorrect -> 0x815a), seq 361:435, ack 450, win 613, options [nop,nop,ts val 17694108 ecr 17694108], length 74\r\nip (tos 0x0, ttl 64, id 783, offset 0, flags [df], proto tcp (6), length 158)\r\n    127.0.0.1.41236 > 127.0.0.1.5432: flags [p.], cksum 0xfe92 (incorrect -> 0x1dfc), seq 450:556, ack 435, win 768, options [nop,nop,ts val 17694108 ecr 17694108], length 106\r\nip (tos 0x0, ttl 64, id 14245, offset 0, flags [df], proto tcp (6), length 174)\r\n    127.0.0.1.5432 > 127.0.0.1.41236: flags [p.], cksum 0xfea2 (incorrect -> 0x79d8), seq 435:557, ack 556, win 613, options [nop,nop,ts val 17694108 ecr 17694108], length 122\r\n"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17117602","html_url":"https://github.com/owncloud/core/issues/3118#issuecomment-17117602","issue_url":"https://api.github.com/repos/owncloud/core/issues/3118","id":17117602,"user":{"login":"arjenr","id":4269186,"avatar_url":"https://gravatar.com/avatar/990c6923345d76f0f25ca590c5c31595?d=https%3a%2f%2fidenticons.github.com%2f06549fe41859ef90de670dda222c9b4b.png&r=x","gravatar_id":"990c6923345d76f0f25ca590c5c31595","url":"https://api.github.com/users/arjenr","html_url":"https://github.com/arjenr","followers_url":"https://api.github.com/users/arjenr/followers","following_url":"https://api.github.com/users/arjenr/following{/other_user}","gists_url":"https://api.github.com/users/arjenr/gists{/gist_id}","starred_url":"https://api.github.com/users/arjenr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arjenr/subscriptions","organizations_url":"https://api.github.com/users/arjenr/orgs","repos_url":"https://api.github.com/users/arjenr/repos","events_url":"https://api.github.com/users/arjenr/events{/privacy}","received_events_url":"https://api.github.com/users/arjenr/received_events","type":"user","site_admin":false},"created_at":"2013-04-27t15:10:05z","updated_at":"2013-04-27t15:10:05z","body":"on further investigating, my change to wal journal for sqlite3 made little change. \r\n\r\nthe strace is still running on php-fpm. it now points me to stufft happeninging in updater.php and mimetypes.lst.php should warrant further investigation. each time these are opened an open on owncloud datadir happens and the process stocks for a second or two.\r\n\r\nupdater.php has a function correctfolder which recursively updates some metadata on all parenfolders. this is good in code, but i guess it results in multiple selects and updates on the database. and, perhaps is also the cause for the frequent database connects/opens i observed. since there is also an array mentioned in the code this perhaps points to code iterating over a recordset where an sql command resolving all this in one go, is faster. \r\n\r\nmimetypes.lst.php just defines an array of mimetypes. so i think whatever calls/includes it is another culprit.\r\n\r\noh well, lot's of other stuff to do.. \r\n\r\n\r\n@tfelice imho this should not be related to the issue at hand, since this oh well, shows osi layer 3 / kernel stuff and not on the application level? "},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17167110","html_url":"https://github.com/owncloud/core/issues/3118#issuecomment-17167110","issue_url":"https://api.github.com/repos/owncloud/core/issues/3118","id":17167110,"user":{"login":"dlangh","id":1436671,"avatar_url":"https://gravatar.com/avatar/fb2ca85006b97f41414e77a50734624b?d=https%3a%2f%2fidenticons.github.com%2fe67d9b6e2b27c3305a0f5e6a0da2b99c.png&r=x","gravatar_id":"fb2ca85006b97f41414e77a50734624b","url":"https://api.github.com/users/dlangh","html_url":"https://github.com/dlangh","followers_url":"https://api.github.com/users/dlangh/followers","following_url":"https://api.github.com/users/dlangh/following{/other_user}","gists_url":"https://api.github.com/users/dlangh/gists{/gist_id}","starred_url":"https://api.github.com/users/dlangh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlangh/subscriptions","organizations_url":"https://api.github.com/users/dlangh/orgs","repos_url":"https://api.github.com/users/dlangh/repos","events_url":"https://api.github.com/users/dlangh/events{/privacy}","received_events_url":"https://api.github.com/users/dlangh/received_events","type":"user","site_admin":false},"created_at":"2013-04-29t13:41:25z","updated_at":"2013-04-29t13:42:44z","body":"i wanted to follow up to say how i am addressing this issue for the time being in the hopes it might help others.  my problem with owncloud at this point is limited to the client only.  if i manually place files in my owncloud folder on my server it's working fine.  i can also upload files via my phone ( i use camscanner to scan receipts and then drop them into owncloud).  \r\n\r\nso my hangup was the owncloud client and how slow it is communicating with my owncloud server.  i decided to use bittorrent sync to sync the few folders i needed synced.  i run btsync on my laptop as well as in linux where my owncloud server is.  so far this has worked for me.  i can now access owncloud on any device and it gets updated automatically for those folders i need to have that feature.  i may even just keep it this way, since i don't need yet another cloud client running on my laptop..."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17168902","html_url":"https://github.com/owncloud/core/issues/3118#issuecomment-17168902","issue_url":"https://api.github.com/repos/owncloud/core/issues/3118","id":17168902,"user":{"login":"tfelice","id":4266120,"avatar_url":"https://gravatar.com/avatar/480b7915974b193a4e31dbf91b6d84e2?d=https%3a%2f%2fidenticons.github.com%2fa1b4c8fd9f382bc9363bd48d86289d59.png&r=x","gravatar_id":"480b7915974b193a4e31dbf91b6d84e2","url":"https://api.github.com/users/tfelice","html_url":"https://github.com/tfelice","followers_url":"https://api.github.com/users/tfelice/followers","following_url":"https://api.github.com/users/tfelice/following{/other_user}","gists_url":"https://api.github.com/users/tfelice/gists{/gist_id}","starred_url":"https://api.github.com/users/tfelice/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tfelice/subscriptions","organizations_url":"https://api.github.com/users/tfelice/orgs","repos_url":"https://api.github.com/users/tfelice/repos","events_url":"https://api.github.com/users/tfelice/events{/privacy}","received_events_url":"https://api.github.com/users/tfelice/received_events","type":"user","site_admin":false},"created_at":"2013-04-29t14:13:16z","updated_at":"2013-04-29t14:13:16z","body":"not knowing the internals of the server, i had assumed that if you placed files in the data store using an out-of-band method, the database would not know about them and the server would not replicate them.  so when i read dlangh's comment, i tested, and to my surprise, files i copy to the server are not only accessible by the web interface but are also replicated down to clients.  the client's speed problems are still a show-stopper for us, because we need it's ability to watch folders on the client machine and propagate additions, deletions and changes to the server in a timely manner.\r\n\r\ncan anyone enlighten me as to what other implications there may be of dropping files into the server's data store without use of the client?  obviously versioning and retention of deleted files involve database functions.  what else would be broken?"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17170014","html_url":"https://github.com/owncloud/core/issues/3118#issuecomment-17170014","issue_url":"https://api.github.com/repos/owncloud/core/issues/3118","id":17170014,"user":{"login":"dlangh","id":1436671,"avatar_url":"https://gravatar.com/avatar/fb2ca85006b97f41414e77a50734624b?d=https%3a%2f%2fidenticons.github.com%2fe67d9b6e2b27c3305a0f5e6a0da2b99c.png&r=x","gravatar_id":"fb2ca85006b97f41414e77a50734624b","url":"https://api.github.com/users/dlangh","html_url":"https://github.com/dlangh","followers_url":"https://api.github.com/users/dlangh/followers","following_url":"https://api.github.com/users/dlangh/following{/other_user}","gists_url":"https://api.github.com/users/dlangh/gists{/gist_id}","starred_url":"https://api.github.com/users/dlangh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlangh/subscriptions","organizations_url":"https://api.github.com/users/dlangh/orgs","repos_url":"https://api.github.com/users/dlangh/repos","events_url":"https://api.github.com/users/dlangh/events{/privacy}","received_events_url":"https://api.github.com/users/dlangh/received_events","type":"user","site_admin":false},"created_at":"2013-04-29t14:31:40z","updated_at":"2013-04-29t14:31:40z","body":"i have \"dropped\" a lot of files at one time and it's worked pretty well.  the server does not have any daemon running, so the next time you nagivate to that folder owncloud will spider the folder and index its contents.  for larger data this can take a while, but even with a lot of files (one folder of mine was 3gb and definately several thousand files) it took i want to say 5 minutes or so before it finished.\r\n\r\ni can't speak to versioning, it may well work, for me that's not an issue so i never bothered to even check...    "},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/17545995","html_url":"https://github.com/owncloud/core/issues/3118#issuecomment-17545995","issue_url":"https://api.github.com/repos/owncloud/core/issues/3118","id":17545995,"user":{"login":"hugopoi","id":2299861,"avatar_url":"https://gravatar.com/avatar/82699008d0af6d4d7edb4df8c9d78df7?d=https%3a%2f%2fidenticons.github.com%2fd4c307c905cc837044046d198fc900b1.png&r=x","gravatar_id":"82699008d0af6d4d7edb4df8c9d78df7","url":"https://api.github.com/users/hugopoi","html_url":"https://github.com/hugopoi","followers_url":"https://api.github.com/users/hugopoi/followers","following_url":"https://api.github.com/users/hugopoi/following{/other_user}","gists_url":"https://api.github.com/users/hugopoi/gists{/gist_id}","starred_url":"https://api.github.com/users/hugopoi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hugopoi/subscriptions","organizations_url":"https://api.github.com/users/hugopoi/orgs","repos_url":"https://api.github.com/users/hugopoi/repos","events_url":"https://api.github.com/users/hugopoi/events{/privacy}","received_events_url":"https://api.github.com/users/hugopoi/received_events","type":"user","site_admin":false},"created_at":"2013-05-07t14:35:22z","updated_at":"2013-05-07t14:36:16z","body":"i want to help with this problem but i don't have enough card in my hand to resolve it. i read a lot of open issues (client and core) and i raise 2 performance problems : \r\n1) the current release execute too many sql request when a file is added.\r\n2) the client doesn't upload multiple files at the same time or together\r\n\r\nwe have to implement a completely new method to handle sync on server and client side.\r\nadd a piece system to handle large file.\r\nadd an other method to join small file together -> make packet and disassemble them on the server side."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/18419735","html_url":"https://github.com/owncloud/core/issues/3118#issuecomment-18419735","issue_url":"https://api.github.com/repos/owncloud/core/issues/3118","id":18419735,"user":{"login":"trousev","id":2451964,"avatar_url":"https://gravatar.com/avatar/edcacc88012bcddda9e9ff1d4cf0e65e?d=https%3a%2f%2fidenticons.github.com%2f1996313a9511b7df083849a1a78f686b.png&r=x","gravatar_id":"edcacc88012bcddda9e9ff1d4cf0e65e","url":"https://api.github.com/users/trousev","html_url":"https://github.com/trousev","followers_url":"https://api.github.com/users/trousev/followers","following_url":"https://api.github.com/users/trousev/following{/other_user}","gists_url":"https://api.github.com/users/trousev/gists{/gist_id}","starred_url":"https://api.github.com/users/trousev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trousev/subscriptions","organizations_url":"https://api.github.com/users/trousev/orgs","repos_url":"https://api.github.com/users/trousev/repos","events_url":"https://api.github.com/users/trousev/events{/privacy}","received_events_url":"https://api.github.com/users/trousev/received_events","type":"user","site_admin":false},"created_at":"2013-05-24t17:48:06z","updated_at":"2013-05-24t17:48:06z","body":"yes, i've faced this problem too. i'm using apache+php5+postgresql as database.\r\n\r\ni've found a dirty solution:\r\n\r\nin file lib/db.php delete any information about host connection (if you have localhost database). this will speed up postgresql connections.\r\n\r\n                                case 'pgsql':\r\n                                        if($port) {\r\n                                                $dsn='pgsql:dbname='.$name.';host='.$host.';port='.$port;\r\n                                        }else{\r\n                                                //$dsn='pgsql:dbname='.$name.';host='.$host;\r\n                                                $dsn='pgsql:dbname='.$name;\r\n                                        }\r\n\r\n\r\n"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/18535823","html_url":"https://github.com/owncloud/core/issues/3118#issuecomment-18535823","issue_url":"https://api.github.com/repos/owncloud/core/issues/3118","id":18535823,"user":{"login":"tytgatlieven","id":3863842,"avatar_url":"https://gravatar.com/avatar/08426d629df16454a20a9a6d49936b9f?d=https%3a%2f%2fidenticons.github.com%2f4a3909df671813dbc6eae571d0cf7c5c.png&r=x","gravatar_id":"08426d629df16454a20a9a6d49936b9f","url":"https://api.github.com/users/tytgatlieven","html_url":"https://github.com/tytgatlieven","followers_url":"https://api.github.com/users/tytgatlieven/followers","following_url":"https://api.github.com/users/tytgatlieven/following{/other_user}","gists_url":"https://api.github.com/users/tytgatlieven/gists{/gist_id}","starred_url":"https://api.github.com/users/tytgatlieven/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tytgatlieven/subscriptions","organizations_url":"https://api.github.com/users/tytgatlieven/orgs","repos_url":"https://api.github.com/users/tytgatlieven/repos","events_url":"https://api.github.com/users/tytgatlieven/events{/privacy}","received_events_url":"https://api.github.com/users/tytgatlieven/received_events","type":"user","site_admin":false},"created_at":"2013-05-28t07:48:46z","updated_at":"2013-05-28t07:48:46z","body":"hello guys.\r\n\r\nmy observations:\r\n\r\n1) around 600 queries are needed for a single file upload (put, proppatch and propfind), which seems a bit much imo. (i'm certainly no expert in php + mysql, so i might be wrong)\r\n\r\n2) when i issue a few of the queries myself, i noticed that the select queries on oc_filecache take around 0.5 - 1ms each, so relatively fast. however, the update statements to oc_filecache take a lot longer, namely 45ms. as there are 80 update statements during a single file upload, then this already takes around 3.6s, which is a major part of the total processing time i have noticed. add to this value the 500 select queries taking 0.75ms average and we have a mysql processing time of around 4s out of a total of 4.7s on my system. the remainder seems to be php, networking and client overhead, but is at this moment negligible imo.\r\n\r\ni implemented a check current value before update in the update function in cache.php. as follows:\r\n\r\n```\r\npublic function update($id, array $data) {\r\nlist($queryparts, $params) = $this->buildparts($data);\r\n$params[] = $id;\r\n$updateneededquery = \\oc_db::prepare('select ' . implode(', ', $queryparts) . ' from `*prefix*filecache` where `fileid` = ?');\r\n$currentvalues = $updateneededquery->execute(array($id));\r\n\r\nif ($row = $currentvalues->fetchrow()) {\r\n  foreach ($data as $name => $value) {\r\n//in buildparts they calculate the md5 to store it in path_hash and change the textual mimetype into an number\r\n     if ($name === 'path') {\r\n       $value = md5($value);\r\n     } elseif ($name === 'mimetype') {\r\n       $value = $this->getmimetypeid($value);\r\n     }\r\n//if a value is changed, commit the update\r\n     if ($row[$name] != $value) {\r\n       $query = \\oc_db::prepare('update `*prefix*filecache` set ' . implode(' = ?, ', $queryparts) . '=?'\r\n\t. ' where fileid = ?');\r\n       $query->execute($params);\r\n       break;\r\n     }\r\n  }\r\n}\r\n```\r\n\r\ni checked on my setup with a flat folder containing 1000 files.\r\ntest executed:\r\n* pause client sync\r\n* add 1000 files in a single dir (bash: for i in {1..1000}; do touch $i; done)\r\n* resume client sync\r\n* when sync finished, remove files\r\n* wait until sync finished\r\n\r\nthe results are:\r\nadding the files:\r\nwithout checking db contents first: 1.16s / file\r\nwith checking db contents: 0.837s / file\r\n\r\nremoving the files:\r\nwithout checking db contents first: 0.28s / file\r\nwith checking db contents: 0.2s / file\r\n\r\nor about a 40% improvement with a simple fix!\r\n"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/18575095","html_url":"https://github.com/owncloud/core/issues/3118#issuecomment-18575095","issue_url":"https://api.github.com/repos/owncloud/core/issues/3118","id":18575095,"user":{"login":"jerrac","id":910764,"avatar_url":"https://gravatar.com/avatar/94f514db175a8d425d11b59ddb9914bd?d=https%3a%2f%2fidenticons.github.com%2f2d4e93eae23e52be61d73752b1cd8716.png&r=x","gravatar_id":"94f514db175a8d425d11b59ddb9914bd","url":"https://api.github.com/users/jerrac","html_url":"https://github.com/jerrac","followers_url":"https://api.github.com/users/jerrac/followers","following_url":"https://api.github.com/users/jerrac/following{/other_user}","gists_url":"https://api.github.com/users/jerrac/gists{/gist_id}","starred_url":"https://api.github.com/users/jerrac/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jerrac/subscriptions","organizations_url":"https://api.github.com/users/jerrac/orgs","repos_url":"https://api.github.com/users/jerrac/repos","events_url":"https://api.github.com/users/jerrac/events{/privacy}","received_events_url":"https://api.github.com/users/jerrac/received_events","type":"user","site_admin":false},"created_at":"2013-05-28t19:46:53z","updated_at":"2013-05-28t19:46:53z","body":"as far as i can tell, no core developers have commented on this issue. @icewind1991 and @bartv2 were tagged, but never replied. so i assume this doesn't qualify as a duplicate.\r\n\r\nwe have several people willing to troubleshoot this, but no direction on what we should report that would help the core developers solve this issue. anyone know who on https://github.com/owncloud?tab=members we could tag that would be able to give us some direction? \r\n\r\nwould some output from xdebug help?"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/18579975","html_url":"https://github.com/owncloud/core/issues/3118#issuecomment-18579975","issue_url":"https://api.github.com/repos/owncloud/core/issues/3118","id":18579975,"user":{"login":"tfelice","id":4266120,"avatar_url":"https://gravatar.com/avatar/480b7915974b193a4e31dbf91b6d84e2?d=https%3a%2f%2fidenticons.github.com%2fa1b4c8fd9f382bc9363bd48d86289d59.png&r=x","gravatar_id":"480b7915974b193a4e31dbf91b6d84e2","url":"https://api.github.com/users/tfelice","html_url":"https://github.com/tfelice","followers_url":"https://api.github.com/users/tfelice/followers","following_url":"https://api.github.com/users/tfelice/following{/other_user}","gists_url":"https://api.github.com/users/tfelice/gists{/gist_id}","starred_url":"https://api.github.com/users/tfelice/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tfelice/subscriptions","organizations_url":"https://api.github.com/users/tfelice/orgs","repos_url":"https://api.github.com/users/tfelice/repos","events_url":"https://api.github.com/users/tfelice/events{/privacy}","received_events_url":"https://api.github.com/users/tfelice/received_events","type":"user","site_admin":false},"created_at":"2013-05-28t21:03:13z","updated_at":"2013-05-28t21:03:13z","body":"the silence on this issue from the developers is puzzling.  owncloud is clearly unusable for my current projects, so i've had to move on for now. i'm investigating solutions like double-take availability from vision solutions and peersync from peer software.  my current projects happen to require replicating data from windows servers, but i continue to be interested in cross-platform solutions.  i realize that replicating sources with very large numbers of files is a good trick.  even a low-end solution like bittorrent sync works nicely when you don't have a huge number of files.  \r\n\r\ni'm still hopeful that owncloud will find its way.  it really has the makings of a great solution.  i certainly would be open to licensing the enterprise or perhaps the service provider edition once it's ready for prime time, but not when there's still a show-stopping problem in the core product.   i'll provide appropriate other solutions to my customers now, and just keep checking on the progress of owncloud every six months or so."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/18580180","html_url":"https://github.com/owncloud/core/issues/3118#issuecomment-18580180","issue_url":"https://api.github.com/repos/owncloud/core/issues/3118","id":18580180,"user":{"login":"trousev","id":2451964,"avatar_url":"https://gravatar.com/avatar/edcacc88012bcddda9e9ff1d4cf0e65e?d=https%3a%2f%2fidenticons.github.com%2f1996313a9511b7df083849a1a78f686b.png&r=x","gravatar_id":"edcacc88012bcddda9e9ff1d4cf0e65e","url":"https://api.github.com/users/trousev","html_url":"https://github.com/trousev","followers_url":"https://api.github.com/users/trousev/followers","following_url":"https://api.github.com/users/trousev/following{/other_user}","gists_url":"https://api.github.com/users/trousev/gists{/gist_id}","starred_url":"https://api.github.com/users/trousev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trousev/subscriptions","organizations_url":"https://api.github.com/users/trousev/orgs","repos_url":"https://api.github.com/users/trousev/repos","events_url":"https://api.github.com/users/trousev/events{/privacy}","received_events_url":"https://api.github.com/users/trousev/received_events","type":"user","site_admin":false},"created_at":"2013-05-28t21:06:45z","updated_at":"2013-05-28t21:06:45z","body":"600 (!) queries!?\r\n\r\nyes, this definetely very much.\r\n\r\nby the way, owncloud supports webdav as access protocol. is anyone know -- can it be used for sync purposes?"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/18580605","html_url":"https://github.com/owncloud/core/issues/3118#issuecomment-18580605","issue_url":"https://api.github.com/repos/owncloud/core/issues/3118","id":18580605,"user":{"login":"jerrac","id":910764,"avatar_url":"https://gravatar.com/avatar/94f514db175a8d425d11b59ddb9914bd?d=https%3a%2f%2fidenticons.github.com%2f2d4e93eae23e52be61d73752b1cd8716.png&r=x","gravatar_id":"94f514db175a8d425d11b59ddb9914bd","url":"https://api.github.com/users/jerrac","html_url":"https://github.com/jerrac","followers_url":"https://api.github.com/users/jerrac/followers","following_url":"https://api.github.com/users/jerrac/following{/other_user}","gists_url":"https://api.github.com/users/jerrac/gists{/gist_id}","starred_url":"https://api.github.com/users/jerrac/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jerrac/subscriptions","organizations_url":"https://api.github.com/users/jerrac/orgs","repos_url":"https://api.github.com/users/jerrac/repos","events_url":"https://api.github.com/users/jerrac/events{/privacy}","received_events_url":"https://api.github.com/users/jerrac/received_events","type":"user","site_admin":false},"created_at":"2013-05-28t21:13:54z","updated_at":"2013-05-28t21:13:54z","body":"@trousev as far as i can tell, the speed issues apply across the board. most of the testing in my original post was over webdav. the sync client is slow, but i'm not sure how you'd upload 1000's of files through the web interface...\r\n\r\nhaven't tried uploading a bunch of files to the owncloud data directory via rsync or sftp, but i bet it would take a while for owncloud to find them.\r\n\r\n@ the core developers, please don't read any of this as whining. most of us are willing to work with you to get this issue fixed. we just don't know the code like you do, and can't do it on our own.\r\n\r\ni really really want to use owncloud. it's open source, cross platform, and easy to deploy. i haven't found anything else like that. "},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/18580841","html_url":"https://github.com/owncloud/core/issues/3118#issuecomment-18580841","issue_url":"https://api.github.com/repos/owncloud/core/issues/3118","id":18580841,"user":{"login":"trousev","id":2451964,"avatar_url":"https://gravatar.com/avatar/edcacc88012bcddda9e9ff1d4cf0e65e?d=https%3a%2f%2fidenticons.github.com%2f1996313a9511b7df083849a1a78f686b.png&r=x","gravatar_id":"edcacc88012bcddda9e9ff1d4cf0e65e","url":"https://api.github.com/users/trousev","html_url":"https://github.com/trousev","followers_url":"https://api.github.com/users/trousev/followers","following_url":"https://api.github.com/users/trousev/following{/other_user}","gists_url":"https://api.github.com/users/trousev/gists{/gist_id}","starred_url":"https://api.github.com/users/trousev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trousev/subscriptions","organizations_url":"https://api.github.com/users/trousev/orgs","repos_url":"https://api.github.com/users/trousev/repos","events_url":"https://api.github.com/users/trousev/events{/privacy}","received_events_url":"https://api.github.com/users/trousev/received_events","type":"user","site_admin":false},"created_at":"2013-05-28t21:17:37z","updated_at":"2013-05-28t21:17:37z","body":"@jerrac well, i've two cases: sync for desktop (via client) and sync for mobile phone (via webdav). i'll try to make some performance comparison here. "}]