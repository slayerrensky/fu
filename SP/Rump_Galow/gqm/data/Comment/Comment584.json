[{"url":"https://api.github.com/repos/owncloud/core/issues/comments/10719679","html_url":"https://github.com/owncloud/core/pull/584#issuecomment-10719679","issue_url":"https://api.github.com/repos/owncloud/core/issues/584","id":10719679,"user":{"login":"owncloud-bot","id":2709266,"avatar_url":"https://gravatar.com/avatar/6e9c466b35bb113112f7401859d614f6?d=https%3a%2f%2fidenticons.github.com%2ffb9254ba3a207c96653361df97807914.png&r=x","gravatar_id":"6e9c466b35bb113112f7401859d614f6","url":"https://api.github.com/users/owncloud-bot","html_url":"https://github.com/owncloud-bot","followers_url":"https://api.github.com/users/owncloud-bot/followers","following_url":"https://api.github.com/users/owncloud-bot/following{/other_user}","gists_url":"https://api.github.com/users/owncloud-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/owncloud-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/owncloud-bot/subscriptions","organizations_url":"https://api.github.com/users/owncloud-bot/orgs","repos_url":"https://api.github.com/users/owncloud-bot/repos","events_url":"https://api.github.com/users/owncloud-bot/events{/privacy}","received_events_url":"https://api.github.com/users/owncloud-bot/received_events","type":"user","site_admin":false},"created_at":"2012-11-26t15:34:44z","updated_at":"2012-11-26t15:34:44z","body":"can one of the admins verify this patch?"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/10720123","html_url":"https://github.com/owncloud/core/pull/584#issuecomment-10720123","issue_url":"https://api.github.com/repos/owncloud/core/issues/584","id":10720123,"user":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false},"created_at":"2012-11-26t15:44:37z","updated_at":"2012-11-26t15:44:37z","body":"this is okay to test\r\n\r\n\r\nam montag, dem 26.11.2012 um 16:34 schrieb owncloud-bot:\r\n> can one of the admins verify this patch?\r\n> \r\n> ---\r\n> reply to this email directly or view it on github:\r\n> https://github.com/owncloud/core/pull/584#issuecomment-10719679"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/10720831","html_url":"https://github.com/owncloud/core/pull/584#issuecomment-10720831","issue_url":"https://api.github.com/repos/owncloud/core/issues/584","id":10720831,"user":{"login":"blizzz","id":2184312,"avatar_url":"https://gravatar.com/avatar/1898b25a9cb3aa1a0f0febd1359910b9?d=https%3a%2f%2fidenticons.github.com%2fca03acec6deadf508b75eb0cf9ba036c.png&r=x","gravatar_id":"1898b25a9cb3aa1a0f0febd1359910b9","url":"https://api.github.com/users/blizzz","html_url":"https://github.com/blizzz","followers_url":"https://api.github.com/users/blizzz/followers","following_url":"https://api.github.com/users/blizzz/following{/other_user}","gists_url":"https://api.github.com/users/blizzz/gists{/gist_id}","starred_url":"https://api.github.com/users/blizzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blizzz/subscriptions","organizations_url":"https://api.github.com/users/blizzz/orgs","repos_url":"https://api.github.com/users/blizzz/repos","events_url":"https://api.github.com/users/blizzz/events{/privacy}","received_events_url":"https://api.github.com/users/blizzz/received_events","type":"user","site_admin":false},"created_at":"2012-11-26t16:00:31z","updated_at":"2012-11-26t16:00:31z","body":"now i see.\r\n\r\nwe don't need another method, you could just adapt oc_user::userexists with the optional parameter."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/10727199","html_url":"https://github.com/owncloud/core/pull/584#issuecomment-10727199","issue_url":"https://api.github.com/repos/owncloud/core/issues/584","id":10727199,"user":{"login":"lmctv","id":1045050,"avatar_url":"https://gravatar.com/avatar/fbf4d5a0322489066999621ee15637ae?d=https%3a%2f%2fidenticons.github.com%2fb57b3454a0ec7f015219bf30c111896b.png&r=x","gravatar_id":"fbf4d5a0322489066999621ee15637ae","url":"https://api.github.com/users/lmctv","html_url":"https://github.com/lmctv","followers_url":"https://api.github.com/users/lmctv/followers","following_url":"https://api.github.com/users/lmctv/following{/other_user}","gists_url":"https://api.github.com/users/lmctv/gists{/gist_id}","starred_url":"https://api.github.com/users/lmctv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lmctv/subscriptions","organizations_url":"https://api.github.com/users/lmctv/orgs","repos_url":"https://api.github.com/users/lmctv/repos","events_url":"https://api.github.com/users/lmctv/events{/privacy}","received_events_url":"https://api.github.com/users/lmctv/received_events","type":"user","site_admin":false},"created_at":"2012-11-26t18:24:34z","updated_at":"2012-11-26t18:24:34z","body":"will do. we refactored the method to avoid pushing the changes down into all of the backends. if you think this second option is better, we'll do so!\r\n\r\nthank you."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/10727506","html_url":"https://github.com/owncloud/core/pull/584#issuecomment-10727506","issue_url":"https://api.github.com/repos/owncloud/core/issues/584","id":10727506,"user":{"login":"blizzz","id":2184312,"avatar_url":"https://gravatar.com/avatar/1898b25a9cb3aa1a0f0febd1359910b9?d=https%3a%2f%2fidenticons.github.com%2fca03acec6deadf508b75eb0cf9ba036c.png&r=x","gravatar_id":"1898b25a9cb3aa1a0f0febd1359910b9","url":"https://api.github.com/users/blizzz","html_url":"https://github.com/blizzz","followers_url":"https://api.github.com/users/blizzz/followers","following_url":"https://api.github.com/users/blizzz/following{/other_user}","gists_url":"https://api.github.com/users/blizzz/gists{/gist_id}","starred_url":"https://api.github.com/users/blizzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blizzz/subscriptions","organizations_url":"https://api.github.com/users/blizzz/orgs","repos_url":"https://api.github.com/users/blizzz/repos","events_url":"https://api.github.com/users/blizzz/events{/privacy}","received_events_url":"https://api.github.com/users/blizzz/received_events","type":"user","site_admin":false},"created_at":"2012-11-26t18:30:52z","updated_at":"2012-11-26t18:30:52z","body":"thanks. hence it's just an optional parameter, everything will work as before with any other backend."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/10732522","html_url":"https://github.com/owncloud/core/pull/584#issuecomment-10732522","issue_url":"https://api.github.com/repos/owncloud/core/issues/584","id":10732522,"user":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false},"created_at":"2012-11-26t20:33:03z","updated_at":"2012-11-26t20:33:03z","body":"@owncloud-bot ok to test"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/10732807","html_url":"https://github.com/owncloud/core/pull/584#issuecomment-10732807","issue_url":"https://api.github.com/repos/owncloud/core/issues/584","id":10732807,"user":{"login":"mtgap","id":1097106,"avatar_url":"https://gravatar.com/avatar/454a73ee5feeb428d0c163a48903332c?d=https%3a%2f%2fidenticons.github.com%2f52d29a66f285a1d61125dd69ac0766b2.png&r=x","gravatar_id":"454a73ee5feeb428d0c163a48903332c","url":"https://api.github.com/users/mtgap","html_url":"https://github.com/mtgap","followers_url":"https://api.github.com/users/mtgap/followers","following_url":"https://api.github.com/users/mtgap/following{/other_user}","gists_url":"https://api.github.com/users/mtgap/gists{/gist_id}","starred_url":"https://api.github.com/users/mtgap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mtgap/subscriptions","organizations_url":"https://api.github.com/users/mtgap/orgs","repos_url":"https://api.github.com/users/mtgap/repos","events_url":"https://api.github.com/users/mtgap/events{/privacy}","received_events_url":"https://api.github.com/users/mtgap/received_events","type":"user","site_admin":false},"created_at":"2012-11-26t20:39:34z","updated_at":"2012-11-26t20:39:34z","body":"i don't like the way this looks, the function call is rather confusing. i suggest a function that returns the backend class for a user rather than this strange solution. "},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/10753191","html_url":"https://github.com/owncloud/core/pull/584#issuecomment-10753191","issue_url":"https://api.github.com/repos/owncloud/core/issues/584","id":10753191,"user":{"login":"lmctv","id":1045050,"avatar_url":"https://gravatar.com/avatar/fbf4d5a0322489066999621ee15637ae?d=https%3a%2f%2fidenticons.github.com%2fb57b3454a0ec7f015219bf30c111896b.png&r=x","gravatar_id":"fbf4d5a0322489066999621ee15637ae","url":"https://api.github.com/users/lmctv","html_url":"https://github.com/lmctv","followers_url":"https://api.github.com/users/lmctv/followers","following_url":"https://api.github.com/users/lmctv/following{/other_user}","gists_url":"https://api.github.com/users/lmctv/gists{/gist_id}","starred_url":"https://api.github.com/users/lmctv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lmctv/subscriptions","organizations_url":"https://api.github.com/users/lmctv/orgs","repos_url":"https://api.github.com/users/lmctv/repos","events_url":"https://api.github.com/users/lmctv/events{/privacy}","received_events_url":"https://api.github.com/users/lmctv/received_events","type":"user","site_admin":false},"created_at":"2012-11-27t10:41:55z","updated_at":"2012-11-27t10:41:55z","body":"as it stands,\r\n     the patch allows a backend avoiding being recursed into itself when asking for user existence without changing\r\nthe oc_user_interface.\r\n\r\ni think the suggestion of returning the backend class responsible for a user is sound, and in could be implemented on top of this change by just returning get_class($backend) instead of true from \\oc_user::userexists and \\oc_user::userexistsexcludingbk and adapting the doxygen in both \\oc_user and \\ocp\\user.\r\n\r\nif deemed sensible, i'll cook something along these lines."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/10753325","html_url":"https://github.com/owncloud/core/pull/584#issuecomment-10753325","issue_url":"https://api.github.com/repos/owncloud/core/issues/584","id":10753325,"user":{"login":"blizzz","id":2184312,"avatar_url":"https://gravatar.com/avatar/1898b25a9cb3aa1a0f0febd1359910b9?d=https%3a%2f%2fidenticons.github.com%2fca03acec6deadf508b75eb0cf9ba036c.png&r=x","gravatar_id":"1898b25a9cb3aa1a0f0febd1359910b9","url":"https://api.github.com/users/blizzz","html_url":"https://github.com/blizzz","followers_url":"https://api.github.com/users/blizzz/followers","following_url":"https://api.github.com/users/blizzz/following{/other_user}","gists_url":"https://api.github.com/users/blizzz/gists{/gist_id}","starred_url":"https://api.github.com/users/blizzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blizzz/subscriptions","organizations_url":"https://api.github.com/users/blizzz/orgs","repos_url":"https://api.github.com/users/blizzz/repos","events_url":"https://api.github.com/users/blizzz/events{/privacy}","received_events_url":"https://api.github.com/users/blizzz/received_events","type":"user","site_admin":false},"created_at":"2012-11-27t10:46:55z","updated_at":"2012-11-27t10:46:55z","body":"no, there is no recursion, i assure you. the userexists($newuser) will be cached (in the ldap backend) with false, that's what happens.\r\n\r\nnevertheless, this approach sounds good, too."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/10760455","html_url":"https://github.com/owncloud/core/pull/584#issuecomment-10760455","issue_url":"https://api.github.com/repos/owncloud/core/issues/584","id":10760455,"user":{"login":"lmctv","id":1045050,"avatar_url":"https://gravatar.com/avatar/fbf4d5a0322489066999621ee15637ae?d=https%3a%2f%2fidenticons.github.com%2fb57b3454a0ec7f015219bf30c111896b.png&r=x","gravatar_id":"fbf4d5a0322489066999621ee15637ae","url":"https://api.github.com/users/lmctv","html_url":"https://github.com/lmctv","followers_url":"https://api.github.com/users/lmctv/followers","following_url":"https://api.github.com/users/lmctv/following{/other_user}","gists_url":"https://api.github.com/users/lmctv/gists{/gist_id}","starred_url":"https://api.github.com/users/lmctv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lmctv/subscriptions","organizations_url":"https://api.github.com/users/lmctv/orgs","repos_url":"https://api.github.com/users/lmctv/repos","events_url":"https://api.github.com/users/lmctv/events{/privacy}","received_events_url":"https://api.github.com/users/lmctv/received_events","type":"user","site_admin":false},"created_at":"2012-11-27t14:51:00z","updated_at":"2012-11-27t14:51:00z","body":"now, the meat of the additional patch would be something along the lines of:\r\n\r\n```patch\r\ndiff --git a/lib/user.php b/lib/user.php\r\nindex 03219ce..1b67829 100644\r\n--- a/lib/user.php\r\n+++ b/lib/user.php\r\n@@ -407,7 +407,7 @@\r\n        /**\r\n         * @brief check if a user exists\r\n         * @param string $uid the username\r\n-        * @return boolean\r\n+        * @return backend where the user is found or null\r\n         */\r\n        public static function userexists($uid) {\r\n                return self::userexistsexcludingbk($uid);\r\n@@ -416,21 +416,22 @@\r\n        /**\r\n         * @brief check if a user exists possibly excluding  a single backend from searches\r\n         * @param string $uid the username\r\n-        * @param string $excludingbk the bng ackend to exclude from check (default none)\r\n-        * @return boolean\r\n+        * @param string $excludingbk the backend to exclude from check (default none)\r\n+        * @return backend where the user is found or null\r\n         */\r\n        public static function userexistsexcludingbk($uid, $excludedbk=null) {\r\n                foreach(self::$_usedbackends as $backend) {\r\n-                       if (!is_null($excludedbk) && !strcmp(get_class($backend),$excludedbk)) {\r\n+                       $backend_class = get_class($backend);\r\n+                       if (!is_null($excludedbk) && !strcmp($backend_class,$excludedbk)) {\r\n                            oc_log::write('oc_user', 'exclude backend from check user existance: excludingbk= '.get_class($backend), oc_log::debug);\r\n                            continue;\r\n                        }\r\n                        $result=$backend->userexists($uid);\r\n                        if($result===true) {\r\n-                               return true;\r\n+                               return $backend_class;\r\n                        }\r\n                }\r\n-               return false;\r\n+               return null;\r\n        }\r\n \r\n        /**\r\n```\r\nwhile i think this could make sense, i'd rather have this merge request get in, and adding this later, after some\r\ngood testing.\r\n"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/10761755","html_url":"https://github.com/owncloud/core/pull/584#issuecomment-10761755","issue_url":"https://api.github.com/repos/owncloud/core/issues/584","id":10761755,"user":{"login":"mtgap","id":1097106,"avatar_url":"https://gravatar.com/avatar/454a73ee5feeb428d0c163a48903332c?d=https%3a%2f%2fidenticons.github.com%2f52d29a66f285a1d61125dd69ac0766b2.png&r=x","gravatar_id":"454a73ee5feeb428d0c163a48903332c","url":"https://api.github.com/users/mtgap","html_url":"https://github.com/mtgap","followers_url":"https://api.github.com/users/mtgap/followers","following_url":"https://api.github.com/users/mtgap/following{/other_user}","gists_url":"https://api.github.com/users/mtgap/gists{/gist_id}","starred_url":"https://api.github.com/users/mtgap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mtgap/subscriptions","organizations_url":"https://api.github.com/users/mtgap/orgs","repos_url":"https://api.github.com/users/mtgap/repos","events_url":"https://api.github.com/users/mtgap/events{/privacy}","received_events_url":"https://api.github.com/users/mtgap/received_events","type":"user","site_admin":false},"created_at":"2012-11-27t15:24:29z","updated_at":"2012-11-27t15:24:29z","body":"that isn't what i meant. the idea of a function that excludes certain backends is kind of dumb and the name doesn't make sense: userexistsexcludingbk. bk is an abbreviation for burger king... just have a function that tells you all of the backends that a user exists in, no exclusions. "},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/10803671","html_url":"https://github.com/owncloud/core/pull/584#issuecomment-10803671","issue_url":"https://api.github.com/repos/owncloud/core/issues/584","id":10803671,"user":{"login":"lmctv","id":1045050,"avatar_url":"https://gravatar.com/avatar/fbf4d5a0322489066999621ee15637ae?d=https%3a%2f%2fidenticons.github.com%2fb57b3454a0ec7f015219bf30c111896b.png&r=x","gravatar_id":"fbf4d5a0322489066999621ee15637ae","url":"https://api.github.com/users/lmctv","html_url":"https://github.com/lmctv","followers_url":"https://api.github.com/users/lmctv/followers","following_url":"https://api.github.com/users/lmctv/following{/other_user}","gists_url":"https://api.github.com/users/lmctv/gists{/gist_id}","starred_url":"https://api.github.com/users/lmctv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lmctv/subscriptions","organizations_url":"https://api.github.com/users/lmctv/orgs","repos_url":"https://api.github.com/users/lmctv/repos","events_url":"https://api.github.com/users/lmctv/events{/privacy}","received_events_url":"https://api.github.com/users/lmctv/received_events","type":"user","site_admin":false},"created_at":"2012-11-28t14:12:39z","updated_at":"2012-11-28t14:29:03z","body":"sorry for having forgetten to update the comment as of https://github.com/wardragon/core/commit/1d96be75acb78be4c8dd8fa7d63ceefb4362d473\r\nto clarify more, the operation flow is the following: on share item, at line 125 of core/ajax/share.php  there is a call for \r\noc_user::getusers; the full flow is:\r\n\r\n    share.php ->\r\n        oc_user::getusers ->\r\n            oca\\user_ldap\\user_ldap::getusers ->\r\n                oca\\user_ldap\\lib\\acces::owncloudusernames ->\r\n                    oca\\user_ldap\\lib\\acces::ldap2owncloudnames ->\r\n                        oca\\user_ldap\\lib\\acces::dn2ocname\r\n\r\nnow, if the username is not already mapped, dn2ocname would try to map it, but only if it's not already globally existing. and now the catch: ocp\\user::userexists would iterate on all the backends, and return true even for ldap backed users.\r\n\r\nhope the reason for such a \"dumb\" patch is clear now.\r\n\r\nwhile not properly a recursive search, i think it's still better if the backend could exclude itself from global searches."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/10821554","html_url":"https://github.com/owncloud/core/pull/584#issuecomment-10821554","issue_url":"https://api.github.com/repos/owncloud/core/issues/584","id":10821554,"user":{"login":"mtgap","id":1097106,"avatar_url":"https://gravatar.com/avatar/454a73ee5feeb428d0c163a48903332c?d=https%3a%2f%2fidenticons.github.com%2f52d29a66f285a1d61125dd69ac0766b2.png&r=x","gravatar_id":"454a73ee5feeb428d0c163a48903332c","url":"https://api.github.com/users/mtgap","html_url":"https://github.com/mtgap","followers_url":"https://api.github.com/users/mtgap/followers","following_url":"https://api.github.com/users/mtgap/following{/other_user}","gists_url":"https://api.github.com/users/mtgap/gists{/gist_id}","starred_url":"https://api.github.com/users/mtgap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mtgap/subscriptions","organizations_url":"https://api.github.com/users/mtgap/orgs","repos_url":"https://api.github.com/users/mtgap/repos","events_url":"https://api.github.com/users/mtgap/events{/privacy}","received_events_url":"https://api.github.com/users/mtgap/received_events","type":"user","site_admin":false},"created_at":"2012-11-28t21:06:20z","updated_at":"2012-11-28t21:06:20z","body":"now i'm just confused. we have the possibility of the same users in different backends? "},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/10822833","html_url":"https://github.com/owncloud/core/pull/584#issuecomment-10822833","issue_url":"https://api.github.com/repos/owncloud/core/issues/584","id":10822833,"user":{"login":"lmctv","id":1045050,"avatar_url":"https://gravatar.com/avatar/fbf4d5a0322489066999621ee15637ae?d=https%3a%2f%2fidenticons.github.com%2fb57b3454a0ec7f015219bf30c111896b.png&r=x","gravatar_id":"fbf4d5a0322489066999621ee15637ae","url":"https://api.github.com/users/lmctv","html_url":"https://github.com/lmctv","followers_url":"https://api.github.com/users/lmctv/followers","following_url":"https://api.github.com/users/lmctv/following{/other_user}","gists_url":"https://api.github.com/users/lmctv/gists{/gist_id}","starred_url":"https://api.github.com/users/lmctv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lmctv/subscriptions","organizations_url":"https://api.github.com/users/lmctv/orgs","repos_url":"https://api.github.com/users/lmctv/repos","events_url":"https://api.github.com/users/lmctv/events{/privacy}","received_events_url":"https://api.github.com/users/lmctv/received_events","type":"user","site_admin":false},"created_at":"2012-11-28t21:35:28z","updated_at":"2012-11-28t21:35:28z","body":"in principle, yes.\n\ni think the logic behind the check i've modified is avoiding the creation of an oc internal \"handle\" to an ldap user which would be in conflict with a username already in use.\n\nsorry for having been a bit harsh... would you mind suggesting a better shortcut for \"backend\"?\n\nthanks\n\n\nmichael gapczynski <notifications@github.com> ha scritto:\n\n>now i'm just confused. we have the possibility of the same users in\n>different backends? \n>\n>---\n>reply to this email directly or view it on github:\n>https://github.com/owncloud/core/pull/584#issuecomment-10821554"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/10824333","html_url":"https://github.com/owncloud/core/pull/584#issuecomment-10824333","issue_url":"https://api.github.com/repos/owncloud/core/issues/584","id":10824333,"user":{"login":"mtgap","id":1097106,"avatar_url":"https://gravatar.com/avatar/454a73ee5feeb428d0c163a48903332c?d=https%3a%2f%2fidenticons.github.com%2f52d29a66f285a1d61125dd69ac0766b2.png&r=x","gravatar_id":"454a73ee5feeb428d0c163a48903332c","url":"https://api.github.com/users/mtgap","html_url":"https://github.com/mtgap","followers_url":"https://api.github.com/users/mtgap/followers","following_url":"https://api.github.com/users/mtgap/following{/other_user}","gists_url":"https://api.github.com/users/mtgap/gists{/gist_id}","starred_url":"https://api.github.com/users/mtgap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mtgap/subscriptions","organizations_url":"https://api.github.com/users/mtgap/orgs","repos_url":"https://api.github.com/users/mtgap/repos","events_url":"https://api.github.com/users/mtgap/events{/privacy}","received_events_url":"https://api.github.com/users/mtgap/received_events","type":"user","site_admin":false},"created_at":"2012-11-28t21:48:12z","updated_at":"2012-11-28t21:48:12z","body":"don't we have more serious problems if multiple users with the same name exist on different backends? logging in won't be reliable. sounds like we need some conflict resolution instead of just this.\r\n\r\ni'm still suggesting an alternative to prevent confusion e.g. getuserbackends($user) returns false if user not found or an array of backend class names the user exists in. the ldap backend can just make sure its class name is the only one being returned before mapping the name.\r\n\r\n@blizzz is conflict resolution necessary for the user backends? checkpassword() returns on the first backend that implements check password. the user may not even exist in that backend."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/10842809","html_url":"https://github.com/owncloud/core/pull/584#issuecomment-10842809","issue_url":"https://api.github.com/repos/owncloud/core/issues/584","id":10842809,"user":{"login":"blizzz","id":2184312,"avatar_url":"https://gravatar.com/avatar/1898b25a9cb3aa1a0f0febd1359910b9?d=https%3a%2f%2fidenticons.github.com%2fca03acec6deadf508b75eb0cf9ba036c.png&r=x","gravatar_id":"1898b25a9cb3aa1a0f0febd1359910b9","url":"https://api.github.com/users/blizzz","html_url":"https://github.com/blizzz","followers_url":"https://api.github.com/users/blizzz/followers","following_url":"https://api.github.com/users/blizzz/following{/other_user}","gists_url":"https://api.github.com/users/blizzz/gists{/gist_id}","starred_url":"https://api.github.com/users/blizzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blizzz/subscriptions","organizations_url":"https://api.github.com/users/blizzz/orgs","repos_url":"https://api.github.com/users/blizzz/repos","events_url":"https://api.github.com/users/blizzz/events{/privacy}","received_events_url":"https://api.github.com/users/blizzz/received_events","type":"user","site_admin":false},"created_at":"2012-11-29t10:56:02z","updated_at":"2012-11-29t10:56:02z","body":"@mtgap as long as we use the username as userid we simply must look for conflicts. also, we need to avoid multiple ldap users with the same name (but this we would achieve without userexists obviously). it is not just logging, but also the stored files but application settings and owncloud settings.\r\n\r\n@lmctv there is no need for userexistsexcludingbk. one userexists is more than enough. the changes are driven by an optional parameter only, i.e. exactly this stuff should go into userexists(). and please return false on error, not null.\r\n\r\non the other side, i was thinking again about this. the real problem in the end is, that the new users is being cached as non-existent for the time of the ldap cache ttl, what happens in the userexists() method. we could work around this, however the targeted approach here also improves performance since quite same unnecessary calls (including to the ldap server) are avoided."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/10843399","html_url":"https://github.com/owncloud/core/pull/584#issuecomment-10843399","issue_url":"https://api.github.com/repos/owncloud/core/issues/584","id":10843399,"user":{"login":"lmctv","id":1045050,"avatar_url":"https://gravatar.com/avatar/fbf4d5a0322489066999621ee15637ae?d=https%3a%2f%2fidenticons.github.com%2fb57b3454a0ec7f015219bf30c111896b.png&r=x","gravatar_id":"fbf4d5a0322489066999621ee15637ae","url":"https://api.github.com/users/lmctv","html_url":"https://github.com/lmctv","followers_url":"https://api.github.com/users/lmctv/followers","following_url":"https://api.github.com/users/lmctv/following{/other_user}","gists_url":"https://api.github.com/users/lmctv/gists{/gist_id}","starred_url":"https://api.github.com/users/lmctv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lmctv/subscriptions","organizations_url":"https://api.github.com/users/lmctv/orgs","repos_url":"https://api.github.com/users/lmctv/repos","events_url":"https://api.github.com/users/lmctv/events{/privacy}","received_events_url":"https://api.github.com/users/lmctv/received_events","type":"user","site_admin":false},"created_at":"2012-11-29t11:16:40z","updated_at":"2012-11-29t11:16:40z","body":"@blizzz ok, will go on and change the interface..."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/10846667","html_url":"https://github.com/owncloud/core/pull/584#issuecomment-10846667","issue_url":"https://api.github.com/repos/owncloud/core/issues/584","id":10846667,"user":{"login":"lmctv","id":1045050,"avatar_url":"https://gravatar.com/avatar/fbf4d5a0322489066999621ee15637ae?d=https%3a%2f%2fidenticons.github.com%2fb57b3454a0ec7f015219bf30c111896b.png&r=x","gravatar_id":"fbf4d5a0322489066999621ee15637ae","url":"https://api.github.com/users/lmctv","html_url":"https://github.com/lmctv","followers_url":"https://api.github.com/users/lmctv/followers","following_url":"https://api.github.com/users/lmctv/following{/other_user}","gists_url":"https://api.github.com/users/lmctv/gists{/gist_id}","starred_url":"https://api.github.com/users/lmctv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lmctv/subscriptions","organizations_url":"https://api.github.com/users/lmctv/orgs","repos_url":"https://api.github.com/users/lmctv/repos","events_url":"https://api.github.com/users/lmctv/events{/privacy}","received_events_url":"https://api.github.com/users/lmctv/received_events","type":"user","site_admin":false},"created_at":"2012-11-29t13:15:30z","updated_at":"2012-11-29t13:15:30z","body":"@blizzz the null return was just in the mock-up of a changed api of userexists returning a reference to the backend where the user has been found."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/11092652","html_url":"https://github.com/owncloud/core/pull/584#issuecomment-11092652","issue_url":"https://api.github.com/repos/owncloud/core/issues/584","id":11092652,"user":{"login":"blizzz","id":2184312,"avatar_url":"https://gravatar.com/avatar/1898b25a9cb3aa1a0f0febd1359910b9?d=https%3a%2f%2fidenticons.github.com%2fca03acec6deadf508b75eb0cf9ba036c.png&r=x","gravatar_id":"1898b25a9cb3aa1a0f0febd1359910b9","url":"https://api.github.com/users/blizzz","html_url":"https://github.com/blizzz","followers_url":"https://api.github.com/users/blizzz/followers","following_url":"https://api.github.com/users/blizzz/following{/other_user}","gists_url":"https://api.github.com/users/blizzz/gists{/gist_id}","starred_url":"https://api.github.com/users/blizzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blizzz/subscriptions","organizations_url":"https://api.github.com/users/blizzz/orgs","repos_url":"https://api.github.com/users/blizzz/repos","events_url":"https://api.github.com/users/blizzz/events{/privacy}","received_events_url":"https://api.github.com/users/blizzz/received_events","type":"user","site_admin":false},"created_at":"2012-12-06t16:33:20z","updated_at":"2012-12-06t16:33:20z","body":"sorry for the delay. \r\n\r\nto clear it up: no interface needs to be changed here as oc_user doesn't implement any interface. no user backend needs to be adjusted, because of this change, also not those that extend it.\r\n\r\n→ looks good to me, nevertheless i will do final testing. \r\n\r\nwould you mind to clean up the commit history? it would ease the fix to be backported to stable45.\r\n\r\nmeanwhile, what do you think @mtgap @karlitschek @icewind1991 @butonic ?\r\n"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/11094669","html_url":"https://github.com/owncloud/core/pull/584#issuecomment-11094669","issue_url":"https://api.github.com/repos/owncloud/core/issues/584","id":11094669,"user":{"login":"lmctv","id":1045050,"avatar_url":"https://gravatar.com/avatar/fbf4d5a0322489066999621ee15637ae?d=https%3a%2f%2fidenticons.github.com%2fb57b3454a0ec7f015219bf30c111896b.png&r=x","gravatar_id":"fbf4d5a0322489066999621ee15637ae","url":"https://api.github.com/users/lmctv","html_url":"https://github.com/lmctv","followers_url":"https://api.github.com/users/lmctv/followers","following_url":"https://api.github.com/users/lmctv/following{/other_user}","gists_url":"https://api.github.com/users/lmctv/gists{/gist_id}","starred_url":"https://api.github.com/users/lmctv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lmctv/subscriptions","organizations_url":"https://api.github.com/users/lmctv/orgs","repos_url":"https://api.github.com/users/lmctv/repos","events_url":"https://api.github.com/users/lmctv/events{/privacy}","received_events_url":"https://api.github.com/users/lmctv/received_events","type":"user","site_admin":false},"created_at":"2012-12-06t17:17:55z","updated_at":"2012-12-07t10:27:25z","body":"ok,\r\n      i think history is clean now. i'm unsure if you would prefer the remaining commits to be squashed into one,\r\nor stay splitted as they are now."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/11128351","html_url":"https://github.com/owncloud/core/pull/584#issuecomment-11128351","issue_url":"https://api.github.com/repos/owncloud/core/issues/584","id":11128351,"user":{"login":"blizzz","id":2184312,"avatar_url":"https://gravatar.com/avatar/1898b25a9cb3aa1a0f0febd1359910b9?d=https%3a%2f%2fidenticons.github.com%2fca03acec6deadf508b75eb0cf9ba036c.png&r=x","gravatar_id":"1898b25a9cb3aa1a0f0febd1359910b9","url":"https://api.github.com/users/blizzz","html_url":"https://github.com/blizzz","followers_url":"https://api.github.com/users/blizzz/followers","following_url":"https://api.github.com/users/blizzz/following{/other_user}","gists_url":"https://api.github.com/users/blizzz/gists{/gist_id}","starred_url":"https://api.github.com/users/blizzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blizzz/subscriptions","organizations_url":"https://api.github.com/users/blizzz/orgs","repos_url":"https://api.github.com/users/blizzz/repos","events_url":"https://api.github.com/users/blizzz/events{/privacy}","received_events_url":"https://api.github.com/users/blizzz/received_events","type":"user","site_admin":false},"created_at":"2012-12-07t12:26:45z","updated_at":"2012-12-07t12:26:45z","body":"thank you – tested it,  behaves very well.\r\n:+1: \r\nother reviewers, please?"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/11135921","html_url":"https://github.com/owncloud/core/pull/584#issuecomment-11135921","issue_url":"https://api.github.com/repos/owncloud/core/issues/584","id":11135921,"user":{"login":"lmctv","id":1045050,"avatar_url":"https://gravatar.com/avatar/fbf4d5a0322489066999621ee15637ae?d=https%3a%2f%2fidenticons.github.com%2fb57b3454a0ec7f015219bf30c111896b.png&r=x","gravatar_id":"fbf4d5a0322489066999621ee15637ae","url":"https://api.github.com/users/lmctv","html_url":"https://github.com/lmctv","followers_url":"https://api.github.com/users/lmctv/followers","following_url":"https://api.github.com/users/lmctv/following{/other_user}","gists_url":"https://api.github.com/users/lmctv/gists{/gist_id}","starred_url":"https://api.github.com/users/lmctv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lmctv/subscriptions","organizations_url":"https://api.github.com/users/lmctv/orgs","repos_url":"https://api.github.com/users/lmctv/repos","events_url":"https://api.github.com/users/lmctv/events{/privacy}","received_events_url":"https://api.github.com/users/lmctv/received_events","type":"user","site_admin":false},"created_at":"2012-12-07t16:22:56z","updated_at":"2012-12-10t16:05:17z","body":"just replaced a \"null\" with a \"null\" reference to adapt to the surrounding code style."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/11224026","html_url":"https://github.com/owncloud/core/pull/584#issuecomment-11224026","issue_url":"https://api.github.com/repos/owncloud/core/issues/584","id":11224026,"user":{"login":"blizzz","id":2184312,"avatar_url":"https://gravatar.com/avatar/1898b25a9cb3aa1a0f0febd1359910b9?d=https%3a%2f%2fidenticons.github.com%2fca03acec6deadf508b75eb0cf9ba036c.png&r=x","gravatar_id":"1898b25a9cb3aa1a0f0febd1359910b9","url":"https://api.github.com/users/blizzz","html_url":"https://github.com/blizzz","followers_url":"https://api.github.com/users/blizzz/followers","following_url":"https://api.github.com/users/blizzz/following{/other_user}","gists_url":"https://api.github.com/users/blizzz/gists{/gist_id}","starred_url":"https://api.github.com/users/blizzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blizzz/subscriptions","organizations_url":"https://api.github.com/users/blizzz/orgs","repos_url":"https://api.github.com/users/blizzz/repos","events_url":"https://api.github.com/users/blizzz/events{/privacy}","received_events_url":"https://api.github.com/users/blizzz/received_events","type":"user","site_admin":false},"created_at":"2012-12-10t23:33:26z","updated_at":"2012-12-10t23:33:26z","body":"@mtgap @karlitschek  @schiesbn @deepdiver1975 or others please review :)"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/11224624","html_url":"https://github.com/owncloud/core/pull/584#issuecomment-11224624","issue_url":"https://api.github.com/repos/owncloud/core/issues/584","id":11224624,"user":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false},"created_at":"2012-12-10t23:52:24z","updated_at":"2012-12-10t23:52:24z","body":"well it's tested - unit tests & syntax checks are okay.\r\nchanges look okay. :+1: "},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/11286688","html_url":"https://github.com/owncloud/core/pull/584#issuecomment-11286688","issue_url":"https://api.github.com/repos/owncloud/core/issues/584","id":11286688,"user":{"login":"blizzz","id":2184312,"avatar_url":"https://gravatar.com/avatar/1898b25a9cb3aa1a0f0febd1359910b9?d=https%3a%2f%2fidenticons.github.com%2fca03acec6deadf508b75eb0cf9ba036c.png&r=x","gravatar_id":"1898b25a9cb3aa1a0f0febd1359910b9","url":"https://api.github.com/users/blizzz","html_url":"https://github.com/blizzz","followers_url":"https://api.github.com/users/blizzz/followers","following_url":"https://api.github.com/users/blizzz/following{/other_user}","gists_url":"https://api.github.com/users/blizzz/gists{/gist_id}","starred_url":"https://api.github.com/users/blizzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blizzz/subscriptions","organizations_url":"https://api.github.com/users/blizzz/orgs","repos_url":"https://api.github.com/users/blizzz/repos","events_url":"https://api.github.com/users/blizzz/events{/privacy}","received_events_url":"https://api.github.com/users/blizzz/received_events","type":"user","site_admin":false},"created_at":"2012-12-12t12:14:37z","updated_at":"2012-12-12t12:14:37z","body":"thx, i'll merge and backport it later that day."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/11317879","html_url":"https://github.com/owncloud/core/pull/584#issuecomment-11317879","issue_url":"https://api.github.com/repos/owncloud/core/issues/584","id":11317879,"user":{"login":"blizzz","id":2184312,"avatar_url":"https://gravatar.com/avatar/1898b25a9cb3aa1a0f0febd1359910b9?d=https%3a%2f%2fidenticons.github.com%2fca03acec6deadf508b75eb0cf9ba036c.png&r=x","gravatar_id":"1898b25a9cb3aa1a0f0febd1359910b9","url":"https://api.github.com/users/blizzz","html_url":"https://github.com/blizzz","followers_url":"https://api.github.com/users/blizzz/followers","following_url":"https://api.github.com/users/blizzz/following{/other_user}","gists_url":"https://api.github.com/users/blizzz/gists{/gist_id}","starred_url":"https://api.github.com/users/blizzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blizzz/subscriptions","organizations_url":"https://api.github.com/users/blizzz/orgs","repos_url":"https://api.github.com/users/blizzz/repos","events_url":"https://api.github.com/users/blizzz/events{/privacy}","received_events_url":"https://api.github.com/users/blizzz/received_events","type":"user","site_admin":false},"created_at":"2012-12-13t01:08:16z","updated_at":"2012-12-13t01:08:16z","body":"backports: \r\nf2eef0ccf8b471c5f84400ee8e6902c199de4911\r\nb0a81b5b0d727ba809bf723fc4d0504e5910a999"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/11332640","html_url":"https://github.com/owncloud/core/pull/584#issuecomment-11332640","issue_url":"https://api.github.com/repos/owncloud/core/issues/584","id":11332640,"user":{"login":"wardragon","id":2676024,"avatar_url":"https://gravatar.com/avatar/3580bfbc22a117944d8560001d7bb913?d=https%3a%2f%2fidenticons.github.com%2f82fd001313a283ff02bc1e3fe2ef76ae.png&r=x","gravatar_id":"3580bfbc22a117944d8560001d7bb913","url":"https://api.github.com/users/wardragon","html_url":"https://github.com/wardragon","followers_url":"https://api.github.com/users/wardragon/followers","following_url":"https://api.github.com/users/wardragon/following{/other_user}","gists_url":"https://api.github.com/users/wardragon/gists{/gist_id}","starred_url":"https://api.github.com/users/wardragon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wardragon/subscriptions","organizations_url":"https://api.github.com/users/wardragon/orgs","repos_url":"https://api.github.com/users/wardragon/repos","events_url":"https://api.github.com/users/wardragon/events{/privacy}","received_events_url":"https://api.github.com/users/wardragon/received_events","type":"user","site_admin":false},"created_at":"2012-12-13t12:28:46z","updated_at":"2012-12-13t12:28:46z","body":"thank you all."}]