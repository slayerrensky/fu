[{"url":"https://api.github.com/repos/owncloud/core/issues/comments/28720408","html_url":"https://github.com/owncloud/core/issues/4063#issuecomment-28720408","issue_url":"https://api.github.com/repos/owncloud/core/issues/4063","id":28720408,"user":{"login":"pvince81","id":277525,"avatar_url":"https://gravatar.com/avatar/e446b529679416eb70eafb4ca4da5bbe?d=https%3a%2f%2fidenticons.github.com%2f89d7c394e6dcdf87a91c75ac3b2ccbe8.png&r=x","gravatar_id":"e446b529679416eb70eafb4ca4da5bbe","url":"https://api.github.com/users/pvince81","html_url":"https://github.com/pvince81","followers_url":"https://api.github.com/users/pvince81/followers","following_url":"https://api.github.com/users/pvince81/following{/other_user}","gists_url":"https://api.github.com/users/pvince81/gists{/gist_id}","starred_url":"https://api.github.com/users/pvince81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvince81/subscriptions","organizations_url":"https://api.github.com/users/pvince81/orgs","repos_url":"https://api.github.com/users/pvince81/repos","events_url":"https://api.github.com/users/pvince81/events{/privacy}","received_events_url":"https://api.github.com/users/pvince81/received_events","type":"user","site_admin":false},"created_at":"2013-11-18t17:45:16z","updated_at":"2013-11-18t17:45:16z","body":"yes it is.\r\nstill happening in oc 6 beta 4.\r\nnote that the extreme slowness only seems to happen for pictures.\r\ni've uploaded a 2 mb pic and it takes several minutes (!!!) to scan it."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/28788784","html_url":"https://github.com/owncloud/core/issues/4063#issuecomment-28788784","issue_url":"https://api.github.com/repos/owncloud/core/issues/4063","id":28788784,"user":{"login":"pvince81","id":277525,"avatar_url":"https://gravatar.com/avatar/e446b529679416eb70eafb4ca4da5bbe?d=https%3a%2f%2fidenticons.github.com%2f89d7c394e6dcdf87a91c75ac3b2ccbe8.png&r=x","gravatar_id":"e446b529679416eb70eafb4ca4da5bbe","url":"https://api.github.com/users/pvince81","html_url":"https://github.com/pvince81","followers_url":"https://api.github.com/users/pvince81/followers","following_url":"https://api.github.com/users/pvince81/following{/other_user}","gists_url":"https://api.github.com/users/pvince81/gists{/gist_id}","starred_url":"https://api.github.com/users/pvince81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvince81/subscriptions","organizations_url":"https://api.github.com/users/pvince81/orgs","repos_url":"https://api.github.com/users/pvince81/repos","events_url":"https://api.github.com/users/pvince81/events{/privacy}","received_events_url":"https://api.github.com/users/pvince81/received_events","type":"user","site_admin":false},"created_at":"2013-11-19t13:16:05z","updated_at":"2013-11-19t13:16:05z","body":"compared to other external storages, sftp is the slowest.\r\ni haven't looked into the code yet but i suppose that for each access it's opening a new connection which can already be quite slow (same as with ssh).\r\nideally it should try to reuse the same connection."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/28802690","html_url":"https://github.com/owncloud/core/issues/4063#issuecomment-28802690","issue_url":"https://api.github.com/repos/owncloud/core/issues/4063","id":28802690,"user":{"login":"pvince81","id":277525,"avatar_url":"https://gravatar.com/avatar/e446b529679416eb70eafb4ca4da5bbe?d=https%3a%2f%2fidenticons.github.com%2f89d7c394e6dcdf87a91c75ac3b2ccbe8.png&r=x","gravatar_id":"e446b529679416eb70eafb4ca4da5bbe","url":"https://api.github.com/users/pvince81","html_url":"https://github.com/pvince81","followers_url":"https://api.github.com/users/pvince81/followers","following_url":"https://api.github.com/users/pvince81/following{/other_user}","gists_url":"https://api.github.com/users/pvince81/gists{/gist_id}","starred_url":"https://api.github.com/users/pvince81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvince81/subscriptions","organizations_url":"https://api.github.com/users/pvince81/orgs","repos_url":"https://api.github.com/users/pvince81/repos","events_url":"https://api.github.com/users/pvince81/events{/privacy}","received_events_url":"https://api.github.com/users/pvince81/received_events","type":"user","site_admin":false},"created_at":"2013-11-19t16:08:20z","updated_at":"2013-11-19t16:08:20z","body":"i debugged a bit and found out that each login call takes about 1 second.\r\nthen, getfile() for a 3.7 mb file from a computer in the same lan takes... oh it's still loading. :frowning: \r\n\r\ntried to debug into phpseclib/net/sftp.php and there seem to be a few loops that handle packets.\r\ni'm not sure whether the bottleneck is there or on the network. might be worth trying to upgrade that library and see whether the new version is faster..."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/28803918","html_url":"https://github.com/owncloud/core/issues/4063#issuecomment-28803918","issue_url":"https://api.github.com/repos/owncloud/core/issues/4063","id":28803918,"user":{"login":"pvince81","id":277525,"avatar_url":"https://gravatar.com/avatar/e446b529679416eb70eafb4ca4da5bbe?d=https%3a%2f%2fidenticons.github.com%2f89d7c394e6dcdf87a91c75ac3b2ccbe8.png&r=x","gravatar_id":"e446b529679416eb70eafb4ca4da5bbe","url":"https://api.github.com/users/pvince81","html_url":"https://github.com/pvince81","followers_url":"https://api.github.com/users/pvince81/followers","following_url":"https://api.github.com/users/pvince81/following{/other_user}","gists_url":"https://api.github.com/users/pvince81/gists{/gist_id}","starred_url":"https://api.github.com/users/pvince81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvince81/subscriptions","organizations_url":"https://api.github.com/users/pvince81/orgs","repos_url":"https://api.github.com/users/pvince81/repos","events_url":"https://api.github.com/users/pvince81/events{/privacy}","received_events_url":"https://api.github.com/users/pvince81/received_events","type":"user","site_admin":false},"created_at":"2013-11-19t16:20:18z","updated_at":"2013-11-19t16:20:18z","body":"i tried to add some debug logging.\r\nthe get() call is the one from the sftp library and seems to take one minute for a 3 mb file.\r\nand fopen is called four times for some reason... this is the call when clicking on \"download\"...\r\n\r\n\r\n    {\"app\":\"sftp\",\"message\":\"construct\",\"level\":0,\"time\":\"2013-11-19t16:12:51+00:00\"}\r\n    {\"app\":\"sftp\",\"message\":\"login\",\"level\":0,\"time\":\"2013-11-19t16:12:52+00:00\"}\r\n    {\"app\":\"sftp\",\"message\":\"fopen: test\\/p1060367.jpg\",\"level\":0,\"time\":\"2013-11-19t16:12:53+00:00\"}\r\n    {\"app\":\"sftp\",\"message\":\"get(\\/home\\/vincent\\/sftpmount2\\/\\/test\\/p1060367.jpg => \\/tmp\\/406fd65555c5ad0802fa262cdd2414af.jpg ) \",\"level\":0,\"time\":\"2013-11-19t16:12:53+00:00\"}\r\n    {\"app\":\"sftp\",\"message\":\"get(\\/home\\/vincent\\/sftpmount2\\/test\\/p1060367.jpg => \\/tmp\\/406fd65555c5ad0802fa262cdd2414af.jpg ) close\",\"level\":0,\"time\":\"2013-11-19t16:13:35+00:00\"}\r\n    {\"app\":\"sftp\",\"message\":\"get(\\/home\\/vincent\\/sftpmount2\\/test\\/p1060367.jpg => \\/tmp\\/406fd65555c5ad0802fa262cdd2414af.jpg ) end\",\"level\":0,\"time\":\"2013-11-19t16:13:35+00:00\"}\r\n    {\"app\":\"sftp\",\"message\":\"fopen: test\\/p1060367.jpg\",\"level\":0,\"time\":\"2013-11-19t16:13:35+00:00\"}\r\n    {\"app\":\"sftp\",\"message\":\"get(\\/home\\/vincent\\/sftpmount2\\/\\/test\\/p1060367.jpg => \\/tmp\\/eefb171907a206aa4e184772b5a84ab1.jpg ) \",\"level\":0,\"time\":\"2013-11-19t16:13:35+00:00\"}\r\n    {\"app\":\"sftp\",\"message\":\"get(\\/home\\/vincent\\/sftpmount2\\/test\\/p1060367.jpg => \\/tmp\\/eefb171907a206aa4e184772b5a84ab1.jpg ) close\",\"level\":0,\"time\":\"2013-11-19t16:14:17+00:00\"}\r\n    {\"app\":\"sftp\",\"message\":\"get(\\/home\\/vincent\\/sftpmount2\\/test\\/p1060367.jpg => \\/tmp\\/eefb171907a206aa4e184772b5a84ab1.jpg ) end\",\"level\":0,\"time\":\"2013-11-19t16:14:17+00:00\"}\r\n    {\"app\":\"sftp\",\"message\":\"fopen: test\\/p1060367.jpg\",\"level\":0,\"time\":\"2013-11-19t16:14:17+00:00\"}\r\n    {\"app\":\"sftp\",\"message\":\"get(\\/home\\/vincent\\/sftpmount2\\/\\/test\\/p1060367.jpg => \\/tmp\\/de6b2c1a923d81d13c51cd677d275689.jpg ) \",\"level\":0,\"time\":\"2013-11-19t16:14:17+00:00\"}\r\n    {\"app\":\"sftp\",\"message\":\"get(\\/home\\/vincent\\/sftpmount2\\/test\\/p1060367.jpg => \\/tmp\\/de6b2c1a923d81d13c51cd677d275689.jpg ) close\",\"level\":0,\"time\":\"2013-11-19t16:14:59+00:00\"}\r\n    {\"app\":\"sftp\",\"message\":\"get(\\/home\\/vincent\\/sftpmount2\\/test\\/p1060367.jpg => \\/tmp\\/de6b2c1a923d81d13c51cd677d275689.jpg ) end\",\"level\":0,\"time\":\"2013-11-19t16:14:59+00:00\"}\r\n    {\"app\":\"sftp\",\"message\":\"fopen: test\\/p1060367.jpg\",\"level\":0,\"time\":\"2013-11-19t16:14:59+00:00\"}\r\n    {\"app\":\"sftp\",\"message\":\"get(\\/home\\/vincent\\/sftpmount2\\/\\/test\\/p1060367.jpg => \\/tmp\\/de206acb7bbc694293430d4900a639ae.jpg ) \",\"level\":0,\"time\":\"2013-11-19t16:14:59+00:00\"}\r\n    {\"app\":\"sftp\",\"message\":\"get(\\/home\\/vincent\\/sftpmount2\\/test\\/p1060367.jpg => \\/tmp\\/de206acb7bbc694293430d4900a639ae.jpg ) close\",\"level\":0,\"time\":\"2013-11-19t16:15:42+00:00\"}\r\n    {\"app\":\"sftp\",\"message\":\"get(\\/home\\/vincent\\/sftpmount2\\/test\\/p1060367.jpg => \\/tmp\\/de206acb7bbc694293430d4900a639ae.jpg ) end\",\"level\":0,\"time\":\"2013-11-19t16:15:42+00:00\"}\r\n    {\"app\":\"sftp\",\"message\":\"fopen: test\\/p1060367.jpg\",\"level\":0,\"time\":\"2013-11-19t16:15:42+00:00\"}\r\n    {\"app\":\"sftp\",\"message\":\"get(\\/home\\/vincent\\/sftpmount2\\/\\/test\\/p1060367.jpg => \\/tmp\\/955947829792dc6709340dbc852cd52d.jpg ) \",\"level\":0,\"time\":\"2013-11-19t16:15:42+00:00\"}\r\n    {\"app\":\"sftp\",\"message\":\"get(\\/home\\/vincent\\/sftpmount2\\/test\\/p1060367.jpg => \\/tmp\\/955947829792dc6709340dbc852cd52d.jpg ) close\",\"level\":0,\"time\":\"2013-11-19t16:16:23+00:00\"}\r\n    {\"app\":\"sftp\",\"message\":\"get(\\/home\\/vincent\\/sftpmount2\\/test\\/p1060367.jpg => \\/tmp\\/955947829792dc6709340dbc852cd52d.jpg ) end\",\"level\":0,\"time\":\"2013-11-19t16:16:23+00:00\"}\r\n    {\"app\":\"sftp\",\"message\":\"construct\",\"level\":0,\"time\":\"2013-11-19t16:16:23+00:00\"}\r\n    {\"app\":\"sftp\",\"message\":\"login\",\"level\":0,\"time\":\"2013-11-19t16:16:24+00:00\"}\r\n    {\"app\":\"sftp\",\"message\":\"construct\",\"level\":0,\"time\":\"2013-11-19t16:16:25+00:00\"}\r\n    {\"app\":\"sftp\",\"message\":\"login\",\"level\":0,\"time\":\"2013-11-19t16:16:26+00:00\"}\r\n    {\"app\":\"sftp\",\"message\":\"construct\",\"level\":0,\"time\":\"2013-11-19t16:16:27+00:00\"}\r\n    {\"app\":\"sftp\",\"message\":\"login\",\"level\":0,\"time\":\"2013-11-19t16:16:27+00:00\"}\r\n    {\"app\":\"sftp\",\"message\":\"construct\",\"level\":0,\"time\":\"2013-11-19t16:16:29+00:00\"}\r\n    {\"app\":\"sftp\",\"message\":\"login\",\"level\":0,\"time\":\"2013-11-19t16:16:29+00:00\"}\r\n"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/28835773","html_url":"https://github.com/owncloud/core/issues/4063#issuecomment-28835773","issue_url":"https://api.github.com/repos/owncloud/core/issues/4063","id":28835773,"user":{"login":"pvince81","id":277525,"avatar_url":"https://gravatar.com/avatar/e446b529679416eb70eafb4ca4da5bbe?d=https%3a%2f%2fidenticons.github.com%2f89d7c394e6dcdf87a91c75ac3b2ccbe8.png&r=x","gravatar_id":"e446b529679416eb70eafb4ca4da5bbe","url":"https://api.github.com/users/pvince81","html_url":"https://github.com/pvince81","followers_url":"https://api.github.com/users/pvince81/followers","following_url":"https://api.github.com/users/pvince81/following{/other_user}","gists_url":"https://api.github.com/users/pvince81/gists{/gist_id}","starred_url":"https://api.github.com/users/pvince81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvince81/subscriptions","organizations_url":"https://api.github.com/users/pvince81/orgs","repos_url":"https://api.github.com/users/pvince81/repos","events_url":"https://api.github.com/users/pvince81/events{/privacy}","received_events_url":"https://api.github.com/users/pvince81/received_events","type":"user","site_admin":false},"created_at":"2013-11-19t21:10:01z","updated_at":"2013-11-19t21:10:01z","body":"looks like the latest phpseclib provides a stream wrapper: https://github.com/phpseclib/phpseclib/blob/master/phpseclib/net/sftp/stream.php\r\n\r\nmight be worth a try to use that one to directly stream the file instead of downloading it first."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/28837699","html_url":"https://github.com/owncloud/core/issues/4063#issuecomment-28837699","issue_url":"https://api.github.com/repos/owncloud/core/issues/4063","id":28837699,"user":{"login":"pvince81","id":277525,"avatar_url":"https://gravatar.com/avatar/e446b529679416eb70eafb4ca4da5bbe?d=https%3a%2f%2fidenticons.github.com%2f89d7c394e6dcdf87a91c75ac3b2ccbe8.png&r=x","gravatar_id":"e446b529679416eb70eafb4ca4da5bbe","url":"https://api.github.com/users/pvince81","html_url":"https://github.com/pvince81","followers_url":"https://api.github.com/users/pvince81/followers","following_url":"https://api.github.com/users/pvince81/following{/other_user}","gists_url":"https://api.github.com/users/pvince81/gists{/gist_id}","starred_url":"https://api.github.com/users/pvince81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvince81/subscriptions","organizations_url":"https://api.github.com/users/pvince81/orgs","repos_url":"https://api.github.com/users/pvince81/repos","events_url":"https://api.github.com/users/pvince81/events{/privacy}","received_events_url":"https://api.github.com/users/pvince81/received_events","type":"user","site_admin":false},"created_at":"2013-11-19t21:31:10z","updated_at":"2013-11-19t21:31:10z","body":"stream wrapper is not usable yet: https://github.com/phpseclib/phpseclib/issues/169\r\n"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/28902557","html_url":"https://github.com/owncloud/core/issues/4063#issuecomment-28902557","issue_url":"https://api.github.com/repos/owncloud/core/issues/4063","id":28902557,"user":{"login":"pvince81","id":277525,"avatar_url":"https://gravatar.com/avatar/e446b529679416eb70eafb4ca4da5bbe?d=https%3a%2f%2fidenticons.github.com%2f89d7c394e6dcdf87a91c75ac3b2ccbe8.png&r=x","gravatar_id":"e446b529679416eb70eafb4ca4da5bbe","url":"https://api.github.com/users/pvince81","html_url":"https://github.com/pvince81","followers_url":"https://api.github.com/users/pvince81/followers","following_url":"https://api.github.com/users/pvince81/following{/other_user}","gists_url":"https://api.github.com/users/pvince81/gists{/gist_id}","starred_url":"https://api.github.com/users/pvince81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvince81/subscriptions","organizations_url":"https://api.github.com/users/pvince81/orgs","repos_url":"https://api.github.com/users/pvince81/repos","events_url":"https://api.github.com/users/pvince81/events{/privacy}","received_events_url":"https://api.github.com/users/pvince81/received_events","type":"user","site_admin":false},"created_at":"2013-11-20t16:12:29z","updated_at":"2013-11-20t16:12:29z","body":"fixed by https://github.com/owncloud/core/pull/5965\r\n"}]