[{"url":"https://api.github.com/repos/owncloud/core/issues/comments/30148261","html_url":"https://github.com/owncloud/core/issues/6267#issuecomment-30148261","issue_url":"https://api.github.com/repos/owncloud/core/issues/6267","id":30148261,"user":{"login":"karlitschek","id":867445,"avatar_url":"https://gravatar.com/avatar/87ce2b4531ee1a0c32b50e0d8f049224?d=https%3a%2f%2fidenticons.github.com%2f06e7098636caebfc9c30c9f52eb905df.png&r=x","gravatar_id":"87ce2b4531ee1a0c32b50e0d8f049224","url":"https://api.github.com/users/karlitschek","html_url":"https://github.com/karlitschek","followers_url":"https://api.github.com/users/karlitschek/followers","following_url":"https://api.github.com/users/karlitschek/following{/other_user}","gists_url":"https://api.github.com/users/karlitschek/gists{/gist_id}","starred_url":"https://api.github.com/users/karlitschek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karlitschek/subscriptions","organizations_url":"https://api.github.com/users/karlitschek/orgs","repos_url":"https://api.github.com/users/karlitschek/repos","events_url":"https://api.github.com/users/karlitschek/events{/privacy}","received_events_url":"https://api.github.com/users/karlitschek/received_events","type":"user","site_admin":false},"created_at":"2013-12-09t16:44:47z","updated_at":"2013-12-09t16:44:47z","body":"@ringmaster can you reproduce that?"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/30151840","html_url":"https://github.com/owncloud/core/issues/6267#issuecomment-30151840","issue_url":"https://api.github.com/repos/owncloud/core/issues/6267","id":30151840,"user":{"login":"ringmaster","id":127738,"avatar_url":"https://gravatar.com/avatar/2e4c262dd7f74a26b28f905c0fa15048?d=https%3a%2f%2fidenticons.github.com%2f968ec2eda9ddfebb1b5a00c05b9cc674.png&r=x","gravatar_id":"2e4c262dd7f74a26b28f905c0fa15048","url":"https://api.github.com/users/ringmaster","html_url":"https://github.com/ringmaster","followers_url":"https://api.github.com/users/ringmaster/followers","following_url":"https://api.github.com/users/ringmaster/following{/other_user}","gists_url":"https://api.github.com/users/ringmaster/gists{/gist_id}","starred_url":"https://api.github.com/users/ringmaster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ringmaster/subscriptions","organizations_url":"https://api.github.com/users/ringmaster/orgs","repos_url":"https://api.github.com/users/ringmaster/repos","events_url":"https://api.github.com/users/ringmaster/events{/privacy}","received_events_url":"https://api.github.com/users/ringmaster/received_events","type":"user","site_admin":false},"created_at":"2013-12-09t17:22:01z","updated_at":"2013-12-09t17:22:01z","body":"yes, i can reproduce this on oc6.  looking into it now."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/30159152","html_url":"https://github.com/owncloud/core/issues/6267#issuecomment-30159152","issue_url":"https://api.github.com/repos/owncloud/core/issues/6267","id":30159152,"user":{"login":"ringmaster","id":127738,"avatar_url":"https://gravatar.com/avatar/2e4c262dd7f74a26b28f905c0fa15048?d=https%3a%2f%2fidenticons.github.com%2f968ec2eda9ddfebb1b5a00c05b9cc674.png&r=x","gravatar_id":"2e4c262dd7f74a26b28f905c0fa15048","url":"https://api.github.com/users/ringmaster","html_url":"https://github.com/ringmaster","followers_url":"https://api.github.com/users/ringmaster/followers","following_url":"https://api.github.com/users/ringmaster/following{/other_user}","gists_url":"https://api.github.com/users/ringmaster/gists{/gist_id}","starred_url":"https://api.github.com/users/ringmaster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ringmaster/subscriptions","organizations_url":"https://api.github.com/users/ringmaster/orgs","repos_url":"https://api.github.com/users/ringmaster/repos","events_url":"https://api.github.com/users/ringmaster/events{/privacy}","received_events_url":"https://api.github.com/users/ringmaster/received_events","type":"user","site_admin":false},"created_at":"2013-12-09t18:40:10z","updated_at":"2013-12-09t18:40:10z","body":"this issue has to do with how iis handles url-encoded urls before passing them on to fastcgi apps.  normally, the urls (the path_info part) are decoded before they're forwarded to fastcgi (including php).  because of this, utf-8 urls that include the downloadable file within the path (not the querystring) are decoded and passed on to php. but iis decodes urls only to ascii by default.  this results in incorrect path urls being forwarded to the php cgi, which is why owncloud is unable to find files with utf-8 characters for download.\r\n\r\nby contrast, iis does not decode the querystring of urls before passing them to the fastcgi apps.  this is why clicking on the download link in the file list (which generates a different url that includes the filename as part of the querystring) is successful.\r\n\r\nto fix this issue, iis must be convinced to [decode utf-8 urls as utf-8](http://www.iis.net/learn/application-frameworks/install-and-configure-php-on-iis/configuring-the-fastcgi-extension-for-iis-60#utf8servervars), and not ascii, before passing them on to the php cgi application.\r\n\r\ni was able to successfully accomplish this by changing a registry setting on the iis server, which sets the encoding for the request_uri and path_info server variables to utf-8.  follow these steps:\r\n\r\n1. open a console window with administrative privileges.\r\n2. run this command to adjust the registry settings:\r\n    `reg add hkey_local_machine\\system\\currentcontrolset\\services\\w3svc\\parameters /v fastcgiutf8servervariables /t reg_multi_sz /d request_uri\\0path_info`\r\n3. restart iis.\r\n\r\nafter completing these steps, utf-8 urls should be forwarded correctly to php, and the encoded filenames should properly download.\r\n\r\n@forumschlampe please try this fix and report your results.  this could be very helpful to others who have a similar issue."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/30177039","html_url":"https://github.com/owncloud/core/issues/6267#issuecomment-30177039","issue_url":"https://api.github.com/repos/owncloud/core/issues/6267","id":30177039,"user":{"login":"forumschlampe","id":5485277,"avatar_url":"https://gravatar.com/avatar/c3d3abed5dff1def46a992346d3920f6?d=https%3a%2f%2fidenticons.github.com%2fdaa17c4e1c7a752303eca546004ac534.png&r=x","gravatar_id":"c3d3abed5dff1def46a992346d3920f6","url":"https://api.github.com/users/forumschlampe","html_url":"https://github.com/forumschlampe","followers_url":"https://api.github.com/users/forumschlampe/followers","following_url":"https://api.github.com/users/forumschlampe/following{/other_user}","gists_url":"https://api.github.com/users/forumschlampe/gists{/gist_id}","starred_url":"https://api.github.com/users/forumschlampe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/forumschlampe/subscriptions","organizations_url":"https://api.github.com/users/forumschlampe/orgs","repos_url":"https://api.github.com/users/forumschlampe/repos","events_url":"https://api.github.com/users/forumschlampe/events{/privacy}","received_events_url":"https://api.github.com/users/forumschlampe/received_events","type":"user","site_admin":false},"created_at":"2013-12-09t21:47:51z","updated_at":"2013-12-10t07:54:12z","body":"@ringmaster \r\nworks for me, thanks\r\n\r\nmaybe there should be a hint in the install documentation to enable this by default for windows/iis installations....think this should be highly recomended. "},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/30210786","html_url":"https://github.com/owncloud/core/issues/6267#issuecomment-30210786","issue_url":"https://api.github.com/repos/owncloud/core/issues/6267","id":30210786,"user":{"login":"karlitschek","id":867445,"avatar_url":"https://gravatar.com/avatar/87ce2b4531ee1a0c32b50e0d8f049224?d=https%3a%2f%2fidenticons.github.com%2f06e7098636caebfc9c30c9f52eb905df.png&r=x","gravatar_id":"87ce2b4531ee1a0c32b50e0d8f049224","url":"https://api.github.com/users/karlitschek","html_url":"https://github.com/karlitschek","followers_url":"https://api.github.com/users/karlitschek/followers","following_url":"https://api.github.com/users/karlitschek/following{/other_user}","gists_url":"https://api.github.com/users/karlitschek/gists{/gist_id}","starred_url":"https://api.github.com/users/karlitschek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karlitschek/subscriptions","organizations_url":"https://api.github.com/users/karlitschek/orgs","repos_url":"https://api.github.com/users/karlitschek/repos","events_url":"https://api.github.com/users/karlitschek/events{/privacy}","received_events_url":"https://api.github.com/users/karlitschek/received_events","type":"user","site_admin":false},"created_at":"2013-12-10t09:33:20z","updated_at":"2013-12-10t09:33:20z","body":"@ringmaster awesome. do you think we can add this to the documentation? "}]