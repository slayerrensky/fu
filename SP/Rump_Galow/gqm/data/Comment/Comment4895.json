[{"url":"https://api.github.com/repos/owncloud/core/issues/comments/24653070","html_url":"https://github.com/owncloud/core/issues/4895#issuecomment-24653070","issue_url":"https://api.github.com/repos/owncloud/core/issues/4895","id":24653070,"user":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false},"created_at":"2013-09-18t09:55:49z","updated_at":"2013-09-18t09:55:49z","body":"@forumschlampe which version of oc are you running?\r\n@ringmaster can you have a look? thx"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/24691776","html_url":"https://github.com/owncloud/core/issues/4895#issuecomment-24691776","issue_url":"https://api.github.com/repos/owncloud/core/issues/4895","id":24691776,"user":{"login":"mattman86","id":4689426,"avatar_url":"https://gravatar.com/avatar/fbc6cd13a9568b0376a073f03b260609?d=https%3a%2f%2fidenticons.github.com%2f893f4b96b71c7f4a9024595c2aaf72db.png&r=x","gravatar_id":"fbc6cd13a9568b0376a073f03b260609","url":"https://api.github.com/users/mattman86","html_url":"https://github.com/mattman86","followers_url":"https://api.github.com/users/mattman86/followers","following_url":"https://api.github.com/users/mattman86/following{/other_user}","gists_url":"https://api.github.com/users/mattman86/gists{/gist_id}","starred_url":"https://api.github.com/users/mattman86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattman86/subscriptions","organizations_url":"https://api.github.com/users/mattman86/orgs","repos_url":"https://api.github.com/users/mattman86/repos","events_url":"https://api.github.com/users/mattman86/events{/privacy}","received_events_url":"https://api.github.com/users/mattman86/received_events","type":"user","site_admin":false},"created_at":"2013-09-18t19:21:30z","updated_at":"2013-09-18t19:21:30z","body":"i'm also having this issue on owncloud 5.0.11"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/24719765","html_url":"https://github.com/owncloud/core/issues/4895#issuecomment-24719765","issue_url":"https://api.github.com/repos/owncloud/core/issues/4895","id":24719765,"user":{"login":"forumschlampe","id":5485277,"avatar_url":"https://gravatar.com/avatar/c3d3abed5dff1def46a992346d3920f6?d=https%3a%2f%2fidenticons.github.com%2fdaa17c4e1c7a752303eca546004ac534.png&r=x","gravatar_id":"c3d3abed5dff1def46a992346d3920f6","url":"https://api.github.com/users/forumschlampe","html_url":"https://github.com/forumschlampe","followers_url":"https://api.github.com/users/forumschlampe/followers","following_url":"https://api.github.com/users/forumschlampe/following{/other_user}","gists_url":"https://api.github.com/users/forumschlampe/gists{/gist_id}","starred_url":"https://api.github.com/users/forumschlampe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/forumschlampe/subscriptions","organizations_url":"https://api.github.com/users/forumschlampe/orgs","repos_url":"https://api.github.com/users/forumschlampe/repos","events_url":"https://api.github.com/users/forumschlampe/events{/privacy}","received_events_url":"https://api.github.com/users/forumschlampe/received_events","type":"user","site_admin":false},"created_at":"2013-09-19t06:37:31z","updated_at":"2013-09-19t12:08:32z","body":"@deepdiver1975 \r\nhi deepdiver, i use oc 5.0.11 with php5.3 and 5.4 on windows server 2008 r2 (but problem can be reproduced on any windowssystem i think)\r\nthere are also others with the same problem see http://forum.owncloud.org/viewtopic.php?f=23&t=15829 and http://forum.owncloud.org/viewtopic.php?f=23&t=15811 and myself http://forum.owncloud.org/viewtopic.php?f=23&t=16053\r\n\r\ni think this is a serious one cause it prevents users completely from using oc 5.0.11 hosted on windows without workaround (in case of a clean/new install)."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/24844504","html_url":"https://github.com/owncloud/core/issues/4895#issuecomment-24844504","issue_url":"https://api.github.com/repos/owncloud/core/issues/4895","id":24844504,"user":{"login":"mockodin","id":5504847,"avatar_url":"https://gravatar.com/avatar/60721ba31b62245cca5dd6b3cb10a860?d=https%3a%2f%2fidenticons.github.com%2f78fb6cfe962e1f81e06ce767deab8de7.png&r=x","gravatar_id":"60721ba31b62245cca5dd6b3cb10a860","url":"https://api.github.com/users/mockodin","html_url":"https://github.com/mockodin","followers_url":"https://api.github.com/users/mockodin/followers","following_url":"https://api.github.com/users/mockodin/following{/other_user}","gists_url":"https://api.github.com/users/mockodin/gists{/gist_id}","starred_url":"https://api.github.com/users/mockodin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mockodin/subscriptions","organizations_url":"https://api.github.com/users/mockodin/orgs","repos_url":"https://api.github.com/users/mockodin/repos","events_url":"https://api.github.com/users/mockodin/events{/privacy}","received_events_url":"https://api.github.com/users/mockodin/received_events","type":"user","site_admin":false},"created_at":"2013-09-20t22:10:26z","updated_at":"2013-09-20t22:10:26z","body":"from: http://forum.owncloud.org/viewtopic.php?f=23&t=15829&p=41871#p41830\r\n\r\nmodifying the line 48 of /lib/files/storage/mappedlocal.php file\r\n\r\nchange\r\nwhile (($file = readdir($dh)) !== false) {\r\n\r\nto\r\nwhile ($file = readdir($dh)) {"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/24906284","html_url":"https://github.com/owncloud/core/issues/4895#issuecomment-24906284","issue_url":"https://api.github.com/repos/owncloud/core/issues/4895","id":24906284,"user":{"login":"forumschlampe","id":5485277,"avatar_url":"https://gravatar.com/avatar/c3d3abed5dff1def46a992346d3920f6?d=https%3a%2f%2fidenticons.github.com%2fdaa17c4e1c7a752303eca546004ac534.png&r=x","gravatar_id":"c3d3abed5dff1def46a992346d3920f6","url":"https://api.github.com/users/forumschlampe","html_url":"https://github.com/forumschlampe","followers_url":"https://api.github.com/users/forumschlampe/followers","following_url":"https://api.github.com/users/forumschlampe/following{/other_user}","gists_url":"https://api.github.com/users/forumschlampe/gists{/gist_id}","starred_url":"https://api.github.com/users/forumschlampe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/forumschlampe/subscriptions","organizations_url":"https://api.github.com/users/forumschlampe/orgs","repos_url":"https://api.github.com/users/forumschlampe/repos","events_url":"https://api.github.com/users/forumschlampe/events{/privacy}","received_events_url":"https://api.github.com/users/forumschlampe/received_events","type":"user","site_admin":false},"created_at":"2013-09-23t08:55:44z","updated_at":"2013-09-23t09:03:00z","body":"works for me..."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/24929142","html_url":"https://github.com/owncloud/core/issues/4895#issuecomment-24929142","issue_url":"https://api.github.com/repos/owncloud/core/issues/4895","id":24929142,"user":{"login":"qazi1214","id":5142044,"avatar_url":"https://gravatar.com/avatar/671e241f32295ccce1fcd6a5d6a5e353?d=https%3a%2f%2fidenticons.github.com%2fbde1dcded3f51307d236ac2b1bd3379b.png&r=x","gravatar_id":"671e241f32295ccce1fcd6a5d6a5e353","url":"https://api.github.com/users/qazi1214","html_url":"https://github.com/qazi1214","followers_url":"https://api.github.com/users/qazi1214/followers","following_url":"https://api.github.com/users/qazi1214/following{/other_user}","gists_url":"https://api.github.com/users/qazi1214/gists{/gist_id}","starred_url":"https://api.github.com/users/qazi1214/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qazi1214/subscriptions","organizations_url":"https://api.github.com/users/qazi1214/orgs","repos_url":"https://api.github.com/users/qazi1214/repos","events_url":"https://api.github.com/users/qazi1214/events{/privacy}","received_events_url":"https://api.github.com/users/qazi1214/received_events","type":"user","site_admin":false},"created_at":"2013-09-23t15:36:18z","updated_at":"2013-09-23t15:36:18z","body":"it does not work instead does not even let the admin user login ,after the change  once admin tries to log in ,it right away comes up with  this error message\r\n\r\n\r\nthe website cannot display the page\r\n \r\n  http 500 \r\n\r\nthanks\r\n \r\n   \r\n \r\n"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/24941893","html_url":"https://github.com/owncloud/core/issues/4895#issuecomment-24941893","issue_url":"https://api.github.com/repos/owncloud/core/issues/4895","id":24941893,"user":{"login":"forumschlampe","id":5485277,"avatar_url":"https://gravatar.com/avatar/c3d3abed5dff1def46a992346d3920f6?d=https%3a%2f%2fidenticons.github.com%2fdaa17c4e1c7a752303eca546004ac534.png&r=x","gravatar_id":"c3d3abed5dff1def46a992346d3920f6","url":"https://api.github.com/users/forumschlampe","html_url":"https://github.com/forumschlampe","followers_url":"https://api.github.com/users/forumschlampe/followers","following_url":"https://api.github.com/users/forumschlampe/following{/other_user}","gists_url":"https://api.github.com/users/forumschlampe/gists{/gist_id}","starred_url":"https://api.github.com/users/forumschlampe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/forumschlampe/subscriptions","organizations_url":"https://api.github.com/users/forumschlampe/orgs","repos_url":"https://api.github.com/users/forumschlampe/repos","events_url":"https://api.github.com/users/forumschlampe/events{/privacy}","received_events_url":"https://api.github.com/users/forumschlampe/received_events","type":"user","site_admin":false},"created_at":"2013-09-23t18:25:25z","updated_at":"2013-09-23t19:51:43z","body":"@qazi1214 \r\nplease recheck your changes, note that one ( after the while has to be remove, too!\r\nhttp 500 after this change indicates you broke the code but the given code is valid....so you must have pasted somthing wrong ;)"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/24955266","html_url":"https://github.com/owncloud/core/issues/4895#issuecomment-24955266","issue_url":"https://api.github.com/repos/owncloud/core/issues/4895","id":24955266,"user":{"login":"ringmaster","id":127738,"avatar_url":"https://gravatar.com/avatar/2e4c262dd7f74a26b28f905c0fa15048?d=https%3a%2f%2fidenticons.github.com%2f968ec2eda9ddfebb1b5a00c05b9cc674.png&r=x","gravatar_id":"2e4c262dd7f74a26b28f905c0fa15048","url":"https://api.github.com/users/ringmaster","html_url":"https://github.com/ringmaster","followers_url":"https://api.github.com/users/ringmaster/followers","following_url":"https://api.github.com/users/ringmaster/following{/other_user}","gists_url":"https://api.github.com/users/ringmaster/gists{/gist_id}","starred_url":"https://api.github.com/users/ringmaster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ringmaster/subscriptions","organizations_url":"https://api.github.com/users/ringmaster/orgs","repos_url":"https://api.github.com/users/ringmaster/repos","events_url":"https://api.github.com/users/ringmaster/events{/privacy}","received_events_url":"https://api.github.com/users/ringmaster/received_events","type":"user","site_admin":false},"created_at":"2013-09-23t21:15:28z","updated_at":"2013-09-23t21:15:28z","body":"i just ran an install on iis 7.5 & php 5.4.14 of owncloud 5.0.11, and it's working fine for me.\r\n\r\ni would not expect the above hack to solve any windows-related problems, since `readdir()` returns boolean false when there are no more directories to read.  if you just evaluate the return value, and you have a directory named \"false\" (one of many examples), then it'll evaluate to false and skip any remaining directories.  so i think this is not a viable solution, and even then don't know how it's fixing the issues you describe (which i admittedly don't see).\r\n\r\ndo you have any more information about your environment that might narrow down why this is happening for you and not for me?  some explicit steps to repeat that maybe i didn't start out with?"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/24964804","html_url":"https://github.com/owncloud/core/issues/4895#issuecomment-24964804","issue_url":"https://api.github.com/repos/owncloud/core/issues/4895","id":24964804,"user":{"login":"mockodin","id":5504847,"avatar_url":"https://gravatar.com/avatar/60721ba31b62245cca5dd6b3cb10a860?d=https%3a%2f%2fidenticons.github.com%2f78fb6cfe962e1f81e06ce767deab8de7.png&r=x","gravatar_id":"60721ba31b62245cca5dd6b3cb10a860","url":"https://api.github.com/users/mockodin","html_url":"https://github.com/mockodin","followers_url":"https://api.github.com/users/mockodin/followers","following_url":"https://api.github.com/users/mockodin/following{/other_user}","gists_url":"https://api.github.com/users/mockodin/gists{/gist_id}","starred_url":"https://api.github.com/users/mockodin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mockodin/subscriptions","organizations_url":"https://api.github.com/users/mockodin/orgs","repos_url":"https://api.github.com/users/mockodin/repos","events_url":"https://api.github.com/users/mockodin/events{/privacy}","received_events_url":"https://api.github.com/users/mockodin/received_events","type":"user","site_admin":false},"created_at":"2013-09-23t23:46:36z","updated_at":"2013-09-23t23:58:49z","body":"@ringmaster \r\n if you were looking at something like ```while (readdir($dh)) {``` then yes it evaluates readdir() as $true or $false however ```while ($file = readdir($dh)) { ``` evaluates if $file is successfully set to a path value. if ``` while ($file = readdir($dh)) { ``` did as you indicated it would be an endless loop because setting $file = $false would be evaluated as success\r\n\r\n*if* what i'm saying is incorrect then php is diverging (and it does at time) from other coding languages such as perl, c#, etc...\r\n\r\n-edit-\r\nas far as setups differences. in my case, brand new installation, i moved my data directory at one point. however with permissions being validated and such, nothing presented itself as obviously incorrect. i'm also running windows 2012 which may have an impact but i see that as unlikely without further information at this point. only my initial admin user auto created the folder. i think a few times i saw creation occur if i manually pasted url to another screen after attempting log-in.. i haven't purposefully tested that however so thus it is unconfirmed."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/24999228","html_url":"https://github.com/owncloud/core/issues/4895#issuecomment-24999228","issue_url":"https://api.github.com/repos/owncloud/core/issues/4895","id":24999228,"user":{"login":"forumschlampe","id":5485277,"avatar_url":"https://gravatar.com/avatar/c3d3abed5dff1def46a992346d3920f6?d=https%3a%2f%2fidenticons.github.com%2fdaa17c4e1c7a752303eca546004ac534.png&r=x","gravatar_id":"c3d3abed5dff1def46a992346d3920f6","url":"https://api.github.com/users/forumschlampe","html_url":"https://github.com/forumschlampe","followers_url":"https://api.github.com/users/forumschlampe/followers","following_url":"https://api.github.com/users/forumschlampe/following{/other_user}","gists_url":"https://api.github.com/users/forumschlampe/gists{/gist_id}","starred_url":"https://api.github.com/users/forumschlampe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/forumschlampe/subscriptions","organizations_url":"https://api.github.com/users/forumschlampe/orgs","repos_url":"https://api.github.com/users/forumschlampe/repos","events_url":"https://api.github.com/users/forumschlampe/events{/privacy}","received_events_url":"https://api.github.com/users/forumschlampe/received_events","type":"user","site_admin":false},"created_at":"2013-09-24t12:41:16z","updated_at":"2013-09-24t13:24:28z","body":"@ringmaster @mockodin hm i can reproduce this behaviour with php iis 7, 7.5 and 8 with php 5.4.19 and 5.5.3 used as fastcgi\r\nall on clean installations and i think the config i use is correct so far because it works like expected after the change.\r\n\r\n@ringmaster can you provide your php.ini and an icacls output of your datadir? (maybe the web.config, too?)\r\nso i can recheck if i have done something wrong (and all those others with the same problem)\r\n\r\nrechecked it with php 5.4.14, i can reproduce the reported problem....after the code change it works like expected (but i dont have any knowledge in php coding ;) )"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/25002937","html_url":"https://github.com/owncloud/core/issues/4895#issuecomment-25002937","issue_url":"https://api.github.com/repos/owncloud/core/issues/4895","id":25002937,"user":{"login":"ringmaster","id":127738,"avatar_url":"https://gravatar.com/avatar/2e4c262dd7f74a26b28f905c0fa15048?d=https%3a%2f%2fidenticons.github.com%2f968ec2eda9ddfebb1b5a00c05b9cc674.png&r=x","gravatar_id":"2e4c262dd7f74a26b28f905c0fa15048","url":"https://api.github.com/users/ringmaster","html_url":"https://github.com/ringmaster","followers_url":"https://api.github.com/users/ringmaster/followers","following_url":"https://api.github.com/users/ringmaster/following{/other_user}","gists_url":"https://api.github.com/users/ringmaster/gists{/gist_id}","starred_url":"https://api.github.com/users/ringmaster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ringmaster/subscriptions","organizations_url":"https://api.github.com/users/ringmaster/orgs","repos_url":"https://api.github.com/users/ringmaster/repos","events_url":"https://api.github.com/users/ringmaster/events{/privacy}","received_events_url":"https://api.github.com/users/ringmaster/received_events","type":"user","site_admin":false},"created_at":"2013-09-24t13:30:05z","updated_at":"2013-09-24t13:30:05z","body":"@mockodin sorry for the confusion.  what i mean is that if `readdir()` returns a string value that evaluates to boolean false (my mistake was saying that 'false' is one of these, which it is not, but \"0\" and others are), then the loop will exit prematurely.\r\n\r\nthe `!== false` compares the value of the assigned variable `$file` to boolean false, rather than using implied typecasting of string values to booleans.  omitting that part of the evaluation should only cause bad things to happen.  some sample code might help explain:  http://codepad.org/3lucc8cx\r\n\r\nif changing this evaluation does fix the issue, learning why it does could yield a proper solution, but i remain skeptical that this is a true fix.\r\n\r\n@forumschlampe i'll try it again today on a clean 2012 vm and see if i can get you that, but this server is pretty stock."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/25021152","html_url":"https://github.com/owncloud/core/issues/4895#issuecomment-25021152","issue_url":"https://api.github.com/repos/owncloud/core/issues/4895","id":25021152,"user":{"login":"ringmaster","id":127738,"avatar_url":"https://gravatar.com/avatar/2e4c262dd7f74a26b28f905c0fa15048?d=https%3a%2f%2fidenticons.github.com%2f968ec2eda9ddfebb1b5a00c05b9cc674.png&r=x","gravatar_id":"2e4c262dd7f74a26b28f905c0fa15048","url":"https://api.github.com/users/ringmaster","html_url":"https://github.com/ringmaster","followers_url":"https://api.github.com/users/ringmaster/followers","following_url":"https://api.github.com/users/ringmaster/following{/other_user}","gists_url":"https://api.github.com/users/ringmaster/gists{/gist_id}","starred_url":"https://api.github.com/users/ringmaster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ringmaster/subscriptions","organizations_url":"https://api.github.com/users/ringmaster/orgs","repos_url":"https://api.github.com/users/ringmaster/repos","events_url":"https://api.github.com/users/ringmaster/events{/privacy}","received_events_url":"https://api.github.com/users/ringmaster/received_events","type":"user","site_admin":false},"created_at":"2013-09-24t16:38:49z","updated_at":"2013-09-24t17:33:01z","body":"test process:\r\n\r\n* deleted contents of wwwroot directory, dropped oc5 database, dropped oc_admin user, created oc5 database.\r\n* extracted 5.0.11 zip to wwwroot.\r\n* created data directory.  assigned full permissions to \"iusr\" account for data, apps, and config directories.\r\n* ran installer to connect to oc5 database.  installer reports expected webdav errors.\r\n* in owncloud user admin, added user \"alice\" with password \"password\". no group selected.\r\n* logged out, logged in as \"alice\".\r\n\r\nfailure achieved.  investigating...  ok, i think i've figured this out.\r\n\r\non every login, owncloud does a garbage collection run through the file cache that exists in the user directory.  of course, when the user first logs in, their user directory hasn't been created yet.  `false` is returned for the handle from the `$dh = opendir($physicalpath)` call because the directory doesn't exist, and the subsequent call to `$file = readdir($dh)` generates an error because `$dh` is `false`, not a valid directory handle.  thus, an endless supply of log errors.  and if the directory is successfully created, the handle is properly returned and everything runs smoothly.\r\n\r\nthe fix seems simple:  wrap the `while()` loop with an `if()` that verifies the integrity of the directory handle.\r\n\r\n*edit* - for those interested in why it worked for me before, there is apparently some issue with directory permissions.  if i allow the users group edit permissions to the whole webroot (something i did during the course of testing so i could edit some source), i don't get the error at all.  but if i confine edit permissions to the iusr group, as well an administrator should, then the error occurs.  i'm not sure why that is exactly, but since the error happens in the more correct security posture, it's probably for the best to fix the issue rather than attribute it to a file permission setting."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/25022497","html_url":"https://github.com/owncloud/core/issues/4895#issuecomment-25022497","issue_url":"https://api.github.com/repos/owncloud/core/issues/4895","id":25022497,"user":{"login":"mockodin","id":5504847,"avatar_url":"https://gravatar.com/avatar/60721ba31b62245cca5dd6b3cb10a860?d=https%3a%2f%2fidenticons.github.com%2f78fb6cfe962e1f81e06ce767deab8de7.png&r=x","gravatar_id":"60721ba31b62245cca5dd6b3cb10a860","url":"https://api.github.com/users/mockodin","html_url":"https://github.com/mockodin","followers_url":"https://api.github.com/users/mockodin/followers","following_url":"https://api.github.com/users/mockodin/following{/other_user}","gists_url":"https://api.github.com/users/mockodin/gists{/gist_id}","starred_url":"https://api.github.com/users/mockodin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mockodin/subscriptions","organizations_url":"https://api.github.com/users/mockodin/orgs","repos_url":"https://api.github.com/users/mockodin/repos","events_url":"https://api.github.com/users/mockodin/events{/privacy}","received_events_url":"https://api.github.com/users/mockodin/received_events","type":"user","site_admin":false},"created_at":"2013-09-24t16:55:37z","updated_at":"2013-09-24t16:55:37z","body":"@ringmaster \r\n\r\nconfirmed, i might suggest to reduce the code a bit to simply alter the ```while()``` line\r\n\r\nfrom:\r\n```while (($file = readdir($dh)) !== false) {```\r\n\r\nto:\r\n\r\n```while ($dh && ($file = readdir($dh)) !== false) {```"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/25024396","html_url":"https://github.com/owncloud/core/issues/4895#issuecomment-25024396","issue_url":"https://api.github.com/repos/owncloud/core/issues/4895","id":25024396,"user":{"login":"ringmaster","id":127738,"avatar_url":"https://gravatar.com/avatar/2e4c262dd7f74a26b28f905c0fa15048?d=https%3a%2f%2fidenticons.github.com%2f968ec2eda9ddfebb1b5a00c05b9cc674.png&r=x","gravatar_id":"2e4c262dd7f74a26b28f905c0fa15048","url":"https://api.github.com/users/ringmaster","html_url":"https://github.com/ringmaster","followers_url":"https://api.github.com/users/ringmaster/followers","following_url":"https://api.github.com/users/ringmaster/following{/other_user}","gists_url":"https://api.github.com/users/ringmaster/gists{/gist_id}","starred_url":"https://api.github.com/users/ringmaster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ringmaster/subscriptions","organizations_url":"https://api.github.com/users/ringmaster/orgs","repos_url":"https://api.github.com/users/ringmaster/repos","events_url":"https://api.github.com/users/ringmaster/events{/privacy}","received_events_url":"https://api.github.com/users/ringmaster/received_events","type":"user","site_admin":false},"created_at":"2013-09-24t17:19:18z","updated_at":"2013-09-24t17:19:18z","body":"clarity > brevity\r\n\r\nalso, if the `$dh` is in the `while()`, it needs to evaluate it in each loop pass, so not accounting for optimization, this should also turn out to be slower. :wink: stick with the `if()`?"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/25026135","html_url":"https://github.com/owncloud/core/issues/4895#issuecomment-25026135","issue_url":"https://api.github.com/repos/owncloud/core/issues/4895","id":25026135,"user":{"login":"mockodin","id":5504847,"avatar_url":"https://gravatar.com/avatar/60721ba31b62245cca5dd6b3cb10a860?d=https%3a%2f%2fidenticons.github.com%2f78fb6cfe962e1f81e06ce767deab8de7.png&r=x","gravatar_id":"60721ba31b62245cca5dd6b3cb10a860","url":"https://api.github.com/users/mockodin","html_url":"https://github.com/mockodin","followers_url":"https://api.github.com/users/mockodin/followers","following_url":"https://api.github.com/users/mockodin/following{/other_user}","gists_url":"https://api.github.com/users/mockodin/gists{/gist_id}","starred_url":"https://api.github.com/users/mockodin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mockodin/subscriptions","organizations_url":"https://api.github.com/users/mockodin/orgs","repos_url":"https://api.github.com/users/mockodin/repos","events_url":"https://api.github.com/users/mockodin/events{/privacy}","received_events_url":"https://api.github.com/users/mockodin/received_events","type":"user","site_admin":false},"created_at":"2013-09-24t17:39:41z","updated_at":"2013-09-24t17:39:41z","body":"@ringmaster \r\nfair enough, you are quite correct; for smaller environments (less than a few thousand users) likely the impact would be unnoticeable but then no need to introduce unneeded cycles regardless of size/impact :-)"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/25026806","html_url":"https://github.com/owncloud/core/issues/4895#issuecomment-25026806","issue_url":"https://api.github.com/repos/owncloud/core/issues/4895","id":25026806,"user":{"login":"ringmaster","id":127738,"avatar_url":"https://gravatar.com/avatar/2e4c262dd7f74a26b28f905c0fa15048?d=https%3a%2f%2fidenticons.github.com%2f968ec2eda9ddfebb1b5a00c05b9cc674.png&r=x","gravatar_id":"2e4c262dd7f74a26b28f905c0fa15048","url":"https://api.github.com/users/ringmaster","html_url":"https://github.com/ringmaster","followers_url":"https://api.github.com/users/ringmaster/followers","following_url":"https://api.github.com/users/ringmaster/following{/other_user}","gists_url":"https://api.github.com/users/ringmaster/gists{/gist_id}","starred_url":"https://api.github.com/users/ringmaster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ringmaster/subscriptions","organizations_url":"https://api.github.com/users/ringmaster/orgs","repos_url":"https://api.github.com/users/ringmaster/repos","events_url":"https://api.github.com/users/ringmaster/events{/privacy}","received_events_url":"https://api.github.com/users/ringmaster/received_events","type":"user","site_admin":false},"created_at":"2013-09-24t17:47:32z","updated_at":"2013-09-24t17:47:32z","body":"and what do you know, this is already [fixed in oc6](https://github.com/owncloud/core/commit/c01675de5d6650c7b1cd0571d8c313f21d13c33c?w=1#diff-3). this commit can probably be cherry-picked to stable5."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/25038287","html_url":"https://github.com/owncloud/core/issues/4895#issuecomment-25038287","issue_url":"https://api.github.com/repos/owncloud/core/issues/4895","id":25038287,"user":{"login":"ringmaster","id":127738,"avatar_url":"https://gravatar.com/avatar/2e4c262dd7f74a26b28f905c0fa15048?d=https%3a%2f%2fidenticons.github.com%2f968ec2eda9ddfebb1b5a00c05b9cc674.png&r=x","gravatar_id":"2e4c262dd7f74a26b28f905c0fa15048","url":"https://api.github.com/users/ringmaster","html_url":"https://github.com/ringmaster","followers_url":"https://api.github.com/users/ringmaster/followers","following_url":"https://api.github.com/users/ringmaster/following{/other_user}","gists_url":"https://api.github.com/users/ringmaster/gists{/gist_id}","starred_url":"https://api.github.com/users/ringmaster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ringmaster/subscriptions","organizations_url":"https://api.github.com/users/ringmaster/orgs","repos_url":"https://api.github.com/users/ringmaster/repos","events_url":"https://api.github.com/users/ringmaster/events{/privacy}","received_events_url":"https://api.github.com/users/ringmaster/received_events","type":"user","site_admin":false},"created_at":"2013-09-24t20:11:53z","updated_at":"2013-09-24t20:11:53z","body":"nothing like spending all that time testing to find out your issue is fixed downstream.  it's also in stable5 already:  86eab2ee6c272e36a0757b38eeb192f9fd1d1f98  but it's not in the release zip for 5.0.11..."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/25085265","html_url":"https://github.com/owncloud/core/issues/4895#issuecomment-25085265","issue_url":"https://api.github.com/repos/owncloud/core/issues/4895","id":25085265,"user":{"login":"forumschlampe","id":5485277,"avatar_url":"https://gravatar.com/avatar/c3d3abed5dff1def46a992346d3920f6?d=https%3a%2f%2fidenticons.github.com%2fdaa17c4e1c7a752303eca546004ac534.png&r=x","gravatar_id":"c3d3abed5dff1def46a992346d3920f6","url":"https://api.github.com/users/forumschlampe","html_url":"https://github.com/forumschlampe","followers_url":"https://api.github.com/users/forumschlampe/followers","following_url":"https://api.github.com/users/forumschlampe/following{/other_user}","gists_url":"https://api.github.com/users/forumschlampe/gists{/gist_id}","starred_url":"https://api.github.com/users/forumschlampe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/forumschlampe/subscriptions","organizations_url":"https://api.github.com/users/forumschlampe/orgs","repos_url":"https://api.github.com/users/forumschlampe/repos","events_url":"https://api.github.com/users/forumschlampe/events{/privacy}","received_events_url":"https://api.github.com/users/forumschlampe/received_events","type":"user","site_admin":false},"created_at":"2013-09-25t13:25:31z","updated_at":"2013-09-25t13:38:30z","body":"@ringmaster \r\nthanks for testing :-)\r\nso is it \"safe\" to use the changes in https://github.com/owncloud/core/commit/86eab2ee6c272e36a0757b38eeb192f9fd1d1f98 ?  (works for me)\r\n\r\ni think i can close this, right?"}]