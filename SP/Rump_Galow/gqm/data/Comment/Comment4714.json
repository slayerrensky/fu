[{"url":"https://api.github.com/repos/owncloud/core/issues/comments/23745315","html_url":"https://github.com/owncloud/core/issues/4714#issuecomment-23745315","issue_url":"https://api.github.com/repos/owncloud/core/issues/4714","id":23745315,"user":{"login":"ser72","id":5174383,"avatar_url":"https://gravatar.com/avatar/66c6eac865eac4d7a60f2a43800c4483?d=https%3a%2f%2fidenticons.github.com%2f927cc606da5dafe8d622924c22038100.png&r=x","gravatar_id":"66c6eac865eac4d7a60f2a43800c4483","url":"https://api.github.com/users/ser72","html_url":"https://github.com/ser72","followers_url":"https://api.github.com/users/ser72/followers","following_url":"https://api.github.com/users/ser72/following{/other_user}","gists_url":"https://api.github.com/users/ser72/gists{/gist_id}","starred_url":"https://api.github.com/users/ser72/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ser72/subscriptions","organizations_url":"https://api.github.com/users/ser72/orgs","repos_url":"https://api.github.com/users/ser72/repos","events_url":"https://api.github.com/users/ser72/events{/privacy}","received_events_url":"https://api.github.com/users/ser72/received_events","type":"user","site_admin":false},"created_at":"2013-09-03t20:44:08z","updated_at":"2013-09-03t20:44:08z","body":"see owmcloud/mirall 930 for more details...\r\n\r\nowncloud log only has the following lines:\r\n\r\n{\"app\":\"php\",\"message\":\"json_encode(): invalid utf-8 sequence in argument at \\/var\\/www\\/owncloud\\/lib\\/log\\/owncloud.php#58\",\"level\":2,\"time\":\"2013-09-03t14:19:37+00:00\"}\r\n {\"app\":\"encryption library\",\"message\":null,\"level\":3,\"time\":\"2013-09-03t14:19:37+00:00\"}\r\n\r\n\r\n\r\n\r\nwireshark trace is on s3:     shared/owncloud/mirall_930_trace\r\n\r\n\r\n\r\nfrom mirall 930\r\n-------------------------------------------------------------\r\nï€« dragotin  commented   14 minutes ago ï?˜\r\nï??  \r\n\r\nthe wireshark shows that the server answers on a put on common.php.txt with status code 500 which means internal server error. it says\r\ncannot mutlikeyencrypt empty plain content\r\n\r\n\r\ni don't know exactly what it means but it sounds like a problem with the encryption app? @schiesbn might have insights.\r\n\r\nplease reopen this as a server bug and allow me to close this one.\r\n\r\n-------------------------------------"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/23746865","html_url":"https://github.com/owncloud/core/issues/4714#issuecomment-23746865","issue_url":"https://api.github.com/repos/owncloud/core/issues/4714","id":23746865,"user":{"login":"ser72","id":5174383,"avatar_url":"https://gravatar.com/avatar/66c6eac865eac4d7a60f2a43800c4483?d=https%3a%2f%2fidenticons.github.com%2f927cc606da5dafe8d622924c22038100.png&r=x","gravatar_id":"66c6eac865eac4d7a60f2a43800c4483","url":"https://api.github.com/users/ser72","html_url":"https://github.com/ser72","followers_url":"https://api.github.com/users/ser72/followers","following_url":"https://api.github.com/users/ser72/following{/other_user}","gists_url":"https://api.github.com/users/ser72/gists{/gist_id}","starred_url":"https://api.github.com/users/ser72/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ser72/subscriptions","organizations_url":"https://api.github.com/users/ser72/orgs","repos_url":"https://api.github.com/users/ser72/repos","events_url":"https://api.github.com/users/ser72/events{/privacy}","received_events_url":"https://api.github.com/users/ser72/received_events","type":"user","site_admin":false},"created_at":"2013-09-03t21:06:39z","updated_at":"2013-09-03t21:06:39z","body":"this occurs with encryption enabled.\r\n\r\nwhen encryption is disabled, the files sync without issue"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/23773636","html_url":"https://github.com/owncloud/core/issues/4714#issuecomment-23773636","issue_url":"https://api.github.com/repos/owncloud/core/issues/4714","id":23773636,"user":{"login":"dragotin","id":1070214,"avatar_url":"https://gravatar.com/avatar/af829234b31fb915704c1c65ef48eee0?d=https%3a%2f%2fidenticons.github.com%2f3392afab7f424e10623ba95a941f4d34.png&r=x","gravatar_id":"af829234b31fb915704c1c65ef48eee0","url":"https://api.github.com/users/dragotin","html_url":"https://github.com/dragotin","followers_url":"https://api.github.com/users/dragotin/followers","following_url":"https://api.github.com/users/dragotin/following{/other_user}","gists_url":"https://api.github.com/users/dragotin/gists{/gist_id}","starred_url":"https://api.github.com/users/dragotin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dragotin/subscriptions","organizations_url":"https://api.github.com/users/dragotin/orgs","repos_url":"https://api.github.com/users/dragotin/repos","events_url":"https://api.github.com/users/dragotin/events{/privacy}","received_events_url":"https://api.github.com/users/dragotin/received_events","type":"user","site_admin":false},"created_at":"2013-09-04t08:30:48z","updated_at":"2013-09-04t08:30:48z","body":"@schiesbn you might be interested..."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/23780898","html_url":"https://github.com/owncloud/core/issues/4714#issuecomment-23780898","issue_url":"https://api.github.com/repos/owncloud/core/issues/4714","id":23780898,"user":{"login":"schiesbn","id":1589737,"avatar_url":"https://gravatar.com/avatar/8912b598c7b32dd25b87fd168e0b06b2?d=https%3a%2f%2fidenticons.github.com%2f0a323047dbe8329db30eae8dbe96e55e.png&r=x","gravatar_id":"8912b598c7b32dd25b87fd168e0b06b2","url":"https://api.github.com/users/schiesbn","html_url":"https://github.com/schiesbn","followers_url":"https://api.github.com/users/schiesbn/followers","following_url":"https://api.github.com/users/schiesbn/following{/other_user}","gists_url":"https://api.github.com/users/schiesbn/gists{/gist_id}","starred_url":"https://api.github.com/users/schiesbn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schiesbn/subscriptions","organizations_url":"https://api.github.com/users/schiesbn/orgs","repos_url":"https://api.github.com/users/schiesbn/repos","events_url":"https://api.github.com/users/schiesbn/events{/privacy}","received_events_url":"https://api.github.com/users/schiesbn/received_events","type":"user","site_admin":false},"created_at":"2013-09-04t10:56:32z","updated_at":"2013-09-04t10:56:32z","body":"syncing to a shared folder is a known issue https://github.com/owncloud/core/issues/4533\r\n\r\nthere is already a pull request which should fix the issue which is still looking for reviewers: https://github.com/owncloud/core/pull/4551\r\n\r\n@ser72 maybe you can give it a try?\r\n\r\n@dragotin maybe you can also review the pull request? thanks!"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/23782292","html_url":"https://github.com/owncloud/core/issues/4714#issuecomment-23782292","issue_url":"https://api.github.com/repos/owncloud/core/issues/4714","id":23782292,"user":{"login":"ser72","id":5174383,"avatar_url":"https://gravatar.com/avatar/66c6eac865eac4d7a60f2a43800c4483?d=https%3a%2f%2fidenticons.github.com%2f927cc606da5dafe8d622924c22038100.png&r=x","gravatar_id":"66c6eac865eac4d7a60f2a43800c4483","url":"https://api.github.com/users/ser72","html_url":"https://github.com/ser72","followers_url":"https://api.github.com/users/ser72/followers","following_url":"https://api.github.com/users/ser72/following{/other_user}","gists_url":"https://api.github.com/users/ser72/gists{/gist_id}","starred_url":"https://api.github.com/users/ser72/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ser72/subscriptions","organizations_url":"https://api.github.com/users/ser72/orgs","repos_url":"https://api.github.com/users/ser72/repos","events_url":"https://api.github.com/users/ser72/events{/privacy}","received_events_url":"https://api.github.com/users/ser72/received_events","type":"user","site_admin":false},"created_at":"2013-09-04t11:27:49z","updated_at":"2013-09-04t11:27:49z","body":"@schiesbn : tested fix 4551 with the above scenario and still have the same issue.  test failed."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/23786957","html_url":"https://github.com/owncloud/core/issues/4714#issuecomment-23786957","issue_url":"https://api.github.com/repos/owncloud/core/issues/4714","id":23786957,"user":{"login":"schiesbn","id":1589737,"avatar_url":"https://gravatar.com/avatar/8912b598c7b32dd25b87fd168e0b06b2?d=https%3a%2f%2fidenticons.github.com%2f0a323047dbe8329db30eae8dbe96e55e.png&r=x","gravatar_id":"8912b598c7b32dd25b87fd168e0b06b2","url":"https://api.github.com/users/schiesbn","html_url":"https://github.com/schiesbn","followers_url":"https://api.github.com/users/schiesbn/followers","following_url":"https://api.github.com/users/schiesbn/following{/other_user}","gists_url":"https://api.github.com/users/schiesbn/gists{/gist_id}","starred_url":"https://api.github.com/users/schiesbn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schiesbn/subscriptions","organizations_url":"https://api.github.com/users/schiesbn/orgs","repos_url":"https://api.github.com/users/schiesbn/repos","events_url":"https://api.github.com/users/schiesbn/events{/privacy}","received_events_url":"https://api.github.com/users/schiesbn/received_events","type":"user","site_admin":false},"created_at":"2013-09-04t13:01:20z","updated_at":"2013-09-04t13:01:20z","body":"i just tried it once more. \"user1\" created a folder \"test space\", shared it with \"user2\" (all permissions) and started the sync client for user2.\r\n\r\noc5 stable5 branch:\r\n\r\n- file gets synced correctly to the desktop\r\n- create a new file \"client.txt\" in shared/test space/ -> file doesn't get uploaded, instead it gets removed on the desktop again.  on the server i can find ```data/user1/files_encryption/keyfiles/.key``` and  ```data/user1/files_encryption/share-keys/.user1.sharekey``` and ```data/user1/files_encryption/share-keys/.user2.sharekey```. two bugs here, the keys are not located in the \"test space\" sub-folder and the filename is empty both should be fixed with #4551 \r\n- but the sync client doesn't shows a \"bad request\" in this case\r\n\r\nnow i switch to the \"fix_4533\" branch proposed in #4551:\r\n- create a new file \"client2.txt\" in shared/test space -> file gets synced to the server, keys get created correctly ```data/user1/files_encryption/keyfiles/test space/client2.key``` and  ```data/user1/files_encryption/share-keys/test space/client2.user1.sharekey``` and ```data/user1/files_encryption/share-keys/test space/client2.user2.sharekey```\r\n\r\ni wonder a bit about the \"invalid utf-8 sequence\" error, does your file name contains any special characters?\r\n\r\nthe only difference to your test environment, i'm using client 1.3 under gnu/linux.\r\n"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/23787499","html_url":"https://github.com/owncloud/core/issues/4714#issuecomment-23787499","issue_url":"https://api.github.com/repos/owncloud/core/issues/4714","id":23787499,"user":{"login":"schiesbn","id":1589737,"avatar_url":"https://gravatar.com/avatar/8912b598c7b32dd25b87fd168e0b06b2?d=https%3a%2f%2fidenticons.github.com%2f0a323047dbe8329db30eae8dbe96e55e.png&r=x","gravatar_id":"8912b598c7b32dd25b87fd168e0b06b2","url":"https://api.github.com/users/schiesbn","html_url":"https://github.com/schiesbn","followers_url":"https://api.github.com/users/schiesbn/followers","following_url":"https://api.github.com/users/schiesbn/following{/other_user}","gists_url":"https://api.github.com/users/schiesbn/gists{/gist_id}","starred_url":"https://api.github.com/users/schiesbn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schiesbn/subscriptions","organizations_url":"https://api.github.com/users/schiesbn/orgs","repos_url":"https://api.github.com/users/schiesbn/repos","events_url":"https://api.github.com/users/schiesbn/events{/privacy}","received_events_url":"https://api.github.com/users/schiesbn/received_events","type":"user","site_admin":false},"created_at":"2013-09-04t13:11:04z","updated_at":"2013-09-04t13:21:23z","body":"just upgraded to client 1.4... same behaviour as with client 1.3\r\nif i restart the client after the failed test with oc5 stable5 branch i also get the \"error within the directory shared/test space\" error.\r\n\r\nsummary, i can reproduce it with stable5 but not with the \"fix_4533\" branch proposed in #4551 "},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/23788842","html_url":"https://github.com/owncloud/core/issues/4714#issuecomment-23788842","issue_url":"https://api.github.com/repos/owncloud/core/issues/4714","id":23788842,"user":{"login":"ser72","id":5174383,"avatar_url":"https://gravatar.com/avatar/66c6eac865eac4d7a60f2a43800c4483?d=https%3a%2f%2fidenticons.github.com%2f927cc606da5dafe8d622924c22038100.png&r=x","gravatar_id":"66c6eac865eac4d7a60f2a43800c4483","url":"https://api.github.com/users/ser72","html_url":"https://github.com/ser72","followers_url":"https://api.github.com/users/ser72/followers","following_url":"https://api.github.com/users/ser72/following{/other_user}","gists_url":"https://api.github.com/users/ser72/gists{/gist_id}","starred_url":"https://api.github.com/users/ser72/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ser72/subscriptions","organizations_url":"https://api.github.com/users/ser72/orgs","repos_url":"https://api.github.com/users/ser72/repos","events_url":"https://api.github.com/users/ser72/events{/privacy}","received_events_url":"https://api.github.com/users/ser72/received_events","type":"user","site_admin":false},"created_at":"2013-09-04t13:30:36z","updated_at":"2013-09-04t13:30:36z","body":"interesting.  when i use the file name client.txt or client2.txt, it works fine\r\n\r\nwhen i put a file â€œtestspace.txtâ€?  in the shared/test space/ directory, i get an error.\r\n\r\nmost other files are failing as well.  but client.txt and client2.txt work???\r\n\r\n \r\n\r\nfrom: bjã¶rn schieãÿle [mailto:notifications@github.com] \r\nsent: wednesday, september 04, 2013 9:02 am\r\nto: owncloud/core\r\ncc: steve robinson\r\nsubject: re: [core] [5.0.11rc1] can not sync to shared folder (#4714)\r\n\r\n \r\n\r\ni just tried it once more. \"user1\" created a folder \"test space\", shared it with \"user2\" (all permissions) and started the sync client for user2.\r\n\r\noc5 stable5 branch:\r\n\r\n*\tfile gets synced correctly to the desktop\r\n*\tcreate a new file \"client.txt\" in shared/test space/ -> file doesn't get uploaded, instead it gets removed on the desktop again. on the server i can find data/user1/files_encryption/keyfiles/.key and data/user1/files_encryption/share-keys/.user1.sharekey and data/user1/files_encryption/share-keys/.user2.sharekey. two bugs here, the keys are not located in the \"test space\" sub-folder and the filename is empty both should be fixed with #4551 <https://github.com/owncloud/core/issues/4551>  \r\n*\tbut the sync client doesn't shows a \"bad request\" in this case\r\n\r\nnow i switch to the \"fix_4533\" branch proposed in #4551 <https://github.com/owncloud/core/issues/4551> :\r\n\r\n*\tcreate a new file \"client2.txt\" in shared/test space -> file gets synced to the server, keys get created correctly data/user1/files_encryption/keyfiles/test space/client2.key and data/user1/files_encryption/share-keys/test space/client2.user1.sharekey and data/user1/files_encryption/share-keys/test space/client2.user2.sharekey \r\n\r\ni wonder a bit about the \"invalid utf-8 sequence\" error, does your file name contains any special characters?\r\n\r\nthe only difference to your test environment, i'm using client 1.3 under gnu/linux.\r\n\r\nâ€”\r\nreply to this email directly or view it on github <https://github.com/owncloud/core/issues/4714#issuecomment-23786957> .  <https://github.com/notifications/beacon/wmgqwf0ishpdedxlpajhefr2lm0syn63h153zkc4lv_7agvna4vwu_oc4-dbhyqr.gif> "},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/23791331","html_url":"https://github.com/owncloud/core/issues/4714#issuecomment-23791331","issue_url":"https://api.github.com/repos/owncloud/core/issues/4714","id":23791331,"user":{"login":"schiesbn","id":1589737,"avatar_url":"https://gravatar.com/avatar/8912b598c7b32dd25b87fd168e0b06b2?d=https%3a%2f%2fidenticons.github.com%2f0a323047dbe8329db30eae8dbe96e55e.png&r=x","gravatar_id":"8912b598c7b32dd25b87fd168e0b06b2","url":"https://api.github.com/users/schiesbn","html_url":"https://github.com/schiesbn","followers_url":"https://api.github.com/users/schiesbn/followers","following_url":"https://api.github.com/users/schiesbn/following{/other_user}","gists_url":"https://api.github.com/users/schiesbn/gists{/gist_id}","starred_url":"https://api.github.com/users/schiesbn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schiesbn/subscriptions","organizations_url":"https://api.github.com/users/schiesbn/orgs","repos_url":"https://api.github.com/users/schiesbn/repos","events_url":"https://api.github.com/users/schiesbn/events{/privacy}","received_events_url":"https://api.github.com/users/schiesbn/received_events","type":"user","site_admin":false},"created_at":"2013-09-04t14:04:34z","updated_at":"2013-09-04t14:04:34z","body":"> when i put a file â€œtestspace.txtâ€? in the shared/test space/ directory, i get an error. most other files are failing as well. but client.txt and client2.txt work???\r\n\r\ntestspace.txt works for me too. maybe there are some leftovers in the database file cache or in data/user from previous tests/errors."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/23793460","html_url":"https://github.com/owncloud/core/issues/4714#issuecomment-23793460","issue_url":"https://api.github.com/repos/owncloud/core/issues/4714","id":23793460,"user":{"login":"ser72","id":5174383,"avatar_url":"https://gravatar.com/avatar/66c6eac865eac4d7a60f2a43800c4483?d=https%3a%2f%2fidenticons.github.com%2f927cc606da5dafe8d622924c22038100.png&r=x","gravatar_id":"66c6eac865eac4d7a60f2a43800c4483","url":"https://api.github.com/users/ser72","html_url":"https://github.com/ser72","followers_url":"https://api.github.com/users/ser72/followers","following_url":"https://api.github.com/users/ser72/following{/other_user}","gists_url":"https://api.github.com/users/ser72/gists{/gist_id}","starred_url":"https://api.github.com/users/ser72/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ser72/subscriptions","organizations_url":"https://api.github.com/users/ser72/orgs","repos_url":"https://api.github.com/users/ser72/repos","events_url":"https://api.github.com/users/ser72/events{/privacy}","received_events_url":"https://api.github.com/users/ser72/received_events","type":"user","site_admin":false},"created_at":"2013-09-04t14:28:34z","updated_at":"2013-09-04t14:28:34z","body":"i tried a new install of owncloud where i have never used the client before\r\n\r\ndone the same test with a new file that never existed anywhere before\r\n\r\nstill have issues  â€œfile shared/share: error within this directoryâ€?\r\n\r\n \r\n\r\nclient is on windows 7 and is 1.4.0rc1\r\n\r\n \r\n\r\ni can reproduce at will.  is there any other data which was not previously supplied that i can get to assist in troubleshooting this?\r\n\r\n \r\n\r\nsteve\r\n\r\n \r\n\r\nfrom: bjã¶rn schieãÿle [mailto:notifications@github.com] \r\nsent: wednesday, september 04, 2013 10:05 am\r\nto: owncloud/core\r\ncc: steve robinson\r\nsubject: re: [core] [5.0.11rc1] can not sync to shared folder (#4714)\r\n\r\n \r\n\r\nwhen i put a file â€œtestspace.txtâ€? in the shared/test space/ directory, i get an error. most other files are failing as well. but client.txt and client2.txt work???\r\n\r\ntestspace.txt works for me too. maybe there are some leftovers in the database file cache or in data/user from previous tests/errors.\r\n\r\nâ€”\r\nreply to this email directly or view it on github <https://github.com/owncloud/core/issues/4714#issuecomment-23791331> .  <https://github.com/notifications/beacon/wmgqwf0ishpdedxlpajhefr2lm0syn63h153zkc4lv_7agvna4vwu_oc4-dbhyqr.gif> "},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/23795644","html_url":"https://github.com/owncloud/core/issues/4714#issuecomment-23795644","issue_url":"https://api.github.com/repos/owncloud/core/issues/4714","id":23795644,"user":{"login":"schiesbn","id":1589737,"avatar_url":"https://gravatar.com/avatar/8912b598c7b32dd25b87fd168e0b06b2?d=https%3a%2f%2fidenticons.github.com%2f0a323047dbe8329db30eae8dbe96e55e.png&r=x","gravatar_id":"8912b598c7b32dd25b87fd168e0b06b2","url":"https://api.github.com/users/schiesbn","html_url":"https://github.com/schiesbn","followers_url":"https://api.github.com/users/schiesbn/followers","following_url":"https://api.github.com/users/schiesbn/following{/other_user}","gists_url":"https://api.github.com/users/schiesbn/gists{/gist_id}","starred_url":"https://api.github.com/users/schiesbn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schiesbn/subscriptions","organizations_url":"https://api.github.com/users/schiesbn/orgs","repos_url":"https://api.github.com/users/schiesbn/repos","events_url":"https://api.github.com/users/schiesbn/events{/privacy}","received_events_url":"https://api.github.com/users/schiesbn/received_events","type":"user","site_admin":false},"created_at":"2013-09-04t14:54:30z","updated_at":"2013-09-04t14:54:30z","body":"can you check your data directory after the upload fails? what's in the files/ folder of the owner of the share? was the file uploaded? what's in data/owner/files_encryption/keyfiles and data/owner/files_encryption/share-keys? does the correct key files exists, are the damaged (e.g. like i described in my test with stable5) or are the non key files at all."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/23795743","html_url":"https://github.com/owncloud/core/issues/4714#issuecomment-23795743","issue_url":"https://api.github.com/repos/owncloud/core/issues/4714","id":23795743,"user":{"login":"schiesbn","id":1589737,"avatar_url":"https://gravatar.com/avatar/8912b598c7b32dd25b87fd168e0b06b2?d=https%3a%2f%2fidenticons.github.com%2f0a323047dbe8329db30eae8dbe96e55e.png&r=x","gravatar_id":"8912b598c7b32dd25b87fd168e0b06b2","url":"https://api.github.com/users/schiesbn","html_url":"https://github.com/schiesbn","followers_url":"https://api.github.com/users/schiesbn/followers","following_url":"https://api.github.com/users/schiesbn/following{/other_user}","gists_url":"https://api.github.com/users/schiesbn/gists{/gist_id}","starred_url":"https://api.github.com/users/schiesbn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schiesbn/subscriptions","organizations_url":"https://api.github.com/users/schiesbn/orgs","repos_url":"https://api.github.com/users/schiesbn/repos","events_url":"https://api.github.com/users/schiesbn/events{/privacy}","received_events_url":"https://api.github.com/users/schiesbn/received_events","type":"user","site_admin":false},"created_at":"2013-09-04t14:55:29z","updated_at":"2013-09-04t14:55:29z","body":"... or anything new in your owncloud.log or apache error.log?"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/23808763","html_url":"https://github.com/owncloud/core/issues/4714#issuecomment-23808763","issue_url":"https://api.github.com/repos/owncloud/core/issues/4714","id":23808763,"user":{"login":"ser72","id":5174383,"avatar_url":"https://gravatar.com/avatar/66c6eac865eac4d7a60f2a43800c4483?d=https%3a%2f%2fidenticons.github.com%2f927cc606da5dafe8d622924c22038100.png&r=x","gravatar_id":"66c6eac865eac4d7a60f2a43800c4483","url":"https://api.github.com/users/ser72","html_url":"https://github.com/ser72","followers_url":"https://api.github.com/users/ser72/followers","following_url":"https://api.github.com/users/ser72/following{/other_user}","gists_url":"https://api.github.com/users/ser72/gists{/gist_id}","starred_url":"https://api.github.com/users/ser72/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ser72/subscriptions","organizations_url":"https://api.github.com/users/ser72/orgs","repos_url":"https://api.github.com/users/ser72/repos","events_url":"https://api.github.com/users/ser72/events{/privacy}","received_events_url":"https://api.github.com/users/ser72/received_events","type":"user","site_admin":false},"created_at":"2013-09-04t17:38:12z","updated_at":"2013-09-04t17:38:12z","body":"no files exist in keyfiles or share-keys.\r\n\r\nthe file was not uploaded either\r\n\r\n \r\n\r\nfrom: bjã¶rn schieãÿle [mailto:notifications@github.com] \r\nsent: wednesday, september 04, 2013 10:55 am\r\nto: owncloud/core\r\ncc: steve robinson\r\nsubject: re: [core] [5.0.11rc1] can not sync to shared folder (#4714)\r\n\r\n \r\n\r\ncan you check your data directory after the upload fails? what's in the files/ folder of the owner of the share? was the file uploaded? what's in data/owner/files_encryption/keyfiles and data/owner/files_encryption/share-keys? does the correct key files exists, are the damaged (e.g. like i described in my test with stable5) or are the non key files at all.\r\n\r\nâ€”\r\nreply to this email directly or view it on github <https://github.com/owncloud/core/issues/4714#issuecomment-23795644> .  <https://github.com/notifications/beacon/wmgqwf0ishpdedxlpajhefr2lm0syn63h153zkc4lv_7agvna4vwu_oc4-dbhyqr.gif> "},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/23809521","html_url":"https://github.com/owncloud/core/issues/4714#issuecomment-23809521","issue_url":"https://api.github.com/repos/owncloud/core/issues/4714","id":23809521,"user":{"login":"ser72","id":5174383,"avatar_url":"https://gravatar.com/avatar/66c6eac865eac4d7a60f2a43800c4483?d=https%3a%2f%2fidenticons.github.com%2f927cc606da5dafe8d622924c22038100.png&r=x","gravatar_id":"66c6eac865eac4d7a60f2a43800c4483","url":"https://api.github.com/users/ser72","html_url":"https://github.com/ser72","followers_url":"https://api.github.com/users/ser72/followers","following_url":"https://api.github.com/users/ser72/following{/other_user}","gists_url":"https://api.github.com/users/ser72/gists{/gist_id}","starred_url":"https://api.github.com/users/ser72/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ser72/subscriptions","organizations_url":"https://api.github.com/users/ser72/orgs","repos_url":"https://api.github.com/users/ser72/repos","events_url":"https://api.github.com/users/ser72/events{/privacy}","received_events_url":"https://api.github.com/users/ser72/received_events","type":"user","site_admin":false},"created_at":"2013-09-04t17:48:29z","updated_at":"2013-09-04t17:48:29z","body":"owncloud log shows:\r\n\r\n{\"app\":\"files_sharing\",\"message\":\"file source not found for: \\/\\/share\\/invalidid.png\",\"level\":3,\"time\":\"2013-09-04t16:05:53+00:00\"}\r\n\r\n\r\n\r\napache access log shows:\r\n\r\n192.168.1.62 - - [04/sep/2013:13:45:31 -0400] \"propfind /owncloudrc2/remote.php/webdav http/1.1\" 207 1393 \"-\" \"mozilla/5.0 (windows) csyncoc/0.83.0 neon/0.29.6\"\r\n192.168.1.62 - - [04/sep/2013:13:45:31 -0400] \"propfind /owncloudrc2/remote.php/webdav// http/1.1\" 207 858 \"-\" \"mozilla/5.0 (windows) mirall/1.4.0rc1\"\r\n192.168.1.62 - - [04/sep/2013:13:45:31 -0400] \"get /owncloudrc2/status.php http/1.1\" 200 500 \"-\" \"mozilla/5.0 (windows) mirall/1.4.0rc1\"\r\n192.168.1.62 - - [04/sep/2013:13:45:31 -0400] \"propfind /owncloudrc2/remote.php/webdav/shared http/1.1\" 207 1679 \"-\" \"mozilla/5.0 (windows) csyncoc/0.83.0 neon/0.29.6\"\r\n192.168.1.62 - - [04/sep/2013:13:45:31 -0400] \"propfind /owncloudrc2/remote.php/webdav/shared/share http/1.1\" 207 1271 \"-\" \"mozilla/5.0 (windows) csyncoc/0.83.0 neon/0.29.6\"\r\n192.168.1.62 - - [04/sep/2013:13:45:32 -0400] \"get /owncloudrc2/status.php http/1.1\" 200 499 \"-\" \"mozilla/5.0 (windows) mirall/1.4.0rc1\"\r\n192.168.1.62 - - [04/sep/2013:13:45:32 -0400] \"get /owncloudrc2/status.php http/1.1\" 200 499 \"-\" \"mozilla/5.0 (windows) mirall/1.4.0rc1\"\r\n192.168.1.62 - - [04/sep/2013:13:45:32 -0400] \"propfind /owncloudrc2/remote.php/webdav// http/1.1\" 207 857 \"-\" \"mozilla/5.0 (windows) mirall/1.4.0rc1\"\r\n192.168.1.62 - - [04/sep/2013:13:45:44 -0400] \"get /owncloudrc2/index.php/apps/files/ajax/getstoragestats.php http/1.1\" 200 520 \"http://192.168.1.42/owncloudrc2/index.php/apps/files?dir=/shared\" \"mozilla/5.0 (compatible; msie 10.0; windows nt 6.1; wow64; trident/6.0)\"\r\n192.168.1.62 - - [04/sep/2013:13:45:44 -0400] \"post /owncloudrc2/index.php/heartbeat http/1.1\" 200 430 \"http://192.168.1.42/owncloudrc2/index.php/apps/files?dir=/shared\" \"mozilla/5.0 (compatible; msie 10.0; windows nt 6.1; wow64; trident/6.0)\"\r\n192.168.1.62 - - [04/sep/2013:13:45:46 -0400] \"post /owncloud/index.php/heartbeat http/1.1\" 200 430 \"http://192.168.1.42/owncloud/index.php/apps/files?dir=//test%20space\" \"mozilla/5.0 (windows nt 6.1; wow64) applewebkit/537.36 (khtml, like gecko) chrome/29.0.1547.66 safari/537.36\"\r\n192.168.1.62 - - [04/sep/2013:13:45:46 -0400] \"get /owncloudrc2/status.php http/1.1\" 200 500 \"-\" \"mozilla/5.0 (windows) mirall/1.4.0rc1\"\r\n192.168.1.62 - - [04/sep/2013:13:45:46 -0400] \"propfind /owncloudrc2/remote.php/webdav// http/1.1\" 207 858 \"-\" \"mozilla/5.0 (windows) mirall/1.4.0rc1\"\r\n192.168.1.62 - - [04/sep/2013:13:45:46 -0400] \"propfind /owncloudrc2/remote.php/webdav http/1.1\" 207 1393 \"-\" \"mozilla/5.0 (windows) csyncoc/0.83.0 neon/0.29.6\"\r\n192.168.1.62 - - [04/sep/2013:13:45:46 -0400] \"get /owncloudrc2/status.php http/1.1\" 200 499 \"-\" \"mozilla/5.0 (windows) mirall/1.4.0rc1\"\r\n192.168.1.62 - - [04/sep/2013:13:45:46 -0400] \"propfind /owncloudrc2/remote.php/webdav// http/1.1\" 207 857 \"-\" \"mozilla/5.0 (windows) mirall/1.4.0rc1\"\r\n192.168.1.62 - - [04/sep/2013:13:45:55 -0400] \"propfind /owncloudrc2/remote.php/webdav http/1.1\" 207 1393 \"-\" \"mozilla/5.0 (windows) csyncoc/0.83.0 neon/0.29.6\"\r\n192.168.1.62 - - [04/sep/2013:13:45:55 -0400] \"get /owncloudrc2/status.php http/1.1\" 200 500 \"-\" \"mozilla/5.0 (windows) mirall/1.4.0rc1\"\r\n192.168.1.62 - - [04/sep/2013:13:45:55 -0400] \"propfind /owncloudrc2/remote.php/webdav// http/1.1\" 207 858 \"-\" \"mozilla/5.0 (windows) mirall/1.4.0rc1\"\r\n192.168.1.62 - ser42rc2 [04/sep/2013:13:45:55 -0400] \"get /owncloudrc2/status.php http/1.1\" 200 500 \"-\" \"mozilla/5.0 (windows) mirall/1.4.0rc1\"\r\n192.168.1.62 - - [04/sep/2013:13:45:55 -0400] \"propfind /owncloudrc2/remote.php/webdav/shared/share http/1.1\" 207 1271 \"-\" \"mozilla/5.0 (windows) csyncoc/0.83.0 neon/0.29.6\"\r\n192.168.1.62 - - [04/sep/2013:13:45:55 -0400] \"put /owncloudrc2/remote.php/webdav/shared/share/invalidid.png http/1.1\" 500 700 \"-\" \"mozilla/5.0 (windows) csyncoc/0.83.0 neon/0.29.6\"\r\n192.168.1.62 - - [04/sep/2013:13:45:55 -0400] \"get /owncloudrc2/status.php http/1.1\" 200 499 \"-\" \"mozilla/5.0 (windows) mirall/1.4.0rc1\"\r\n192.168.1.62 - - [04/sep/2013:13:45:55 -0400] \"propfind /owncloudrc2/remote.php/webdav// http/1.1\" 207 857 \"-\" \"mozilla/5.0 (windows) mirall/1.4.0rc1\"\r\n192.168.1.62 - - [04/sep/2013:13:46:25 -0400] \"propfind /owncloudrc2/remote.php/webdav/ http/1.1\" 207 949 \"-\" \"mozilla/5.0 (windows) mirall/1.4.0rc1\"\r\n192.168.1.62 - - [04/sep/2013:13:46:55 -0400] \"propfind /owncloudrc2/remote.php/webdav/ http/1.1\" 207 949 \"-\" \"mozilla/5.0 (windows) mirall/1.4.0rc1\"\r\n192.168.1.62 - - [04/sep/2013:13:47:25 -0400] \"propfind /owncloudrc2/remote.php/webdav/ http/1.1\" 207 949 \"-\" \"mozilla/5.0 (windows) mirall/1.4.0rc1\"\r\n\r\n\r\n\r\n\r\n\r\napache error log show nothing"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/23812887","html_url":"https://github.com/owncloud/core/issues/4714#issuecomment-23812887","issue_url":"https://api.github.com/repos/owncloud/core/issues/4714","id":23812887,"user":{"login":"dragotin","id":1070214,"avatar_url":"https://gravatar.com/avatar/af829234b31fb915704c1c65ef48eee0?d=https%3a%2f%2fidenticons.github.com%2f3392afab7f424e10623ba95a941f4d34.png&r=x","gravatar_id":"af829234b31fb915704c1c65ef48eee0","url":"https://api.github.com/users/dragotin","html_url":"https://github.com/dragotin","followers_url":"https://api.github.com/users/dragotin/followers","following_url":"https://api.github.com/users/dragotin/following{/other_user}","gists_url":"https://api.github.com/users/dragotin/gists{/gist_id}","starred_url":"https://api.github.com/users/dragotin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dragotin/subscriptions","organizations_url":"https://api.github.com/users/dragotin/orgs","repos_url":"https://api.github.com/users/dragotin/repos","events_url":"https://api.github.com/users/dragotin/events{/privacy}","received_events_url":"https://api.github.com/users/dragotin/received_events","type":"user","site_admin":false},"created_at":"2013-09-04t18:34:02z","updated_at":"2013-09-04t18:34:02z","body":"```\r\n192.168.1.62 - - [04/sep/2013:13:45:55 -0400] \"put /owncloudrc2/remote.php/webdav/shared/share/invalidid.png http/1.1\" 500 700 \"-\" \"mozilla/5.0 (windows) csyncoc/0.83.0 neon/0.29.6\"\r\n```\r\nthe put request is still answered with reply code 500 (that is the number following the ```put url``` in the log line), and it means internal server error."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/23817411","html_url":"https://github.com/owncloud/core/issues/4714#issuecomment-23817411","issue_url":"https://api.github.com/repos/owncloud/core/issues/4714","id":23817411,"user":{"login":"schiesbn","id":1589737,"avatar_url":"https://gravatar.com/avatar/8912b598c7b32dd25b87fd168e0b06b2?d=https%3a%2f%2fidenticons.github.com%2f0a323047dbe8329db30eae8dbe96e55e.png&r=x","gravatar_id":"8912b598c7b32dd25b87fd168e0b06b2","url":"https://api.github.com/users/schiesbn","html_url":"https://github.com/schiesbn","followers_url":"https://api.github.com/users/schiesbn/followers","following_url":"https://api.github.com/users/schiesbn/following{/other_user}","gists_url":"https://api.github.com/users/schiesbn/gists{/gist_id}","starred_url":"https://api.github.com/users/schiesbn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schiesbn/subscriptions","organizations_url":"https://api.github.com/users/schiesbn/orgs","repos_url":"https://api.github.com/users/schiesbn/repos","events_url":"https://api.github.com/users/schiesbn/events{/privacy}","received_events_url":"https://api.github.com/users/schiesbn/received_events","type":"user","site_admin":false},"created_at":"2013-09-04t19:33:52z","updated_at":"2013-09-04t19:33:52z","body":"i just updated the pull request, can you give it another try? thanks!"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/23818476","html_url":"https://github.com/owncloud/core/issues/4714#issuecomment-23818476","issue_url":"https://api.github.com/repos/owncloud/core/issues/4714","id":23818476,"user":{"login":"ser72","id":5174383,"avatar_url":"https://gravatar.com/avatar/66c6eac865eac4d7a60f2a43800c4483?d=https%3a%2f%2fidenticons.github.com%2f927cc606da5dafe8d622924c22038100.png&r=x","gravatar_id":"66c6eac865eac4d7a60f2a43800c4483","url":"https://api.github.com/users/ser72","html_url":"https://github.com/ser72","followers_url":"https://api.github.com/users/ser72/followers","following_url":"https://api.github.com/users/ser72/following{/other_user}","gists_url":"https://api.github.com/users/ser72/gists{/gist_id}","starred_url":"https://api.github.com/users/ser72/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ser72/subscriptions","organizations_url":"https://api.github.com/users/ser72/orgs","repos_url":"https://api.github.com/users/ser72/repos","events_url":"https://api.github.com/users/ser72/events{/privacy}","received_events_url":"https://api.github.com/users/ser72/received_events","type":"user","site_admin":false},"created_at":"2013-09-04t19:47:53z","updated_at":"2013-09-04t19:47:53z","body":"still fails.  owncloud log:\r\n\r\n{\"app\":\"files_sharing\",\"message\":\"file source not found for: \\/files\\/share\\/share.txt\",\"level\":3,\"time\":\"2013-09-04t19:45:18+00:00\"}\r\n\r\n{\"app\":\"files_sharing\",\"message\":\"file source not found for: \\/files\\/share\\/share.txt\",\"level\":3,\"time\":\"2013-09-04t19:45:18+00:00\"}\r\n\r\n{\"app\":\"php\",\"message\":\"stream_wrapper_register(): class 'oca\\\\encryption\\\\stream' is undefined at \\/var\\/www\\/owncloudrc2\\/apps\\/files_encryption\\/appinfo\\/app.php#28\",\"level\":2,\"time\":\"2013-09-04t19:45:18+00:00\"}"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/23851117","html_url":"https://github.com/owncloud/core/issues/4714#issuecomment-23851117","issue_url":"https://api.github.com/repos/owncloud/core/issues/4714","id":23851117,"user":{"login":"schiesbn","id":1589737,"avatar_url":"https://gravatar.com/avatar/8912b598c7b32dd25b87fd168e0b06b2?d=https%3a%2f%2fidenticons.github.com%2f0a323047dbe8329db30eae8dbe96e55e.png&r=x","gravatar_id":"8912b598c7b32dd25b87fd168e0b06b2","url":"https://api.github.com/users/schiesbn","html_url":"https://github.com/schiesbn","followers_url":"https://api.github.com/users/schiesbn/followers","following_url":"https://api.github.com/users/schiesbn/following{/other_user}","gists_url":"https://api.github.com/users/schiesbn/gists{/gist_id}","starred_url":"https://api.github.com/users/schiesbn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schiesbn/subscriptions","organizations_url":"https://api.github.com/users/schiesbn/orgs","repos_url":"https://api.github.com/users/schiesbn/repos","events_url":"https://api.github.com/users/schiesbn/events{/privacy}","received_events_url":"https://api.github.com/users/schiesbn/received_events","type":"user","site_admin":false},"created_at":"2013-09-05t08:30:28z","updated_at":"2013-09-05t08:31:02z","body":"@ser72 all this error messages are unrelated to this patch.\r\n\r\nwhat exactly fails? yesterday it successfully added the share-keys for the real owner and the user who uploaded the file. today i did some more test with more users, group shares etc. and discovered another issue which i just fixed. now it also works with more users, groups shares etc here.\r\n\r\ncan you please try it once more. if it still fails it would be useful to have some more information,e.g does the uploaded file exists in the data/files folder of the owner? does the filekeys and all share-keys (for every user with access to it one) exists in the owners data/files_encryption folder?"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/23856099","html_url":"https://github.com/owncloud/core/issues/4714#issuecomment-23856099","issue_url":"https://api.github.com/repos/owncloud/core/issues/4714","id":23856099,"user":{"login":"schiesbn","id":1589737,"avatar_url":"https://gravatar.com/avatar/8912b598c7b32dd25b87fd168e0b06b2?d=https%3a%2f%2fidenticons.github.com%2f0a323047dbe8329db30eae8dbe96e55e.png&r=x","gravatar_id":"8912b598c7b32dd25b87fd168e0b06b2","url":"https://api.github.com/users/schiesbn","html_url":"https://github.com/schiesbn","followers_url":"https://api.github.com/users/schiesbn/followers","following_url":"https://api.github.com/users/schiesbn/following{/other_user}","gists_url":"https://api.github.com/users/schiesbn/gists{/gist_id}","starred_url":"https://api.github.com/users/schiesbn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schiesbn/subscriptions","organizations_url":"https://api.github.com/users/schiesbn/orgs","repos_url":"https://api.github.com/users/schiesbn/repos","events_url":"https://api.github.com/users/schiesbn/events{/privacy}","received_events_url":"https://api.github.com/users/schiesbn/received_events","type":"user","site_admin":false},"created_at":"2013-09-05t09:47:46z","updated_at":"2013-09-05t09:47:46z","body":"@dragotin maybe you can give the pull request another try too? yesterday i debugged some stuff together with arthur who could reproduce the error and now it works for both of us."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/23895951","html_url":"https://github.com/owncloud/core/issues/4714#issuecomment-23895951","issue_url":"https://api.github.com/repos/owncloud/core/issues/4714","id":23895951,"user":{"login":"ser72","id":5174383,"avatar_url":"https://gravatar.com/avatar/66c6eac865eac4d7a60f2a43800c4483?d=https%3a%2f%2fidenticons.github.com%2f927cc606da5dafe8d622924c22038100.png&r=x","gravatar_id":"66c6eac865eac4d7a60f2a43800c4483","url":"https://api.github.com/users/ser72","html_url":"https://github.com/ser72","followers_url":"https://api.github.com/users/ser72/followers","following_url":"https://api.github.com/users/ser72/following{/other_user}","gists_url":"https://api.github.com/users/ser72/gists{/gist_id}","starred_url":"https://api.github.com/users/ser72/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ser72/subscriptions","organizations_url":"https://api.github.com/users/ser72/orgs","repos_url":"https://api.github.com/users/ser72/repos","events_url":"https://api.github.com/users/ser72/events{/privacy}","received_events_url":"https://api.github.com/users/ser72/received_events","type":"user","site_admin":false},"created_at":"2013-09-05t19:43:56z","updated_at":"2013-09-05t19:43:56z","body":"i have a folder owned by ser72 shared to ser42rc2.\r\n\r\n \r\n\r\nmy client syncs to ser42rc2.\r\n\r\n \r\n\r\nmy client has a shared/share folder\r\n\r\n \r\n\r\nthis is from ser72\r\n\r\n\r\ninto this directory i place a file â€œowncloud test plan.xlsâ€?\r\n\r\n \r\n\r\nthe sync fails.\r\n\r\n \r\n\r\ni look under:\r\n\r\ndata/ser72/files and the file is not there\r\n\r\ndata/ser42rc2/files and the file is not there\r\n\r\ndata/ser72/files_encryption/keyfiles and nothing exists for this file\r\n\r\ndata/ser42rc2/files_encryption/keyfiles and nothing exists for this file\r\n\r\ndata/ser72/files_encryption/share-keys and nothing exists for this file\r\n\r\ndata/ser42rc2/files_encryption/share-keys and nothing exists for this file\r\n\r\n \r\n\r\nthe client gives the following error:\r\n\r\n \r\n\r\n \r\n\r\n \r\n\r\n\r\n\r\n \r\n\r\nthe client log is as follows:\r\n\r\n \r\n\r\n09-05 15:38:30:185 * pending events for \"c:/users/ser72\\owncloud\" will be processed after events stop for 1000 milliseconds ( \"15:55:10\" ). 1 events until now ) \r\n\r\n09-05 15:38:31:200 * processing of event queue for \"c:/users/ser72\\owncloud\" \r\n\r\n09-05 15:38:31:200   * notify 1 change items for \"c:/users/ser72\\owncloud\" \r\n\r\n09-05 15:38:31:201 ** changed was notified on  (\"c:/users/ser72\\owncloud\") \r\n\r\n09-05 15:38:31:201 schedule folder  \"owncloud\"  to sync! \r\n\r\n09-05 15:38:31:201 xx slotschedulefoldersync: folderqueue size:  1 \r\n\r\n09-05 15:38:31:201 setting up host header:  \"192.168.1.43\" \r\n\r\n09-05 15:38:31:201 folder in overallstatus message:  mirall::folder(0x6c60570)  with name  \"owncloud\" \r\n\r\n09-05 15:38:31:203 sync state changed for folder  \"owncloud\" :  \"syncprepare\" \r\n\r\n09-05 15:38:31:203 *** start syncing \r\n\r\n09-05 15:38:31:203 qthread::setpriority: cannot set priority, thread is not running\r\n\r\n09-05 15:38:31:204   ==> returning exclude file path:  \"c:/program files (x86)/owncloud/sync-exclude.lst\" \r\n\r\n09-05 15:38:31:204 ==== added system ignore list to csync: \"c:/program files (x86)/owncloud/sync-exclude.lst\" \r\n\r\n09-05 15:38:31:204 csync_exclude_load: loading exclude file: c:/program files (x86)/owncloud/sync-exclude.lst\r\n\r\n09-05 15:38:31:205 csync_exclude_load: adding entry: *.filepart\r\n\r\n09-05 15:38:31:205 csync_exclude_load: adding entry: *~\r\n\r\n09-05 15:38:31:205 csync_exclude_load: adding entry: *.bak\r\n\r\n09-05 15:38:31:205 csync_exclude_load: adding entry: *.part\r\n\r\n09-05 15:38:31:206 csync_exclude_load: adding entry: *.crdownload\r\n\r\n09-05 15:38:31:206 csync_exclude_load: adding entry: *.unison*\r\n\r\n09-05 15:38:31:206 csync_exclude_load: adding entry: *csync_timedif.ctmp*\r\n\r\n09-05 15:38:31:206 csync_exclude_load: adding entry: csync_journal.db\r\n\r\n09-05 15:38:31:207 csync_exclude_load: adding entry: csync_journal.db.ctmp\r\n\r\n09-05 15:38:31:207 csync_exclude_load: adding entry: .*.sw?\r\n\r\n09-05 15:38:31:207 csync_exclude_load: adding entry: .*.*sw?\r\n\r\n09-05 15:38:31:207 csync_exclude_load: adding entry: ].ds_store\r\n\r\n09-05 15:38:31:208 csync_exclude_load: adding entry: ].ds_store\r\n\r\n09-05 15:38:31:208 csync_exclude_load: adding entry: ]thumbs.db\r\n\r\n09-05 15:38:31:208 csync_exclude_load: adding entry: desktop.ini\r\n\r\n09-05 15:38:31:208 csync_exclude_load: adding entry: *.kate-swp\r\n\r\n09-05 15:38:31:208 csync_exclude_load: adding entry: *.aux\r\n\r\n09-05 15:38:31:209 csync_exclude_load: adding entry: *.nav\r\n\r\n09-05 15:38:31:209 csync_exclude_load: adding entry: *.out\r\n\r\n09-05 15:38:31:209 csync_exclude_load: adding entry: *.toc\r\n\r\n09-05 15:38:31:209 csync_exclude_load: adding entry: *_conflict-*\r\n\r\n09-05 15:38:31:210 csync_exclude_load: adding entry: ]*.~*\r\n\r\n09-05 15:38:31:210 csync_exclude_load: adding entry: ].temporaryitems\r\n\r\n09-05 15:38:31:210 csync_exclude_load: adding entry: ].trashes\r\n\r\n09-05 15:38:31:210 csync_exclude_load: adding entry: ].documentrevisions-v100\r\n\r\n09-05 15:38:31:211 csync_exclude_load: adding entry: .fseventd\r\n\r\n09-05 15:38:31:211 csync_exclude_load: adding entry: .apdisk\r\n\r\n09-05 15:38:31:211 csync_exclude_load: adding entry: .htaccess\r\n\r\n09-05 15:38:31:211 csync_exclude_load: adding entry: ]icon\\r*\r\n\r\n09-05 15:38:31:211 csync_exclude_load: adding entry: ~$*\r\n\r\n09-05 15:38:31:212 csync_exclude_load: adding entry: .~lock.*\r\n\r\n09-05 15:38:31:212   ==> returning exclude file path:  \"c:/users/ser72/appdata/local/owncloud/sync-exclude.lst\" \r\n\r\n09-05 15:38:31:212 ==== added user defined ignore list to csync: \"c:/users/ser72/appdata/local/owncloud/sync-exclude.lst\" \r\n\r\n09-05 15:38:31:213 csync_exclude_load: loading exclude file: c:/users/ser72/appdata/local/owncloud/sync-exclude.lst\r\n\r\n09-05 15:38:31:213     * event notification  disabled \r\n\r\n09-05 15:38:31:214 >===================================== sync started for  \"owncloud\" \r\n\r\n09-05 15:38:31:216 void mirall::csyncthread::startsync() sync started \r\n\r\n09-05 15:38:31:216 starting to sync  qthread(0x429e3a8) qthread(0x6c998b8) \r\n\r\n09-05 15:38:31:216 #### update start #################################################### >> \r\n\r\n09-05 15:38:31:217 csync_update: journal: c:/users/ser72\\owncloud/.csync_journal.db\r\n\r\n09-05 15:38:31:222 csync_ftw:   => starting to ftw c:/users/ser72\\owncloud, read_from_db-flag for: 0\r\n\r\n09-05 15:38:31:222 csync_vio_stat: win32: stat-inode for c:/users/ser72\\owncloud/shared: 158821\r\n\r\n09-05 15:38:31:222 csync_ftw: uniq id from database: shared -> 52278ead20045\r\n\r\n09-05 15:38:31:222 csync_walker: directory: c:/users/ser72\\owncloud/shared\r\n\r\n09-05 15:38:31:223 _csync_detect_update: ==> file: shared - hash 7772379496350463016, mtime: 1378409702\r\n\r\n09-05 15:38:31:223 _csync_detect_update: database entry found, compare: 1378409702 <-> 1378409702, md5: 52278ead20045 <-> 52278ead20045, inode: 158821 <-> 158821\r\n\r\n09-05 15:38:31:223 _csync_detect_update: file: shared, instruction: instruction_none <<=\r\n\r\n09-05 15:38:31:223 csync_ftw:   => starting to ftw c:/users/ser72\\owncloud/shared, read_from_db-flag for: 0\r\n\r\n09-05 15:38:31:223 csync_vio_stat: win32: stat-inode for c:/users/ser72\\owncloud/shared/share: 158823\r\n\r\n09-05 15:38:31:224 csync_ftw: uniq id from database: shared/share -> 5228dd9ff1c5e\r\n\r\n09-05 15:38:31:224 csync_walker: directory: c:/users/ser72\\owncloud/shared/share\r\n\r\n09-05 15:38:31:224 _csync_detect_update: ==> file: shared/share - hash 4592409115507864630, mtime: 1378409910\r\n\r\n09-05 15:38:31:224 _csync_detect_update: database entry found, compare: 1378409910 <-> 1378409702, md5: 5228dd9ff1c5e <-> 5228dd9ff1c5e, inode: 158823 <-> 158823\r\n\r\n09-05 15:38:31:224 _csync_detect_update: file: shared/share, instruction: instruction_eval <<=\r\n\r\n09-05 15:38:31:224 csync_ftw:   => starting to ftw c:/users/ser72\\owncloud/shared/share, read_from_db-flag for: 0\r\n\r\n09-05 15:38:31:224 csync_vio_stat: win32: stat-inode for c:/users/ser72\\owncloud/shared/share/owncloud test plan.xlsx: 158834\r\n\r\n09-05 15:38:31:224 csync_ftw: uniq id from database: shared/share/owncloud test plan.xlsx -> <null>\r\n\r\n09-05 15:38:31:224 csync_walker: file: c:/users/ser72\\owncloud/shared/share/owncloud test plan.xlsx\r\n\r\n09-05 15:38:31:224 _csync_detect_update: ==> file: shared/share/owncloud test plan.xlsx - hash 14134714389531232762, mtime: 1378325644\r\n\r\n09-05 15:38:31:224 csync_statedb_get_stat_by_hash: sqlite hash query fail: unknown error\r\n\r\n09-05 15:38:31:224 csync_statedb_get_stat_by_hash: no result record found for phash = 14134714389531232762\r\n\r\n09-05 15:38:31:225 _csync_detect_update: file: shared/share/owncloud test plan.xlsx, instruction: instruction_new <<=\r\n\r\n09-05 15:38:31:225 csync_vio_stat: win32: stat-inode for c:/users/ser72\\owncloud/shared/share/share.txt: 158824\r\n\r\n09-05 15:38:31:225 csync_ftw: uniq id from database: shared/share/share.txt -> 52274778462bc\r\n\r\n09-05 15:38:31:225 csync_walker: file: c:/users/ser72\\owncloud/shared/share/share.txt\r\n\r\n09-05 15:38:31:225 _csync_detect_update: ==> file: shared/share/share.txt - hash 13080591473652664569, mtime: 1378304590\r\n\r\n09-05 15:38:31:225 _csync_detect_update: database entry found, compare: 1378304590 <-> 1378304590, md5: 52274778462bc <-> 52274778462bc, inode: 158824 <-> 158824\r\n\r\n09-05 15:38:31:225 _csync_detect_update: file: shared/share/share.txt, instruction: instruction_none <<=\r\n\r\n09-05 15:38:31:225 csync_ftw:  <= closing walk for c:/users/ser72\\owncloud/shared/share with read_from_db 0\r\n\r\n09-05 15:38:31:225 csync_vio_stat: win32: stat-inode for c:/users/ser72\\owncloud/shared/test: 158822\r\n\r\n09-05 15:38:31:226 csync_ftw: uniq id from database: shared/test -> 5227471b24b42\r\n\r\n09-05 15:38:31:226 csync_walker: file: c:/users/ser72\\owncloud/shared/test\r\n\r\n09-05 15:38:31:226 _csync_detect_update: ==> file: shared/test - hash 10405984635195687587, mtime: 1378305799\r\n\r\n09-05 15:38:31:226 _csync_detect_update: database entry found, compare: 1378305799 <-> 1378305799, md5: 5227471b24b42 <-> 5227471b24b42, inode: 158822 <-> 158822\r\n\r\n09-05 15:38:31:226 _csync_detect_update: file: shared/test, instruction: instruction_none <<=\r\n\r\n09-05 15:38:31:226 csync_ftw:  <= closing walk for c:/users/ser72\\owncloud/shared with read_from_db 0\r\n\r\n09-05 15:38:31:226 csync_ftw:  <= closing walk for c:/users/ser72\\owncloud with read_from_db 0\r\n\r\n09-05 15:38:31:226 csync_update: update detection for local replica took 0.00 seconds walking 5 files.\r\n\r\n09-05 15:38:31:226 csync_ftw:   => starting to ftw owncloud://192.168.1.43/owncloudrc2/remote.php/webdav, read_from_db-flag for: 0\r\n\r\n09-05 15:38:31:226 csync_ftw: checking for read from db for owncloud://192.168.1.43/owncloudrc2/remote.php/webdav: 0\r\n\r\n09-05 15:38:31:226 oc_module: opendir method called on owncloud://192.168.1.43/owncloudrc2/remote.php/webdav\r\n\r\n09-05 15:38:31:226 oc_module: * scheme owncloud\r\n\r\n09-05 15:38:31:226 oc_module: * host 192.168.1.43\r\n\r\n09-05 15:38:31:226 oc_module: * port 0\r\n\r\n09-05 15:38:31:226 oc_module: * path /owncloudrc2/remote.php/webdav\r\n\r\n09-05 15:38:31:226 oc_module: * user \r\n\r\n09-05 15:38:31:227 oc_module: ne_sock_init: 0\r\n\r\n09-05 15:38:31:227 oc_module: no proxy configured.\r\n\r\n09-05 15:38:31:453 oc_module: simple propfind result code 207.\r\n\r\n09-05 15:38:31:453 oc_module: opendir returning handle 06e47d00\r\n\r\n09-05 15:38:31:453 oc_module: owncloud_stat owncloud://192.168.1.43/owncloudrc2/remote.php/webdav/shared called\r\n\r\n09-05 15:38:31:453 csync_walker: directory: owncloud://192.168.1.43/owncloudrc2/remote.php/webdav/shared\r\n\r\n09-05 15:38:31:453 _csync_detect_update: ==> file: shared - hash 7772379496350463016, mtime: 1378409888\r\n\r\n09-05 15:38:31:453 _csync_detect_update: database entry found, compare: 1378409888 <-> 1378409702, md5: 52278ead20045 <-> 52278ead20045, inode: 0 <-> 158821\r\n\r\n09-05 15:38:31:453 _csync_detect_update: file: shared, instruction: instruction_none <<=\r\n\r\n09-05 15:38:31:453 csync_ftw:   => starting to ftw owncloud://192.168.1.43/owncloudrc2/remote.php/webdav/shared, read_from_db-flag for: 0\r\n\r\n09-05 15:38:31:453 oc_module: owncloud_stat owncloud://192.168.1.43/owncloudrc2/remote.php/webdav/shared called\r\n\r\n09-05 15:38:31:453 oc_module: get file id for owncloud://192.168.1.43/owncloudrc2/remote.php/webdav/shared: 52278ead20045\r\n\r\n09-05 15:38:31:453 _check_read_from_db: compare directory ids for shared: 52278ead20045 -> 52278ead20045\r\n\r\n09-05 15:38:31:454 csync_ftw: checking for read from db for owncloud://192.168.1.43/owncloudrc2/remote.php/webdav/shared: 1\r\n\r\n09-05 15:38:31:454 csync_vio_opendir: reading directory owncloud://192.168.1.43/owncloudrc2/remote.php/webdav/shared from database\r\n\r\n09-05 15:38:31:454 csync_statedb_get_below_path: sql: select phash, path, inode, uid, gid, mode, modtime, type, md5 from metadata where path like('shared/%')\r\n\r\n09-05 15:38:31:454 csync_walker: directory: owncloud://192.168.1.43/owncloudrc2/remote.php/webdav/shared/share\r\n\r\n09-05 15:38:31:454 _csync_detect_update: ==> file: shared/share - hash 4592409115507864630, mtime: 1378409702\r\n\r\n09-05 15:38:31:454 _csync_detect_update: database entry found, compare: 1378409702 <-> 1378409702, md5: 5228dd9ff1c5e <-> 5228dd9ff1c5e, inode: 158823 <-> 158823\r\n\r\n09-05 15:38:31:454 _csync_detect_update: file: shared/share, instruction: instruction_none <<=\r\n\r\n09-05 15:38:31:454 csync_ftw:   => starting to ftw owncloud://192.168.1.43/owncloudrc2/remote.php/webdav/shared/share, read_from_db-flag for: 1\r\n\r\n09-05 15:38:31:454 csync_vio_opendir: reading directory owncloud://192.168.1.43/owncloudrc2/remote.php/webdav/shared/share from database\r\n\r\n09-05 15:38:31:454 csync_statedb_get_below_path: sql: select phash, path, inode, uid, gid, mode, modtime, type, md5 from metadata where path like('shared/share/%')\r\n\r\n09-05 15:38:31:454 csync_walker: file: owncloud://192.168.1.43/owncloudrc2/remote.php/webdav/shared/share/share.txt\r\n\r\n09-05 15:38:31:454 _csync_detect_update: ==> file: shared/share/share.txt - hash 13080591473652664569, mtime: 1378304590\r\n\r\n09-05 15:38:31:454 _csync_detect_update: database entry found, compare: 1378304590 <-> 1378304590, md5: 52274778462bc <-> 52274778462bc, inode: 158824 <-> 158824\r\n\r\n09-05 15:38:31:454 _csync_detect_update: file: shared/share/share.txt, instruction: instruction_none <<=\r\n\r\n09-05 15:38:31:454 csync_ftw:  <= closing walk for owncloud://192.168.1.43/owncloudrc2/remote.php/webdav/shared/share with read_from_db 1\r\n\r\n09-05 15:38:31:454 csync_walker: file: owncloud://192.168.1.43/owncloudrc2/remote.php/webdav/shared/test\r\n\r\n09-05 15:38:31:454 _csync_detect_update: ==> file: shared/test - hash 10405984635195687587, mtime: 1378305799\r\n\r\n09-05 15:38:31:454 _csync_detect_update: database entry found, compare: 1378305799 <-> 1378305799, md5: 5227471b24b42 <-> 5227471b24b42, inode: 158822 <-> 158822\r\n\r\n09-05 15:38:31:454 _csync_detect_update: file: shared/test, instruction: instruction_none <<=\r\n\r\n09-05 15:38:31:454 csync_ftw:  <= closing walk for owncloud://192.168.1.43/owncloudrc2/remote.php/webdav/shared with read_from_db 0\r\n\r\n09-05 15:38:31:454 oc_module: closedir method called 06e47d00!\r\n\r\n09-05 15:38:31:454 csync_ftw:  <= closing walk for owncloud://192.168.1.43/owncloudrc2/remote.php/webdav with read_from_db 0\r\n\r\n09-05 15:38:31:454 csync_update: update detection for remote replica took 0.23 seconds walking 4 files.\r\n\r\n09-05 15:38:31:454 <<#### update end ########################################################### \r\n\r\n09-05 15:38:31:454 _csync_merge_algorithm_visitor: instruction_sync      dir: shared/share\r\n\r\n09-05 15:38:31:455 _csync_merge_algorithm_visitor: instruction_none      dir: shared\r\n\r\n09-05 15:38:31:455 _csync_merge_algorithm_visitor: instruction_none     file: shared/test\r\n\r\n09-05 15:38:31:455 _csync_merge_algorithm_visitor: instruction_none     file: shared/share/share.txt\r\n\r\n09-05 15:38:31:455 _csync_merge_algorithm_visitor: instruction_new      file: shared/share/owncloud test plan.xlsx\r\n\r\n09-05 15:38:31:455 csync_reconcile: reconciliation for local replica took 0.00 seconds visiting 5 files.\r\n\r\n09-05 15:38:31:455 _csync_merge_algorithm_visitor: instruction_none      dir: shared/share\r\n\r\n09-05 15:38:31:455 _csync_merge_algorithm_visitor: instruction_none      dir: shared\r\n\r\n09-05 15:38:31:455 _csync_merge_algorithm_visitor: instruction_none     file: shared/test\r\n\r\n09-05 15:38:31:455 _csync_merge_algorithm_visitor: instruction_none     file: shared/share/share.txt\r\n\r\n09-05 15:38:31:455 csync_reconcile: reconciliation for remote replica took 0.00 seconds visiting 4 files.\r\n\r\n09-05 15:38:31:464     * csync thread started \r\n\r\n09-05 15:38:31:464 folder in overallstatus message:  mirall::folder(0x6c60570)  with name  \"owncloud\" \r\n\r\n09-05 15:38:31:465 sync state changed for folder  \"owncloud\" :  \"sync running\" \r\n\r\n09-05 15:38:31:455 csync_vio_stat: win32: stat-inode for c:/users/ser72\\owncloud/shared/share/owncloud test plan.xlsx: 158834\r\n\r\n09-05 15:38:31:455 _csync_push_file: remote repository atomar push enabled for owncloud://192.168.1.43/owncloudrc2/remote.php/webdav/shared/share/owncloud test plan.xlsx (0).\r\n\r\n09-05 15:38:31:455 oc_module: => open called for owncloud://192.168.1.43/owncloudrc2/remote.php/webdav/shared/share/owncloud test plan.xlsx\r\n\r\n09-05 15:38:31:455 oc_module: stating directory owncloud://192.168.1.43/owncloudrc2/remote.php/webdav/shared/share\r\n\r\n09-05 15:38:31:455 oc_module: owncloud_stat owncloud://192.168.1.43/owncloudrc2/remote.php/webdav/shared/share called\r\n\r\n09-05 15:38:31:659 oc_module: simple propfind result code 207.\r\n\r\n09-05 15:38:31:659 oc_module: => errno after fetch resource list for owncloud://192.168.1.43/owncloudrc2/remote.php/webdav/shared/share: 0\r\n\r\n09-05 15:38:31:659 oc_module: working on file share\r\n\r\n09-05 15:38:31:659 oc_module: stat result from propfind: share, mtime: 1378409888\r\n\r\n09-05 15:38:31:659 oc_module: directory of file to open exists.\r\n\r\n09-05 15:38:31:659 oc_module: put request on /owncloudrc2/remote.php/webdav/shared/share/owncloud%20test%20plan.xlsx!\r\n\r\n09-05 15:38:31:659 oc_module: sendfile handling request type put. fd 3\r\n\r\n09-05 15:38:31:659 hbf_splitlist: hbf_splitlist: block_size: 10485760 threshold: 10485760 st_size: 12603\r\n\r\n \r\n\r\n09-05 15:38:31:659 hbf_splitlist: hbf_splitlist: num_blocks: 1 rmainder: 12603 blk_size: 10485760\r\n\r\n \r\n\r\n09-05 15:38:31:659 hbf_splitlist: hbf_splitlist: created block 0   (start: 0  size: 12603)\r\n\r\n \r\n\r\n09-05 15:38:31:659 oc_module: about to send 1 block\r\n\r\n09-05 15:38:31:660 _hbf_dav_request: hbf: block: 0 , start: 0 and size: 12603\r\n\r\n \r\n\r\n09-05 15:38:31:663 oc_module: chunk upload completed for 'owncloud://192.168.1.43/owncloudrc2/remote.php/webdav/shared/share/owncloud test plan.xlsx' (12603 bytes out of 12603)\r\n\r\n09-05 15:38:31:864 oc_module: chunk upload completed for 'owncloud://192.168.1.43/owncloudrc2/remote.php/webdav/shared/share/owncloud test plan.xlsx' (12875 bytes out of 12603)\r\n\r\n09-05 15:38:31:864 _csync_push_file: file: c:/users/ser72\\owncloud/shared/share/owncloud test plan.xlsx, command: sendfile, error: invalid argument from errno 22\r\n\r\n09-05 15:38:31:864 _csync_push_file: remember chunk: 0  (transfer id -1914338835 )\r\n\r\n09-05 15:38:31:864 _csync_report_parent_error: mark parent directoy `shared/share` as an error\r\n\r\n09-05 15:38:31:864 _csync_report_parent_error: mark parent directoy `shared` as an error\r\n\r\n09-05 15:38:31:864 csync_propagate: propagation for local replica took 0.41 seconds visiting 5 files.\r\n\r\n09-05 15:38:31:864 csync_propagate: propagation for remote replica took 0.00 seconds visiting 4 files.\r\n\r\n09-05 15:38:31:865 void mirall::csyncthread::startsync() sync finished \r\n\r\n09-05 15:38:31:865 csync_statedb_get_stat_by_hash: sqlite hash query fail: unknown error\r\n\r\n09-05 15:38:31:865 csync_statedb_get_stat_by_hash: no result record found for phash = 14134714389531232762\r\n\r\n09-05 15:38:31:947 _insert_metadata_visitor: sql statement: insert into metadata_temp \r\n\r\n                (phash, pathlen, path, inode, uid, gid, mode, modtime, type, md5) values \r\n\r\n                (-8040759438513864029, 11, shared/test, 158822, 0, 0, 33206, 1378305799, 0, 5227471b24b42);\r\n\r\n09-05 15:38:31:948 _insert_metadata_visitor: sql statement: insert into metadata_temp \r\n\r\n                (phash, pathlen, path, inode, uid, gid, mode, modtime, type, md5) values \r\n\r\n                (-5366152600056887047, 22, shared/share/share.txt, 158824, 0, 0, 33206, 1378304590, 0, 52274778462bc);\r\n\r\n09-05 15:38:31:962 csync_statedb_write_progressinfo: insert into progress (phash, modtime, md5, chunk, transferid, error_count, tmpfile, error_string) values(14134714389531232762, 1378325644, '(null)', 0, -1914338835, 1, '(null)', 'bad request');\r\n\r\n09-05 15:38:31:968 _merge_and_write_statedb: writing the statedb of 5 files to disk took 0.10 seconds\r\n\r\n09-05 15:38:31:972 csync_statedb_close: successfully moved tmp db to original db.\r\n\r\n09-05 15:38:31:972 csync run took  756  milliseconds \r\n\r\n09-05 15:38:31:973 -> csync finished slot with error  false \r\n\r\n09-05 15:38:31:973 starting event logging again in  2000  milliseconds \r\n\r\n09-05 15:38:31:973 oo folder slotsyncfinished: result:  3 \r\n\r\n09-05 15:38:31:974   ** error strings:  (\"file shared/share: error within the directory\", \"file shared/share/owncloud test plan.xlsx: bad request\") \r\n\r\n09-05 15:38:31:974     * owncloud csync thread finished with error \r\n\r\n09-05 15:38:31:974 folder in overallstatus message:  mirall::folder(0x6c60570)  with name  \"owncloud\" \r\n\r\n09-05 15:38:31:976 sync state changed for folder  \"owncloud\" :  \"error\" \r\n\r\n09-05 15:38:31:976 setting up host header:  \"192.168.1.43\" \r\n\r\n09-05 15:38:31:976 <===================================== sync finished for  \"owncloud\" \r\n\r\n09-05 15:38:32:171 xx slotschedulefoldersync: folderqueue size:  0 \r\n\r\n09-05 15:38:33:978     * event notification  enabled \r\n\r\n \r\n\r\nthe owncloud logs are as follows:\r\n\r\n \r\n\r\n{\"app\":\"php\",\"message\":\"stream_wrapper_register(): class 'oca\\\\encryption\\\\stream' is undefined at \\/var\\/www\\/owncloudrc2\\/apps\\/files_encryption\\/appinfo\\/app.php#28\",\"level\":2,\"time\":\"2013-09-05t19:40:30+00:00\"}\r\n\r\n{\"app\":\"php\",\"message\":\"stream_wrapper_register(): class 'oca\\\\encryption\\\\stream' is undefined at \\/var\\/www\\/owncloudrc2\\/apps\\/files_encryption\\/appinfo\\/app.php#28\",\"level\":2,\"time\":\"2013-09-05t19:40:43+00:00\"}\r\n\r\n{\"app\":\"php\",\"message\":\"stream_wrapper_register(): class 'oca\\\\encryption\\\\stream' is undefined at \\/var\\/www\\/owncloudrc2\\/apps\\/files_encryption\\/appinfo\\/app.php#28\",\"level\":2,\"time\":\"2013-09-05t19:40:43+00:00\"}\r\n\r\n{\"app\":\"php\",\"message\":\"stream_wrapper_register(): class 'oca\\\\encryption\\\\stream' is undefined at \\/var\\/www\\/owncloudrc2\\/apps\\/files_encryption\\/appinfo\\/app.php#28\",\"level\":2,\"time\":\"2013-09-05t19:40:43+00:00\"}\r\n\r\n{\"app\":\"php\",\"message\":\"stream_wrapper_register(): class 'oca\\\\encryption\\\\stream' is undefined at \\/var\\/www\\/owncloudrc2\\/apps\\/files_encryption\\/appinfo\\/app.php#28\",\"level\":2,\"time\":\"2013-09-05t19:40:43+00:00\"}\r\n\r\n{\"app\":\"php\",\"message\":\"fopen(): unable to find the wrapper \\\"crypt\\\" - did you forget to enable it when you configured php? at \\/var\\/www\\/owncloudrc2\\/apps\\/files_encryption\\/lib\\/proxy.php#306\",\"level\":2,\"time\":\"2013-09-05t19:40:43+00:00\"}\r\n\r\n{\"app\":\"php\",\"message\":\"fopen(crypt:\\/\\/shared\\/share\\/owncloud test plan.xlsx.part): failed to open stream: no such file or directory at \\/var\\/www\\/owncloudrc2\\/apps\\/files_encryption\\/lib\\/proxy.php#306\",\"level\":2,\"time\":\"2013-09-05t19:40:43+00:00\"}\r\n\r\n{\"app\":\"php\",\"message\":\"stream_wrapper_register(): class 'oca\\\\encryption\\\\stream' is undefined at \\/var\\/www\\/owncloudrc2\\/apps\\/files_encryption\\/appinfo\\/app.php#28\",\"level\":2,\"time\":\"2013-09-05t19:40:44+00:00\"}\r\n\r\n \r\n\r\n \r\n\r\n \r\n\r\n \r\n\r\nthe apache access logs are as follows:\r\n\r\n \r\n\r\n\"\r\n\r\n192.168.1.138 - ser42rc2 [05/sep/2013:15:38:59 -0400] \"propfind /owncloudrc2/remote.php/webdav// http/1.1\" 207 858 \"-\" \"mozilla/5.0 (windows) mirall/1.4.0beta2\"\r\n\r\n192.168.1.138 - - [05/sep/2013:15:38:59 -0400] \"propfind /owncloudrc2/remote.php/webdav http/1.1\" 207 1393 \"-\" \"mozilla/5.0 (windows) csyncoc/0.82.0 neon/0.29.6\"\r\n\r\n192.168.1.138 - - [05/sep/2013:15:38:59 -0400] \"propfind /owncloudrc2/remote.php/webdav/shared http/1.1\" 207 1679 \"-\" \"mozilla/5.0 (windows) csyncoc/0.82.0 neon/0.29.6\"\r\n\r\n192.168.1.138 - - [05/sep/2013:15:38:59 -0400] \"propfind /owncloudrc2/remote.php/webdav/shared/share http/1.1\" 207 1271 \"-\" \"mozilla/5.0 (windows) csyncoc/0.82.0 neon/0.29.6\"\r\n\r\n192.168.1.138 - ser42rc2 [05/sep/2013:15:39:00 -0400] \"propfind /owncloudrc2/remote.php/webdav// http/1.1\" 207 857 \"-\" \"mozilla/5.0 (windows) mirall/1.4.0beta2\"\r\n\r\n192.168.1.138 - ser42rc2 [05/sep/2013:15:39:30 -0400] \"propfind /owncloudrc2/remote.php/webdav/ http/1.1\" 207 949 \"-\" \"mozilla/5.0 (windows) mirall/1.4.0beta2\"\r\n\r\n192.168.1.138 - ser42rc2 [05/sep/2013:15:39:30 -0400] \"propfind /owncloudrc2/remote.php/webdav// http/1.1\" 207 857 \"-\" \"mozilla/5.0 (windows) mirall/1.4.0beta2\"\r\n\r\n192.168.1.138 - - [05/sep/2013:15:39:30 -0400] \"propfind /owncloudrc2/remote.php/webdav http/1.1\" 207 1393 \"-\" \"mozilla/5.0 (windows) csyncoc/0.82.0 neon/0.29.6\"\r\n\r\n192.168.1.138 - ser42rc2 [05/sep/2013:15:39:30 -0400] \"propfind /owncloudrc2/remote.php/webdav// http/1.1\" 207 857 \"-\" \"mozilla/5.0 (windows) mirall/1.4.0beta2\"\r\n\r\n192.168.1.138 - ser42rc2 [05/sep/2013:15:40:00 -0400] \"propfind /owncloudrc2/remote.php/webdav/ http/1.1\" 207 949 \"-\" \"mozilla/5.0 (windows) mirall/1.4.0beta2\"\r\n\r\n192.168.1.138 - - [05/sep/2013:15:40:16 -0400] \"post /owncloudrc2/index.php/heartbeat http/1.1\" 200 430 \"http://192.168.1.43/owncloudrc2/index.php/apps/files?dir=\" \"mozilla/5.0 (compatible; msie 10.0; windows nt 6.1; wow64; trident/6.0)\"\r\n\r\n192.168.1.138 - - [05/sep/2013:15:40:16 -0400] \"get /owncloudrc2/index.php/apps/files/ajax/getstoragestats.php http/1.1\" 200 520 \"http://192.168.1.43/owncloudrc2/index.php/apps/files?dir=\" \"mozilla/5.0 (compatible; msie 10.0; windows nt 6.1; wow64; trident/6.0)\"\r\n\r\n192.168.1.138 - ser42rc2 [05/sep/2013:15:40:30 -0400] \"propfind /owncloudrc2/remote.php/webdav/ http/1.1\" 207 949 \"-\" \"mozilla/5.0 (windows) mirall/1.4.0beta2\"\r\n\r\n192.168.1.138 - ser42rc2 [05/sep/2013:15:40:43 -0400] \"propfind /owncloudrc2/remote.php/webdav// http/1.1\" 207 858 \"-\" \"mozilla/5.0 (windows) mirall/1.4.0beta2\"\r\n\r\n192.168.1.138 - - [05/sep/2013:15:40:43 -0400] \"propfind /owncloudrc2/remote.php/webdav http/1.1\" 207 1393 \"-\" \"mozilla/5.0 (windows) csyncoc/0.82.0 neon/0.29.6\"\r\n\r\n192.168.1.138 - - [05/sep/2013:15:40:43 -0400] \"propfind /owncloudrc2/remote.php/webdav/shared/share http/1.1\" 207 1271 \"-\" \"mozilla/5.0 (windows) csyncoc/0.82.0 neon/0.29.6\"\r\n\r\n192.168.1.138 - - [05/sep/2013:15:40:43 -0400] \"put /owncloudrc2/remote.php/webdav/shared/share/owncloud%20test%20plan.xlsx http/1.1\" 400 629 \"-\" \"mozilla/5.0 (windows) csyncoc/0.82.0 neon/0.29.6\"\r\n\r\n192.168.1.138 - ser42rc2 [05/sep/2013:15:40:44 -0400] \"propfind /owncloudrc2/remote.php/webdav// http/1.1\" 207 857 \"-\" \"mozilla/5.0 (windows) mirall/1.4.0beta2\"\r\n\r\n192.168.1.138 - ser42rc2 [05/sep/2013:15:41:14 -0400] \"propfind /owncloudrc2/remote.php/webdav/ http/1.1\" 207 949 \"-\" \"mozilla/5.0 (windows) mirall/1.4.0beta2\"\r\n\r\n192.168.1.138 - ser42rc2 [05/sep/2013:15:41:44 -0400] \"propfind /owncloudrc2/remote.php/webdav/ http/1.1\" 207 949 \"-\" \"mozilla/5.0 (windows) mirall/1.4.0beta2\"\r\n\r\n \r\n\r\n \r\n\r\n\r\nthe apache error log has nothing related in it.\r\n\r\n \r\n\r\nfrom: bjã¶rn schieãÿle [mailto:notifications@github.com] \r\nsent: thursday, september 05, 2013 4:31 am\r\nto: owncloud/core\r\ncc: steve robinson\r\nsubject: re: [core] [5.0.11rc1] can not sync to shared folder (#4714)\r\n\r\n \r\n\r\n@ser72 <https://github.com/ser72>  all this error messages are unrelated to this patch.\r\n\r\nwhat exactly fails. yesterday it successfully added the share-keys for the real owner and the user who uploaded the file. today i did some more test with more users, group shares etc. and discovered another issue which i just fixed. now it also works with more users, groups share etc here.\r\n\r\ncan you please try it once more. if it still fails it would be useful to have some more information,e.g does the uploaded file exists in the data/files folder of the owner? does the filekeys and all share-keys (for every user with access to it one) exists in the owners data/files_encryption folder?\r\n\r\nâ€”\r\nreply to this email directly or view it on github <https://github.com/owncloud/core/issues/4714#issuecomment-23851117> .  <https://github.com/notifications/beacon/wmgqwf0ishpdedxlpajhefr2lm0syn63h153zkc4lv_7agvna4vwu_oc4-dbhyqr.gif> \r\n\r\n  <http://sgmail.github.com/wf/open?upn=g1z3wduxy2o9oxnrgyydi8pl3vljet2zop-2beplcsqr-2bz9zabujbmibo1h4rumhmmpaktrmdu66dafiff3wf4qmg9rb1raursvnlzsyjh4icxchb6024v5aua9goa-2bn1iqrkwewfe2ff34bcejavwtytdh-2f8alxmnr8hwxlzpdxnrzpw1vn-2bqicszthmy0yu3dcmn6funmrlzl2mrfowaha-3d-3d> "},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/23927614","html_url":"https://github.com/owncloud/core/issues/4714#issuecomment-23927614","issue_url":"https://api.github.com/repos/owncloud/core/issues/4714","id":23927614,"user":{"login":"schiesbn","id":1589737,"avatar_url":"https://gravatar.com/avatar/8912b598c7b32dd25b87fd168e0b06b2?d=https%3a%2f%2fidenticons.github.com%2f0a323047dbe8329db30eae8dbe96e55e.png&r=x","gravatar_id":"8912b598c7b32dd25b87fd168e0b06b2","url":"https://api.github.com/users/schiesbn","html_url":"https://github.com/schiesbn","followers_url":"https://api.github.com/users/schiesbn/followers","following_url":"https://api.github.com/users/schiesbn/following{/other_user}","gists_url":"https://api.github.com/users/schiesbn/gists{/gist_id}","starred_url":"https://api.github.com/users/schiesbn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schiesbn/subscriptions","organizations_url":"https://api.github.com/users/schiesbn/orgs","repos_url":"https://api.github.com/users/schiesbn/repos","events_url":"https://api.github.com/users/schiesbn/events{/privacy}","received_events_url":"https://api.github.com/users/schiesbn/received_events","type":"user","site_admin":false},"created_at":"2013-09-06t09:04:17z","updated_at":"2013-09-06t09:04:17z","body":"> {\"app\":\"php\",\"message\":\"stream_wrapper_register(): class 'oca\\\\encryption\\\\stream' is undefined at \\/var\\/www\\/owncloudrc2\\/apps\\/files_encryption\\/appinfo\\/app.php#28\",\"level\":2,\"time\":\"2013-09-05t19:40:30+00:00\"}\r\n\r\ni think that's the root of the problem. i doesn't register the \"crypt://\" stream wrapper. but i don't know why he doesn't find \"oca\\encryption\\stream\" i never saw such an error before.\r\n\r\ncan you try it with a fresh installation, based on this branch https://github.com/owncloud/core/tree/fix_4533 ?"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/23930846","html_url":"https://github.com/owncloud/core/issues/4714#issuecomment-23930846","issue_url":"https://api.github.com/repos/owncloud/core/issues/4714","id":23930846,"user":{"login":"dragotin","id":1070214,"avatar_url":"https://gravatar.com/avatar/af829234b31fb915704c1c65ef48eee0?d=https%3a%2f%2fidenticons.github.com%2f3392afab7f424e10623ba95a941f4d34.png&r=x","gravatar_id":"af829234b31fb915704c1c65ef48eee0","url":"https://api.github.com/users/dragotin","html_url":"https://github.com/dragotin","followers_url":"https://api.github.com/users/dragotin/followers","following_url":"https://api.github.com/users/dragotin/following{/other_user}","gists_url":"https://api.github.com/users/dragotin/gists{/gist_id}","starred_url":"https://api.github.com/users/dragotin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dragotin/subscriptions","organizations_url":"https://api.github.com/users/dragotin/orgs","repos_url":"https://api.github.com/users/dragotin/repos","events_url":"https://api.github.com/users/dragotin/events{/privacy}","received_events_url":"https://api.github.com/users/dragotin/received_events","type":"user","site_admin":false},"created_at":"2013-09-06t10:17:47z","updated_at":"2013-09-06t10:18:16z","body":"i did some testing on the pull request branch on this. sharing without encryption worked fine.\r\n\r\nthan i swtiched on encryption. that requires a relogin to generate the keys. i only did that for the user who got the files shared from the sharer, not for the sharer.\r\n\r\ncreating a file in the shared dir fails than with an internal server error, with this error log in owncloud.log:\r\n```\r\n{\"app\":\"php\",\"message\":\"file_get_contents(\\/home\\/kf\\/oc\\/core\\/data\\/public-keys\\/from.public.key): failed to open stream: no such file or directory at \\/home\\/kf\\/oc\\/core\\/lib\\/files\\/storage\\/local.php#113\",\"level\":2,\"time\":\"2013-09-06t10:12:48+00:00\"}\r\n{\"app\":\"php\",\"message\":\"openssl_seal(): not a public key (2th member of pubkeys) at \\/home\\/kf\\/oc\\/core\\/apps\\/files_encryption\\/lib\\/crypt.php#431\",\"level\":2,\"time\":\"2013-09-06t10:12:48+00:00\"}\r\n{\"app\":\"php\",\"message\":\"missing argument 2 for oc\\\\files\\\\storage\\\\local::file_put_contents(), called in \\/home\\/kf\\/oc\\/core\\/lib\\/files\\/view.php on line 666 and defined at \\/home\\/kf\\/oc\\/core\\/lib\\/files\\/storage\\/local.php#115\",\"level\":2,\"time\":\"2013-09-06t10:12:48+00:00\"}\r\n{\"app\":\"php\",\"message\":\"undefined variable: data at \\/home\\/kf\\/oc\\/core\\/lib\\/files\\/storage\\/local.php#116\",\"level\":2,\"time\":\"2013-09-06t10:12:48+00:00\"}\r\n{\"app\":\"php\",\"message\":\"argument 3 passed to oca\\\\encryption\\\\keymanager::setsharekeys() must be an array, null given, called in \\/home\\/kf\\/oc\\/core\\/apps\\/files_encryption\\/lib\\/stream.php on line 504 and defined at \\/home\\/kf\\/oc\\/core\\/apps\\/files_encryption\\/lib\\/keymanager.php#362\",\"level\":2,\"time\":\"2013-09-06t10:12:48+00:00\"}\r\n{\"app\":\"php\",\"message\":\"invalid argument supplied for foreach() at \\/home\\/kf\\/oc\\/core\\/apps\\/files_encryption\\/lib\\/keymanager.php#382\",\"level\":2,\"time\":\"2013-09-06t10:12:48+00:00\"}\r\n{\"app\":\"files_sharing\",\"message\":\"file source not found for: \\/\\/kfshared\\/big.file\",\"level\":3,\"time\":\"2013-09-06t10:12:48+00:00\"}\r\n```\r\ni will now test what happens if i do the relogin with the sharer as well.\r\n"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/23931046","html_url":"https://github.com/owncloud/core/issues/4714#issuecomment-23931046","issue_url":"https://api.github.com/repos/owncloud/core/issues/4714","id":23931046,"user":{"login":"dragotin","id":1070214,"avatar_url":"https://gravatar.com/avatar/af829234b31fb915704c1c65ef48eee0?d=https%3a%2f%2fidenticons.github.com%2f3392afab7f424e10623ba95a941f4d34.png&r=x","gravatar_id":"af829234b31fb915704c1c65ef48eee0","url":"https://api.github.com/users/dragotin","html_url":"https://github.com/dragotin","followers_url":"https://api.github.com/users/dragotin/followers","following_url":"https://api.github.com/users/dragotin/following{/other_user}","gists_url":"https://api.github.com/users/dragotin/gists{/gist_id}","starred_url":"https://api.github.com/users/dragotin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dragotin/subscriptions","organizations_url":"https://api.github.com/users/dragotin/orgs","repos_url":"https://api.github.com/users/dragotin/repos","events_url":"https://api.github.com/users/dragotin/events{/privacy}","received_events_url":"https://api.github.com/users/dragotin/received_events","type":"user","site_admin":false},"created_at":"2013-09-06t10:21:57z","updated_at":"2013-09-06t10:21:57z","body":"yes, once i relogged in with the sharing user, it works as expected. so i guess the core problem is that both users, the one how shares and the one who is shared to, must relogin to properly initialize the encryption system."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/23933536","html_url":"https://github.com/owncloud/core/issues/4714#issuecomment-23933536","issue_url":"https://api.github.com/repos/owncloud/core/issues/4714","id":23933536,"user":{"login":"ser72","id":5174383,"avatar_url":"https://gravatar.com/avatar/66c6eac865eac4d7a60f2a43800c4483?d=https%3a%2f%2fidenticons.github.com%2f927cc606da5dafe8d622924c22038100.png&r=x","gravatar_id":"66c6eac865eac4d7a60f2a43800c4483","url":"https://api.github.com/users/ser72","html_url":"https://github.com/ser72","followers_url":"https://api.github.com/users/ser72/followers","following_url":"https://api.github.com/users/ser72/following{/other_user}","gists_url":"https://api.github.com/users/ser72/gists{/gist_id}","starred_url":"https://api.github.com/users/ser72/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ser72/subscriptions","organizations_url":"https://api.github.com/users/ser72/orgs","repos_url":"https://api.github.com/users/ser72/repos","events_url":"https://api.github.com/users/ser72/events{/privacy}","received_events_url":"https://api.github.com/users/ser72/received_events","type":"user","site_admin":false},"created_at":"2013-09-06t11:22:37z","updated_at":"2013-09-06t11:22:37z","body":"this is a fresh install of 5.0.11rc2 with the fixes in 4533.\r\n\r\n \r\n\r\n \r\n\r\n \r\n\r\nfrom: bjã¶rn schieãÿle [mailto:notifications@github.com] \r\nsent: friday, september 06, 2013 5:04 am\r\nto: owncloud/core\r\ncc: steve robinson\r\nsubject: re: [core] [5.0.11rc1] can not sync to shared folder (#4714)\r\n\r\n \r\n\r\n{\"app\":\"php\",\"message\":\"stream_wrapper_register(): class 'oca\\encryption\\stream' is undefined at \\/var\\/www\\/owncloudrc2\\/apps\\/files_encryption\\/appinfo\\/app.php#28\",\"level\":2,\"time\":\"2013-09-05t19:40:30+00:00\"}\r\n\r\ni think that's the root of the problem. i doesn't register the \"crypt://\" stream wrapper. but i don't know why he doesn't find \"oca\\encryption\\stream\" i never saw such an error before.\r\n\r\ncan you try it with a fresh installation, based on this branch https://github.com/owncloud/core/tree/fix_4533 ?\r\n\r\nâ€”\r\nreply to this email directly or view it on github <https://github.com/owncloud/core/issues/4714#issuecomment-23927614> .  <https://github.com/notifications/beacon/wmgqwf0ishpdedxlpajhefr2lm0syn63h153zkc4lv_7agvna4vwu_oc4-dbhyqr.gif> "},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/23937059","html_url":"https://github.com/owncloud/core/issues/4714#issuecomment-23937059","issue_url":"https://api.github.com/repos/owncloud/core/issues/4714","id":23937059,"user":{"login":"schiesbn","id":1589737,"avatar_url":"https://gravatar.com/avatar/8912b598c7b32dd25b87fd168e0b06b2?d=https%3a%2f%2fidenticons.github.com%2f0a323047dbe8329db30eae8dbe96e55e.png&r=x","gravatar_id":"8912b598c7b32dd25b87fd168e0b06b2","url":"https://api.github.com/users/schiesbn","html_url":"https://github.com/schiesbn","followers_url":"https://api.github.com/users/schiesbn/followers","following_url":"https://api.github.com/users/schiesbn/following{/other_user}","gists_url":"https://api.github.com/users/schiesbn/gists{/gist_id}","starred_url":"https://api.github.com/users/schiesbn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schiesbn/subscriptions","organizations_url":"https://api.github.com/users/schiesbn/orgs","repos_url":"https://api.github.com/users/schiesbn/repos","events_url":"https://api.github.com/users/schiesbn/events{/privacy}","received_events_url":"https://api.github.com/users/schiesbn/received_events","type":"user","site_admin":false},"created_at":"2013-09-06t12:43:12z","updated_at":"2013-09-06t12:43:12z","body":"@dragotin yes, every user must have a key pair otherwise this can't work. in most cases the files should be shared after the encryption app was enabled. this way it is guaranteed that every key exists.\r\n\r\n> this is a fresh install of 5.0.11rc2 with the fixes in 4533.\r\n\r\nsorry, i have no idea at the moment. the error message that the stream wrapper can't be registered is completely independent from this patch and i have no idea why this happens to you and why this should only happen if you access owncloud via webdav."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/25701321","html_url":"https://github.com/owncloud/core/issues/4714#issuecomment-25701321","issue_url":"https://api.github.com/repos/owncloud/core/issues/4714","id":25701321,"user":{"login":"dragotin","id":1070214,"avatar_url":"https://gravatar.com/avatar/af829234b31fb915704c1c65ef48eee0?d=https%3a%2f%2fidenticons.github.com%2f3392afab7f424e10623ba95a941f4d34.png&r=x","gravatar_id":"af829234b31fb915704c1c65ef48eee0","url":"https://api.github.com/users/dragotin","html_url":"https://github.com/dragotin","followers_url":"https://api.github.com/users/dragotin/followers","following_url":"https://api.github.com/users/dragotin/following{/other_user}","gists_url":"https://api.github.com/users/dragotin/gists{/gist_id}","starred_url":"https://api.github.com/users/dragotin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dragotin/subscriptions","organizations_url":"https://api.github.com/users/dragotin/orgs","repos_url":"https://api.github.com/users/dragotin/repos","events_url":"https://api.github.com/users/dragotin/events{/privacy}","received_events_url":"https://api.github.com/users/dragotin/received_events","type":"user","site_admin":false},"created_at":"2013-10-04t14:11:55z","updated_at":"2013-10-04t14:11:55z","body":"i think we should close this one, i remember i retested this issue with @schiesbn fix and this case worked."}]