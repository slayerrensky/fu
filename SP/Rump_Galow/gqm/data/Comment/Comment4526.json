[{"url":"https://api.github.com/repos/owncloud/core/issues/comments/23049728","html_url":"https://github.com/owncloud/core/issues/4526#issuecomment-23049728","issue_url":"https://api.github.com/repos/owncloud/core/issues/4526","id":23049728,"user":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false},"created_at":"2013-08-21t20:58:46z","updated_at":"2013-08-21t20:58:46z","body":"@bantu can you please try to reproduce and fix this? thx"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/23199798","html_url":"https://github.com/owncloud/core/issues/4526#issuecomment-23199798","issue_url":"https://api.github.com/repos/owncloud/core/issues/4526","id":23199798,"user":{"login":"bantu","id":189375,"avatar_url":"https://gravatar.com/avatar/88483d87947219efecfc570465c753b2?d=https%3a%2f%2fidenticons.github.com%2fcdc48f189c0e2e8a870f3d54615a2f0d.png&r=x","gravatar_id":"88483d87947219efecfc570465c753b2","url":"https://api.github.com/users/bantu","html_url":"https://github.com/bantu","followers_url":"https://api.github.com/users/bantu/followers","following_url":"https://api.github.com/users/bantu/following{/other_user}","gists_url":"https://api.github.com/users/bantu/gists{/gist_id}","starred_url":"https://api.github.com/users/bantu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bantu/subscriptions","organizations_url":"https://api.github.com/users/bantu/orgs","repos_url":"https://api.github.com/users/bantu/repos","events_url":"https://api.github.com/users/bantu/events{/privacy}","received_events_url":"https://api.github.com/users/bantu/received_events","type":"user","site_admin":false},"created_at":"2013-08-24t00:40:00z","updated_at":"2013-08-24t00:40:00z","body":"from `./apps/files/js/files.js`\r\n```js\r\nvar usedspacepercent = $('#usedspacepercent').val();\r\nif (usedspacepercent > 98) {\r\n\toc.notification.show(t('files', 'your storage is full, files can not be updated or synced anymore!'));\r\n\treturn;\r\n}\r\nif (usedspacepercent > 90) {\r\n\toc.notification.show(t('files', 'your storage is almost full ({usedspacepercent}%)', {usedspacepercent: usedspacepercent}));\r\n}\r\n```\r\n\r\nassigned in `./apps/files/index.php` as\r\n```php\r\n$storageinfo=oc_helper::getstorageinfo();\r\n...\r\n$tmpl->assign('usedspacepercent', (int)$storageinfo['relative']);\r\n```\r\n\r\n`getstorageinfo()` is using `/` hardcoded. there is also a related method in `./apps/files/lib/helper.php`."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/23347064","html_url":"https://github.com/owncloud/core/issues/4526#issuecomment-23347064","issue_url":"https://api.github.com/repos/owncloud/core/issues/4526","id":23347064,"user":{"login":"sirzaid","id":5322432,"avatar_url":"https://gravatar.com/avatar/b1c902d6f29b00fa3e4bb77e71b9ece0?d=https%3a%2f%2fidenticons.github.com%2f68874086a43def307407e273093f2065.png&r=x","gravatar_id":"b1c902d6f29b00fa3e4bb77e71b9ece0","url":"https://api.github.com/users/sirzaid","html_url":"https://github.com/sirzaid","followers_url":"https://api.github.com/users/sirzaid/followers","following_url":"https://api.github.com/users/sirzaid/following{/other_user}","gists_url":"https://api.github.com/users/sirzaid/gists{/gist_id}","starred_url":"https://api.github.com/users/sirzaid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sirzaid/subscriptions","organizations_url":"https://api.github.com/users/sirzaid/orgs","repos_url":"https://api.github.com/users/sirzaid/repos","events_url":"https://api.github.com/users/sirzaid/events{/privacy}","received_events_url":"https://api.github.com/users/sirzaid/received_events","type":"user","site_admin":false},"created_at":"2013-08-27t15:46:37z","updated_at":"2013-08-27t15:48:15z","body":"same problem here, with the 5.0.10.\r\nfree space of the external storage isn't added to the available space of owncloud, but the size of the present files in the external storage are counted against the user quota.\r\nnote that this bug does not only happen with a local filesystem, but with all the external storage (such as sftp, etc...)\r\nmaybe someone could provide a temporary patch? "},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/23498005","html_url":"https://github.com/owncloud/core/issues/4526#issuecomment-23498005","issue_url":"https://api.github.com/repos/owncloud/core/issues/4526","id":23498005,"user":{"login":"pawlosck","id":3769853,"avatar_url":"https://gravatar.com/avatar/9d1013758fb376001886d391229bac77?d=https%3a%2f%2fidenticons.github.com%2f46f8f25871da8b24c545e92564d83f97.png&r=x","gravatar_id":"9d1013758fb376001886d391229bac77","url":"https://api.github.com/users/pawlosck","html_url":"https://github.com/pawlosck","followers_url":"https://api.github.com/users/pawlosck/followers","following_url":"https://api.github.com/users/pawlosck/following{/other_user}","gists_url":"https://api.github.com/users/pawlosck/gists{/gist_id}","starred_url":"https://api.github.com/users/pawlosck/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pawlosck/subscriptions","organizations_url":"https://api.github.com/users/pawlosck/orgs","repos_url":"https://api.github.com/users/pawlosck/repos","events_url":"https://api.github.com/users/pawlosck/events{/privacy}","received_events_url":"https://api.github.com/users/pawlosck/received_events","type":"user","site_admin":false},"created_at":"2013-08-29t15:25:55z","updated_at":"2013-08-29t15:27:05z","body":"i have similar problem. i added to my server pendrive (about 55 gb free space), but owncloud shows me about 513 mb (on root and external dir). i don't know where is from this value. i set quota to unlimited. root partition: about 11 gb free space. owncloud shows 513 mb for admin and normal user.\r\n\r\nowncloud: 5.0.10."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/23629681","html_url":"https://github.com/owncloud/core/issues/4526#issuecomment-23629681","issue_url":"https://api.github.com/repos/owncloud/core/issues/4526","id":23629681,"user":{"login":"bantu","id":189375,"avatar_url":"https://gravatar.com/avatar/88483d87947219efecfc570465c753b2?d=https%3a%2f%2fidenticons.github.com%2fcdc48f189c0e2e8a870f3d54615a2f0d.png&r=x","gravatar_id":"88483d87947219efecfc570465c753b2","url":"https://api.github.com/users/bantu","html_url":"https://github.com/bantu","followers_url":"https://api.github.com/users/bantu/followers","following_url":"https://api.github.com/users/bantu/following{/other_user}","gists_url":"https://api.github.com/users/bantu/gists{/gist_id}","starred_url":"https://api.github.com/users/bantu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bantu/subscriptions","organizations_url":"https://api.github.com/users/bantu/orgs","repos_url":"https://api.github.com/users/bantu/repos","events_url":"https://api.github.com/users/bantu/events{/privacy}","received_events_url":"https://api.github.com/users/bantu/received_events","type":"user","site_admin":false},"created_at":"2013-09-01t17:58:36z","updated_at":"2013-09-01t17:58:36z","body":"my previous comment was against the master branch. things seem to look a bit different on the stable5 branch."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/23668968","html_url":"https://github.com/owncloud/core/issues/4526#issuecomment-23668968","issue_url":"https://api.github.com/repos/owncloud/core/issues/4526","id":23668968,"user":{"login":"bantu","id":189375,"avatar_url":"https://gravatar.com/avatar/88483d87947219efecfc570465c753b2?d=https%3a%2f%2fidenticons.github.com%2fcdc48f189c0e2e8a870f3d54615a2f0d.png&r=x","gravatar_id":"88483d87947219efecfc570465c753b2","url":"https://api.github.com/users/bantu","html_url":"https://github.com/bantu","followers_url":"https://api.github.com/users/bantu/followers","following_url":"https://api.github.com/users/bantu/following{/other_user}","gists_url":"https://api.github.com/users/bantu/gists{/gist_id}","starred_url":"https://api.github.com/users/bantu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bantu/subscriptions","organizations_url":"https://api.github.com/users/bantu/orgs","repos_url":"https://api.github.com/users/bantu/repos","events_url":"https://api.github.com/users/bantu/events{/privacy}","received_events_url":"https://api.github.com/users/bantu/received_events","type":"user","site_admin":false},"created_at":"2013-09-02t16:22:37z","updated_at":"2013-09-02t16:54:41z","body":"currently, the \"personal\" page shows \"you have used 12 mb of the available 3.8 gb\". i think this does not make sense because it only considers one mount point (probably the root).\r\ninstead, i think that free space should always be shown for the folder the user is currently in.\r\n\r\nalso, i think that the messages shown are not useful because they do not tell me whether i can upload my 800mib file or not, if i do not know the total filesystem size. for example: on a 16 tb filesystem, even if the filesystem is 98% full, there is still plenty of space left.\r\nadditionally, the number of bytes i can upload should be shown as well."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/23669508","html_url":"https://github.com/owncloud/core/issues/4526#issuecomment-23669508","issue_url":"https://api.github.com/repos/owncloud/core/issues/4526","id":23669508,"user":{"login":"bantu","id":189375,"avatar_url":"https://gravatar.com/avatar/88483d87947219efecfc570465c753b2?d=https%3a%2f%2fidenticons.github.com%2fcdc48f189c0e2e8a870f3d54615a2f0d.png&r=x","gravatar_id":"88483d87947219efecfc570465c753b2","url":"https://api.github.com/users/bantu","html_url":"https://github.com/bantu","followers_url":"https://api.github.com/users/bantu/followers","following_url":"https://api.github.com/users/bantu/following{/other_user}","gists_url":"https://api.github.com/users/bantu/gists{/gist_id}","starred_url":"https://api.github.com/users/bantu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bantu/subscriptions","organizations_url":"https://api.github.com/users/bantu/orgs","repos_url":"https://api.github.com/users/bantu/repos","events_url":"https://api.github.com/users/bantu/events{/privacy}","received_events_url":"https://api.github.com/users/bantu/received_events","type":"user","site_admin":false},"created_at":"2013-09-02t16:35:45z","updated_at":"2013-09-02t16:35:45z","body":"feedback please. @karlitschek @deepdiver1975"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/24498068","html_url":"https://github.com/owncloud/core/issues/4526#issuecomment-24498068","issue_url":"https://api.github.com/repos/owncloud/core/issues/4526","id":24498068,"user":{"login":"morgen2009","id":1876842,"avatar_url":"https://gravatar.com/avatar/de96d9304a149dedfafe7c6713c77f6c?d=https%3a%2f%2fidenticons.github.com%2fdaf9377001cbc3b27a19de186e9209a3.png&r=x","gravatar_id":"de96d9304a149dedfafe7c6713c77f6c","url":"https://api.github.com/users/morgen2009","html_url":"https://github.com/morgen2009","followers_url":"https://api.github.com/users/morgen2009/followers","following_url":"https://api.github.com/users/morgen2009/following{/other_user}","gists_url":"https://api.github.com/users/morgen2009/gists{/gist_id}","starred_url":"https://api.github.com/users/morgen2009/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/morgen2009/subscriptions","organizations_url":"https://api.github.com/users/morgen2009/orgs","repos_url":"https://api.github.com/users/morgen2009/repos","events_url":"https://api.github.com/users/morgen2009/events{/privacy}","received_events_url":"https://api.github.com/users/morgen2009/received_events","type":"user","site_admin":false},"created_at":"2013-09-16t09:27:50z","updated_at":"2013-09-16t09:27:50z","body":"@bantu\r\n*i think this does not make sense because it only considers one mount point (probably the root).\r\ninstead, i think that free space should always be shown for the folder the user is currently in.*\r\n+1. my case is the storage on web server and the external storages in amazon s3 and on private ftp server, which have completely different limitation strategies."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/27123041","html_url":"https://github.com/owncloud/core/issues/4526#issuecomment-27123041","issue_url":"https://api.github.com/repos/owncloud/core/issues/4526","id":27123041,"user":{"login":"tcpsyn","id":5777602,"avatar_url":"https://gravatar.com/avatar/8724349eec25d1847db1dfd3bb18ef1e?d=https%3a%2f%2fidenticons.github.com%2fb7d44f11743b99a499e2d2ba5ac5747f.png&r=x","gravatar_id":"8724349eec25d1847db1dfd3bb18ef1e","url":"https://api.github.com/users/tcpsyn","html_url":"https://github.com/tcpsyn","followers_url":"https://api.github.com/users/tcpsyn/followers","following_url":"https://api.github.com/users/tcpsyn/following{/other_user}","gists_url":"https://api.github.com/users/tcpsyn/gists{/gist_id}","starred_url":"https://api.github.com/users/tcpsyn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tcpsyn/subscriptions","organizations_url":"https://api.github.com/users/tcpsyn/orgs","repos_url":"https://api.github.com/users/tcpsyn/repos","events_url":"https://api.github.com/users/tcpsyn/events{/privacy}","received_events_url":"https://api.github.com/users/tcpsyn/received_events","type":"user","site_admin":false},"created_at":"2013-10-25t20:26:55z","updated_at":"2013-10-25t20:26:55z","body":"problem still exists in owncloud 6 beta 1... except there is plenty of space on my external mountpoint:\r\n\r\n/dev/sdb1                  2.7t  959g  1.8t  35% /datastore\r\n\r\n\r\n\r\n\r\n"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/27898061","html_url":"https://github.com/owncloud/core/issues/4526#issuecomment-27898061","issue_url":"https://api.github.com/repos/owncloud/core/issues/4526","id":27898061,"user":{"login":"basni","id":1932169,"avatar_url":"https://gravatar.com/avatar/0158ac8ac21f8721ef8f12532681da97?d=https%3a%2f%2fidenticons.github.com%2fd8b4d574af1c7e94a8d9c3197010e162.png&r=x","gravatar_id":"0158ac8ac21f8721ef8f12532681da97","url":"https://api.github.com/users/basni","html_url":"https://github.com/basni","followers_url":"https://api.github.com/users/basni/followers","following_url":"https://api.github.com/users/basni/following{/other_user}","gists_url":"https://api.github.com/users/basni/gists{/gist_id}","starred_url":"https://api.github.com/users/basni/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/basni/subscriptions","organizations_url":"https://api.github.com/users/basni/orgs","repos_url":"https://api.github.com/users/basni/repos","events_url":"https://api.github.com/users/basni/events{/privacy}","received_events_url":"https://api.github.com/users/basni/received_events","type":"user","site_admin":false},"created_at":"2013-11-06t18:08:36z","updated_at":"2013-11-06t18:08:36z","body":"**issue still occurs on oc6 beta2.**\r\n\r\nit is  a bad way to calculate total space available in <code>getstorageinfo</code> method in  <code>./lib/private/helper.php</code>       \r\n```php\r\n        /**\r\n         * calculate the disc space for the given path\r\n         *\r\n         * @param string $path\r\n         * @return array\r\n         */\r\n        public static function getstorageinfo($path) {\r\n                $rootinfo = \\oc\\files\\filesystem::getfileinfo($path);\r\n                $used = $rootinfo['size'];\r\n                if ($used < 0) {\r\n                        $used = 0;\r\n                }\r\n                $free = \\oc\\files\\filesystem::free_space($path);\r\n                if ($free >= 0) {\r\n                        $total = $free + $used;\r\n                } else {\r\n                        $total = $free; //either unknown or unlimited\r\n                }\r\n                if ($total > 0) {\r\n                        // prevent division by zero or error codes (negative values)\r\n                        $relative = round(($used / $total) * 10000) / 100;\r\n                } else {\r\n                        $relative = 0;\r\n                }\r\n\r\n                return array('free' => $free, 'used' => $used, 'total' => $total, 'relative' => $relative);\r\n        }\r\n```\r\n \r\n\"used\" size is calculated with internal path and mount point (external storage) in <code>getfileinfo</code> method\r\n\"free\" size is only on internal path (<code>@disk_free_space</code> php method). free size on mount points is not take by  the php function.\r\n**\"total\" size is wrong and  the relative value is wrong also.**"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/27900089","html_url":"https://github.com/owncloud/core/issues/4526#issuecomment-27900089","issue_url":"https://api.github.com/repos/owncloud/core/issues/4526","id":27900089,"user":{"login":"basni","id":1932169,"avatar_url":"https://gravatar.com/avatar/0158ac8ac21f8721ef8f12532681da97?d=https%3a%2f%2fidenticons.github.com%2fd8b4d574af1c7e94a8d9c3197010e162.png&r=x","gravatar_id":"0158ac8ac21f8721ef8f12532681da97","url":"https://api.github.com/users/basni","html_url":"https://github.com/basni","followers_url":"https://api.github.com/users/basni/followers","following_url":"https://api.github.com/users/basni/following{/other_user}","gists_url":"https://api.github.com/users/basni/gists{/gist_id}","starred_url":"https://api.github.com/users/basni/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/basni/subscriptions","organizations_url":"https://api.github.com/users/basni/orgs","repos_url":"https://api.github.com/users/basni/repos","events_url":"https://api.github.com/users/basni/events{/privacy}","received_events_url":"https://api.github.com/users/basni/received_events","type":"user","site_admin":false},"created_at":"2013-11-06t18:31:43z","updated_at":"2013-11-06t18:31:43z","body":"same issue with total size in the oc client 1.4.2. total size is wrong and also relative information."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/28970717","html_url":"https://github.com/owncloud/core/issues/4526#issuecomment-28970717","issue_url":"https://api.github.com/repos/owncloud/core/issues/4526","id":28970717,"user":{"login":"pvince81","id":277525,"avatar_url":"https://gravatar.com/avatar/e446b529679416eb70eafb4ca4da5bbe?d=https%3a%2f%2fidenticons.github.com%2f89d7c394e6dcdf87a91c75ac3b2ccbe8.png&r=x","gravatar_id":"e446b529679416eb70eafb4ca4da5bbe","url":"https://api.github.com/users/pvince81","html_url":"https://github.com/pvince81","followers_url":"https://api.github.com/users/pvince81/followers","following_url":"https://api.github.com/users/pvince81/following{/other_user}","gists_url":"https://api.github.com/users/pvince81/gists{/gist_id}","starred_url":"https://api.github.com/users/pvince81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvince81/subscriptions","organizations_url":"https://api.github.com/users/pvince81/orgs","repos_url":"https://api.github.com/users/pvince81/repos","events_url":"https://api.github.com/users/pvince81/events{/privacy}","received_events_url":"https://api.github.com/users/pvince81/received_events","type":"user","site_admin":false},"created_at":"2013-11-21t09:52:40z","updated_at":"2013-11-21t09:52:40z","body":"please try again with oc6 beta 5. external storage should now be excluded from total size now as per as per https://github.com/owncloud/core/pull/5927"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/28970744","html_url":"https://github.com/owncloud/core/issues/4526#issuecomment-28970744","issue_url":"https://api.github.com/repos/owncloud/core/issues/4526","id":28970744,"user":{"login":"pvince81","id":277525,"avatar_url":"https://gravatar.com/avatar/e446b529679416eb70eafb4ca4da5bbe?d=https%3a%2f%2fidenticons.github.com%2f89d7c394e6dcdf87a91c75ac3b2ccbe8.png&r=x","gravatar_id":"e446b529679416eb70eafb4ca4da5bbe","url":"https://api.github.com/users/pvince81","html_url":"https://github.com/pvince81","followers_url":"https://api.github.com/users/pvince81/followers","following_url":"https://api.github.com/users/pvince81/following{/other_user}","gists_url":"https://api.github.com/users/pvince81/gists{/gist_id}","starred_url":"https://api.github.com/users/pvince81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvince81/subscriptions","organizations_url":"https://api.github.com/users/pvince81/orgs","repos_url":"https://api.github.com/users/pvince81/repos","events_url":"https://api.github.com/users/pvince81/events{/privacy}","received_events_url":"https://api.github.com/users/pvince81/received_events","type":"user","site_admin":false},"created_at":"2013-11-21t09:53:05z","updated_at":"2013-11-21t09:53:05z","body":"i'm closing this now. feel free to reopen if the issue still occurs for you in oc6 beta 5. thanks."}]