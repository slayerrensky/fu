[{"url":"https://api.github.com/repos/owncloud/core/issues/comments/30141356","html_url":"https://github.com/owncloud/core/issues/6265#issuecomment-30141356","issue_url":"https://api.github.com/repos/owncloud/core/issues/6265","id":30141356,"user":{"login":"pvince81","id":277525,"avatar_url":"https://gravatar.com/avatar/e446b529679416eb70eafb4ca4da5bbe?d=https%3a%2f%2fidenticons.github.com%2f89d7c394e6dcdf87a91c75ac3b2ccbe8.png&r=x","gravatar_id":"e446b529679416eb70eafb4ca4da5bbe","url":"https://api.github.com/users/pvince81","html_url":"https://github.com/pvince81","followers_url":"https://api.github.com/users/pvince81/followers","following_url":"https://api.github.com/users/pvince81/following{/other_user}","gists_url":"https://api.github.com/users/pvince81/gists{/gist_id}","starred_url":"https://api.github.com/users/pvince81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvince81/subscriptions","organizations_url":"https://api.github.com/users/pvince81/orgs","repos_url":"https://api.github.com/users/pvince81/repos","events_url":"https://api.github.com/users/pvince81/events{/privacy}","received_events_url":"https://api.github.com/users/pvince81/received_events","type":"user","site_admin":false},"created_at":"2013-12-09t15:34:31z","updated_at":"2013-12-09t15:34:31z","body":"at step 8 (before creating the second share) the file permissions were \"7\" and the dir permissions were \"7\" in the dom attributes.\r\n\r\nat the end the dir permissions were still \"7\" but the file permissions became \"31\" in the dom."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/30143197","html_url":"https://github.com/owncloud/core/issues/6265#issuecomment-30143197","issue_url":"https://api.github.com/repos/owncloud/core/issues/6265","id":30143197,"user":{"login":"pvince81","id":277525,"avatar_url":"https://gravatar.com/avatar/e446b529679416eb70eafb4ca4da5bbe?d=https%3a%2f%2fidenticons.github.com%2f89d7c394e6dcdf87a91c75ac3b2ccbe8.png&r=x","gravatar_id":"e446b529679416eb70eafb4ca4da5bbe","url":"https://api.github.com/users/pvince81","html_url":"https://github.com/pvince81","followers_url":"https://api.github.com/users/pvince81/followers","following_url":"https://api.github.com/users/pvince81/following{/other_user}","gists_url":"https://api.github.com/users/pvince81/gists{/gist_id}","starred_url":"https://api.github.com/users/pvince81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvince81/subscriptions","organizations_url":"https://api.github.com/users/pvince81/orgs","repos_url":"https://api.github.com/users/pvince81/repos","events_url":"https://api.github.com/users/pvince81/events{/privacy}","received_events_url":"https://api.github.com/users/pvince81/received_events","type":"user","site_admin":false},"created_at":"2013-12-09t15:53:36z","updated_at":"2013-12-09t15:53:36z","body":"permissions as read from the share table are \"7\"\r\n\r\narriving at apps/files_sharing/lib/share/file.php:73 in formatitems()\r\nthere are only two items in the list (for some reason their indices are 2 and 3, maybe the row ids)\r\n\r\n    // => eval: $items[2]\r\n    $evalresult                      = (array[19]);\r\n      $evalresult->id                = (int) '2';\r\n      $evalresult->item_type         = (string[6]) 'folder';\r\n      $evalresult->item_source       = (string[2]) '92';\r\n      $evalresult->item_target       = (string[3]) '/92';\r\n      $evalresult->parent            = (null);\r\n      $evalresult->share_type        = (int) '0';\r\n      $evalresult->share_with        = (string[5]) 'user2';\r\n      $evalresult->uid_owner         = (string[5]) 'user1';\r\n      $evalresult->file_source       = (int) '92';\r\n      $evalresult->path              = (string[14]) 'files/nodelete';\r\n      $evalresult->file_target       = (string[9]) '/nodelete';\r\n      $evalresult->permissions       = (int) '7';\r\n      $evalresult->stime             = (int) '1386602427';\r\n      $evalresult->expiration        = (null);\r\n      $evalresult->token             = (null);\r\n      $evalresult->storage           = (int) '2';\r\n      $evalresult->mail_send         = (string[1]) '0';\r\n      $evalresult->share_with_displayname = (string[5]) 'user2';\r\n      $evalresult->displayname_owner = (string[5]) 'user1';\r\n\r\n    // => eval: $items[3]\r\n    $evalresult                      = (array[19]);\r\n      $evalresult->id                = (int) '3';\r\n      $evalresult->item_type         = (string[6]) 'folder';\r\n      $evalresult->item_source       = (string[3]) '105';\r\n      $evalresult->item_target       = (string[4]) '/105';\r\n      $evalresult->parent            = (null);\r\n      $evalresult->share_type        = (int) '0';\r\n      $evalresult->share_with        = (string[5]) 'user2';\r\n      $evalresult->uid_owner         = (string[5]) 'user1';\r\n      $evalresult->file_source       = (int) '105';\r\n      $evalresult->path              = (string[17]) 'files/normalshare';\r\n      $evalresult->file_target       = (string[12]) '/normalshare';\r\n      $evalresult->permissions       = (int) '31';\r\n      $evalresult->stime             = (int) '1386603016';\r\n      $evalresult->expiration        = (null);\r\n      $evalresult->token             = (null);\r\n      $evalresult->storage           = (int) '2';\r\n      $evalresult->mail_send         = (string[1]) '0';\r\n      $evalresult->share_with_displayname = (string[5]) 'user2';\r\n      $evalresult->displayname_owner = (string[5]) 'user1';\r\n    \r\nthen, this code is run, with a suspicious comment:\r\n\r\n\t\tif ($format == self::format_shared_storage) {\r\n\t\t\t// only 1 item should come through for this format call\r\n\t\t\treturn array(\r\n\t\t\t\t'parent' => $items[key($items)]['parent'],\r\n\t\t\t\t'path' => $items[key($items)]['path'],\r\n\t\t\t\t'storage' => $items[key($items)]['storage'],\r\n\t\t\t\t'permissions' => $items[key($items)]['permissions'],\r\n\t\t\t\t'uid_owner' => $items[key($items)]['uid_owner']\r\n\t\t\t);\r\n\t\t}\r\n\r\nkey($items) evaluates to 3, which means that the entry with the \"31\" permissions will be returned...\r\n\r\ncontinuing to debug it seems to arrive in apps/files_sharing/lib/permissions.php: 90 getdirectorypermissions() where this \"31\" is written as permission of the file in question instead of the real permission:\r\n"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/30144163","html_url":"https://github.com/owncloud/core/issues/6265#issuecomment-30144163","issue_url":"https://api.github.com/repos/owncloud/core/issues/6265","id":30144163,"user":{"login":"pvince81","id":277525,"avatar_url":"https://gravatar.com/avatar/e446b529679416eb70eafb4ca4da5bbe?d=https%3a%2f%2fidenticons.github.com%2f89d7c394e6dcdf87a91c75ac3b2ccbe8.png&r=x","gravatar_id":"e446b529679416eb70eafb4ca4da5bbe","url":"https://api.github.com/users/pvince81","html_url":"https://github.com/pvince81","followers_url":"https://api.github.com/users/pvince81/followers","following_url":"https://api.github.com/users/pvince81/following{/other_user}","gists_url":"https://api.github.com/users/pvince81/gists{/gist_id}","starred_url":"https://api.github.com/users/pvince81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvince81/subscriptions","organizations_url":"https://api.github.com/users/pvince81/orgs","repos_url":"https://api.github.com/users/pvince81/repos","events_url":"https://api.github.com/users/pvince81/events{/privacy}","received_events_url":"https://api.github.com/users/pvince81/received_events","type":"user","site_admin":false},"created_at":"2013-12-09t16:03:15z","updated_at":"2013-12-09t16:03:15z","body":"for some reason the requested format is always 0 (`format_shared_storage`).\r\ni'd expect it to sometimes be `format_get_folder_contents`."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/30144169","html_url":"https://github.com/owncloud/core/issues/6265#issuecomment-30144169","issue_url":"https://api.github.com/repos/owncloud/core/issues/6265","id":30144169,"user":{"login":"pvince81","id":277525,"avatar_url":"https://gravatar.com/avatar/e446b529679416eb70eafb4ca4da5bbe?d=https%3a%2f%2fidenticons.github.com%2f89d7c394e6dcdf87a91c75ac3b2ccbe8.png&r=x","gravatar_id":"e446b529679416eb70eafb4ca4da5bbe","url":"https://api.github.com/users/pvince81","html_url":"https://github.com/pvince81","followers_url":"https://api.github.com/users/pvince81/followers","following_url":"https://api.github.com/users/pvince81/following{/other_user}","gists_url":"https://api.github.com/users/pvince81/gists{/gist_id}","starred_url":"https://api.github.com/users/pvince81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvince81/subscriptions","organizations_url":"https://api.github.com/users/pvince81/orgs","repos_url":"https://api.github.com/users/pvince81/repos","events_url":"https://api.github.com/users/pvince81/events{/privacy}","received_events_url":"https://api.github.com/users/pvince81/received_events","type":"user","site_admin":false},"created_at":"2013-12-09t16:03:24z","updated_at":"2013-12-09t16:03:24z","body":"do you have any idea about this @schiesbn ?"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/30144810","html_url":"https://github.com/owncloud/core/issues/6265#issuecomment-30144810","issue_url":"https://api.github.com/repos/owncloud/core/issues/6265","id":30144810,"user":{"login":"pvince81","id":277525,"avatar_url":"https://gravatar.com/avatar/e446b529679416eb70eafb4ca4da5bbe?d=https%3a%2f%2fidenticons.github.com%2f89d7c394e6dcdf87a91c75ac3b2ccbe8.png&r=x","gravatar_id":"e446b529679416eb70eafb4ca4da5bbe","url":"https://api.github.com/users/pvince81","html_url":"https://github.com/pvince81","followers_url":"https://api.github.com/users/pvince81/followers","following_url":"https://api.github.com/users/pvince81/following{/other_user}","gists_url":"https://api.github.com/users/pvince81/gists{/gist_id}","starred_url":"https://api.github.com/users/pvince81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvince81/subscriptions","organizations_url":"https://api.github.com/users/pvince81/orgs","repos_url":"https://api.github.com/users/pvince81/repos","events_url":"https://api.github.com/users/pvince81/events{/privacy}","received_events_url":"https://api.github.com/users/pvince81/received_events","type":"user","site_admin":false},"created_at":"2013-12-09t16:10:01z","updated_at":"2013-12-09t16:10:01z","body":"it seems there is an issue with the sql query. instead of retrieving the sharing info of the given fileid, it still retrieves more than one result, even though the fileid is specified in the where clause. there's an inner join, maybe that's the trouble.\r\nnote that i'm currently using sqlite."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/30147335","html_url":"https://github.com/owncloud/core/issues/6265#issuecomment-30147335","issue_url":"https://api.github.com/repos/owncloud/core/issues/6265","id":30147335,"user":{"login":"pvince81","id":277525,"avatar_url":"https://gravatar.com/avatar/e446b529679416eb70eafb4ca4da5bbe?d=https%3a%2f%2fidenticons.github.com%2f89d7c394e6dcdf87a91c75ac3b2ccbe8.png&r=x","gravatar_id":"e446b529679416eb70eafb4ca4da5bbe","url":"https://api.github.com/users/pvince81","html_url":"https://github.com/pvince81","followers_url":"https://api.github.com/users/pvince81/followers","following_url":"https://api.github.com/users/pvince81/following{/other_user}","gists_url":"https://api.github.com/users/pvince81/gists{/gist_id}","starred_url":"https://api.github.com/users/pvince81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvince81/subscriptions","organizations_url":"https://api.github.com/users/pvince81/orgs","repos_url":"https://api.github.com/users/pvince81/repos","events_url":"https://api.github.com/users/pvince81/events{/privacy}","received_events_url":"https://api.github.com/users/pvince81/received_events","type":"user","site_admin":false},"created_at":"2013-12-09t16:35:21z","updated_at":"2013-12-09t16:35:21z","body":"it also happens with mysql.\r\nhere is the query that returns two results instead of one:\r\n\r\n    select `oc_share`.`id`, `item_type`, `item_source`, `item_target`, `oc_share`.`parent`, `share_type`, `share_with`, `uid_owner`, `file_source`, `path`, `file_target`, `permissions`, `stime`, `expiration`, `token`, `storage`, `mail_send` from oc_share\r\n    inner join `oc_filecache` on `file_source` = `oc_filecache`.`fileid` and `share_type` in (0,1,2) and `share_with` in ('user2') and `uid_owner` != 'user2' and ( `file_source` = 13 or `item_type` in ('folder'));\r\n\r\n    +----+-----------+-------------+-------------+--------+------------+------------+-----------+-------------+-------------------+--------------+-------------+------------+------------+-------+---------+-----------+\r\n    | id | item_type | item_source | item_target | parent | share_type | share_with | uid_owner | file_source | path              | file_target  | permissions | stime      | expiration | token | storage | mail_send |\r\n    +----+-----------+-------------+-------------+--------+------------+------------+-----------+-------------+-------------------+--------------+-------------+------------+------------+-------+---------+-----------+\r\n    |  1 | folder    | 13          | /13         |   null |          0 | user2      | user1     |          13 | files/nodelete    | /nodelete    |           7 | 1386605964 | null       | null  |       2 |         0 |\r\n    |  3 | folder    | 36          | /36         |   null |          0 | user2      | user1     |          36 | files/normalshare | /normalshare |          31 | 1386606035 | null       | null  |       2 |         0 |\r\n    +----+-----------+-------------+-------------+--------+------------+------------+-----------+-------------+-------------------+--------------+-------------+------------+------------+-------+---------+-----------+\r\n\r\nnote: ids won't match the test case above because i reset the db in between."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/30147611","html_url":"https://github.com/owncloud/core/issues/6265#issuecomment-30147611","issue_url":"https://api.github.com/repos/owncloud/core/issues/6265","id":30147611,"user":{"login":"pvince81","id":277525,"avatar_url":"https://gravatar.com/avatar/e446b529679416eb70eafb4ca4da5bbe?d=https%3a%2f%2fidenticons.github.com%2f89d7c394e6dcdf87a91c75ac3b2ccbe8.png&r=x","gravatar_id":"e446b529679416eb70eafb4ca4da5bbe","url":"https://api.github.com/users/pvince81","html_url":"https://github.com/pvince81","followers_url":"https://api.github.com/users/pvince81/followers","following_url":"https://api.github.com/users/pvince81/following{/other_user}","gists_url":"https://api.github.com/users/pvince81/gists{/gist_id}","starred_url":"https://api.github.com/users/pvince81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvince81/subscriptions","organizations_url":"https://api.github.com/users/pvince81/orgs","repos_url":"https://api.github.com/users/pvince81/repos","events_url":"https://api.github.com/users/pvince81/events{/privacy}","received_events_url":"https://api.github.com/users/pvince81/received_events","type":"user","site_admin":false},"created_at":"2013-12-09t16:37:49z","updated_at":"2013-12-09t16:37:49z","body":"the last part is suspicious: `( `file_source` = 13 or `item_type` in ('folder'))`\r\nif the share type is 'folder' it will simply ignore the id.\r\nneed to find out why..."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/30148464","html_url":"https://github.com/owncloud/core/issues/6265#issuecomment-30148464","issue_url":"https://api.github.com/repos/owncloud/core/issues/6265","id":30148464,"user":{"login":"schiesbn","id":1589737,"avatar_url":"https://gravatar.com/avatar/8912b598c7b32dd25b87fd168e0b06b2?d=https%3a%2f%2fidenticons.github.com%2f0a323047dbe8329db30eae8dbe96e55e.png&r=x","gravatar_id":"8912b598c7b32dd25b87fd168e0b06b2","url":"https://api.github.com/users/schiesbn","html_url":"https://github.com/schiesbn","followers_url":"https://api.github.com/users/schiesbn/followers","following_url":"https://api.github.com/users/schiesbn/following{/other_user}","gists_url":"https://api.github.com/users/schiesbn/gists{/gist_id}","starred_url":"https://api.github.com/users/schiesbn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schiesbn/subscriptions","organizations_url":"https://api.github.com/users/schiesbn/orgs","repos_url":"https://api.github.com/users/schiesbn/repos","events_url":"https://api.github.com/users/schiesbn/events{/privacy}","received_events_url":"https://api.github.com/users/schiesbn/received_events","type":"user","site_admin":false},"created_at":"2013-12-09t16:46:54z","updated_at":"2013-12-09t16:47:12z","body":"> the last part is suspicious: `( `file_source` = 13 or `item_type` in ('folder'))`\r\n\r\ni stumbled about the same code last week and was also surprised about the logic. since it doesn't effected the issue i worked on i just kept the code as it is.\r\n\r\nwhile debugging it, keep in mind that this getitems() method is used for everything, calendars, contacts, files, whatever..."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/30148685","html_url":"https://github.com/owncloud/core/issues/6265#issuecomment-30148685","issue_url":"https://api.github.com/repos/owncloud/core/issues/6265","id":30148685,"user":{"login":"pvince81","id":277525,"avatar_url":"https://gravatar.com/avatar/e446b529679416eb70eafb4ca4da5bbe?d=https%3a%2f%2fidenticons.github.com%2f89d7c394e6dcdf87a91c75ac3b2ccbe8.png&r=x","gravatar_id":"e446b529679416eb70eafb4ca4da5bbe","url":"https://api.github.com/users/pvince81","html_url":"https://github.com/pvince81","followers_url":"https://api.github.com/users/pvince81/followers","following_url":"https://api.github.com/users/pvince81/following{/other_user}","gists_url":"https://api.github.com/users/pvince81/gists{/gist_id}","starred_url":"https://api.github.com/users/pvince81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvince81/subscriptions","organizations_url":"https://api.github.com/users/pvince81/orgs","repos_url":"https://api.github.com/users/pvince81/repos","events_url":"https://api.github.com/users/pvince81/events{/privacy}","received_events_url":"https://api.github.com/users/pvince81/received_events","type":"user","site_admin":false},"created_at":"2013-12-09t16:49:24z","updated_at":"2013-12-09t16:49:24z","body":"the reason i found is that the `$includecollections` parameter is true in `apps/files_sharing/lib/permissions.php` in the `get` function. if i set it to false it works correctly...\r\n\r\nif we don't want to touch that method for the reasons you mentionned, we can move that logic into the calling method which is `getdirectorypermissions`.\r\n\r\ndo you have any clue about that `$includecollections` argument and why it is specified here ?"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/30150163","html_url":"https://github.com/owncloud/core/issues/6265#issuecomment-30150163","issue_url":"https://api.github.com/repos/owncloud/core/issues/6265","id":30150163,"user":{"login":"schiesbn","id":1589737,"avatar_url":"https://gravatar.com/avatar/8912b598c7b32dd25b87fd168e0b06b2?d=https%3a%2f%2fidenticons.github.com%2f0a323047dbe8329db30eae8dbe96e55e.png&r=x","gravatar_id":"8912b598c7b32dd25b87fd168e0b06b2","url":"https://api.github.com/users/schiesbn","html_url":"https://github.com/schiesbn","followers_url":"https://api.github.com/users/schiesbn/followers","following_url":"https://api.github.com/users/schiesbn/following{/other_user}","gists_url":"https://api.github.com/users/schiesbn/gists{/gist_id}","starred_url":"https://api.github.com/users/schiesbn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schiesbn/subscriptions","organizations_url":"https://api.github.com/users/schiesbn/orgs","repos_url":"https://api.github.com/users/schiesbn/repos","events_url":"https://api.github.com/users/schiesbn/events{/privacy}","received_events_url":"https://api.github.com/users/schiesbn/received_events","type":"user","site_admin":false},"created_at":"2013-12-09t17:04:19z","updated_at":"2013-12-09t17:04:53z","body":"> if we don't want to touch that method for the reasons you mentionned, we can move that logic into the calling method \r\n\r\nif this is feasible. of course you can also fix getitems() if it contains a bug. you only need to make sure that it doesn't break other stuff which is quite easy with this function. that's why i prefer not to touch it if i haven't to.\r\n\r\n> do you have any clue about that $includecollections argument and why it is specified here ?\r\n\r\naccording to the documentation it includes collections like folders, calendars, address books in addition to single shares, if i understand it correctly. looking at the query above this means something like \"give me this specific share and all collections\". at the moment i'm not sure if it makes sense for getdirectorypermissions(). maybe this is needed if the directory you search for isn't shared explicitly but part of a collection?"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/30150594","html_url":"https://github.com/owncloud/core/issues/6265#issuecomment-30150594","issue_url":"https://api.github.com/repos/owncloud/core/issues/6265","id":30150594,"user":{"login":"pvince81","id":277525,"avatar_url":"https://gravatar.com/avatar/e446b529679416eb70eafb4ca4da5bbe?d=https%3a%2f%2fidenticons.github.com%2f89d7c394e6dcdf87a91c75ac3b2ccbe8.png&r=x","gravatar_id":"e446b529679416eb70eafb4ca4da5bbe","url":"https://api.github.com/users/pvince81","html_url":"https://github.com/pvince81","followers_url":"https://api.github.com/users/pvince81/followers","following_url":"https://api.github.com/users/pvince81/following{/other_user}","gists_url":"https://api.github.com/users/pvince81/gists{/gist_id}","starred_url":"https://api.github.com/users/pvince81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvince81/subscriptions","organizations_url":"https://api.github.com/users/pvince81/orgs","repos_url":"https://api.github.com/users/pvince81/repos","events_url":"https://api.github.com/users/pvince81/events{/privacy}","received_events_url":"https://api.github.com/users/pvince81/received_events","type":"user","site_admin":false},"created_at":"2013-12-09t17:08:46z","updated_at":"2013-12-09t17:08:46z","body":"i don't have much understanding of sharing besides files and folders, so\ni'd say let's keep the change to the minimum to prevent side-effects,\nwhich my fix above should be able to do (passing false instead of true\nfor $includecollections, but in a separate private function)"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/30150968","html_url":"https://github.com/owncloud/core/issues/6265#issuecomment-30150968","issue_url":"https://api.github.com/repos/owncloud/core/issues/6265","id":30150968,"user":{"login":"schiesbn","id":1589737,"avatar_url":"https://gravatar.com/avatar/8912b598c7b32dd25b87fd168e0b06b2?d=https%3a%2f%2fidenticons.github.com%2f0a323047dbe8329db30eae8dbe96e55e.png&r=x","gravatar_id":"8912b598c7b32dd25b87fd168e0b06b2","url":"https://api.github.com/users/schiesbn","html_url":"https://github.com/schiesbn","followers_url":"https://api.github.com/users/schiesbn/followers","following_url":"https://api.github.com/users/schiesbn/following{/other_user}","gists_url":"https://api.github.com/users/schiesbn/gists{/gist_id}","starred_url":"https://api.github.com/users/schiesbn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schiesbn/subscriptions","organizations_url":"https://api.github.com/users/schiesbn/orgs","repos_url":"https://api.github.com/users/schiesbn/repos","events_url":"https://api.github.com/users/schiesbn/events{/privacy}","received_events_url":"https://api.github.com/users/schiesbn/received_events","type":"user","site_admin":false},"created_at":"2013-12-09t17:12:46z","updated_at":"2013-12-09t17:12:46z","body":"don't forget to try it with sub folders, e.g. create a folder structure like /folder/subfolder, share folder/ with some permissions and than check the result of getdirectorypermissions() for /shared/folder/subfolder. i think that's a case where includecollections could make a difference."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/30152530","html_url":"https://github.com/owncloud/core/issues/6265#issuecomment-30152530","issue_url":"https://api.github.com/repos/owncloud/core/issues/6265","id":30152530,"user":{"login":"pvince81","id":277525,"avatar_url":"https://gravatar.com/avatar/e446b529679416eb70eafb4ca4da5bbe?d=https%3a%2f%2fidenticons.github.com%2f89d7c394e6dcdf87a91c75ac3b2ccbe8.png&r=x","gravatar_id":"e446b529679416eb70eafb4ca4da5bbe","url":"https://api.github.com/users/pvince81","html_url":"https://github.com/pvince81","followers_url":"https://api.github.com/users/pvince81/followers","following_url":"https://api.github.com/users/pvince81/following{/other_user}","gists_url":"https://api.github.com/users/pvince81/gists{/gist_id}","starred_url":"https://api.github.com/users/pvince81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvince81/subscriptions","organizations_url":"https://api.github.com/users/pvince81/orgs","repos_url":"https://api.github.com/users/pvince81/repos","events_url":"https://api.github.com/users/pvince81/events{/privacy}","received_events_url":"https://api.github.com/users/pvince81/received_events","type":"user","site_admin":false},"created_at":"2013-12-09t17:29:13z","updated_at":"2013-12-09t17:29:13z","body":"@schiesbn i've just tested my fix with subfolder and the permissions seem to be correct.\r\nafter creating a subdir, i can't delete it (since the permission is not same), same for the files inside that subdir.\r\nplease help testing the pr on your side as well. thanks."}]