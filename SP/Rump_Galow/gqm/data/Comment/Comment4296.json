[{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22007078","html_url":"https://github.com/owncloud/core/issues/4296#issuecomment-22007078","issue_url":"https://api.github.com/repos/owncloud/core/issues/4296","id":22007078,"user":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false},"created_at":"2013-08-02t13:57:02z","updated_at":"2013-08-02t13:57:02z","body":"@schiesbn "},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22008567","html_url":"https://github.com/owncloud/core/issues/4296#issuecomment-22008567","issue_url":"https://api.github.com/repos/owncloud/core/issues/4296","id":22008567,"user":{"login":"schiesbn","id":1589737,"avatar_url":"https://gravatar.com/avatar/8912b598c7b32dd25b87fd168e0b06b2?d=https%3a%2f%2fidenticons.github.com%2f0a323047dbe8329db30eae8dbe96e55e.png&r=x","gravatar_id":"8912b598c7b32dd25b87fd168e0b06b2","url":"https://api.github.com/users/schiesbn","html_url":"https://github.com/schiesbn","followers_url":"https://api.github.com/users/schiesbn/followers","following_url":"https://api.github.com/users/schiesbn/following{/other_user}","gists_url":"https://api.github.com/users/schiesbn/gists{/gist_id}","starred_url":"https://api.github.com/users/schiesbn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schiesbn/subscriptions","organizations_url":"https://api.github.com/users/schiesbn/orgs","repos_url":"https://api.github.com/users/schiesbn/repos","events_url":"https://api.github.com/users/schiesbn/events{/privacy}","received_events_url":"https://api.github.com/users/schiesbn/received_events","type":"user","site_admin":false},"created_at":"2013-08-02t14:20:01z","updated_at":"2013-08-02t14:20:01z","body":"@tanghus if i'm correct than the contact photo is stored in the database. i don't think it makes much sense to encrypt the photo in this case. i would suggest to update the contacts app and disable/enable the file poxys bofore writing or reading a image from the hard disk, here is an example: https://github.com/owncloud/core/blob/master/apps/files_versions/lib/versions.php#l128"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22014707","html_url":"https://github.com/owncloud/core/issues/4296#issuecomment-22014707","issue_url":"https://api.github.com/repos/owncloud/core/issues/4296","id":22014707,"user":{"login":"tanghus","id":533222,"avatar_url":"https://gravatar.com/avatar/e625b634822713b2e346ff7c67d26775?d=https%3a%2f%2fidenticons.github.com%2f6d9c90af1c12f5a88e4d5f216bbc1979.png&r=x","gravatar_id":"e625b634822713b2e346ff7c67d26775","url":"https://api.github.com/users/tanghus","html_url":"https://github.com/tanghus","followers_url":"https://api.github.com/users/tanghus/followers","following_url":"https://api.github.com/users/tanghus/following{/other_user}","gists_url":"https://api.github.com/users/tanghus/gists{/gist_id}","starred_url":"https://api.github.com/users/tanghus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tanghus/subscriptions","organizations_url":"https://api.github.com/users/tanghus/orgs","repos_url":"https://api.github.com/users/tanghus/repos","events_url":"https://api.github.com/users/tanghus/events{/privacy}","received_events_url":"https://api.github.com/users/tanghus/received_events","type":"user","site_admin":false},"created_at":"2013-08-02t15:49:46z","updated_at":"2013-08-02t15:49:46z","body":"@schiesbn the problem is that the files shouldn't appear in the oc filesystem at all. i use oc_cache, and on my install, they're in the cache folder, not the files folder.\r\n@boerny can you check in the physical/real file system in the data dir, where they appear in the hierarchy?"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22014738","html_url":"https://github.com/owncloud/core/issues/4296#issuecomment-22014738","issue_url":"https://api.github.com/repos/owncloud/core/issues/4296","id":22014738,"user":{"login":"tanghus","id":533222,"avatar_url":"https://gravatar.com/avatar/e625b634822713b2e346ff7c67d26775?d=https%3a%2f%2fidenticons.github.com%2f6d9c90af1c12f5a88e4d5f216bbc1979.png&r=x","gravatar_id":"e625b634822713b2e346ff7c67d26775","url":"https://api.github.com/users/tanghus","html_url":"https://github.com/tanghus","followers_url":"https://api.github.com/users/tanghus/followers","following_url":"https://api.github.com/users/tanghus/following{/other_user}","gists_url":"https://api.github.com/users/tanghus/gists{/gist_id}","starred_url":"https://api.github.com/users/tanghus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tanghus/subscriptions","organizations_url":"https://api.github.com/users/tanghus/orgs","repos_url":"https://api.github.com/users/tanghus/repos","events_url":"https://api.github.com/users/tanghus/events{/privacy}","received_events_url":"https://api.github.com/users/tanghus/received_events","type":"user","site_admin":false},"created_at":"2013-08-02t15:50:20z","updated_at":"2013-08-02t15:50:20z","body":"that's why i tagged @bartv2 in the original issue :)"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22024322","html_url":"https://github.com/owncloud/core/issues/4296#issuecomment-22024322","issue_url":"https://api.github.com/repos/owncloud/core/issues/4296","id":22024322,"user":{"login":"schiesbn","id":1589737,"avatar_url":"https://gravatar.com/avatar/8912b598c7b32dd25b87fd168e0b06b2?d=https%3a%2f%2fidenticons.github.com%2f0a323047dbe8329db30eae8dbe96e55e.png&r=x","gravatar_id":"8912b598c7b32dd25b87fd168e0b06b2","url":"https://api.github.com/users/schiesbn","html_url":"https://github.com/schiesbn","followers_url":"https://api.github.com/users/schiesbn/followers","following_url":"https://api.github.com/users/schiesbn/following{/other_user}","gists_url":"https://api.github.com/users/schiesbn/gists{/gist_id}","starred_url":"https://api.github.com/users/schiesbn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schiesbn/subscriptions","organizations_url":"https://api.github.com/users/schiesbn/orgs","repos_url":"https://api.github.com/users/schiesbn/repos","events_url":"https://api.github.com/users/schiesbn/events{/privacy}","received_events_url":"https://api.github.com/users/schiesbn/received_events","type":"user","site_admin":false},"created_at":"2013-08-02t18:27:25z","updated_at":"2013-08-02t18:31:25z","body":"@tanghus the problem is, that it get passed through the encryption app which expect that your work on \"real\" files and therefore always operates within the files folder and also uses the files-folder hierarchy to store the keys. all this doesn't work for the contacts app.\r\n\r\nif i understand the contacts app correctly than the pictures are cached in the cache folder, but the real storage is the oc_contacts_cards_properties table, right? at least on my system the contact pictures are still there if i delete the cache folder, so i assume that the db is the main storage. does the contacts pictures work for you with encryption enabled, beside the etmp issue? for me it doesn't.\r\n\r\nyou don't want to store the contact pictures encrypted in the database, because this will not only lead to problems during storage but also to problem if you load the picture again. therefore i would really suggest to turn proxys off for these filesystem operations."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22037480","html_url":"https://github.com/owncloud/core/issues/4296#issuecomment-22037480","issue_url":"https://api.github.com/repos/owncloud/core/issues/4296","id":22037480,"user":{"login":"tanghus","id":533222,"avatar_url":"https://gravatar.com/avatar/e625b634822713b2e346ff7c67d26775?d=https%3a%2f%2fidenticons.github.com%2f6d9c90af1c12f5a88e4d5f216bbc1979.png&r=x","gravatar_id":"e625b634822713b2e346ff7c67d26775","url":"https://api.github.com/users/tanghus","html_url":"https://github.com/tanghus","followers_url":"https://api.github.com/users/tanghus/followers","following_url":"https://api.github.com/users/tanghus/following{/other_user}","gists_url":"https://api.github.com/users/tanghus/gists{/gist_id}","starred_url":"https://api.github.com/users/tanghus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tanghus/subscriptions","organizations_url":"https://api.github.com/users/tanghus/orgs","repos_url":"https://api.github.com/users/tanghus/repos","events_url":"https://api.github.com/users/tanghus/events{/privacy}","received_events_url":"https://api.github.com/users/tanghus/received_events","type":"user","site_admin":false},"created_at":"2013-08-02t21:36:50z","updated_at":"2013-08-02t21:36:50z","body":"> if i understand the contacts app correctly than the pictures are cached in the cache folder, but the real storage is the oc_contacts_cards_properties table, right? \r\n\r\nno the *thumbnails* are cached in the cache folder, not in the files folder, but for some reason they show up in the oc filesystem for @boerny - that's the issue.\r\n\r\n> at least on my system the contact pictures are still there if i delete the cache folder, so i assume that the db is the main storage.\r\n\r\nwell they get recreated if you delete them.\r\n\r\n> therefore i would really suggest to turn proxys off for these filesystem operations.\r\n\r\nthe contacts app doesn't do any filesystem operations for the the thumbnails. it uses oc_cache as mentioned above: https://github.com/owncloud/apps/blob/stable5/contacts/lib/app.php#l322"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22050804","html_url":"https://github.com/owncloud/core/issues/4296#issuecomment-22050804","issue_url":"https://api.github.com/repos/owncloud/core/issues/4296","id":22050804,"user":{"login":"schiesbn","id":1589737,"avatar_url":"https://gravatar.com/avatar/8912b598c7b32dd25b87fd168e0b06b2?d=https%3a%2f%2fidenticons.github.com%2f0a323047dbe8329db30eae8dbe96e55e.png&r=x","gravatar_id":"8912b598c7b32dd25b87fd168e0b06b2","url":"https://api.github.com/users/schiesbn","html_url":"https://github.com/schiesbn","followers_url":"https://api.github.com/users/schiesbn/followers","following_url":"https://api.github.com/users/schiesbn/following{/other_user}","gists_url":"https://api.github.com/users/schiesbn/gists{/gist_id}","starred_url":"https://api.github.com/users/schiesbn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schiesbn/subscriptions","organizations_url":"https://api.github.com/users/schiesbn/orgs","repos_url":"https://api.github.com/users/schiesbn/repos","events_url":"https://api.github.com/users/schiesbn/events{/privacy}","received_events_url":"https://api.github.com/users/schiesbn/received_events","type":"user","site_admin":false},"created_at":"2013-08-03t06:50:33z","updated_at":"2013-08-03t06:55:21z","body":">  but for some reason they show up in the oc filesystem for @boerny - that's the issue.\r\n\r\nyes, but they get piped through the encryption app while they shouldn't, that's the root of the problem.\r\n\r\n> the contacts app doesn't do any filesystem operations for the the thumbnails. it uses oc_cache as mentioned above: https://github.com/owncloud/apps/blob/stable5/contacts/lib/app.php#l322\r\n\r\nthan oc_cache needs to disable the proxys when writing/reading the cache files. the encryption app doesn't work for files which have no representative in files/. i will look into it on monday.\r\n\r\nbtw: i did a short grep for file_put_contents and file_get_contents and it looks like you use these operations for the import/export of contacts. did you tried this operations with encryption enabled? most likely they will fail too."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22052280","html_url":"https://github.com/owncloud/core/issues/4296#issuecomment-22052280","issue_url":"https://api.github.com/repos/owncloud/core/issues/4296","id":22052280,"user":{"login":"tanghus","id":533222,"avatar_url":"https://gravatar.com/avatar/e625b634822713b2e346ff7c67d26775?d=https%3a%2f%2fidenticons.github.com%2f6d9c90af1c12f5a88e4d5f216bbc1979.png&r=x","gravatar_id":"e625b634822713b2e346ff7c67d26775","url":"https://api.github.com/users/tanghus","html_url":"https://github.com/tanghus","followers_url":"https://api.github.com/users/tanghus/followers","following_url":"https://api.github.com/users/tanghus/following{/other_user}","gists_url":"https://api.github.com/users/tanghus/gists{/gist_id}","starred_url":"https://api.github.com/users/tanghus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tanghus/subscriptions","organizations_url":"https://api.github.com/users/tanghus/orgs","repos_url":"https://api.github.com/users/tanghus/repos","events_url":"https://api.github.com/users/tanghus/events{/privacy}","received_events_url":"https://api.github.com/users/tanghus/received_events","type":"user","site_admin":false},"created_at":"2013-08-03t09:17:03z","updated_at":"2013-08-03t09:17:03z","body":"> yes, but they get piped through the encryption app while they shouldn't, that's the root of the problem.\r\n\r\nah, ok. got it :)\r\n\r\n> did you tried this operations with encryption enabled? most likely they will fail too.\r\n\r\ni think not. thanks for the tip."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22331213","html_url":"https://github.com/owncloud/core/issues/4296#issuecomment-22331213","issue_url":"https://api.github.com/repos/owncloud/core/issues/4296","id":22331213,"user":{"login":"schiesbn","id":1589737,"avatar_url":"https://gravatar.com/avatar/8912b598c7b32dd25b87fd168e0b06b2?d=https%3a%2f%2fidenticons.github.com%2f0a323047dbe8329db30eae8dbe96e55e.png&r=x","gravatar_id":"8912b598c7b32dd25b87fd168e0b06b2","url":"https://api.github.com/users/schiesbn","html_url":"https://github.com/schiesbn","followers_url":"https://api.github.com/users/schiesbn/followers","following_url":"https://api.github.com/users/schiesbn/following{/other_user}","gists_url":"https://api.github.com/users/schiesbn/gists{/gist_id}","starred_url":"https://api.github.com/users/schiesbn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schiesbn/subscriptions","organizations_url":"https://api.github.com/users/schiesbn/orgs","repos_url":"https://api.github.com/users/schiesbn/repos","events_url":"https://api.github.com/users/schiesbn/events{/privacy}","received_events_url":"https://api.github.com/users/schiesbn/received_events","type":"user","site_admin":false},"created_at":"2013-08-08t15:23:31z","updated_at":"2013-08-08t15:23:31z","body":"fix landed in master and stable5... @tanghus please don't forget to have a look at the file_put_contents/file_get_contents in the contact app and disable the proxys before performing the actions if necessary."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/22389609","html_url":"https://github.com/owncloud/core/issues/4296#issuecomment-22389609","issue_url":"https://api.github.com/repos/owncloud/core/issues/4296","id":22389609,"user":{"login":"tanghus","id":533222,"avatar_url":"https://gravatar.com/avatar/e625b634822713b2e346ff7c67d26775?d=https%3a%2f%2fidenticons.github.com%2f6d9c90af1c12f5a88e4d5f216bbc1979.png&r=x","gravatar_id":"e625b634822713b2e346ff7c67d26775","url":"https://api.github.com/users/tanghus","html_url":"https://github.com/tanghus","followers_url":"https://api.github.com/users/tanghus/followers","following_url":"https://api.github.com/users/tanghus/following{/other_user}","gists_url":"https://api.github.com/users/tanghus/gists{/gist_id}","starred_url":"https://api.github.com/users/tanghus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tanghus/subscriptions","organizations_url":"https://api.github.com/users/tanghus/orgs","repos_url":"https://api.github.com/users/tanghus/repos","events_url":"https://api.github.com/users/tanghus/events{/privacy}","received_events_url":"https://api.github.com/users/tanghus/received_events","type":"user","site_admin":false},"created_at":"2013-08-09t11:51:24z","updated_at":"2013-08-09t11:51:24z","body":"thanks @schiesbn "}]