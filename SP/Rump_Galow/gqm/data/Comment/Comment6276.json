[{"url":"https://api.github.com/repos/owncloud/core/issues/comments/30213713","html_url":"https://github.com/owncloud/core/issues/6276#issuecomment-30213713","issue_url":"https://api.github.com/repos/owncloud/core/issues/6276","id":30213713,"user":{"login":"schiesbn","id":1589737,"avatar_url":"https://gravatar.com/avatar/8912b598c7b32dd25b87fd168e0b06b2?d=https%3a%2f%2fidenticons.github.com%2f0a323047dbe8329db30eae8dbe96e55e.png&r=x","gravatar_id":"8912b598c7b32dd25b87fd168e0b06b2","url":"https://api.github.com/users/schiesbn","html_url":"https://github.com/schiesbn","followers_url":"https://api.github.com/users/schiesbn/followers","following_url":"https://api.github.com/users/schiesbn/following{/other_user}","gists_url":"https://api.github.com/users/schiesbn/gists{/gist_id}","starred_url":"https://api.github.com/users/schiesbn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schiesbn/subscriptions","organizations_url":"https://api.github.com/users/schiesbn/orgs","repos_url":"https://api.github.com/users/schiesbn/repos","events_url":"https://api.github.com/users/schiesbn/events{/privacy}","received_events_url":"https://api.github.com/users/schiesbn/received_events","type":"user","site_admin":false},"created_at":"2013-12-10t10:18:10z","updated_at":"2013-12-10t10:18:10z","body":"@encho, can you plese check the \"migration_status\" in the oc_encryption table for the admin. after the initial encryption was finished successfully it should have the value \"1\"."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/30301484","html_url":"https://github.com/owncloud/core/issues/6276#issuecomment-30301484","issue_url":"https://api.github.com/repos/owncloud/core/issues/6276","id":30301484,"user":{"login":"enoch85","id":4511254,"avatar_url":"https://gravatar.com/avatar/a92cb070ca805f83a0fbd170b56f8f19?d=https%3a%2f%2fidenticons.github.com%2f9a367e33a743f8dbdf52d500691a5eee.png&r=x","gravatar_id":"a92cb070ca805f83a0fbd170b56f8f19","url":"https://api.github.com/users/enoch85","html_url":"https://github.com/enoch85","followers_url":"https://api.github.com/users/enoch85/followers","following_url":"https://api.github.com/users/enoch85/following{/other_user}","gists_url":"https://api.github.com/users/enoch85/gists{/gist_id}","starred_url":"https://api.github.com/users/enoch85/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/enoch85/subscriptions","organizations_url":"https://api.github.com/users/enoch85/orgs","repos_url":"https://api.github.com/users/enoch85/repos","events_url":"https://api.github.com/users/enoch85/events{/privacy}","received_events_url":"https://api.github.com/users/enoch85/received_events","type":"user","site_admin":false},"created_at":"2013-12-11t08:10:09z","updated_at":"2013-12-11t08:10:09z","body":"i donâ´t know exactly where to find that, but here is the \"web log\" from when i turned on encryption:\r\n\r\ninfo\tencryption library\tstart migration to encryption mode for enoch\t2013-12-02t16:27:24+00:00\r\ndebug\tencryption library\tuser account \"enoch\" is not ready for encryption; configuration started\t2013-12-02t16:27:22+00:00\r\nerror\tencryption library\tcould not get migration status for enoch, no record found\t2013-12-02t16:27:21+00:00\r\ndebug\tencryption library\tuser account \"enoch\" is not ready for encryption; configuration started\t2013-12-02t16:27:22+00:00\r\nerror\tencryption library\tcould not get migration status for enoch, no record found\t2013-12-02t16:27:21+00:00"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/30306355","html_url":"https://github.com/owncloud/core/issues/6276#issuecomment-30306355","issue_url":"https://api.github.com/repos/owncloud/core/issues/6276","id":30306355,"user":{"login":"schiesbn","id":1589737,"avatar_url":"https://gravatar.com/avatar/8912b598c7b32dd25b87fd168e0b06b2?d=https%3a%2f%2fidenticons.github.com%2f0a323047dbe8329db30eae8dbe96e55e.png&r=x","gravatar_id":"8912b598c7b32dd25b87fd168e0b06b2","url":"https://api.github.com/users/schiesbn","html_url":"https://github.com/schiesbn","followers_url":"https://api.github.com/users/schiesbn/followers","following_url":"https://api.github.com/users/schiesbn/following{/other_user}","gists_url":"https://api.github.com/users/schiesbn/gists{/gist_id}","starred_url":"https://api.github.com/users/schiesbn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schiesbn/subscriptions","organizations_url":"https://api.github.com/users/schiesbn/orgs","repos_url":"https://api.github.com/users/schiesbn/repos","events_url":"https://api.github.com/users/schiesbn/events{/privacy}","received_events_url":"https://api.github.com/users/schiesbn/received_events","type":"user","site_admin":false},"created_at":"2013-12-11t09:41:15z","updated_at":"2013-12-11t09:41:15z","body":"you can find in your database, table oc_encryption"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/30308176","html_url":"https://github.com/owncloud/core/issues/6276#issuecomment-30308176","issue_url":"https://api.github.com/repos/owncloud/core/issues/6276","id":30308176,"user":{"login":"enoch85","id":4511254,"avatar_url":"https://gravatar.com/avatar/a92cb070ca805f83a0fbd170b56f8f19?d=https%3a%2f%2fidenticons.github.com%2f9a367e33a743f8dbdf52d500691a5eee.png&r=x","gravatar_id":"a92cb070ca805f83a0fbd170b56f8f19","url":"https://api.github.com/users/enoch85","html_url":"https://github.com/enoch85","followers_url":"https://api.github.com/users/enoch85/followers","following_url":"https://api.github.com/users/enoch85/following{/other_user}","gists_url":"https://api.github.com/users/enoch85/gists{/gist_id}","starred_url":"https://api.github.com/users/enoch85/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/enoch85/subscriptions","organizations_url":"https://api.github.com/users/enoch85/orgs","repos_url":"https://api.github.com/users/enoch85/repos","events_url":"https://api.github.com/users/enoch85/events{/privacy}","received_events_url":"https://api.github.com/users/enoch85/received_events","type":"user","site_admin":false},"created_at":"2013-12-11t10:10:48z","updated_at":"2013-12-11t10:11:06z","body":"iâ´m sorry, but iâ´m not used to programmer english so i donâ´t know what you mean by table, and where to find it....\r\n\r\nis it theese lines (in util.php) you are asking about?\r\n\r\n\r\n\r\n        const migration_completed = 1;    // migration to new encryption comple$\r\n        const migration_in_progress = -1; // migration is running\r\n        const migration_open = 0;         // user still needs to be migrated\r\n"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/30308704","html_url":"https://github.com/owncloud/core/issues/6276#issuecomment-30308704","issue_url":"https://api.github.com/repos/owncloud/core/issues/6276","id":30308704,"user":{"login":"schiesbn","id":1589737,"avatar_url":"https://gravatar.com/avatar/8912b598c7b32dd25b87fd168e0b06b2?d=https%3a%2f%2fidenticons.github.com%2f0a323047dbe8329db30eae8dbe96e55e.png&r=x","gravatar_id":"8912b598c7b32dd25b87fd168e0b06b2","url":"https://api.github.com/users/schiesbn","html_url":"https://github.com/schiesbn","followers_url":"https://api.github.com/users/schiesbn/followers","following_url":"https://api.github.com/users/schiesbn/following{/other_user}","gists_url":"https://api.github.com/users/schiesbn/gists{/gist_id}","starred_url":"https://api.github.com/users/schiesbn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schiesbn/subscriptions","organizations_url":"https://api.github.com/users/schiesbn/orgs","repos_url":"https://api.github.com/users/schiesbn/repos","events_url":"https://api.github.com/users/schiesbn/events{/privacy}","received_events_url":"https://api.github.com/users/schiesbn/received_events","type":"user","site_admin":false},"created_at":"2013-12-11t10:19:32z","updated_at":"2013-12-11t10:19:42z","body":"which database did you choose during installation? if you didn't choose any database than you are using sqlite. in this case you will have a owncloud.db in your data folder. try this:\r\n\r\n```\r\nsqlite3 owncloud.db\r\n```\r\n\r\nexecute the following command in  the sqlite console and post the output:\r\n\r\n```\r\nselect uid, migration_status from oc_encryption;\r\n```"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/30309461","html_url":"https://github.com/owncloud/core/issues/6276#issuecomment-30309461","issue_url":"https://api.github.com/repos/owncloud/core/issues/6276","id":30309461,"user":{"login":"enoch85","id":4511254,"avatar_url":"https://gravatar.com/avatar/a92cb070ca805f83a0fbd170b56f8f19?d=https%3a%2f%2fidenticons.github.com%2f9a367e33a743f8dbdf52d500691a5eee.png&r=x","gravatar_id":"a92cb070ca805f83a0fbd170b56f8f19","url":"https://api.github.com/users/enoch85","html_url":"https://github.com/enoch85","followers_url":"https://api.github.com/users/enoch85/followers","following_url":"https://api.github.com/users/enoch85/following{/other_user}","gists_url":"https://api.github.com/users/enoch85/gists{/gist_id}","starred_url":"https://api.github.com/users/enoch85/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/enoch85/subscriptions","organizations_url":"https://api.github.com/users/enoch85/orgs","repos_url":"https://api.github.com/users/enoch85/repos","events_url":"https://api.github.com/users/enoch85/events{/privacy}","received_events_url":"https://api.github.com/users/enoch85/received_events","type":"user","site_admin":false},"created_at":"2013-12-11t10:31:48z","updated_at":"2013-12-11t10:34:51z","body":"thanks! :)\r\n\r\na|1\r\nb|0\r\n\r\ni guess this is the users i made...?\r\n\r\nthe admin account is named \"enoch\""},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/30309898","html_url":"https://github.com/owncloud/core/issues/6276#issuecomment-30309898","issue_url":"https://api.github.com/repos/owncloud/core/issues/6276","id":30309898,"user":{"login":"schiesbn","id":1589737,"avatar_url":"https://gravatar.com/avatar/8912b598c7b32dd25b87fd168e0b06b2?d=https%3a%2f%2fidenticons.github.com%2f0a323047dbe8329db30eae8dbe96e55e.png&r=x","gravatar_id":"8912b598c7b32dd25b87fd168e0b06b2","url":"https://api.github.com/users/schiesbn","html_url":"https://github.com/schiesbn","followers_url":"https://api.github.com/users/schiesbn/followers","following_url":"https://api.github.com/users/schiesbn/following{/other_user}","gists_url":"https://api.github.com/users/schiesbn/gists{/gist_id}","starred_url":"https://api.github.com/users/schiesbn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schiesbn/subscriptions","organizations_url":"https://api.github.com/users/schiesbn/orgs","repos_url":"https://api.github.com/users/schiesbn/repos","events_url":"https://api.github.com/users/schiesbn/events{/privacy}","received_events_url":"https://api.github.com/users/schiesbn/received_events","type":"user","site_admin":false},"created_at":"2013-12-11t10:38:58z","updated_at":"2013-12-11t10:39:39z","body":"this looks strange, in front of the \"|\" you should see the user names. so there should be a line starting with \"enoch\".\r\n\r\ndo you have users called \"a\" and \"b\" at all?\r\n\r\ndo you use the default owncloud user-back-end or did you enabled a different back-end like ldap, etc?"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/30310007","html_url":"https://github.com/owncloud/core/issues/6276#issuecomment-30310007","issue_url":"https://api.github.com/repos/owncloud/core/issues/6276","id":30310007,"user":{"login":"enoch85","id":4511254,"avatar_url":"https://gravatar.com/avatar/a92cb070ca805f83a0fbd170b56f8f19?d=https%3a%2f%2fidenticons.github.com%2f9a367e33a743f8dbdf52d500691a5eee.png&r=x","gravatar_id":"a92cb070ca805f83a0fbd170b56f8f19","url":"https://api.github.com/users/enoch85","html_url":"https://github.com/enoch85","followers_url":"https://api.github.com/users/enoch85/followers","following_url":"https://api.github.com/users/enoch85/following{/other_user}","gists_url":"https://api.github.com/users/enoch85/gists{/gist_id}","starred_url":"https://api.github.com/users/enoch85/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/enoch85/subscriptions","organizations_url":"https://api.github.com/users/enoch85/orgs","repos_url":"https://api.github.com/users/enoch85/repos","events_url":"https://api.github.com/users/enoch85/events{/privacy}","received_events_url":"https://api.github.com/users/enoch85/received_events","type":"user","site_admin":false},"created_at":"2013-12-11t10:40:44z","updated_at":"2013-12-11t10:40:44z","body":"i use the default user-back-end. no ldap."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/30310135","html_url":"https://github.com/owncloud/core/issues/6276#issuecomment-30310135","issue_url":"https://api.github.com/repos/owncloud/core/issues/6276","id":30310135,"user":{"login":"schiesbn","id":1589737,"avatar_url":"https://gravatar.com/avatar/8912b598c7b32dd25b87fd168e0b06b2?d=https%3a%2f%2fidenticons.github.com%2f0a323047dbe8329db30eae8dbe96e55e.png&r=x","gravatar_id":"8912b598c7b32dd25b87fd168e0b06b2","url":"https://api.github.com/users/schiesbn","html_url":"https://github.com/schiesbn","followers_url":"https://api.github.com/users/schiesbn/followers","following_url":"https://api.github.com/users/schiesbn/following{/other_user}","gists_url":"https://api.github.com/users/schiesbn/gists{/gist_id}","starred_url":"https://api.github.com/users/schiesbn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schiesbn/subscriptions","organizations_url":"https://api.github.com/users/schiesbn/orgs","repos_url":"https://api.github.com/users/schiesbn/repos","events_url":"https://api.github.com/users/schiesbn/events{/privacy}","received_events_url":"https://api.github.com/users/schiesbn/received_events","type":"user","site_admin":false},"created_at":"2013-12-11t10:42:47z","updated_at":"2013-12-11t10:42:47z","body":"and what about the \"a\" and \"b\", do you have such users on your system?"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/30310294","html_url":"https://github.com/owncloud/core/issues/6276#issuecomment-30310294","issue_url":"https://api.github.com/repos/owncloud/core/issues/6276","id":30310294,"user":{"login":"enoch85","id":4511254,"avatar_url":"https://gravatar.com/avatar/a92cb070ca805f83a0fbd170b56f8f19?d=https%3a%2f%2fidenticons.github.com%2f9a367e33a743f8dbdf52d500691a5eee.png&r=x","gravatar_id":"a92cb070ca805f83a0fbd170b56f8f19","url":"https://api.github.com/users/enoch85","html_url":"https://github.com/enoch85","followers_url":"https://api.github.com/users/enoch85/followers","following_url":"https://api.github.com/users/enoch85/following{/other_user}","gists_url":"https://api.github.com/users/enoch85/gists{/gist_id}","starred_url":"https://api.github.com/users/enoch85/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/enoch85/subscriptions","organizations_url":"https://api.github.com/users/enoch85/orgs","repos_url":"https://api.github.com/users/enoch85/repos","events_url":"https://api.github.com/users/enoch85/events{/privacy}","received_events_url":"https://api.github.com/users/enoch85/received_events","type":"user","site_admin":false},"created_at":"2013-12-11t10:45:37z","updated_at":"2013-12-11t10:45:37z","body":"yes i have. :) \r\n\r\nuser a: logged in, encryption works without any message\r\nuser b: have never logged in with this user\r\nuser enoch: (me) admin - logged in and issue as mentioned above"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/30311188","html_url":"https://github.com/owncloud/core/issues/6276#issuecomment-30311188","issue_url":"https://api.github.com/repos/owncloud/core/issues/6276","id":30311188,"user":{"login":"schiesbn","id":1589737,"avatar_url":"https://gravatar.com/avatar/8912b598c7b32dd25b87fd168e0b06b2?d=https%3a%2f%2fidenticons.github.com%2f0a323047dbe8329db30eae8dbe96e55e.png&r=x","gravatar_id":"8912b598c7b32dd25b87fd168e0b06b2","url":"https://api.github.com/users/schiesbn","html_url":"https://github.com/schiesbn","followers_url":"https://api.github.com/users/schiesbn/followers","following_url":"https://api.github.com/users/schiesbn/following{/other_user}","gists_url":"https://api.github.com/users/schiesbn/gists{/gist_id}","starred_url":"https://api.github.com/users/schiesbn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schiesbn/subscriptions","organizations_url":"https://api.github.com/users/schiesbn/orgs","repos_url":"https://api.github.com/users/schiesbn/repos","events_url":"https://api.github.com/users/schiesbn/events{/privacy}","received_events_url":"https://api.github.com/users/schiesbn/received_events","type":"user","site_admin":false},"created_at":"2013-12-11t11:01:06z","updated_at":"2013-12-11t11:02:02z","body":"ok, so the question is, why \"encho\" isn't in the list.\r\n\r\ni assume that every time you log-in as \"encho\" you get \"could not get migration status for enoch, no record found\" in your owncloud.log, right.\r\n\r\nin this case the initial database entry should be created, i'm not sure yet why this doesn't happen for your.\r\n\r\ncan you try the following.. open this file on your system: https://github.com/owncloud/core/blob/master/apps/files_encryption/lib/util.php#l1281\r\n\r\nand add after the if statement in line 1281 the following line:\r\n\r\n```\r\n\\ocp\\util::writelog('encryption library', $this->userid . \" exists.\", \\ocp\\util::error);\r\n```\r\n\r\nand after the ```else {``` in line 1293:\r\n\r\n```\r\n\\ocp\\util::writelog('encryption library', $this->userid . \" doesn't exists.\", \\ocp\\util::error);\r\n```\r\n\r\nthe only case where we don't update the database is if the user doesn't exist. which would be quite strange because you can log-in as \"enoch\", so the user should exist. but let's try it. after you added this lines log out and log in again ans \"encho\", what do you see in your owncloud.log?"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/30311562","html_url":"https://github.com/owncloud/core/issues/6276#issuecomment-30311562","issue_url":"https://api.github.com/repos/owncloud/core/issues/6276","id":30311562,"user":{"login":"enoch85","id":4511254,"avatar_url":"https://gravatar.com/avatar/a92cb070ca805f83a0fbd170b56f8f19?d=https%3a%2f%2fidenticons.github.com%2f9a367e33a743f8dbdf52d500691a5eee.png&r=x","gravatar_id":"a92cb070ca805f83a0fbd170b56f8f19","url":"https://api.github.com/users/enoch85","html_url":"https://github.com/enoch85","followers_url":"https://api.github.com/users/enoch85/followers","following_url":"https://api.github.com/users/enoch85/following{/other_user}","gists_url":"https://api.github.com/users/enoch85/gists{/gist_id}","starred_url":"https://api.github.com/users/enoch85/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/enoch85/subscriptions","organizations_url":"https://api.github.com/users/enoch85/orgs","repos_url":"https://api.github.com/users/enoch85/repos","events_url":"https://api.github.com/users/enoch85/events{/privacy}","received_events_url":"https://api.github.com/users/enoch85/received_events","type":"user","site_admin":false},"created_at":"2013-12-11t11:07:19z","updated_at":"2013-12-11t11:07:49z","body":"i just tried to decrypt all the files again, and then encrypt them again.\r\n\r\nnow the migraton_status looks like this:\r\n\r\nenoch|1\r\na|0\r\nb|0\r\n\r\nstrange that the migration didnâ´t work the first time....\r\n\r\nto answer your question; yes, i had that message in the owncloud log\r\n"}]