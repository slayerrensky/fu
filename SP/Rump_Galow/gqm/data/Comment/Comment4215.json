[{"url":"https://api.github.com/repos/owncloud/core/issues/comments/21677859","html_url":"https://github.com/owncloud/core/issues/4215#issuecomment-21677859","issue_url":"https://api.github.com/repos/owncloud/core/issues/4215","id":21677859,"user":{"login":"briangonzalez","id":659829,"avatar_url":"https://gravatar.com/avatar/f6363fe1d9aadb1c3f07ba7867f0e854?d=https%3a%2f%2fidenticons.github.com%2f5486082b73fbb19780f119878e0ca85f.png&r=x","gravatar_id":"f6363fe1d9aadb1c3f07ba7867f0e854","url":"https://api.github.com/users/briangonzalez","html_url":"https://github.com/briangonzalez","followers_url":"https://api.github.com/users/briangonzalez/followers","following_url":"https://api.github.com/users/briangonzalez/following{/other_user}","gists_url":"https://api.github.com/users/briangonzalez/gists{/gist_id}","starred_url":"https://api.github.com/users/briangonzalez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/briangonzalez/subscriptions","organizations_url":"https://api.github.com/users/briangonzalez/orgs","repos_url":"https://api.github.com/users/briangonzalez/repos","events_url":"https://api.github.com/users/briangonzalez/events{/privacy}","received_events_url":"https://api.github.com/users/briangonzalez/received_events","type":"user","site_admin":false},"created_at":"2013-07-28t06:16:21z","updated_at":"2013-07-28t06:16:49z","body":"i've find the issue. taking a look at `maxuploadfilesize` in `/var/www/owncloud/lib/helper.php`, you guys don't account for cases when `post_max_size` or `upload_max_filesize` is set to 0 in `php.ini`. 0 in this case means boolean, not 0 bytes. \r\n\r\nhere's code to fix it:\r\n\r\n```php\r\n/**\r\n * @brief calculates the maximum upload size respecting system settings, free space and user quota\r\n *\r\n * @param $dir the current folder where the user currently operates\r\n * @return number of bytes representing\r\n */\r\npublic static function maxuploadfilesize($dir) {\r\n\r\n        $freespace = \\oc\\files\\filesystem::free_space($dir);\r\n        $upload_max_filesize    = ocp\\util::computerfilesize(ini_get('upload_max_filesize'));\r\n        $upload_max_filesize    = ($upload_max_filesize == 0) ? $freespace : $upload_max_filesize;\r\n\r\n        $post_max_size          = ocp\\util::computerfilesize(ini_get('post_max_size'));\r\n        $post_max_size          = ($post_max_size == 0) ? $freespace : $post_max_size;\r\n\r\n        $maxuploadfilesize      = min($upload_max_filesize, $post_max_size);\r\n\r\n        if($freespace !== \\oc\\files\\free_space_unknown){\r\n                $freespace = max($freespace, 0);\r\n\r\n                return min($maxuploadfilesize, $freespace);\r\n        } else {\r\n                return $maxuploadfilesize;\r\n        }\r\n}\r\n```"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/21678002","html_url":"https://github.com/owncloud/core/issues/4215#issuecomment-21678002","issue_url":"https://api.github.com/repos/owncloud/core/issues/4215","id":21678002,"user":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false},"created_at":"2013-07-28t06:34:34z","updated_at":"2013-07-28t06:34:34z","body":"thanks for digging into this. \ncan you please submit a pull request? \nthx"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/21683239","html_url":"https://github.com/owncloud/core/issues/4215#issuecomment-21683239","issue_url":"https://api.github.com/repos/owncloud/core/issues/4215","id":21683239,"user":{"login":"realrancor","id":2248459,"avatar_url":"https://gravatar.com/avatar/f6105e79dfcfb0fcbabb3db061135c08?d=https%3a%2f%2fidenticons.github.com%2f7a70061016eba74d85c060de0f65212d.png&r=x","gravatar_id":"f6105e79dfcfb0fcbabb3db061135c08","url":"https://api.github.com/users/realrancor","html_url":"https://github.com/realrancor","followers_url":"https://api.github.com/users/realrancor/followers","following_url":"https://api.github.com/users/realrancor/following{/other_user}","gists_url":"https://api.github.com/users/realrancor/gists{/gist_id}","starred_url":"https://api.github.com/users/realrancor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/realrancor/subscriptions","organizations_url":"https://api.github.com/users/realrancor/orgs","repos_url":"https://api.github.com/users/realrancor/repos","events_url":"https://api.github.com/users/realrancor/events{/privacy}","received_events_url":"https://api.github.com/users/realrancor/received_events","type":"user","site_admin":false},"created_at":"2013-07-28t13:08:55z","updated_at":"2013-07-28t13:08:55z","body":"hi,\r\n\r\ni'm nut sure but think that something similar will be addressed by this merged pr:\r\n\r\nhttps://github.com/owncloud/core/pull/3688\r\n\r\nor am i wrong?"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/21683955","html_url":"https://github.com/owncloud/core/issues/4215#issuecomment-21683955","issue_url":"https://api.github.com/repos/owncloud/core/issues/4215","id":21683955,"user":{"login":"kondou-ger","id":1410802,"avatar_url":"https://gravatar.com/avatar/917dab919ae812f8252b2f501c514b19?d=https%3a%2f%2fidenticons.github.com%2fd07869ed62cb1b7f88b731956ab913ee.png&r=x","gravatar_id":"917dab919ae812f8252b2f501c514b19","url":"https://api.github.com/users/kondou-ger","html_url":"https://github.com/kondou-ger","followers_url":"https://api.github.com/users/kondou-ger/followers","following_url":"https://api.github.com/users/kondou-ger/following{/other_user}","gists_url":"https://api.github.com/users/kondou-ger/gists{/gist_id}","starred_url":"https://api.github.com/users/kondou-ger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kondou-ger/subscriptions","organizations_url":"https://api.github.com/users/kondou-ger/orgs","repos_url":"https://api.github.com/users/kondou-ger/repos","events_url":"https://api.github.com/users/kondou-ger/events{/privacy}","received_events_url":"https://api.github.com/users/kondou-ger/received_events","type":"user","site_admin":false},"created_at":"2013-07-28t14:02:50z","updated_at":"2013-07-28t14:03:49z","body":"@realrancor yes, this instantly reminded me of #3688 as well â€¦\r\nbackporting #3688 won't be so easy though, because `maxuploadfilesize()` works a bit different in master, than in stable5.\r\n\r\n@briangonzalez same as in #3688: don't use `==`, but use `===`, and cast the values to `(int)` in this case, when doing comparisons.\r\n\r\nedit: ternary operators may be a bit tricky as well. using an `if` construct would be clearer here."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/21686725","html_url":"https://github.com/owncloud/core/issues/4215#issuecomment-21686725","issue_url":"https://api.github.com/repos/owncloud/core/issues/4215","id":21686725,"user":{"login":"briangonzalez","id":659829,"avatar_url":"https://gravatar.com/avatar/f6363fe1d9aadb1c3f07ba7867f0e854?d=https%3a%2f%2fidenticons.github.com%2f5486082b73fbb19780f119878e0ca85f.png&r=x","gravatar_id":"f6363fe1d9aadb1c3f07ba7867f0e854","url":"https://api.github.com/users/briangonzalez","html_url":"https://github.com/briangonzalez","followers_url":"https://api.github.com/users/briangonzalez/followers","following_url":"https://api.github.com/users/briangonzalez/following{/other_user}","gists_url":"https://api.github.com/users/briangonzalez/gists{/gist_id}","starred_url":"https://api.github.com/users/briangonzalez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/briangonzalez/subscriptions","organizations_url":"https://api.github.com/users/briangonzalez/orgs","repos_url":"https://api.github.com/users/briangonzalez/repos","events_url":"https://api.github.com/users/briangonzalez/events{/privacy}","received_events_url":"https://api.github.com/users/briangonzalez/received_events","type":"user","site_admin":false},"created_at":"2013-07-28t17:04:11z","updated_at":"2013-07-28t17:39:52z","body":"i am not sure if i want to be the one to make the pull request and/or sign the contributor agreement at this time, but if #3688 has this already been taken care of, then i am ok closing this one.\r\n\r\nwhat do you guys think? "},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/21686771","html_url":"https://github.com/owncloud/core/issues/4215#issuecomment-21686771","issue_url":"https://api.github.com/repos/owncloud/core/issues/4215","id":21686771,"user":{"login":"kondou-ger","id":1410802,"avatar_url":"https://gravatar.com/avatar/917dab919ae812f8252b2f501c514b19?d=https%3a%2f%2fidenticons.github.com%2fd07869ed62cb1b7f88b731956ab913ee.png&r=x","gravatar_id":"917dab919ae812f8252b2f501c514b19","url":"https://api.github.com/users/kondou-ger","html_url":"https://github.com/kondou-ger","followers_url":"https://api.github.com/users/kondou-ger/followers","following_url":"https://api.github.com/users/kondou-ger/following{/other_user}","gists_url":"https://api.github.com/users/kondou-ger/gists{/gist_id}","starred_url":"https://api.github.com/users/kondou-ger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kondou-ger/subscriptions","organizations_url":"https://api.github.com/users/kondou-ger/orgs","repos_url":"https://api.github.com/users/kondou-ger/repos","events_url":"https://api.github.com/users/kondou-ger/events{/privacy}","received_events_url":"https://api.github.com/users/kondou-ger/received_events","type":"user","site_admin":false},"created_at":"2013-07-28t17:06:27z","updated_at":"2013-07-28t17:06:27z","body":"@briangonzalez #3688 dealt with this in master, but not in stable5.\r\nalso you're not forced to sign the contributor agreement. licensing your patch under mit works fine, too."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/21687106","html_url":"https://github.com/owncloud/core/issues/4215#issuecomment-21687106","issue_url":"https://api.github.com/repos/owncloud/core/issues/4215","id":21687106,"user":{"login":"briangonzalez","id":659829,"avatar_url":"https://gravatar.com/avatar/f6363fe1d9aadb1c3f07ba7867f0e854?d=https%3a%2f%2fidenticons.github.com%2f5486082b73fbb19780f119878e0ca85f.png&r=x","gravatar_id":"f6363fe1d9aadb1c3f07ba7867f0e854","url":"https://api.github.com/users/briangonzalez","html_url":"https://github.com/briangonzalez","followers_url":"https://api.github.com/users/briangonzalez/followers","following_url":"https://api.github.com/users/briangonzalez/following{/other_user}","gists_url":"https://api.github.com/users/briangonzalez/gists{/gist_id}","starred_url":"https://api.github.com/users/briangonzalez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/briangonzalez/subscriptions","organizations_url":"https://api.github.com/users/briangonzalez/orgs","repos_url":"https://api.github.com/users/briangonzalez/repos","events_url":"https://api.github.com/users/briangonzalez/events{/privacy}","received_events_url":"https://api.github.com/users/briangonzalez/received_events","type":"user","site_admin":false},"created_at":"2013-07-28t17:24:45z","updated_at":"2013-07-28t17:24:45z","body":"what's the protocol for getting code from master into a release candidate?"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/21687502","html_url":"https://github.com/owncloud/core/issues/4215#issuecomment-21687502","issue_url":"https://api.github.com/repos/owncloud/core/issues/4215","id":21687502,"user":{"login":"karlitschek","id":867445,"avatar_url":"https://gravatar.com/avatar/87ce2b4531ee1a0c32b50e0d8f049224?d=https%3a%2f%2fidenticons.github.com%2f06e7098636caebfc9c30c9f52eb905df.png&r=x","gravatar_id":"87ce2b4531ee1a0c32b50e0d8f049224","url":"https://api.github.com/users/karlitschek","html_url":"https://github.com/karlitschek","followers_url":"https://api.github.com/users/karlitschek/followers","following_url":"https://api.github.com/users/karlitschek/following{/other_user}","gists_url":"https://api.github.com/users/karlitschek/gists{/gist_id}","starred_url":"https://api.github.com/users/karlitschek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karlitschek/subscriptions","organizations_url":"https://api.github.com/users/karlitschek/orgs","repos_url":"https://api.github.com/users/karlitschek/repos","events_url":"https://api.github.com/users/karlitschek/events{/privacy}","received_events_url":"https://api.github.com/users/karlitschek/received_events","type":"user","site_admin":false},"created_at":"2013-07-28t17:46:32z","updated_at":"2013-07-28t17:46:32z","body":"master will become owncloud 6 automatically. if you want to have if in 5.0.x then a pull request for backporting to stable5 is needed. "},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/21687551","html_url":"https://github.com/owncloud/core/issues/4215#issuecomment-21687551","issue_url":"https://api.github.com/repos/owncloud/core/issues/4215","id":21687551,"user":{"login":"briangonzalez","id":659829,"avatar_url":"https://gravatar.com/avatar/f6363fe1d9aadb1c3f07ba7867f0e854?d=https%3a%2f%2fidenticons.github.com%2f5486082b73fbb19780f119878e0ca85f.png&r=x","gravatar_id":"f6363fe1d9aadb1c3f07ba7867f0e854","url":"https://api.github.com/users/briangonzalez","html_url":"https://github.com/briangonzalez","followers_url":"https://api.github.com/users/briangonzalez/followers","following_url":"https://api.github.com/users/briangonzalez/following{/other_user}","gists_url":"https://api.github.com/users/briangonzalez/gists{/gist_id}","starred_url":"https://api.github.com/users/briangonzalez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/briangonzalez/subscriptions","organizations_url":"https://api.github.com/users/briangonzalez/orgs","repos_url":"https://api.github.com/users/briangonzalez/repos","events_url":"https://api.github.com/users/briangonzalez/events{/privacy}","received_events_url":"https://api.github.com/users/briangonzalez/received_events","type":"user","site_admin":false},"created_at":"2013-07-28t17:48:38z","updated_at":"2013-07-28t17:48:38z","body":"nice, that's good to know. any ideas when 6 will get released and / or are there instructions for installing the bleeding edge version of owncloud?"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/26507999","html_url":"https://github.com/owncloud/core/issues/4215#issuecomment-26507999","issue_url":"https://api.github.com/repos/owncloud/core/issues/4215","id":26507999,"user":{"login":"karlitschek","id":867445,"avatar_url":"https://gravatar.com/avatar/87ce2b4531ee1a0c32b50e0d8f049224?d=https%3a%2f%2fidenticons.github.com%2f06e7098636caebfc9c30c9f52eb905df.png&r=x","gravatar_id":"87ce2b4531ee1a0c32b50e0d8f049224","url":"https://api.github.com/users/karlitschek","html_url":"https://github.com/karlitschek","followers_url":"https://api.github.com/users/karlitschek/followers","following_url":"https://api.github.com/users/karlitschek/following{/other_user}","gists_url":"https://api.github.com/users/karlitschek/gists{/gist_id}","starred_url":"https://api.github.com/users/karlitschek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karlitschek/subscriptions","organizations_url":"https://api.github.com/users/karlitschek/orgs","repos_url":"https://api.github.com/users/karlitschek/repos","events_url":"https://api.github.com/users/karlitschek/events{/privacy}","received_events_url":"https://api.github.com/users/karlitschek/received_events","type":"user","site_admin":false},"created_at":"2013-10-17t14:02:45z","updated_at":"2013-10-17t14:02:45z","body":"we will release owncloud 6 in about 3-5 weeks "}]