[{"url":"https://api.github.com/repos/owncloud/core/issues/comments/23049159","html_url":"https://github.com/owncloud/core/issues/4533#issuecomment-23049159","issue_url":"https://api.github.com/repos/owncloud/core/issues/4533","id":23049159,"user":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false},"created_at":"2013-08-21t20:50:40z","updated_at":"2013-08-21t20:50:40z","body":"@schiesbn thx"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/23101896","html_url":"https://github.com/owncloud/core/issues/4533#issuecomment-23101896","issue_url":"https://api.github.com/repos/owncloud/core/issues/4533","id":23101896,"user":{"login":"schiesbn","id":1589737,"avatar_url":"https://gravatar.com/avatar/8912b598c7b32dd25b87fd168e0b06b2?d=https%3a%2f%2fidenticons.github.com%2f0a323047dbe8329db30eae8dbe96e55e.png&r=x","gravatar_id":"8912b598c7b32dd25b87fd168e0b06b2","url":"https://api.github.com/users/schiesbn","html_url":"https://github.com/schiesbn","followers_url":"https://api.github.com/users/schiesbn/followers","following_url":"https://api.github.com/users/schiesbn/following{/other_user}","gists_url":"https://api.github.com/users/schiesbn/gists{/gist_id}","starred_url":"https://api.github.com/users/schiesbn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schiesbn/subscriptions","organizations_url":"https://api.github.com/users/schiesbn/orgs","repos_url":"https://api.github.com/users/schiesbn/repos","events_url":"https://api.github.com/users/schiesbn/events{/privacy}","received_events_url":"https://api.github.com/users/schiesbn/received_events","type":"user","site_admin":false},"created_at":"2013-08-22t16:02:14z","updated_at":"2013-08-22t16:02:14z","body":"@webmans i provided a pull request which should solve the issue ( #4551 ). maybe you can apply the patch to your installation and verify that it works."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/23133276","html_url":"https://github.com/owncloud/core/issues/4533#issuecomment-23133276","issue_url":"https://api.github.com/repos/owncloud/core/issues/4533","id":23133276,"user":{"login":"webmans","id":5271893,"avatar_url":"https://gravatar.com/avatar/4cd62e413f6daf5c0f66203e8e3cde19?d=https%3a%2f%2fidenticons.github.com%2f45524b3edc1817e3997006f0ce6f81db.png&r=x","gravatar_id":"4cd62e413f6daf5c0f66203e8e3cde19","url":"https://api.github.com/users/webmans","html_url":"https://github.com/webmans","followers_url":"https://api.github.com/users/webmans/followers","following_url":"https://api.github.com/users/webmans/following{/other_user}","gists_url":"https://api.github.com/users/webmans/gists{/gist_id}","starred_url":"https://api.github.com/users/webmans/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/webmans/subscriptions","organizations_url":"https://api.github.com/users/webmans/orgs","repos_url":"https://api.github.com/users/webmans/repos","events_url":"https://api.github.com/users/webmans/events{/privacy}","received_events_url":"https://api.github.com/users/webmans/received_events","type":"user","site_admin":false},"created_at":"2013-08-22t23:13:31z","updated_at":"2013-08-24t20:46:15z","body":"@schiesbn \r\n\r\nthanks a lot for your quick response, but the error remains using this new codes.\r\nhowever, i started debugging it by myself and found a solution!\r\n\r\nso, it seems that the encryption process starts when the method \"recoverfile\" is called and to check who is allowed to see the file, it requests in line 1025 (of your new code): $result = \\ocp\\share::getuserssharingfile($ownerpath, $owner, true);\r\n\r\nthis call just returns the current uploader, because there is the filename including the windows-added ending \".part\" saved in the variable $file, so that getuserssharingfile checks a false and no longer existing file.\r\n\r\ni made a fix by replacing lines 1216 and 1217 (new code) with this content:\r\n```php\r\n                if ($partfile) {\r\n\t\t\t\t\t$filename = $pathinfo['dirname'] . '/' . $pathinfo['filename'];\r\n\t\t\t\t}\r\n                else {\r\n                    // assume the path supplied is correct\r\n                    $filename = $path;\r\n                }\r\n```\r\n\r\nold code lines were:\r\n```php\r\n                // assume the path supplied is correct\r\n                $filename = $path;\r\n```\r\n\r\ni hope my descriptions can help you to solve the issue soon.\r\nbye!"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/23341226","html_url":"https://github.com/owncloud/core/issues/4533#issuecomment-23341226","issue_url":"https://api.github.com/repos/owncloud/core/issues/4533","id":23341226,"user":{"login":"schiesbn","id":1589737,"avatar_url":"https://gravatar.com/avatar/8912b598c7b32dd25b87fd168e0b06b2?d=https%3a%2f%2fidenticons.github.com%2f0a323047dbe8329db30eae8dbe96e55e.png&r=x","gravatar_id":"8912b598c7b32dd25b87fd168e0b06b2","url":"https://api.github.com/users/schiesbn","html_url":"https://github.com/schiesbn","followers_url":"https://api.github.com/users/schiesbn/followers","following_url":"https://api.github.com/users/schiesbn/following{/other_user}","gists_url":"https://api.github.com/users/schiesbn/gists{/gist_id}","starred_url":"https://api.github.com/users/schiesbn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schiesbn/subscriptions","organizations_url":"https://api.github.com/users/schiesbn/orgs","repos_url":"https://api.github.com/users/schiesbn/repos","events_url":"https://api.github.com/users/schiesbn/events{/privacy}","received_events_url":"https://api.github.com/users/schiesbn/received_events","type":"user","site_admin":false},"created_at":"2013-08-27t14:36:12z","updated_at":"2013-08-27t14:36:12z","body":"@webmans thanks for debugging this issue further. i couldn't adopt your solution because getuidandfilename() needs to return the path including the .part extension because the result is also used to write the file to the disk and it should be written as .part at this point. therefore i did another check in getsharingusersarray() to remove the .part extension right before we check for the shares.\r\n\r\ni just committed the changes to the pull request. can you give it another try? thanks!"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/23942347","html_url":"https://github.com/owncloud/core/issues/4533#issuecomment-23942347","issue_url":"https://api.github.com/repos/owncloud/core/issues/4533","id":23942347,"user":{"login":"schiesbn","id":1589737,"avatar_url":"https://gravatar.com/avatar/8912b598c7b32dd25b87fd168e0b06b2?d=https%3a%2f%2fidenticons.github.com%2f0a323047dbe8329db30eae8dbe96e55e.png&r=x","gravatar_id":"8912b598c7b32dd25b87fd168e0b06b2","url":"https://api.github.com/users/schiesbn","html_url":"https://github.com/schiesbn","followers_url":"https://api.github.com/users/schiesbn/followers","following_url":"https://api.github.com/users/schiesbn/following{/other_user}","gists_url":"https://api.github.com/users/schiesbn/gists{/gist_id}","starred_url":"https://api.github.com/users/schiesbn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schiesbn/subscriptions","organizations_url":"https://api.github.com/users/schiesbn/orgs","repos_url":"https://api.github.com/users/schiesbn/repos","events_url":"https://api.github.com/users/schiesbn/events{/privacy}","received_events_url":"https://api.github.com/users/schiesbn/received_events","type":"user","site_admin":false},"created_at":"2013-09-06t14:10:46z","updated_at":"2013-09-06t14:10:46z","body":"merged, fix will be released with oc5.0.11"}]