[{"url":"https://api.github.com/repos/owncloud/core/issues/comments/18630934","html_url":"https://github.com/owncloud/core/issues/3528#issuecomment-18630934","issue_url":"https://api.github.com/repos/owncloud/core/issues/3528","id":18630934,"user":{"login":"kabum","id":245432,"avatar_url":"https://gravatar.com/avatar/a1dea19f88f38ea0b5b5b4d19d5b3107?d=https%3a%2f%2fidenticons.github.com%2f53d8cbb3dbc087a02951dec47438ccdf.png&r=x","gravatar_id":"a1dea19f88f38ea0b5b5b4d19d5b3107","url":"https://api.github.com/users/kabum","html_url":"https://github.com/kabum","followers_url":"https://api.github.com/users/kabum/followers","following_url":"https://api.github.com/users/kabum/following{/other_user}","gists_url":"https://api.github.com/users/kabum/gists{/gist_id}","starred_url":"https://api.github.com/users/kabum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kabum/subscriptions","organizations_url":"https://api.github.com/users/kabum/orgs","repos_url":"https://api.github.com/users/kabum/repos","events_url":"https://api.github.com/users/kabum/events{/privacy}","received_events_url":"https://api.github.com/users/kabum/received_events","type":"user","site_admin":false},"created_at":"2013-05-29t17:02:05z","updated_at":"2013-05-29t17:02:05z","body":"cc @blizzz @dschmidt "},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/18633090","html_url":"https://github.com/owncloud/core/issues/3528#issuecomment-18633090","issue_url":"https://api.github.com/repos/owncloud/core/issues/3528","id":18633090,"user":{"login":"blizzz","id":2184312,"avatar_url":"https://gravatar.com/avatar/1898b25a9cb3aa1a0f0febd1359910b9?d=https%3a%2f%2fidenticons.github.com%2fca03acec6deadf508b75eb0cf9ba036c.png&r=x","gravatar_id":"1898b25a9cb3aa1a0f0febd1359910b9","url":"https://api.github.com/users/blizzz","html_url":"https://github.com/blizzz","followers_url":"https://api.github.com/users/blizzz/followers","following_url":"https://api.github.com/users/blizzz/following{/other_user}","gists_url":"https://api.github.com/users/blizzz/gists{/gist_id}","starred_url":"https://api.github.com/users/blizzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blizzz/subscriptions","organizations_url":"https://api.github.com/users/blizzz/orgs","repos_url":"https://api.github.com/users/blizzz/repos","events_url":"https://api.github.com/users/blizzz/events{/privacy}","received_events_url":"https://api.github.com/users/blizzz/received_events","type":"user","site_admin":false},"created_at":"2013-05-29t17:35:46z","updated_at":"2013-05-29t17:35:46z","body":"can you figure out a way how to reproduce the behaviour? \r\n\r\nthe message\r\n> {\"app\":\"user_ldap\",\"message\":\"no ldap host given, won`t connect.\",\"level\":2,\"time\":1369830541}\r\n\r\nis thrown when validation the configuration  â€“ which happens regularly (after reading from the database), but also when saving or testing configurations. it also leads to the\r\n> configuration is invalid, cannot connect\r\n\r\noutput.\r\n\r\nso far i do not see how those message are logged on a working configuration as long as no other actions as described above happen.\r\n\r\n"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/18976147","html_url":"https://github.com/owncloud/core/issues/3528#issuecomment-18976147","issue_url":"https://api.github.com/repos/owncloud/core/issues/3528","id":18976147,"user":{"login":"yotaka","id":4488731,"avatar_url":"https://gravatar.com/avatar/45fa612ad1442f2dfbec3c43e8ee2714?d=https%3a%2f%2fidenticons.github.com%2f0a6edbdace9847c1ede161fa6dd4a677.png&r=x","gravatar_id":"45fa612ad1442f2dfbec3c43e8ee2714","url":"https://api.github.com/users/yotaka","html_url":"https://github.com/yotaka","followers_url":"https://api.github.com/users/yotaka/followers","following_url":"https://api.github.com/users/yotaka/following{/other_user}","gists_url":"https://api.github.com/users/yotaka/gists{/gist_id}","starred_url":"https://api.github.com/users/yotaka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yotaka/subscriptions","organizations_url":"https://api.github.com/users/yotaka/orgs","repos_url":"https://api.github.com/users/yotaka/repos","events_url":"https://api.github.com/users/yotaka/events{/privacy}","received_events_url":"https://api.github.com/users/yotaka/received_events","type":"user","site_admin":false},"created_at":"2013-06-05t13:44:28z","updated_at":"2013-06-05t13:44:28z","body":"i tried as an admin user:\r\nclicking \"test configuration\": +0\r\nclicking \"save configuration\": +0\r\nchanging the user list filter, clicking test, clicking save: +0\r\nchanging the user list filter back: +0\r\nnothing of that generated an entry in the log. i observed it using \"watch 'grep user_ldap owncloud.log | wc -l'\".\r\n\r\nif you wonder where the according methods get called, i could add a backtrace to those messages to see where they come from. since i'm not quite used to php, and it's a kind of productive system (though i doubt anyone minds if my owncloud is offline for some time...) could someone provide a diff file or something?"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/18984709","html_url":"https://github.com/owncloud/core/issues/3528#issuecomment-18984709","issue_url":"https://api.github.com/repos/owncloud/core/issues/3528","id":18984709,"user":{"login":"blizzz","id":2184312,"avatar_url":"https://gravatar.com/avatar/1898b25a9cb3aa1a0f0febd1359910b9?d=https%3a%2f%2fidenticons.github.com%2fca03acec6deadf508b75eb0cf9ba036c.png&r=x","gravatar_id":"1898b25a9cb3aa1a0f0febd1359910b9","url":"https://api.github.com/users/blizzz","html_url":"https://github.com/blizzz","followers_url":"https://api.github.com/users/blizzz/followers","following_url":"https://api.github.com/users/blizzz/following{/other_user}","gists_url":"https://api.github.com/users/blizzz/gists{/gist_id}","starred_url":"https://api.github.com/users/blizzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blizzz/subscriptions","organizations_url":"https://api.github.com/users/blizzz/orgs","repos_url":"https://api.github.com/users/blizzz/repos","events_url":"https://api.github.com/users/blizzz/events{/privacy}","received_events_url":"https://api.github.com/users/blizzz/received_events","type":"user","site_admin":false},"created_at":"2013-06-05t15:33:32z","updated_at":"2013-06-05t15:33:32z","body":"that would be cool. you can change apps/user_ldap/lib/connection.php like this:\r\n\r\n```\r\ndiff --git a/apps/user_ldap/lib/connection.php b/apps/user_ldap/lib/connection.php\r\nindex 9b37369..46aef93 100644\r\n--- a/apps/user_ldap/lib/connection.php\r\n+++ b/apps/user_ldap/lib/connection.php\r\n@@ -472,6 +472,8 @@ class connection {\r\n                $configurationok = true;\r\n                if(empty($this->config['ldaphost'])) {\r\n                        \\ocp\\util::writelog('user_ldap', 'no ldap host given, won`t connect.', \\ocp\\util::warn);\r\n+                       $bt = debug_backtrace();\r\n+                       file_put_contents('/tmp/owncloud-backtrace.log', print_r($bt, true) . \"\\n####\\n\\n\", file_append);\r\n                        $configurationok = false;\r\n                }\r\n                if(empty($this->config['ldapport'])) {\r\n```\r\n\r\njust insert those two lines after the log output. it will put the backtrace in a seperate file that you specifiy as first parameter, adjust it if necessary.\r\n\r\nnow, if the behaviour occurs again the backtrace shall be in that file.\r\n\r\nyou won't even have a downtime :)"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/19036456","html_url":"https://github.com/owncloud/core/issues/3528#issuecomment-19036456","issue_url":"https://api.github.com/repos/owncloud/core/issues/3528","id":19036456,"user":{"login":"yotaka","id":4488731,"avatar_url":"https://gravatar.com/avatar/45fa612ad1442f2dfbec3c43e8ee2714?d=https%3a%2f%2fidenticons.github.com%2f0a6edbdace9847c1ede161fa6dd4a677.png&r=x","gravatar_id":"45fa612ad1442f2dfbec3c43e8ee2714","url":"https://api.github.com/users/yotaka","html_url":"https://github.com/yotaka","followers_url":"https://api.github.com/users/yotaka/followers","following_url":"https://api.github.com/users/yotaka/following{/other_user}","gists_url":"https://api.github.com/users/yotaka/gists{/gist_id}","starred_url":"https://api.github.com/users/yotaka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yotaka/subscriptions","organizations_url":"https://api.github.com/users/yotaka/orgs","repos_url":"https://api.github.com/users/yotaka/repos","events_url":"https://api.github.com/users/yotaka/events{/privacy}","received_events_url":"https://api.github.com/users/yotaka/received_events","type":"user","site_admin":false},"created_at":"2013-06-06t10:21:26z","updated_at":"2013-06-06t10:21:26z","body":"ok, here it comes:\r\nhttp://pastebin.com/tcbwb9ex\r\n\r\ni didn't want to delete anything, so it's quite much, but on the other hand it didn't run for very long, just a few minutes. \r\n\r\nas far as i've seen, there is no private information in there. hope it helps."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/19138119","html_url":"https://github.com/owncloud/core/issues/3528#issuecomment-19138119","issue_url":"https://api.github.com/repos/owncloud/core/issues/3528","id":19138119,"user":{"login":"blizzz","id":2184312,"avatar_url":"https://gravatar.com/avatar/1898b25a9cb3aa1a0f0febd1359910b9?d=https%3a%2f%2fidenticons.github.com%2fca03acec6deadf508b75eb0cf9ba036c.png&r=x","gravatar_id":"1898b25a9cb3aa1a0f0febd1359910b9","url":"https://api.github.com/users/blizzz","html_url":"https://github.com/blizzz","followers_url":"https://api.github.com/users/blizzz/followers","following_url":"https://api.github.com/users/blizzz/following{/other_user}","gists_url":"https://api.github.com/users/blizzz/gists{/gist_id}","starred_url":"https://api.github.com/users/blizzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blizzz/subscriptions","organizations_url":"https://api.github.com/users/blizzz/orgs","repos_url":"https://api.github.com/users/blizzz/repos","events_url":"https://api.github.com/users/blizzz/events{/privacy}","received_events_url":"https://api.github.com/users/blizzz/received_events","type":"user","site_admin":false},"created_at":"2013-06-07t23:20:46z","updated_at":"2013-06-07t23:20:46z","body":"cool, thanks for the backtrace! this pops up, when the background job is running.\r\n\r\na quick fix is probably: \r\n\r\n```diff\r\ndiff --git a/apps/user_ldap/lib/jobs.php b/apps/user_ldap/lib/jobs.php\r\nindex 094d11d..2e54a52 100644\r\n--- a/apps/user_ldap/lib/jobs.php\r\n+++ b/apps/user_ldap/lib/jobs.php\r\n@@ -139,7 +139,7 @@ class jobs {\r\n                if(!is_null(self::$connector)) {\r\n                        return self::$connector;\r\n                }\r\n-               self::$connector = new \\oca\\user_ldap\\lib\\connection('user_ldap');\r\n+               self::$connector = new \\oca\\user_ldap\\lib\\connection();\r\n                return self::$connector;\r\n        }\r\n```\r\n\r\n(just remove the 'user_ldap' in the brackets in line 142 in /path/to/owncloud/apps/user_ldap/lib/jobs.php ) i did not test it, but am confident it works. \r\n\r\nthe background job may need a bit more refinement, i will look more into next week.\r\n"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/19540902","html_url":"https://github.com/owncloud/core/issues/3528#issuecomment-19540902","issue_url":"https://api.github.com/repos/owncloud/core/issues/3528","id":19540902,"user":{"login":"yotaka","id":4488731,"avatar_url":"https://gravatar.com/avatar/45fa612ad1442f2dfbec3c43e8ee2714?d=https%3a%2f%2fidenticons.github.com%2f0a6edbdace9847c1ede161fa6dd4a677.png&r=x","gravatar_id":"45fa612ad1442f2dfbec3c43e8ee2714","url":"https://api.github.com/users/yotaka","html_url":"https://github.com/yotaka","followers_url":"https://api.github.com/users/yotaka/followers","following_url":"https://api.github.com/users/yotaka/following{/other_user}","gists_url":"https://api.github.com/users/yotaka/gists{/gist_id}","starred_url":"https://api.github.com/users/yotaka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yotaka/subscriptions","organizations_url":"https://api.github.com/users/yotaka/orgs","repos_url":"https://api.github.com/users/yotaka/repos","events_url":"https://api.github.com/users/yotaka/events{/privacy}","received_events_url":"https://api.github.com/users/yotaka/received_events","type":"user","site_admin":false},"created_at":"2013-06-17t12:09:14z","updated_at":"2013-06-17t12:09:14z","body":"it seems the errors have gone away. no errors since i applied those changes this morning.\r\n\r\nwhy did it affect only me? am i the only one using cronjobs? what's the issue with that line?"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/19547667","html_url":"https://github.com/owncloud/core/issues/3528#issuecomment-19547667","issue_url":"https://api.github.com/repos/owncloud/core/issues/3528","id":19547667,"user":{"login":"blizzz","id":2184312,"avatar_url":"https://gravatar.com/avatar/1898b25a9cb3aa1a0f0febd1359910b9?d=https%3a%2f%2fidenticons.github.com%2fca03acec6deadf508b75eb0cf9ba036c.png&r=x","gravatar_id":"1898b25a9cb3aa1a0f0febd1359910b9","url":"https://api.github.com/users/blizzz","html_url":"https://github.com/blizzz","followers_url":"https://api.github.com/users/blizzz/followers","following_url":"https://api.github.com/users/blizzz/following{/other_user}","gists_url":"https://api.github.com/users/blizzz/gists{/gist_id}","starred_url":"https://api.github.com/users/blizzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blizzz/subscriptions","organizations_url":"https://api.github.com/users/blizzz/orgs","repos_url":"https://api.github.com/users/blizzz/repos","events_url":"https://api.github.com/users/blizzz/events{/privacy}","received_events_url":"https://api.github.com/users/blizzz/received_events","type":"user","site_admin":false},"created_at":"2013-06-17t14:16:36z","updated_at":"2013-06-17t14:16:36z","body":"i really doubt it does only affect you :) \r\nthe constructor changed from 4.5 to 5.0 but the background job was not adjusted."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/19629646","html_url":"https://github.com/owncloud/core/issues/3528#issuecomment-19629646","issue_url":"https://api.github.com/repos/owncloud/core/issues/3528","id":19629646,"user":{"login":"blizzz","id":2184312,"avatar_url":"https://gravatar.com/avatar/1898b25a9cb3aa1a0f0febd1359910b9?d=https%3a%2f%2fidenticons.github.com%2fca03acec6deadf508b75eb0cf9ba036c.png&r=x","gravatar_id":"1898b25a9cb3aa1a0f0febd1359910b9","url":"https://api.github.com/users/blizzz","html_url":"https://github.com/blizzz","followers_url":"https://api.github.com/users/blizzz/followers","following_url":"https://api.github.com/users/blizzz/following{/other_user}","gists_url":"https://api.github.com/users/blizzz/gists{/gist_id}","starred_url":"https://api.github.com/users/blizzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blizzz/subscriptions","organizations_url":"https://api.github.com/users/blizzz/orgs","repos_url":"https://api.github.com/users/blizzz/repos","events_url":"https://api.github.com/users/blizzz/events{/privacy}","received_events_url":"https://api.github.com/users/blizzz/received_events","type":"user","site_admin":false},"created_at":"2013-06-18t18:09:58z","updated_at":"2013-06-18t18:09:58z","body":"@yotaka https://github.com/owncloud/core/pull/3778 is a more proper fix, if you like you could test it and leave your result there"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/19901360","html_url":"https://github.com/owncloud/core/issues/3528#issuecomment-19901360","issue_url":"https://api.github.com/repos/owncloud/core/issues/3528","id":19901360,"user":{"login":"yotaka","id":4488731,"avatar_url":"https://gravatar.com/avatar/45fa612ad1442f2dfbec3c43e8ee2714?d=https%3a%2f%2fidenticons.github.com%2f0a6edbdace9847c1ede161fa6dd4a677.png&r=x","gravatar_id":"45fa612ad1442f2dfbec3c43e8ee2714","url":"https://api.github.com/users/yotaka","html_url":"https://github.com/yotaka","followers_url":"https://api.github.com/users/yotaka/followers","following_url":"https://api.github.com/users/yotaka/following{/other_user}","gists_url":"https://api.github.com/users/yotaka/gists{/gist_id}","starred_url":"https://api.github.com/users/yotaka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yotaka/subscriptions","organizations_url":"https://api.github.com/users/yotaka/orgs","repos_url":"https://api.github.com/users/yotaka/repos","events_url":"https://api.github.com/users/yotaka/events{/privacy}","received_events_url":"https://api.github.com/users/yotaka/received_events","type":"user","site_admin":false},"created_at":"2013-06-24t11:25:29z","updated_at":"2013-06-26t09:14:20z","body":"i have applied your proposed fix this morning and got no new entries in my log since then. however, before, while your quickfix from https://github.com/owncloud/core/issues/3528#issuecomment-19138119 was used, during several days i got (only) one new log entry: \r\n{\"app\":\"user_ldap\",\"message\":\"bind failed: -1: can't contact ldap server\",\"level\":3,\"time\":1371553041}\r\n\r\ni'll report any new log entries here. thanks for the fix.\r\n\r\n//edit at 26th june: two days later, still no log entry in my installation. i think this is fixed. i will close the issue now."}]