[{"url":"https://api.github.com/repos/owncloud/core/issues/comments/26905833","html_url":"https://github.com/owncloud/core/pull/5493#issuecomment-26905833","issue_url":"https://api.github.com/repos/owncloud/core/issues/5493","id":26905833,"user":{"login":"karlitschek","id":867445,"avatar_url":"https://gravatar.com/avatar/87ce2b4531ee1a0c32b50e0d8f049224?d=https%3a%2f%2fidenticons.github.com%2f06e7098636caebfc9c30c9f52eb905df.png&r=x","gravatar_id":"87ce2b4531ee1a0c32b50e0d8f049224","url":"https://api.github.com/users/karlitschek","html_url":"https://github.com/karlitschek","followers_url":"https://api.github.com/users/karlitschek/followers","following_url":"https://api.github.com/users/karlitschek/following{/other_user}","gists_url":"https://api.github.com/users/karlitschek/gists{/gist_id}","starred_url":"https://api.github.com/users/karlitschek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karlitschek/subscriptions","organizations_url":"https://api.github.com/users/karlitschek/orgs","repos_url":"https://api.github.com/users/karlitschek/repos","events_url":"https://api.github.com/users/karlitschek/events{/privacy}","received_events_url":"https://api.github.com/users/karlitschek/received_events","type":"user","site_admin":false},"created_at":"2013-10-23t13:46:51z","updated_at":"2013-10-23t13:46:51z","body":"sweet :+1: "},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/26909414","html_url":"https://github.com/owncloud/core/pull/5493#issuecomment-26909414","issue_url":"https://api.github.com/repos/owncloud/core/issues/5493","id":26909414,"user":{"login":"owncloud-bot","id":2709266,"avatar_url":"https://gravatar.com/avatar/6e9c466b35bb113112f7401859d614f6?d=https%3a%2f%2fidenticons.github.com%2ffb9254ba3a207c96653361df97807914.png&r=x","gravatar_id":"6e9c466b35bb113112f7401859d614f6","url":"https://api.github.com/users/owncloud-bot","html_url":"https://github.com/owncloud-bot","followers_url":"https://api.github.com/users/owncloud-bot/followers","following_url":"https://api.github.com/users/owncloud-bot/following{/other_user}","gists_url":"https://api.github.com/users/owncloud-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/owncloud-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/owncloud-bot/subscriptions","organizations_url":"https://api.github.com/users/owncloud-bot/orgs","repos_url":"https://api.github.com/users/owncloud-bot/repos","events_url":"https://api.github.com/users/owncloud-bot/events{/privacy}","received_events_url":"https://api.github.com/users/owncloud-bot/received_events","type":"user","site_admin":false},"created_at":"2013-10-23t14:28:57z","updated_at":"2013-10-23t14:28:57z","body":"test **failed**.\nrefer to this link for build results: https://ci.owncloud.org/job/pull-request-analyser/1743/"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/26922810","html_url":"https://github.com/owncloud/core/pull/5493#issuecomment-26922810","issue_url":"https://api.github.com/repos/owncloud/core/issues/5493","id":26922810,"user":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false},"created_at":"2013-10-23t16:59:09z","updated_at":"2013-10-23t16:59:09z","body":"@owncloud-bot retest this please"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/26923459","html_url":"https://github.com/owncloud/core/pull/5493#issuecomment-26923459","issue_url":"https://api.github.com/repos/owncloud/core/issues/5493","id":26923459,"user":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false},"created_at":"2013-10-23t17:06:57z","updated_at":"2013-10-23t17:06:57z","body":":+1: "},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/26930988","html_url":"https://github.com/owncloud/core/pull/5493#issuecomment-26930988","issue_url":"https://api.github.com/repos/owncloud/core/issues/5493","id":26930988,"user":{"login":"owncloud-bot","id":2709266,"avatar_url":"https://gravatar.com/avatar/6e9c466b35bb113112f7401859d614f6?d=https%3a%2f%2fidenticons.github.com%2ffb9254ba3a207c96653361df97807914.png&r=x","gravatar_id":"6e9c466b35bb113112f7401859d614f6","url":"https://api.github.com/users/owncloud-bot","html_url":"https://github.com/owncloud-bot","followers_url":"https://api.github.com/users/owncloud-bot/followers","following_url":"https://api.github.com/users/owncloud-bot/following{/other_user}","gists_url":"https://api.github.com/users/owncloud-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/owncloud-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/owncloud-bot/subscriptions","organizations_url":"https://api.github.com/users/owncloud-bot/orgs","repos_url":"https://api.github.com/users/owncloud-bot/repos","events_url":"https://api.github.com/users/owncloud-bot/events{/privacy}","received_events_url":"https://api.github.com/users/owncloud-bot/received_events","type":"user","site_admin":false},"created_at":"2013-10-23t18:27:44z","updated_at":"2013-10-23t18:27:44z","body":"test **failed**.\nrefer to this link for build results: https://ci.owncloud.org/job/pull-request-analyser/1755/"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/26942779","html_url":"https://github.com/owncloud/core/pull/5493#issuecomment-26942779","issue_url":"https://api.github.com/repos/owncloud/core/issues/5493","id":26942779,"user":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false},"created_at":"2013-10-23t20:30:43z","updated_at":"2013-10-23t20:30:43z","body":"@owncloud-bot retest this please"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/26945891","html_url":"https://github.com/owncloud/core/pull/5493#issuecomment-26945891","issue_url":"https://api.github.com/repos/owncloud/core/issues/5493","id":26945891,"user":{"login":"owncloud-bot","id":2709266,"avatar_url":"https://gravatar.com/avatar/6e9c466b35bb113112f7401859d614f6?d=https%3a%2f%2fidenticons.github.com%2ffb9254ba3a207c96653361df97807914.png&r=x","gravatar_id":"6e9c466b35bb113112f7401859d614f6","url":"https://api.github.com/users/owncloud-bot","html_url":"https://github.com/owncloud-bot","followers_url":"https://api.github.com/users/owncloud-bot/followers","following_url":"https://api.github.com/users/owncloud-bot/following{/other_user}","gists_url":"https://api.github.com/users/owncloud-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/owncloud-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/owncloud-bot/subscriptions","organizations_url":"https://api.github.com/users/owncloud-bot/orgs","repos_url":"https://api.github.com/users/owncloud-bot/repos","events_url":"https://api.github.com/users/owncloud-bot/events{/privacy}","received_events_url":"https://api.github.com/users/owncloud-bot/received_events","type":"user","site_admin":false},"created_at":"2013-10-23t21:10:20z","updated_at":"2013-10-23t21:10:20z","body":"test **failed**.\nrefer to this link for build results: https://ci.owncloud.org/job/pull-request-analyser/1758/"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/26951451","html_url":"https://github.com/owncloud/core/pull/5493#issuecomment-26951451","issue_url":"https://api.github.com/repos/owncloud/core/issues/5493","id":26951451,"user":{"login":"bantu","id":189375,"avatar_url":"https://gravatar.com/avatar/88483d87947219efecfc570465c753b2?d=https%3a%2f%2fidenticons.github.com%2fcdc48f189c0e2e8a870f3d54615a2f0d.png&r=x","gravatar_id":"88483d87947219efecfc570465c753b2","url":"https://api.github.com/users/bantu","html_url":"https://github.com/bantu","followers_url":"https://api.github.com/users/bantu/followers","following_url":"https://api.github.com/users/bantu/following{/other_user}","gists_url":"https://api.github.com/users/bantu/gists{/gist_id}","starred_url":"https://api.github.com/users/bantu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bantu/subscriptions","organizations_url":"https://api.github.com/users/bantu/orgs","repos_url":"https://api.github.com/users/bantu/repos","events_url":"https://api.github.com/users/bantu/events{/privacy}","received_events_url":"https://api.github.com/users/bantu/received_events","type":"user","site_admin":false},"created_at":"2013-10-23t22:23:19z","updated_at":"2013-10-23t22:23:19z","body":"@owncloud-bot retest this please."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/26954190","html_url":"https://github.com/owncloud/core/pull/5493#issuecomment-26954190","issue_url":"https://api.github.com/repos/owncloud/core/issues/5493","id":26954190,"user":{"login":"owncloud-bot","id":2709266,"avatar_url":"https://gravatar.com/avatar/6e9c466b35bb113112f7401859d614f6?d=https%3a%2f%2fidenticons.github.com%2ffb9254ba3a207c96653361df97807914.png&r=x","gravatar_id":"6e9c466b35bb113112f7401859d614f6","url":"https://api.github.com/users/owncloud-bot","html_url":"https://github.com/owncloud-bot","followers_url":"https://api.github.com/users/owncloud-bot/followers","following_url":"https://api.github.com/users/owncloud-bot/following{/other_user}","gists_url":"https://api.github.com/users/owncloud-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/owncloud-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/owncloud-bot/subscriptions","organizations_url":"https://api.github.com/users/owncloud-bot/orgs","repos_url":"https://api.github.com/users/owncloud-bot/repos","events_url":"https://api.github.com/users/owncloud-bot/events{/privacy}","received_events_url":"https://api.github.com/users/owncloud-bot/received_events","type":"user","site_admin":false},"created_at":"2013-10-23t23:10:31z","updated_at":"2013-10-23t23:10:31z","body":"merged build started."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/26957173","html_url":"https://github.com/owncloud/core/pull/5493#issuecomment-26957173","issue_url":"https://api.github.com/repos/owncloud/core/issues/5493","id":26957173,"user":{"login":"owncloud-bot","id":2709266,"avatar_url":"https://gravatar.com/avatar/6e9c466b35bb113112f7401859d614f6?d=https%3a%2f%2fidenticons.github.com%2ffb9254ba3a207c96653361df97807914.png&r=x","gravatar_id":"6e9c466b35bb113112f7401859d614f6","url":"https://api.github.com/users/owncloud-bot","html_url":"https://github.com/owncloud-bot","followers_url":"https://api.github.com/users/owncloud-bot/followers","following_url":"https://api.github.com/users/owncloud-bot/following{/other_user}","gists_url":"https://api.github.com/users/owncloud-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/owncloud-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/owncloud-bot/subscriptions","organizations_url":"https://api.github.com/users/owncloud-bot/orgs","repos_url":"https://api.github.com/users/owncloud-bot/repos","events_url":"https://api.github.com/users/owncloud-bot/events{/privacy}","received_events_url":"https://api.github.com/users/owncloud-bot/received_events","type":"user","site_admin":false},"created_at":"2013-10-24t00:10:31z","updated_at":"2013-10-24t00:10:31z","body":"test **failed**.\nrefer to this link for build results: https://ci.owncloud.org/job/pull-request-analyser/1761/"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/27017594","html_url":"https://github.com/owncloud/core/pull/5493#issuecomment-27017594","issue_url":"https://api.github.com/repos/owncloud/core/issues/5493","id":27017594,"user":{"login":"owncloud-bot","id":2709266,"avatar_url":"https://gravatar.com/avatar/6e9c466b35bb113112f7401859d614f6?d=https%3a%2f%2fidenticons.github.com%2ffb9254ba3a207c96653361df97807914.png&r=x","gravatar_id":"6e9c466b35bb113112f7401859d614f6","url":"https://api.github.com/users/owncloud-bot","html_url":"https://github.com/owncloud-bot","followers_url":"https://api.github.com/users/owncloud-bot/followers","following_url":"https://api.github.com/users/owncloud-bot/following{/other_user}","gists_url":"https://api.github.com/users/owncloud-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/owncloud-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/owncloud-bot/subscriptions","organizations_url":"https://api.github.com/users/owncloud-bot/orgs","repos_url":"https://api.github.com/users/owncloud-bot/repos","events_url":"https://api.github.com/users/owncloud-bot/events{/privacy}","received_events_url":"https://api.github.com/users/owncloud-bot/received_events","type":"user","site_admin":false},"created_at":"2013-10-24t18:29:47z","updated_at":"2013-10-24t18:29:47z","body":"test **failed**.\nrefer to this link for build results: https://ci.owncloud.org/job/pull-request-analyser/1778/"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/27028473","html_url":"https://github.com/owncloud/core/pull/5493#issuecomment-27028473","issue_url":"https://api.github.com/repos/owncloud/core/issues/5493","id":27028473,"user":{"login":"bantu","id":189375,"avatar_url":"https://gravatar.com/avatar/88483d87947219efecfc570465c753b2?d=https%3a%2f%2fidenticons.github.com%2fcdc48f189c0e2e8a870f3d54615a2f0d.png&r=x","gravatar_id":"88483d87947219efecfc570465c753b2","url":"https://api.github.com/users/bantu","html_url":"https://github.com/bantu","followers_url":"https://api.github.com/users/bantu/followers","following_url":"https://api.github.com/users/bantu/following{/other_user}","gists_url":"https://api.github.com/users/bantu/gists{/gist_id}","starred_url":"https://api.github.com/users/bantu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bantu/subscriptions","organizations_url":"https://api.github.com/users/bantu/orgs","repos_url":"https://api.github.com/users/bantu/repos","events_url":"https://api.github.com/users/bantu/events{/privacy}","received_events_url":"https://api.github.com/users/bantu/received_events","type":"user","site_admin":false},"created_at":"2013-10-24t20:48:45z","updated_at":"2013-10-24t20:48:45z","body":"@deepdiver1975 this should be an unrelated failure. my wild guess is that dependencies for `test\\preview::testistransparent.testistransparent with data set #0` are not met. the test should probably be skipped when exec, which or libreoffice/openoffice are not available."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/27248865","html_url":"https://github.com/owncloud/core/pull/5493#issuecomment-27248865","issue_url":"https://api.github.com/repos/owncloud/core/issues/5493","id":27248865,"user":{"login":"bantu","id":189375,"avatar_url":"https://gravatar.com/avatar/88483d87947219efecfc570465c753b2?d=https%3a%2f%2fidenticons.github.com%2fcdc48f189c0e2e8a870f3d54615a2f0d.png&r=x","gravatar_id":"88483d87947219efecfc570465c753b2","url":"https://api.github.com/users/bantu","html_url":"https://github.com/bantu","followers_url":"https://api.github.com/users/bantu/followers","following_url":"https://api.github.com/users/bantu/following{/other_user}","gists_url":"https://api.github.com/users/bantu/gists{/gist_id}","starred_url":"https://api.github.com/users/bantu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bantu/subscriptions","organizations_url":"https://api.github.com/users/bantu/orgs","repos_url":"https://api.github.com/users/bantu/repos","events_url":"https://api.github.com/users/bantu/events{/privacy}","received_events_url":"https://api.github.com/users/bantu/received_events","type":"user","site_admin":false},"created_at":"2013-10-28t19:48:57z","updated_at":"2013-10-28t19:48:57z","body":"@owncloud-bot retest this please."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/27248965","html_url":"https://github.com/owncloud/core/pull/5493#issuecomment-27248965","issue_url":"https://api.github.com/repos/owncloud/core/issues/5493","id":27248965,"user":{"login":"bantu","id":189375,"avatar_url":"https://gravatar.com/avatar/88483d87947219efecfc570465c753b2?d=https%3a%2f%2fidenticons.github.com%2fcdc48f189c0e2e8a870f3d54615a2f0d.png&r=x","gravatar_id":"88483d87947219efecfc570465c753b2","url":"https://api.github.com/users/bantu","html_url":"https://github.com/bantu","followers_url":"https://api.github.com/users/bantu/followers","following_url":"https://api.github.com/users/bantu/following{/other_user}","gists_url":"https://api.github.com/users/bantu/gists{/gist_id}","starred_url":"https://api.github.com/users/bantu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bantu/subscriptions","organizations_url":"https://api.github.com/users/bantu/orgs","repos_url":"https://api.github.com/users/bantu/repos","events_url":"https://api.github.com/users/bantu/events{/privacy}","received_events_url":"https://api.github.com/users/bantu/received_events","type":"user","site_admin":false},"created_at":"2013-10-28t19:49:56z","updated_at":"2013-10-28t19:49:56z","body":"@vicdeo @pvince81 @ringmaster please review."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/27261780","html_url":"https://github.com/owncloud/core/pull/5493#issuecomment-27261780","issue_url":"https://api.github.com/repos/owncloud/core/issues/5493","id":27261780,"user":{"login":"ringmaster","id":127738,"avatar_url":"https://gravatar.com/avatar/2e4c262dd7f74a26b28f905c0fa15048?d=https%3a%2f%2fidenticons.github.com%2f968ec2eda9ddfebb1b5a00c05b9cc674.png&r=x","gravatar_id":"2e4c262dd7f74a26b28f905c0fa15048","url":"https://api.github.com/users/ringmaster","html_url":"https://github.com/ringmaster","followers_url":"https://api.github.com/users/ringmaster/followers","following_url":"https://api.github.com/users/ringmaster/following{/other_user}","gists_url":"https://api.github.com/users/ringmaster/gists{/gist_id}","starred_url":"https://api.github.com/users/ringmaster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ringmaster/subscriptions","organizations_url":"https://api.github.com/users/ringmaster/orgs","repos_url":"https://api.github.com/users/ringmaster/repos","events_url":"https://api.github.com/users/ringmaster/events{/privacy}","received_events_url":"https://api.github.com/users/ringmaster/received_events","type":"user","site_admin":false},"created_at":"2013-10-28t22:09:18z","updated_at":"2013-10-28t22:09:18z","body":"this code appears not to respect language q values provided in the header.\r\n\r\nadd this as a test case:\r\n`array(null, 'en-us;q=0.8,en;q=0.6,de-us', 'de')`\r\n\r\nthe code returns \"en\" as the result, and the correct should be \"de\".\r\n\r\nin this accepts-language header, \"en-us\" has a q of 0.8, and \"de-us\" has a q of 1.0 (the default).  if \"de\" is an available language, it should be returned instead of \"en\".  the order of the provided languages is arbitrary.\r\n\r\nthis passes the tests in this pr and the one above:\r\n```php\r\n\t\tif(isset($_server['http_accept_language'])) {\r\n\t\t\tif(is_array($app)) {\r\n\t\t\t\t$available = $app;\r\n\t\t\t} else {\r\n\t\t\t\t$available = self::findavailablelanguages($app);\r\n\t\t\t}\r\n\r\n\t\t\tpreg_match_all(\r\n\t\t\t\t'/(?p<lang>(?:\\w{2}|\\*)(?:\\-\\w{2})?)(?:\\s*;\\s*q\\s*=\\s*(?p<q>\\d\\.\\d))?/m',\r\n\t\t\t\tstrtolower($_server['http_accept_language']),\r\n\t\t\t\t$rawpreferences,\r\n\t\t\t\tpreg_set_order\r\n\t\t\t);\r\n\t\t\t$preferences = array();\r\n\t\t\tforeach($rawpreferences as $preference) {\r\n\t\t\t\t$q = isset($preference['q']) ? floatval($preference['q']) : 1.0;\r\n\t\t\t\t$preferences[str_replace('-', '_', $preference['lang'])] = $q;\r\n\t\t\t\t$preferences[substr($preference['lang'], 0, 2)] = $q - 0.01;\r\n\t\t\t}\r\n\t\t\t$available = array_combine(array_map('strtolower', $available), $available);\r\n\t\t\t$available['*'] = 'en';\r\n\t\t\t$results = array_intersect_key($preferences, $available);\r\n\r\n\t\t\tif(count($results)) {\r\n\t\t\t\tarsort($results);\r\n\t\t\t\treset($results);\r\n\t\t\t\treturn $available[key($results)];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// last try: english\r\n\t\treturn 'en';\r\n```\r\n\r\nhere are a few extra test cases, including the one above:\r\n\r\n```php\r\n\t\t\t// try for some we don't provide\r\n\t\t\tarray(null, 'de-us;q=0.5,qx-mg,qy-lo;q=0.8', 'de'),\r\n\t\t\tarray(null, 'qx-mg,qy-lo;q=0.8,de-us;q=0.5', 'de'),\r\n\t\t\tarray(null, 'de-us,qy-us;q=0.8,qx;q=0.6', 'de'),\r\n\r\n\t\t\t// best match, out of q-order\r\n\t\t\tarray(null, 'en-us;q=0.8,en;q=0.6,de-us', 'de'),\r\n\t\t\tarray(null, 'en;q=0.5,de-us', 'de'),\r\n\r\n\t\t\t// account for * range\r\n\t\t\tarray(null, 'en;q=0.8,*;q=0.7', 'en'),\r\n\t\t\tarray(null, 'de-us;q=0.6,*;q=0.7', 'en'),\r\n```"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/27262074","html_url":"https://github.com/owncloud/core/pull/5493#issuecomment-27262074","issue_url":"https://api.github.com/repos/owncloud/core/issues/5493","id":27262074,"user":{"login":"bantu","id":189375,"avatar_url":"https://gravatar.com/avatar/88483d87947219efecfc570465c753b2?d=https%3a%2f%2fidenticons.github.com%2fcdc48f189c0e2e8a870f3d54615a2f0d.png&r=x","gravatar_id":"88483d87947219efecfc570465c753b2","url":"https://api.github.com/users/bantu","html_url":"https://github.com/bantu","followers_url":"https://api.github.com/users/bantu/followers","following_url":"https://api.github.com/users/bantu/following{/other_user}","gists_url":"https://api.github.com/users/bantu/gists{/gist_id}","starred_url":"https://api.github.com/users/bantu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bantu/subscriptions","organizations_url":"https://api.github.com/users/bantu/orgs","repos_url":"https://api.github.com/users/bantu/repos","events_url":"https://api.github.com/users/bantu/events{/privacy}","received_events_url":"https://api.github.com/users/bantu/received_events","type":"user","site_admin":false},"created_at":"2013-10-28t22:13:13z","updated_at":"2013-10-28t22:13:13z","body":"@ringmaster i was trying to fix the implementation. maybe i should have just replaced it completely. the old implementation did not honor `q` either. hmm."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/27262670","html_url":"https://github.com/owncloud/core/pull/5493#issuecomment-27262670","issue_url":"https://api.github.com/repos/owncloud/core/issues/5493","id":27262670,"user":{"login":"ringmaster","id":127738,"avatar_url":"https://gravatar.com/avatar/2e4c262dd7f74a26b28f905c0fa15048?d=https%3a%2f%2fidenticons.github.com%2f968ec2eda9ddfebb1b5a00c05b9cc674.png&r=x","gravatar_id":"2e4c262dd7f74a26b28f905c0fa15048","url":"https://api.github.com/users/ringmaster","html_url":"https://github.com/ringmaster","followers_url":"https://api.github.com/users/ringmaster/followers","following_url":"https://api.github.com/users/ringmaster/following{/other_user}","gists_url":"https://api.github.com/users/ringmaster/gists{/gist_id}","starred_url":"https://api.github.com/users/ringmaster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ringmaster/subscriptions","organizations_url":"https://api.github.com/users/ringmaster/orgs","repos_url":"https://api.github.com/users/ringmaster/repos","events_url":"https://api.github.com/users/ringmaster/events{/privacy}","received_events_url":"https://api.github.com/users/ringmaster/received_events","type":"user","site_admin":false},"created_at":"2013-10-28t22:21:28z","updated_at":"2013-10-28t22:21:28z","body":"i think even the code i provided isn't quite right.  specifically, \"en\" in the header should match \"en-gb\" or \"en-us\", but i think a request for \"en-us\" in the header shouldn't necessarily match our \"en\" language file.  i think it's incumbent on the client to request \"en-gb,en;q=0.9\" if it prefers \"en-gb\" with a fallback to \"any random english dialect\", instead of us sending \"any random dialect\" when they specifically request a dialect we don't stock."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/27262742","html_url":"https://github.com/owncloud/core/pull/5493#issuecomment-27262742","issue_url":"https://api.github.com/repos/owncloud/core/issues/5493","id":27262742,"user":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false},"created_at":"2013-10-28t22:22:37z","updated_at":"2013-10-28t22:22:37z","body":"i think we can add q support for oc7 - the current approach fixes the basic issue for oc6 just fine"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/27267275","html_url":"https://github.com/owncloud/core/pull/5493#issuecomment-27267275","issue_url":"https://api.github.com/repos/owncloud/core/issues/5493","id":27267275,"user":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false},"created_at":"2013-10-28t23:37:49z","updated_at":"2013-10-28t23:37:49z","body":"failing test case is unrelated to this pull request - will most probably fail now on master - needs adjustments"}]