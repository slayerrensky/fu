[{"url":"https://api.github.com/repos/owncloud/core/issues/comments/10847262","html_url":"https://github.com/owncloud/core/issues/631#issuecomment-10847262","issue_url":"https://api.github.com/repos/owncloud/core/issues/631","id":10847262,"user":{"login":"deepdiver1975","id":1005065,"avatar_url":"https://gravatar.com/avatar/bdba071ed68da9ce8edae53c364902ef?d=https%3a%2f%2fidenticons.github.com%2f67e101ad9531b7d25697b76e503e062e.png&r=x","gravatar_id":"bdba071ed68da9ce8edae53c364902ef","url":"https://api.github.com/users/deepdiver1975","html_url":"https://github.com/deepdiver1975","followers_url":"https://api.github.com/users/deepdiver1975/followers","following_url":"https://api.github.com/users/deepdiver1975/following{/other_user}","gists_url":"https://api.github.com/users/deepdiver1975/gists{/gist_id}","starred_url":"https://api.github.com/users/deepdiver1975/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepdiver1975/subscriptions","organizations_url":"https://api.github.com/users/deepdiver1975/orgs","repos_url":"https://api.github.com/users/deepdiver1975/repos","events_url":"https://api.github.com/users/deepdiver1975/events{/privacy}","received_events_url":"https://api.github.com/users/deepdiver1975/received_events","type":"user","site_admin":false},"created_at":"2012-11-29t13:37:14z","updated_at":"2012-11-29t13:37:14z","body":"@blizzz can you please have a look? thx"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/10853986","html_url":"https://github.com/owncloud/core/issues/631#issuecomment-10853986","issue_url":"https://api.github.com/repos/owncloud/core/issues/631","id":10853986,"user":{"login":"blizzz","id":2184312,"avatar_url":"https://gravatar.com/avatar/1898b25a9cb3aa1a0f0febd1359910b9?d=https%3a%2f%2fidenticons.github.com%2fca03acec6deadf508b75eb0cf9ba036c.png&r=x","gravatar_id":"1898b25a9cb3aa1a0f0febd1359910b9","url":"https://api.github.com/users/blizzz","html_url":"https://github.com/blizzz","followers_url":"https://api.github.com/users/blizzz/followers","following_url":"https://api.github.com/users/blizzz/following{/other_user}","gists_url":"https://api.github.com/users/blizzz/gists{/gist_id}","starred_url":"https://api.github.com/users/blizzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blizzz/subscriptions","organizations_url":"https://api.github.com/users/blizzz/orgs","repos_url":"https://api.github.com/users/blizzz/repos","events_url":"https://api.github.com/users/blizzz/events{/privacy}","received_events_url":"https://api.github.com/users/blizzz/received_events","type":"user","site_admin":false},"created_at":"2012-11-29t16:07:34z","updated_at":"2012-11-29t16:07:34z","body":"what's the output of the web server error log?"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/10855622","html_url":"https://github.com/owncloud/core/issues/631#issuecomment-10855622","issue_url":"https://api.github.com/repos/owncloud/core/issues/631","id":10855622,"user":{"login":"meshok0","id":2921304,"avatar_url":"https://gravatar.com/avatar/e4a6a08fbaf487545c93c527fa733a30?d=https%3a%2f%2fidenticons.github.com%2fae77ae1f1d404cbb63f83496390e6af6.png&r=x","gravatar_id":"e4a6a08fbaf487545c93c527fa733a30","url":"https://api.github.com/users/meshok0","html_url":"https://github.com/meshok0","followers_url":"https://api.github.com/users/meshok0/followers","following_url":"https://api.github.com/users/meshok0/following{/other_user}","gists_url":"https://api.github.com/users/meshok0/gists{/gist_id}","starred_url":"https://api.github.com/users/meshok0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/meshok0/subscriptions","organizations_url":"https://api.github.com/users/meshok0/orgs","repos_url":"https://api.github.com/users/meshok0/repos","events_url":"https://api.github.com/users/meshok0/events{/privacy}","received_events_url":"https://api.github.com/users/meshok0/received_events","type":"user","site_admin":false},"created_at":"2012-11-29t16:41:38z","updated_at":"2012-11-29t16:41:38z","body":"after login:\n\n[thu nov 29 20:34:41 2012] [error] [client 172.16.0.14] php fatal \nerror:  uncaught exception 'pdoexception' with message 'sqlstate[23000]: \nintegrity constraint violation: 1062 duplicate entry \n'cn=\\\\5cd0\\\\5cb2\\\\5cd0\\\\5cbb\\\\5cd0\\\\5cb0\\\\5cd0\\\\5cb4\\\\5cd0\\\\5cb5\\\\5cd0\\\\5cbb\\\\' \nfor key 'ldap_dn_groups'' in /var/www/owncloud/lib/db.php:731\\nstack \ntrace:\\n#0 /var/www/owncloud/lib/db.php(731): \npdostatement->execute(array)\\n#1 \n/var/www/owncloud/apps/user_ldap/lib/access.php(449): \npdostatementwrapper->execute(array)\\n#2 \n/var/www/owncloud/apps/user_ldap/lib/access.php(289): \noca\\\\user_ldap\\\\lib\\\\access->mapcomponent('cn=\\\\5cd0\\\\5cb2\\\\5...', \n'-__@_users_ukon...', false)\\n#3 \n/var/www/owncloud/apps/user_ldap/lib/access.php(364): \noca\\\\user_ldap\\\\lib\\\\access->dn2ocname('cn=\\\\5cd0\\\\5cb2\\\\5...', \n'???????????????...', false)\\n#4 \n/var/www/owncloud/apps/user_ldap/lib/access.php(318): \noca\\\\user_ldap\\\\lib\\\\access->ldap2owncloudnames(array, false)\\n#5 \n/var/www/owncloud/apps/user_ldap/group_ldap.php(214): \noca\\\\user_ldap\\\\lib\\\\access->owncloudgroupnames(array)\\n#6 \n/var/www/owncloud/apps/user_ldap/lib/jobs.php(42): \noca\\\\user_ldap\\\\group_ldap->getgroup in /var/www/owncloud/lib/db.php on \nline 731, referer: http://192.168.10.19:8093/\n\n\nnext, after click on settings -> users\n\n[thu nov 29 20:39:20 2012] [error] [client 172.16.0.14] php fatal \nerror:  uncaught exception 'pdoexception' with message 'sqlstate[23000]: \nintegrity constraint violation: 1062 duplicate entry \n'cn=\\\\5cd0\\\\5cb2\\\\5cd0\\\\5cbb\\\\5cd0\\\\5cb0\\\\5cd0\\\\5cb4\\\\5cd0\\\\5cb5\\\\5cd0\\\\5cbb\\\\' \nfor key 'ldap_dn_groups'' in /var/www/owncloud/lib/db.php:731\\nstack \ntrace:\\n#0 /var/www/owncloud/lib/db.php(731): \npdostatement->execute(array)\\n#1 \n/var/www/owncloud/apps/user_ldap/lib/access.php(449): \npdostatementwrapper->execute(array)\\n#2 \n/var/www/owncloud/apps/user_ldap/lib/access.php(289): \noca\\\\user_ldap\\\\lib\\\\access->mapcomponent('cn=\\\\5cd0\\\\5cb2\\\\5...', \n'-__@_users_ukon...', false)\\n#3 \n/var/www/owncloud/apps/user_ldap/lib/access.php(364): \noca\\\\user_ldap\\\\lib\\\\access->dn2ocname('cn=\\\\5cd0\\\\5cb2\\\\5...', \n'???????????????...', false)\\n#4 \n/var/www/owncloud/apps/user_ldap/lib/access.php(318): \noca\\\\user_ldap\\\\lib\\\\access->ldap2owncloudnames(array, false)\\n#5 \n/var/www/owncloud/apps/user_ldap/group_ldap.php(214): \noca\\\\user_ldap\\\\lib\\\\access->owncloudgroupnames(array)\\n#6 \n/var/www/owncloud/lib/group.php(241): \noca\\\\user_ldap\\\\group_ldap->getgroups('', -1, 0)\\n in \n/var/www/owncloud/lib/db.php on line 731, referer: \nhttp://192.168.10.19:8093/"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/10857930","html_url":"https://github.com/owncloud/core/issues/631#issuecomment-10857930","issue_url":"https://api.github.com/repos/owncloud/core/issues/631","id":10857930,"user":{"login":"blizzz","id":2184312,"avatar_url":"https://gravatar.com/avatar/1898b25a9cb3aa1a0f0febd1359910b9?d=https%3a%2f%2fidenticons.github.com%2fca03acec6deadf508b75eb0cf9ba036c.png&r=x","gravatar_id":"1898b25a9cb3aa1a0f0febd1359910b9","url":"https://api.github.com/users/blizzz","html_url":"https://github.com/blizzz","followers_url":"https://api.github.com/users/blizzz/followers","following_url":"https://api.github.com/users/blizzz/following{/other_user}","gists_url":"https://api.github.com/users/blizzz/gists{/gist_id}","starred_url":"https://api.github.com/users/blizzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blizzz/subscriptions","organizations_url":"https://api.github.com/users/blizzz/orgs","repos_url":"https://api.github.com/users/blizzz/repos","events_url":"https://api.github.com/users/blizzz/events{/privacy}","received_events_url":"https://api.github.com/users/blizzz/received_events","type":"user","site_admin":false},"created_at":"2012-11-29t17:35:51z","updated_at":"2012-11-29t17:35:51z","body":"cool. that actually cannot happen. probably wouldn't happen on any other day than today.\r\ncould you please tell us how the table oc_ldap_user_mapping looks like?"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/10879240","html_url":"https://github.com/owncloud/core/issues/631#issuecomment-10879240","issue_url":"https://api.github.com/repos/owncloud/core/issues/631","id":10879240,"user":{"login":"meshok0","id":2921304,"avatar_url":"https://gravatar.com/avatar/e4a6a08fbaf487545c93c527fa733a30?d=https%3a%2f%2fidenticons.github.com%2fae77ae1f1d404cbb63f83496390e6af6.png&r=x","gravatar_id":"e4a6a08fbaf487545c93c527fa733a30","url":"https://api.github.com/users/meshok0","html_url":"https://github.com/meshok0","followers_url":"https://api.github.com/users/meshok0/followers","following_url":"https://api.github.com/users/meshok0/following{/other_user}","gists_url":"https://api.github.com/users/meshok0/gists{/gist_id}","starred_url":"https://api.github.com/users/meshok0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/meshok0/subscriptions","organizations_url":"https://api.github.com/users/meshok0/orgs","repos_url":"https://api.github.com/users/meshok0/repos","events_url":"https://api.github.com/users/meshok0/events{/privacy}","received_events_url":"https://api.github.com/users/meshok0/received_events","type":"user","site_admin":false},"created_at":"2012-11-30t05:41:21z","updated_at":"2012-11-30t05:41:21z","body":"mysql> show columns from oc_ldap_user_mapping;\n+----------------+--------------+------+-----+---------+-------+\n| field          | type         | null | key | default | extra |\n+----------------+--------------+------+-----+---------+-------+\n| ldap_dn        | varchar(255) | no   | pri |         |       |\n| owncloud_name  | varchar(255) | no   | uni |         |       |\n| directory_uuid | varchar(255) | no   |     |         |       |\n+----------------+--------------+------+-----+---------+-------+\n3 rows in set (0.02 sec)\n\n\nmysql> select * from oc_ldap_user_mapping where \nowncloud_name='s.jaushev' or owncloud_name='user1';\n+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------+----------------+\n| ldap_dn | owncloud_name | directory_uuid |\n+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------+----------------+\n| cn=\\5cd1\\5c8f\\5cd1\\5c83\\5cd1\\5c88\\5cd0\\5cb5\\5cd0\\5cb2 \n\\5cd1\\5c81\\5cd0\\5cb5\\5cd1\\5c80\\5cd0\\5cb3\\5cd0\\5cb5\\5cd0\\5cb9 \n\\5cd0\\5cbd\\5cd0\\5cb8\\5cd0\\5cba\\5cd0\\5cbe\\5cd0\\5cbb\\5cd0\\5cb0\\5cd0\\5cbd\\5cd0\\5cb2\\5cd0\\5cb8\\5cd1\\5c87,ou=\\5cd0\\5cbd\\5cd0\\5cb0 \n\\5cd1\\5c83\\5cd0 | s.jaushev     |                |\n| cn=user1,cn=users,dc=ukon,dc=local | user1         |                |\n+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------+----------------+\n2 rows in set (0.00 sec)\n\n\nmaybe problem with cyrillic in cn?"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/10885802","html_url":"https://github.com/owncloud/core/issues/631#issuecomment-10885802","issue_url":"https://api.github.com/repos/owncloud/core/issues/631","id":10885802,"user":{"login":"blizzz","id":2184312,"avatar_url":"https://gravatar.com/avatar/1898b25a9cb3aa1a0f0febd1359910b9?d=https%3a%2f%2fidenticons.github.com%2fca03acec6deadf508b75eb0cf9ba036c.png&r=x","gravatar_id":"1898b25a9cb3aa1a0f0febd1359910b9","url":"https://api.github.com/users/blizzz","html_url":"https://github.com/blizzz","followers_url":"https://api.github.com/users/blizzz/followers","following_url":"https://api.github.com/users/blizzz/following{/other_user}","gists_url":"https://api.github.com/users/blizzz/gists{/gist_id}","starred_url":"https://api.github.com/users/blizzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blizzz/subscriptions","organizations_url":"https://api.github.com/users/blizzz/orgs","repos_url":"https://api.github.com/users/blizzz/repos","events_url":"https://api.github.com/users/blizzz/events{/privacy}","received_events_url":"https://api.github.com/users/blizzz/received_events","type":"user","site_admin":false},"created_at":"2012-11-30t11:13:59z","updated_at":"2012-11-30t11:13:59z","body":"i have an idea what causes it. ldap_explode_dn does not seem only to escape the characters as stated in a rfc, but everything else that's not ascii, too. it's not documented on php.net, however *sigh*"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/10887251","html_url":"https://github.com/owncloud/core/issues/631#issuecomment-10887251","issue_url":"https://api.github.com/repos/owncloud/core/issues/631","id":10887251,"user":{"login":"akam-it","id":1487709,"avatar_url":"https://gravatar.com/avatar/576274712c8d804f6c33ef4cbcb7d4e7?d=https%3a%2f%2fidenticons.github.com%2f44052f56f9a714f0d3d674dc7b1be5a6.png&r=x","gravatar_id":"576274712c8d804f6c33ef4cbcb7d4e7","url":"https://api.github.com/users/akam-it","html_url":"https://github.com/akam-it","followers_url":"https://api.github.com/users/akam-it/followers","following_url":"https://api.github.com/users/akam-it/following{/other_user}","gists_url":"https://api.github.com/users/akam-it/gists{/gist_id}","starred_url":"https://api.github.com/users/akam-it/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/akam-it/subscriptions","organizations_url":"https://api.github.com/users/akam-it/orgs","repos_url":"https://api.github.com/users/akam-it/repos","events_url":"https://api.github.com/users/akam-it/events{/privacy}","received_events_url":"https://api.github.com/users/akam-it/received_events","type":"user","site_admin":false},"created_at":"2012-11-30t12:18:52z","updated_at":"2012-11-30t12:18:52z","body":"i have the same problem :(\r\nis it mean what we shouldn't use ldap backend?"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/10899089","html_url":"https://github.com/owncloud/core/issues/631#issuecomment-10899089","issue_url":"https://api.github.com/repos/owncloud/core/issues/631","id":10899089,"user":{"login":"blizzz","id":2184312,"avatar_url":"https://gravatar.com/avatar/1898b25a9cb3aa1a0f0febd1359910b9?d=https%3a%2f%2fidenticons.github.com%2fca03acec6deadf508b75eb0cf9ba036c.png&r=x","gravatar_id":"1898b25a9cb3aa1a0f0febd1359910b9","url":"https://api.github.com/users/blizzz","html_url":"https://github.com/blizzz","followers_url":"https://api.github.com/users/blizzz/followers","following_url":"https://api.github.com/users/blizzz/following{/other_user}","gists_url":"https://api.github.com/users/blizzz/gists{/gist_id}","starred_url":"https://api.github.com/users/blizzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blizzz/subscriptions","organizations_url":"https://api.github.com/users/blizzz/orgs","repos_url":"https://api.github.com/users/blizzz/repos","events_url":"https://api.github.com/users/blizzz/events{/privacy}","received_events_url":"https://api.github.com/users/blizzz/received_events","type":"user","site_admin":false},"created_at":"2012-11-30t18:34:38z","updated_at":"2012-11-30t18:34:38z","body":"akam-it, also using ad, right?\r\ni try to fix it asap."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/10900524","html_url":"https://github.com/owncloud/core/issues/631#issuecomment-10900524","issue_url":"https://api.github.com/repos/owncloud/core/issues/631","id":10900524,"user":{"login":"akam-it","id":1487709,"avatar_url":"https://gravatar.com/avatar/576274712c8d804f6c33ef4cbcb7d4e7?d=https%3a%2f%2fidenticons.github.com%2f44052f56f9a714f0d3d674dc7b1be5a6.png&r=x","gravatar_id":"576274712c8d804f6c33ef4cbcb7d4e7","url":"https://api.github.com/users/akam-it","html_url":"https://github.com/akam-it","followers_url":"https://api.github.com/users/akam-it/followers","following_url":"https://api.github.com/users/akam-it/following{/other_user}","gists_url":"https://api.github.com/users/akam-it/gists{/gist_id}","starred_url":"https://api.github.com/users/akam-it/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/akam-it/subscriptions","organizations_url":"https://api.github.com/users/akam-it/orgs","repos_url":"https://api.github.com/users/akam-it/repos","events_url":"https://api.github.com/users/akam-it/events{/privacy}","received_events_url":"https://api.github.com/users/akam-it/received_events","type":"user","site_admin":false},"created_at":"2012-11-30t19:16:21z","updated_at":"2012-11-30t19:16:21z","body":"yep, ad with cyrillic cn's)"},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/10908528","html_url":"https://github.com/owncloud/core/issues/631#issuecomment-10908528","issue_url":"https://api.github.com/repos/owncloud/core/issues/631","id":10908528,"user":{"login":"blizzz","id":2184312,"avatar_url":"https://gravatar.com/avatar/1898b25a9cb3aa1a0f0febd1359910b9?d=https%3a%2f%2fidenticons.github.com%2fca03acec6deadf508b75eb0cf9ba036c.png&r=x","gravatar_id":"1898b25a9cb3aa1a0f0febd1359910b9","url":"https://api.github.com/users/blizzz","html_url":"https://github.com/blizzz","followers_url":"https://api.github.com/users/blizzz/followers","following_url":"https://api.github.com/users/blizzz/following{/other_user}","gists_url":"https://api.github.com/users/blizzz/gists{/gist_id}","starred_url":"https://api.github.com/users/blizzz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blizzz/subscriptions","organizations_url":"https://api.github.com/users/blizzz/orgs","repos_url":"https://api.github.com/users/blizzz/repos","events_url":"https://api.github.com/users/blizzz/events{/privacy}","received_events_url":"https://api.github.com/users/blizzz/received_events","type":"user","site_admin":false},"created_at":"2012-11-30t23:34:31z","updated_at":"2012-11-30t23:34:31z","body":"@akam-it and @meshok0 can you try whether the changes in the pull request https://github.com/owncloud/core/pull/662 fix it for you? i tried it with characters like , + = < > in the dn as well as with cyrillic ones. successfully on both ad and openldap. please assure me :d\r\n\r\nit's also a good idead to remove the garbaged lines from oc_ldap_user_mapping to free the username."},{"url":"https://api.github.com/repos/owncloud/core/issues/comments/10914313","html_url":"https://github.com/owncloud/core/issues/631#issuecomment-10914313","issue_url":"https://api.github.com/repos/owncloud/core/issues/631","id":10914313,"user":{"login":"akam-it","id":1487709,"avatar_url":"https://gravatar.com/avatar/576274712c8d804f6c33ef4cbcb7d4e7?d=https%3a%2f%2fidenticons.github.com%2f44052f56f9a714f0d3d674dc7b1be5a6.png&r=x","gravatar_id":"576274712c8d804f6c33ef4cbcb7d4e7","url":"https://api.github.com/users/akam-it","html_url":"https://github.com/akam-it","followers_url":"https://api.github.com/users/akam-it/followers","following_url":"https://api.github.com/users/akam-it/following{/other_user}","gists_url":"https://api.github.com/users/akam-it/gists{/gist_id}","starred_url":"https://api.github.com/users/akam-it/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/akam-it/subscriptions","organizations_url":"https://api.github.com/users/akam-it/orgs","repos_url":"https://api.github.com/users/akam-it/repos","events_url":"https://api.github.com/users/akam-it/events{/privacy}","received_events_url":"https://api.github.com/users/akam-it/received_events","type":"user","site_admin":false},"created_at":"2012-12-01t06:55:56z","updated_at":"2012-12-01t06:55:56z","body":"this fix the issue. thank you blizzz)"}]